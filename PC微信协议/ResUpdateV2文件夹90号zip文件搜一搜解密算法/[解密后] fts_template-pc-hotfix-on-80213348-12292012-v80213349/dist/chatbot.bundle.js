"use strict";(self.webpackChunkweixin_search=self.webpackChunkweixin_search||[]).push([["chatbot"],{237168:function(e,t,o){var i=o(645234),n=o(261566),a=o(551900),r=o(531820),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,null,null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},76457:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="77746729"}},174077:function(e,t,o){var i=o(306299),n=o(619775),a=o(551900),r=o(960493),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"4287787e",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},301830:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="c2e1e05a"}},532721:function(e,t,o){var i=o(786513),n=o(114340),a=o(551900),r=o(735759),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"2c36b7ed",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},744946:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="4f1a2176"}},321187:function(e,t,o){var i=o(916763),n=o(551779),a=o(551900),r=o(82304),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"55ad41a3",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},991083:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="d2d9af0e"}},816579:function(e,t,o){var i=o(257146),n=o(501548),a=o(551900),r=o(848014),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"5c7e3471",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},502454:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="cbc22d0b"}},489518:function(e,t,o){var i=o(202098),n=o(774871),a=o(551900),r=o(528223),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"2788bcf0",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},576420:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="26bad5f6"}},414152:function(e,t,o){var i=o(969572),n=o(485465),a=o(551900),r=o(308587),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"38ceecf3",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},126149:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="a2c00c14"}},753260:function(e,t,o){var i=o(70610),n=o(391483),a=o(551900),r=o(352989),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"8dc676de",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},956015:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="49a5d09a"}},56110:function(e,t,o){var i=o(511485),n=o(698386),a=o(551900),r=o(110497),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"ee1d08cc",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},473608:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="00fcf99b"}},974275:function(e,t,o){var i=o(33430),n=o(869706),a=o(551900),r=o(29048),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"3f42c60c",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},873918:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="c1518d41"}},472114:function(e,t,o){var i=o(336052),n=o(153499),a=o(551900),r=o(69479),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"16bc1fdc",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},132714:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="c1101504"}},609258:function(e,t,o){var i=o(771245),n=o(922869),a=o(551900),r=o(938127),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"47eb17a4",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},551349:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="a2e3146a"}},532452:function(e,t,o){var i=o(641190),n=o(331184),a=o(551900),r=o(428829),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"5fe6f133",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},808278:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="b329f28e"}},11689:function(e,t,o){var i=o(404455),n=o(455293),a=o(551900),r=o(259955),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"d2875652",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},470485:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="bbbd4254"}},697932:function(e,t,o){var i=o(11893),n=o(698523),a=o(551900),r=o(921883),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"14cbee48",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},130124:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="aceb7a39"}},760597:function(e,t,o){var i=o(263322),n=o(427456),a=o(551900),r=o(51568),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"a16e16e2",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},646287:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="7ac24fce"}},430077:function(e,t,o){var i=o(565270),n=o(862051),a=o(551900),r=o(848689),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"34d0d948",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},850956:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="23607066"}},607115:function(e,t,o){var i=o(936609),n=o(677314),a=o(551900),r=o(96142),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"f8c81b8a",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},629611:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="b33371b7"}},525770:function(e,t,o){var i=o(567914),n=o(874920),a=o(551900),r=o(54928),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"7b4080b2",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},849507:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="4a620418"}},973561:function(e,t,o){var i=o(609238),n=o(164874),a=o(551900),r=o(741932),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"2185fb4b",null);"function"==typeof r.Z&&(0,r.Z)(s),t.Z=s.exports},268718:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="aa16f4bd"}},616302:function(e,t,o){o.r(t);var i=o(296805),n=o(104085),a=o(551900),r=o(425651),s=(0,a.Z)(n.Z,i.s,i.x,!1,null,"d3a3e6ac",null);"function"==typeof r.Z&&(0,r.Z)(s),t.default=s.exports},480808:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e){e.options.__wxs_id="47e9123f"}},531820:function(e,t,o){var i=o(76457);t.Z=i.Z},960493:function(e,t,o){var i=o(301830);t.Z=i.Z},735759:function(e,t,o){var i=o(744946);t.Z=i.Z},82304:function(e,t,o){var i=o(991083);t.Z=i.Z},848014:function(e,t,o){var i=o(502454);t.Z=i.Z},528223:function(e,t,o){var i=o(576420);t.Z=i.Z},308587:function(e,t,o){var i=o(126149);t.Z=i.Z},352989:function(e,t,o){var i=o(956015);t.Z=i.Z},110497:function(e,t,o){var i=o(473608);t.Z=i.Z},29048:function(e,t,o){var i=o(873918);t.Z=i.Z},69479:function(e,t,o){var i=o(132714);t.Z=i.Z},938127:function(e,t,o){var i=o(551349);t.Z=i.Z},428829:function(e,t,o){var i=o(808278);t.Z=i.Z},259955:function(e,t,o){var i=o(470485);t.Z=i.Z},921883:function(e,t,o){var i=o(130124);t.Z=i.Z},51568:function(e,t,o){var i=o(646287);t.Z=i.Z},848689:function(e,t,o){var i=o(850956);t.Z=i.Z},96142:function(e,t,o){var i=o(629611);t.Z=i.Z},54928:function(e,t,o){var i=o(849507);t.Z=i.Z},741932:function(e,t,o){var i=o(268718);t.Z=i.Z},425651:function(e,t,o){var i=o(480808);t.Z=i.Z},261566:function(e,t,o){var i=o(90417);t.Z=i.Z},619775:function(e,t,o){var i=o(826);t.Z=i.Z},114340:function(e,t,o){var i=o(824282);t.Z=i.Z},551779:function(e,t,o){var i=o(724272);t.Z=i.Z},501548:function(e,t,o){var i=o(630984);t.Z=i.Z},774871:function(e,t,o){var i=o(390081);t.Z=i.Z},485465:function(e,t,o){var i=o(810352);t.Z=i.Z},391483:function(e,t,o){var i=o(354988);t.Z=i.Z},698386:function(e,t,o){var i=o(886233);t.Z=i.Z},869706:function(e,t,o){var i=o(53343);t.Z=i.Z},153499:function(e,t,o){var i=o(585951);t.Z=i.Z},922869:function(e,t,o){var i=o(898751);t.Z=i.Z},331184:function(e,t,o){var i=o(177147);t.Z=i.Z},455293:function(e,t,o){var i=o(215063);t.Z=i.Z},698523:function(e,t,o){var i=o(85579);t.Z=i.Z},427456:function(e,t,o){var i=o(992516);t.Z=i.Z},862051:function(e,t,o){var i=o(977346);t.Z=i.Z},677314:function(e,t,o){var i=o(855011);t.Z=i.Z},874920:function(e,t,o){var i=o(829982);t.Z=i.Z},164874:function(e,t,o){var i=o(956757);t.Z=i.Z},104085:function(e,t,o){var i=o(442858);t.Z=i.Z},645234:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"visible-expose-block",attrs:{"data-fcn-chatbot-visible-expose-block":"","data-fr-145a5c79a":""}},[this._t("default")],2)},n=[]},306299:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){return this.$createElement,this._self._c,this._m(0)},n=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ai-generate-id",attrs:{"data-fcn-AIGenerateID":"","data-fr-1d6781ac6":""}},[t("span",[this._v("内容由AI生成")])])}]},786513:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{"data-fcn-AppendChatTextarea":"","data-fr-101326b5e":""}},[o("chat-textarea-pop",{ref:"chatTextareaPop",attrs:{placeholder:e.placeholder,"is-new-chatbot":e.isNewChatbot,"data-fc-1251b0000":""},on:{"height:change":function(t){return e.$emit("height:change",t)}}})],1)},n=[]},916763:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"textarea-wrapper",attrs:{"data-fcn-AutoHeightTextArea":"","data-fr-15b4b7a95":""}},[o("textarea",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"},{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"textarea",staticClass:"auto-height-textarea",class:{"is-textarea-disabled":e.isTextareaDisabled,"textarea-mask":e.isNewChatbot&&e.showMask&&e.message,"is-home":e.isHome},style:e.textareaStyle,attrs:{placeholder:e.fakePlaceholder,type:"search",disabled:e.disabled||e.isTextareaDisabled,maxlength:e.MAX_LENGTH},domProps:{value:e.message},on:{input:[function(t){if(!t.target.composing)e.message=t.target.value},e.adjustHeight],click:e.handleFocus,focus:e.onFocus,blur:e.onBlur,touchstart:function(t){return t.stopPropagation(),e.$emit("touchstart")},touchmove:function(t){return t.stopPropagation(),e.$emit("touchmove")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onPressEnter(t)},paste:e.onPaste}}),e.needFakeTextarea?o("div",{ref:"fakeTextarea",staticClass:"auto-height-textarea auto-height-textarea-fake",class:{"is-textarea-disabled":e.isTextareaDisabled,"textarea-mask":e.isNewChatbot&&e.showMask&&e.message,"auto-height-textarea-fake--placeholder":!e.message,"is-home":e.isHome},on:{click:function(t){return t.stopPropagation(),e.onClickFake(t)}}},[e._v(e._s(e.message||e.placeholder))]):e._e(),o("voice-dialog",{ref:"voiceDialog",attrs:{"is-new-chatbot":e.isNewChatbot,"is-home":e.isHome,"data-fc-10e23d83c":""},on:{"voice-dialog-height-change":e.onVoiceDialogHeightChange}})],1)},n=[]},257146:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.canShowHistory?o("div",{staticClass:"chat-history",attrs:{"data-fcn-ChatHistory":"","data-fr-1021bcc87":""}},[o("div",[o("div",{staticClass:"chat-history__header"},[o("div",{directives:[{name:"active",rawName:"v-active",value:e.os.mobile,expression:"os.mobile"}],staticClass:"history-header__more active__mask",attrs:{"data-new-teach-report-id":e.moreReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapMore(t)}}},[o("span",[e._v("最近在问")]),e.os.mobile?o("ui-arrow",{attrs:{size:20,direction:"right",align:"flex","data-fc-1415dc48a":""}}):e._e()],1),o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-header__action-icon active__mask",attrs:{role:"button","aria-label":"删除记录","data-new-teach-report-id":e.editReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapEditHistory(t)}}},[o("svg-icon",{staticClass:"delete-icon",attrs:{name:"trashcan","data-fc-1415dc48b":""}})],1)]),o("div",{staticClass:"chat-history__body"},e._l(e.conversationListToShow,function(t,i){return o("conversation-history",{key:t.conversationId||i,attrs:{conversation:t,limit:e.getLimit(i),"data-fc-1415dc48c":""},on:{"tap-item":e.scrollResultPageToTargetIndex}})}),1)])]):e._e()},n=[]},202098:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chat-textarea__inner",class:{"chat-textarea__inner-noBg":!e.isShowOperator},attrs:{"data-fcn-ChatInput":"","data-fr-1fc366106":""}},[o("div",{staticClass:"textarea-wrap"},[o("auto-height-text-area",{ref:"textarea",attrs:{"is-show":e.isShow,placeholder:e.placeholder,disabled:e.disabled||!e.isEditable,"is-new-chatbot":e.isNewChatbot,"is-home":e.isHome,"data-fc-18a95bf58":""},on:{"message:change":e.onMessageChange,send:e.sendMessage}})],1),e.uploadFileList.length?o("div",{staticClass:"media-preview-wrapper",class:{"bottom-split":!e.isShowOperator,"media-preview-wrapper--hidden":!e.isShowOperator&&e.isHome}},[o("chat-upload-media-preview",{staticClass:"is-chatbot",attrs:{"show-animate":"","upload-file-list":e.uploadFileList,"doc-info":"1|64|"+encodeURIComponent("搜索框"),"data-fc-18a95bf56":""}})],1):e._e(),o("transition-animate",{attrs:{direction:"bottom","data-fc-18a95bf54":""}},[o("input-button-area",{directives:[{name:"show",rawName:"v-show",value:e.isShowOperator,expression:"isShowOperator"}],attrs:{"is-new-chatbot":e.isNewChatbot,query:e.message,"data-fc-18a95bf52":""},on:{send:function(t){return e.sendMessage({type:e.SEND_METHOD.text})},"click:model":e.onClickModel},nativeOn:{click:function(t){return e.onClickButtonArea(t)}}})],1)],1)},n=[]},969572:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-button",{staticClass:"chat-textarea__btn_send",style:{"font-size":e.FontSize},attrs:{type:1,mini:"",disabled:e.disabled,"data-new-teach-report-id":""+e.getSearchReportId(),"data-fc-1bc2e144c":"","data-fcn-ChatSendButton":"","data-fr-115bd3137":""},nativeOn:{click:function(t){return t.stopPropagation(),e.tapSearch(t)},mousedown:function(e){e.preventDefault()}}},[o("div",{staticClass:"chat-textarea__btn_send-first-char"},[e._v("问 ")]),o("div",[e._v("AI")])])},n=[]},70610:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.canShow?o("div",{attrs:{"data-fcn-ChatTextarea":"","data-fr-141ca88d7":""}},[e.isFake?o("append-chat-textarea",{ref:"appendChatTextarea",class:{"append-chat-textarea--animate":e.showFakeInAnimate},attrs:{placeholder:e.placeholder,"is-new-chatbot":e.isNewChatbot,"data-fc-110f2db88":""},on:{"height:change":function(t){return e.$emit("height:change",t)}}}):o("div",{staticClass:"chat-textarea"},[o("chat-input",{ref:"chatInput",attrs:{placeholder:e.placeholder,disabled:!e.canFocus,"is-new-chatbot":e.isNewChatbot,"is-home":e.isHome,"data-fc-110f2db8c":""}}),o("transition-animate",{attrs:{direction:"bottom","data-fc-110f2db8a":""}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isVoiceMode&&!e.isNewChatbot,expression:"!isVoiceMode && !isNewChatbot"}],staticClass:"chat-textarea-border"})])],1)],1):e._e()},n=[]},511485:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.initShow?o("div",{attrs:{"data-fcn-ChatTextareaPop":"","data-fr-12a6e79aa":""}},[e.os.mobile&&e.isShow?o("div",{staticClass:"pop-mask",on:{click:e.onClickMask,touchmove:e.onTouchMask}}):e._e(),e.isNewChatbot?o("div",{staticClass:"append-chat chatbot2",class:{"append-chat-noBg":e.isNoBg}},[o("opacity-animate-show",{directives:[{name:"show",rawName:"v-show",value:e.os.mobile&&e.isShow,expression:"os.mobile && isShow"}],attrs:{"data-fc-148b6bd4b":""}},[o("div",{staticClass:"append-chat__top-gradient"})]),o("div",{staticClass:"append-chat__body",class:{"append-chat-voiceFold":e.isVoiceFoldMode},style:{marginBottom:e.voiceFoldMarginBottom}},[o("div",{class:{"append-chat__textarea--hide":!e.isCompleteShow||e.isTextareaPlaceholder}},[o("auto-height-text-area",{ref:"textarea",attrs:{"is-new-chatbot":e.isNewChatbot,placeholder:e.placeholder,"data-fc-148b6bd4c":""},on:{blur:e.onTextAreaBlur,"message:change":e.onMessageChange,send:e.onSend,"voice-dialog-height-change":e.onVoiceDialogHeightChange}})],1),e.isCompleteShow||e.isVoiceFoldMode?e._e():o("div",{directives:[{name:"resize",rawName:"v-resize.width",value:e.fakeTextWidth,expression:"fakeTextWidth",modifiers:{width:!0}}],staticClass:"append-chat__spacer",on:{click:function(t){return t.stopPropagation(),e.show(t)}}},[o("div",{staticClass:"fake-text"},[e._v(e._s(e.fakeMessageToShow))])]),e.canShowFileListArea?o("div",{directives:[{name:"resize",rawName:"v-resize.height",value:e.fileAreaHeight,expression:"fileAreaHeight",modifiers:{height:!0}}],staticClass:"append-chat__picture-wrap"},[o("chat-upload-media-preview",{staticClass:"is-chatbot",attrs:{"show-animate":"","upload-file-list":e.uploadFileList,"is-textarea-pop":"","is-files-scroll":"","doc-info":"1|64|"+encodeURIComponent("搜索框"),"data-fc-148b6bd4d":""}})],1):e._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isVoiceContinuesMode,expression:"!isVoiceContinuesMode"},{name:"resize",rawName:"v-resize.height",value:e.buttonAreaHeight,expression:"buttonAreaHeight",modifiers:{height:!0}}],staticClass:"append-chat__footer-button-list"},[o("div",{staticClass:"append-chat__footer-left"},[e.modelChoose?o("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"chat-textarea__btn_model active__mask",style:{"font-size":e.modelFontSize+"px"},attrs:{"data-new-teach-report-id":e.modelNameReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickModel(t)}}},[o("div",{staticClass:"chat-textarea__btn_model-name"},[e._v(e._s(e.modelChoose.title))]),o("ui-arrow",{attrs:{direction:"down",align:"flex","data-fc-148b6bd4e":""}})],1):e._e(),e.isVoiceFoldMode?e._e():o("div",{staticClass:"spacer"}),e.isVoiceFoldMode?e._e():o("div",{on:{"!click":function(t){return e.onTapTools(t)}}},[o("chat-tool-btns",{attrs:{"doc-info":"1|64|"+encodeURIComponent("搜索框"),"is-cancel-auto-focus":"","icon-size":e.iconSize,"data-fc-148b6bd4f":""}})],1)]),e.isVoiceFoldMode?e._e():o("div",{staticClass:"append-chat__footer-right"},[e.enable?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"chat-textarea__btn_voice active__mask",attrs:{"data-new-teach-report-id":""+e.getVoiceReportId(),"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickVoice(t)}}},[o("ui-image",{attrs:{width:e.iconSize,height:e.iconSize,url:"https://res.wx.qq.com/t/components/icons/base/mike_on_medium.svg","data-fc-148b6bd50":""}})],1):e._e(),o("chat-send-button",{attrs:{"data-fc-148b6bd51":""},on:{tap:function(t){return e.onSend({type:e.SEND_METHOD.text})}}})],1)])]),o("div",{style:e.holderStyle})],1):o("div",{staticClass:"append-chat js--append-chat",attrs:{"chatbot-visible-mask":"bottom"}},[o("opacity-animate-show",{directives:[{name:"show",rawName:"v-show",value:e.os.mobile&&e.isShow,expression:"os.mobile && isShow"}],attrs:{"data-fc-12360bbc7":""}},[o("div",{staticClass:"append-chat__top-gradient"})]),o("div",{staticClass:"append-chat__body"},[o("div",{staticClass:"append-chat__textarea",class:{"append-chat__textarea--hide":!e.isCompleteShow||e.isTextareaPlaceholder}},[o("auto-height-text-area",{ref:"textarea",attrs:{placeholder:e.placeholder,"data-fc-12360bbc8":""},on:{blur:e.onTextAreaBlur,"message:change":e.onMessageChange,send:e.onSend,"voice-dialog-height-change":e.onVoiceDialogHeightChange}})],1),e.isTextareaPlaceholder?[o("div",{staticClass:"voice-dialog__text"},[e._v(e._s(e.fakePlaceholder))]),o("div",{style:e.spacerStyle})]:e._e(),e.isCompleteShow?e._e():o("div",{staticClass:"append-chat__animate-spacer",style:e.spacerStyle}),o("opacity-animate-show",{directives:[{name:"show",rawName:"v-show",value:e.isCompleteShow&&!e.isVoiceContinuesMode,expression:"isCompleteShow && !isVoiceContinuesMode"}],attrs:{"data-fc-12360bbc9":""}},[o("div",{directives:[{name:"resize",rawName:"v-resize.height",value:e.buttonAreaHeight,expression:"buttonAreaHeight",modifiers:{height:!0}}],ref:"actionsRef",on:{mousedown:function(e){e.preventDefault()}}},[e.uploadFileList.length?o("div",{staticClass:"append-chat__picture-wrap"},[o("chat-upload-media-preview",{staticClass:"is-chatbot",attrs:{"show-animate":"","upload-file-list":e.uploadFileList,"is-textarea-pop":"","is-files-scroll":"","doc-info":"1|64|"+encodeURIComponent("搜索框"),"data-fc-12360bbca":""}})],1):e._e(),e.os.mobile?o("div",{staticClass:"append-chat__footer-button-list"},[e.modelChoose?o("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"chat-textarea__btn_model active__mask",attrs:{"data-new-teach-report-id":e.modelNameReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickModel(t)}}},[o("div",{staticClass:"chat-textarea__btn_model-name"},[e._v(e._s(e.modelChoose.title))]),o("ui-arrow",{attrs:{direction:"down",align:"flex","data-fc-12360bbcb":""}})],1):e._e()]):e._e()])]),e.isCompleteShow||e.isVoiceFoldMode?e._e():o("div",{staticClass:"fake-text append-chat__animate-holder fake-text--hint",class:{"append-chat__animate-holder--inactive":e.isCompleteHide},style:{width:e.fakeTextWidth+"px"}},[e._v("\n          "+e._s(e.fakeMessageToShow)+"\n        ")]),e.isVoiceFoldMode?e._e():o("div",{staticClass:"append-chat__footer",class:{"append-chat__footer--transparent":e.isVoiceContinuesMode},on:{mousedown:function(e){e.preventDefault()}}},[o("div",{staticClass:"append-chat__footer-send-wrap"},[e.os.pc?o("div",{staticClass:"append-chat__footer-button-list"},[e.modelChoose?o("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"chat-textarea__btn_model active__mask",attrs:{"data-new-teach-report-id":e.modelNameReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickModel(t)}}},[o("div",{staticClass:"chat-textarea__btn_model-name"},[e._v(e._s(e.modelChoose.title))]),o("ui-arrow",{attrs:{direction:"down",align:"flex","data-fc-12360bbcc":""}})],1):e._e()]):e._e(),o("opacity-animate-show",{directives:[{name:"show",rawName:"v-show",value:e.isCompleteShow&&!e.isVoiceContinuesMode,expression:"isCompleteShow && !isVoiceContinuesMode"}],attrs:{"data-fc-12360bbcd":""}},[o("div",{on:{"!click":function(t){return e.onTapTools(t)}}},[o("chat-tool-btns",{attrs:{"doc-info":"1|64|"+encodeURIComponent("搜索框"),"is-cancel-auto-focus":"","data-fc-12360bbce":""}})],1)]),o("div",{directives:[{name:"resize",rawName:"v-resize.width",value:e.fakeTextWidth,expression:"fakeTextWidth",modifiers:{width:!0}}],staticClass:"append-chat__spacer",on:{click:function(t){return t.stopPropagation(),e.show(t)}}},[o("div",{staticClass:"fake-text"},[e._v(e._s(e.fakeMessageToShow))])]),e.enable?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"chat-textarea__btn_voice active__mask",attrs:{"data-new-teach-report-id":""+e.getVoiceReportId(),"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickVoice(t)}}},[o("ui-image",{attrs:{width:28,height:28,url:"https://res.wx.qq.com/t/components/icons/base/mike_on_medium.svg","data-fc-12360bbcf":""}})],1):e._e(),o("chat-send-button",{ref:"chatSendButtonRef",attrs:{"data-fc-148b6bd49":""},on:{tap:function(t){return e.onSend({type:e.SEND_METHOD.text})}}})],1)]),e.os.pc?o("transition",{attrs:{name:"showMask","data-fc-148b6bd4a":""}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showDropMask,expression:"showDropMask"}],staticClass:"append-chat__file-mask"},[o("div",[o("p",[e._v("松开即可上传")]),o("small",[e._v("最多上传"+e._s(e.AcceptFileCount.File)+"个文件或"+e._s(e.AcceptFileCount.Image)+"张图片，每个"+e._s(e.AcceptFileSize.File)+"MB以内")])])])]):e._e()],2),o("div",{style:e.holderStyle})],1)]):e._e()},n=[]},33430:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{"data-fcn-CustomNavBar":"","data-fr-1ac9bd534":""}},[o("div",{ref:"customNavBarRef",staticClass:"custom-nav-bar",style:{position:e.isTakeingScreenshot&&e.isAndroid?"absolute":"fixed",paddingTop:e.topAreaHeight+15+"px",opacity:e.isIos?e.isIosCanShowCustomNavBar?1:0:1},attrs:{"chatbot-visible-mask":""}},[o("div",{staticClass:"custom-nav-bar-title",style:e.titleStyle},[e._v(e._s(e.title))]),o("div",{directives:[{name:"resize",rawName:"v-resize.width",value:e.leftWidth,expression:"leftWidth",modifiers:{width:!0}}],staticClass:"custom-nav-bar-button-list",class:{"custom-nav-bar-button-list--hide":e.isTakeingScreenshot}},[o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"custom-nav-bar-button--item active__opacity",attrs:{"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapClose(t)}}},[o("ui-image",{attrs:{size:24,url:"https://res.wx.qq.com/t/components/icons/base/arrow_left_regular.svg","data-fc-1e6ded0ea":""}})],1)]),o("div",{staticClass:"custom-nav-bar-spacer",attrs:{"aria-hidden":"true"},on:{click:e.onClickTitle}},[e._v(e._s(e.title))]),o("div",{directives:[{name:"resize",rawName:"v-resize.width",value:e.rightWidth,expression:"rightWidth",modifiers:{width:!0}}],staticClass:"custom-nav-bar-button-list",class:{"custom-nav-bar-button-list--hide":e.isTakeingScreenshot}},[o("portal-target",{attrs:{name:"custom-nav-bar","data-fc-1e6ded0e8":""}}),e.canShowNewConversation?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"custom-nav-bar-button--item active__opacity",attrs:{"data-new-teach-report-id":e.newConversationReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapNewConversation(t)}}},[o("ui-image",{attrs:{size:24,url:"https://res.wx.qq.com/t/components/icons/base/plus_regular.svg","data-fc-1e6ded0e6":""}})],1):e._e(),e.canShowHistory?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"custom-nav-bar-button--item active__opacity",attrs:{"data-new-teach-report-id":e.historyReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapHistory(t)}}},[o("ui-image",{attrs:{size:24,url:"https://search.wxqcloud.qq.com/t/fed_upload/b3c461b320dd0715b6090e450d1d303c/descending_order.svg","data-fc-1e6ded0e4":""}})],1):e._e(),e.canShowMore?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"custom-nav-bar-button--item active__opacity",attrs:{"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onTapMore(t)}}},[o("ui-image",{attrs:{size:24,url:"https://res.wx.qq.com/t/components/icons/base/dot_3_regular.svg","data-fc-1e6ded0e2":""}})],1):e._e()],1)]),o("div",{style:{position:"relative",width:"100%",height:e.customNavBarHeight+"px"}})])},n=[]},336052:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement,t=this._self._c||e;return this.canShow?t("div",{staticClass:"dr-background",style:this.containerStyle,attrs:{"data-fcn-DRBackground":"","data-fr-148d0e961":""}},[t("div",{staticClass:"dr-background__top"})]):this._e()},n=[]},771245:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement;return(this._self._c||e)("service-search-pop-form",{attrs:{show:this.showServiceSearchPopForm,data:this.serviceSearchPopForm,"parent-item-pos":this.serviceSearchPopFormParentItemPos,"data-fc-170c823a4":"","data-fcn-Dialog":"","data-fr-166bc222d":""}})},n=[]},641190:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fake-append-chat-input",class:{"is-invisible":this.isInvisible},attrs:{"data-fcn-FakeAppendChatInput":"","data-fr-1108eed2e":""}},[this.os.pc?t("auto-height-text-area",{attrs:{placeholder:this.placeholder,"is-show":"",disabled:"","data-fc-1014eb8c3":""}}):this._e(),t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticClass:"fake-append-chat-input__placeholder"},[this._v(this._s(this.placeholder))]),t("chat-send-button",{attrs:{disabled:"","data-fc-1014eb8c4":""}})],1)],1)},n=[]},404455:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"height-collapse",style:this.style,attrs:{"data-fcn-HeightCollapse":"","data-fr-16d8953d9":""}},[t("div",{staticClass:"height-collapse__content",style:this.innerStyle},[this._t("default")],2)])},n=[]},11893:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chatbot-home chatbot2",attrs:{"data-fcn-HomeTitle":"","data-fr-125af0964":""}},[t("div",{staticClass:"chatbot-home__title",style:{"margin-top":this.marginTop+"px"}},[t("span",{style:{"margin-right":this.titleGap+"px"}},[this._v("AI")]),t("span",[this._v("搜索")])])])},n=[]},263322:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"chat-textarea__exposure-block",attrs:{"data-fcn-InputButtonArea":"","data-fr-120fed8b4":""}},[e.isNewChatbot?[o("div",{staticClass:"chat-textarea__btn_left"},[e.modelChoose?o("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"chat-textarea__btn_model active__mask",style:{"font-size":e.modelFontSize+"px"},attrs:{"data-new-teach-report-id":e.modelNameReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickModel(t)}}},[o("div",{staticClass:"chat-textarea__btn_model-name"},[e._v(e._s(e.modelChoose.title))]),e.redDotIdToShow?o("model-red-dot",{attrs:{"data-fc-1024783fc":""}}):e._e(),o("ui-arrow",{attrs:{direction:"down",align:"flex",gap:"","data-fc-1024783fa":""}})],1):e._e(),o("div",{staticClass:"spacer"}),o("div",{staticClass:"chat-textarea__btn_actions"},[o("chat-tool-btns",{attrs:{"doc-info":"1|64|"+encodeURIComponent("搜索框"),"data-fc-1024783f8":""}})],1)]),o("div",{ref:"chatTextareaSendBtn",staticClass:"chat-textarea__btn"},[o("chat-send-button",{ref:"chatSendButtonRef",attrs:{"data-fc-1024783f6":""},on:{tap:e.sendMessage}})],1)]:[e.modelChoose?o("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"chat-textarea__btn_model active__mask",attrs:{"data-new-teach-report-id":e.modelNameReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickModel(t)}}},[o("div",{staticClass:"chat-textarea__btn_model-name"},[e._v(e._s(e.modelChoose.title))]),e.redDotIdToShow?o("model-red-dot",{attrs:{"data-fc-102478406":""}}):e._e(),o("ui-arrow",{attrs:{direction:"down",align:"flex",gap:"","data-fc-102478404":""}})],1):e._e(),o("div",{staticClass:"chat-textarea__btn"},[o("div",{staticClass:"chat-textarea__btn-left"},[o("chat-tool-btns",{attrs:{"doc-info":"1|64|"+encodeURIComponent("搜索框"),"data-fc-102478402":""}})],1),o("div",{staticClass:"spacer"}),e.enable?o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"chat-textarea__btn_voice active__mask",attrs:{"data-new-teach-report-id":""+e.getVoiceReportId(),"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.onClickVoice(t)}}},[o("ui-image",{attrs:{width:24,height:24,url:"https://res.wx.qq.com/t/components/icons/base/mike_on_medium.svg","data-fc-102478400":""}})],1):e._e(),o("chat-send-button",{ref:"chatSendButtonRef",attrs:{"data-fc-1024783fe":""},on:{tap:e.sendMessage}})],1)]],2)},n=[]},565270:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.title&&e.recommendList.length?o("exposure-block",{ref:"exposureBlock",staticClass:"ai-rmd",attrs:{attr:"data-new-teach-report-id","data-fc-113e00d2a":"","data-fcn-Recommend":"","data-fr-130442032":""},on:{expose:e.M_exposeReportFor26897}},[o("div",{staticClass:"ai-rmd__title"},[o("span",{staticClass:"ai-rmd__title__text"},[e._v(e._s(e.title))]),e.showRefresh?o("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"ai-rmd__title__refresh active__mask",attrs:{"data-new-teach-report-id":e.getBlockReportId(),"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.getAiSearchRecommendList(!0)}}},[o("span",{staticClass:"ai-rmd__title__refresh__text"},[e._v("换一换")]),o("ui-image",{staticClass:"ai-rmd__title__refresh__icon",class:e.refresh&&e.loading?["refresh-animate"]:[],attrs:{size:16,url:"https://res.wx.qq.com/t/components/icons/base/refresh_regular.svg","data-fc-113e00d2b":""}})],1):e._e()]),e._l(e.recommendList,function(t,i){return o("recommend-item",{key:t.query,staticClass:"ai-rmd__item",attrs:{"data-new-teach-report-id":e.getItemReportId(t,i),item:t,index:i,"data-fc-113e00d2c":""},on:{"click-item":e.onClickItem,"long-press-item":e.onLongPressItem}})})],2):e._e()},n=[]},936609:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}},{name:"long-press",rawName:"v-long-press"}],staticClass:"recommend-item active__absolute",attrs:{"data-cli":"","data-fcn-RecommendItem":"","data-fr-15632ce1a":""},on:{click:function(t){return t.stopPropagation(),e.onClickItem(t)},"long-press-start":e.onLongPressItem}},[o("div",{staticClass:"recommend-item__query"},[e._v(e._s(e.item.query))]),e.item.real_like_info||e.item.dateText||e.tags.length?o("div",{staticClass:"recommend-item__footer"},[o("friend-list-item",{staticClass:"recommend-item__footer__friend",attrs:{size:"small","friend-like-info":e.item.real_like_info,"data-fc-17026f557":""}}),e._l(e.tags,function(t){return o("ui-tag",e._b({key:t.title,staticClass:"recommend-item__footer__tag",attrs:{"data-fc-17026f558":""}},"ui-tag",t,!1))}),o("div",{staticClass:"recommend-item__footer__date"},[e._v(e._s(e.item.dateText))])],2):e._e()])},n=[]},567914:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{"data-fcn-TransitionAnimate":"","data-fr-12a7237f7":""}},[this.enabled?t("transition",{attrs:{name:this.transitionName,"enter-active-class":this.enterActiveClass,"leave-active-class":this.leaveActiveClass,"enter-class":this.enterClass,"leave-to-class":this.leaveToClass,"data-fc-123d4c71a":""}},[this._t("default")],2):[this._t("default")]],2)},n=[]},609238:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{"data-fcn-VoiceDialog":"","data-fr-135dac485":""}},[e.isShowMask?o("div",{staticClass:"pop-mask",on:{click:e.onClickMask,touchmove:e.onClickMask}}):e._e(),e.isShowNewVoice?o("div",{staticClass:"voice-dialog-btn-wrap"},[o("div",{staticClass:"voice-dialog-text"},[e._v("\n        "+e._s(e.tipText)+"\n      ")]),o("div",{staticClass:"voice-dialog-btn",class:{"is-will-cancel":e.isWillCancel},attrs:{"data-new-teach-report-id":e.voiceReportId},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchStart(t)},touchstart:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchStart(t)},touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchMove(t)},touchend:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchEnd(t)},touchcancel:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchEnd(t)}}},[o("div",e.isShowVoiceAnimate?{staticClass:"voice-dialog-mask"}:{staticClass:"voice-dialog-background"}),o("ui-image",{staticClass:"voice-dialog-btn-icon",attrs:{width:32,height:32,url:e.voiceUrl,"data-fc-1f5046760":""}})],1)]):[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"},{name:"resize",rawName:"v-resize.height",value:e.voiceDialogHeight,expression:"voiceDialogHeight",modifiers:{height:!0}}],staticClass:"voice-dialog",class:{isNewChatbot:e.isNewChatbot},on:{touchmove:function(e){e.preventDefault()}}},[o("div",{staticClass:"voice-dialog__content",style:e.isVoiceFoldMode?{}:e.voiceDialogHeightStyle},[e.isShow?o("div",[o("transition-animate",{attrs:{direction:"base",mode:"slide-fade","data-fc-1f5046768":""}},[e.isShowVoiceAnimate?o("div",{staticClass:"voice-dialog__animate-wrap"},[o("div",{staticClass:"voice-dialog__tip",class:{"is-will-cancel":e.isWillCancel}},[e._v("\n                  "+e._s(e.tipText)+"\n                ")]),o("div",[o("div",{staticClass:"voice-dialog__animate"},[o("canvas",{ref:"curveCanvas",staticClass:"curve-canvas"}),o("div",{staticClass:"voice-dialog__animate__gif"},[o("img",{staticClass:"mic-icon",attrs:{src:e.voiceGifUrl}})])])])]):e._e()]),o("transition-animate",{attrs:{direction:"base",mode:"opacity","data-fc-1f5046766":""}},[e.animatePress?o("div",{staticClass:"voice-dialog__sml",class:{"is-animate":e.isShowVoiceAnimate,"is-fold":e.isVoiceFoldMode}},[e.isShowVoiceAnimate?e._e():o("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"voice-dialog__sml-icon active__item",attrs:{"data-new-teach-report-id":e.keyboardReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),e.handleToggleFocus(t)}}},[o("ui-image",{attrs:{width:28,height:28,url:"https://res.wx.qq.com/t/components/icons/base/keyboard_circle_medium.svg","data-fc-1f5046764":""}})],1),o("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"voice-dialog__button-text active__item",attrs:{"data-new-teach-report-id":e.voiceReportId,"data-cli":""},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchStart(t)},touchstart:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchStart(t)},touchmove:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchMove(t)},touchend:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchEnd(t)},touchcancel:function(t){return t.stopPropagation(),t.preventDefault(),e.onTouchEnd(t)}}},[e._v("\n                  按住提问\n                ")]),!e.isShowVoiceAnimate&&e.isNewChatbot?o("div",{staticClass:"voice-dialog__sml-icons"},[o("chat-tool-btns",{attrs:{"doc-info":"1|64|"+encodeURIComponent("搜索框"),"is-cancel-auto-focus":"","icon-size":28,"data-fc-1f5046762":""}})],1):e._e()]):e._e()])],1):e._e()])])]],2)},n=[]},296805:function(e,t,o){o.d(t,{s:function(){return i},x:function(){return n}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"resize",rawName:"v-resize.width",value:e.pageWidth,expression:"pageWidth",modifiers:{width:!0}}],staticClass:"chatbot-page",class:{chatbot2:e.isChatbot2,"chatbot-page--deep-research":e.isDeepResearchStyle},style:e.pageStyle,attrs:{"data-fcn-index":"","data-fr-1f3629404":""},on:{"!touchend":function(t){return e.stopPollingCheckHisory(t)}}},[o("deep-research-expose-block",{attrs:{"data-fc-1438809f3":""}},[o("exposure-block",{attrs:{attr:"data-new-teach-report-id","data-fc-1438809f4":""},on:{expose:e.onNewTeachExpose}},[o("visible-expose-block",{ref:"visibleExposeBlockRef",attrs:{"report-data":e.visibleReportData,"event-type":e.visibleReportEventType,"data-fc-1438809f5":""}},[e.showCustomNavBar?o("custom-nav-bar",{ref:"navCustomNavBarRef",attrs:{"is-takeing-screenshot":e.isTakeingScreenshot,"can-show-more":e.canShowMore,"can-show-new-conversation":e.canShowNewConversation,"can-show-history":e.canShowHistoryNavBarBtn,"gen-report25032-params-by-data":e.genReport25032ParamsByData,title:e.navBarTitle,"is-title-left-aligned":e.isTitleLeftAligned,"data-fc-1438809f6":""},on:{"update:customNavBarHeight":e.onUpdateCustomNavBarHeight,"tap:showMore":e.onTapShowMore}}):e._e(),o("opacity-animate-show",{attrs:{"data-fc-1438809f7":""}},[e.isAnswerFade?e._e():o("scroll",{key:"ResultScroll",attrs:{source:e.resultObj,"expose-config":e.exposeConfig,"data-fc-1438809f8":""}},[o("height-collapse",{ref:"heightCollapse",staticClass:"chatbot-page__result",class:{"chatbot-page__result--share":e.isShare&&!e.canShowAppendChatInput,"chatbot-page__result--single-share":e.isSingleShare&&!e.canShowAppendChatInput},attrs:{"data-real-expose-container":"","data-fc-1438809f9":""}},e._l(e.resultObj.data,function(t,i){return o("div",{key:t.vueKey,staticClass:"search-result-wrap"},[o(e.M_getComponent(e.blockMap.getItem(t.type),t.type,"chatbot.vue"),{tag:"component",staticClass:"search_result_block",attrs:{"cn-props":t,d:t,"type-pos":e.getBlockPos(t,i),"data-component-boxid":t.boxID,"data-tracker-uniqueId":e.M_getTrackerUniqueId(t),"data-component-blockpos":e.getBlockPos(t,i),"data-box":e.M_isTrackerBox(t),"data-fc-1438809fa":""},on:{allChildComponentMounted:function(t){return e.onChildComponentMounted(i)}}}),i===e.resultObj.data.length-1?[o("div",{directives:[{name:"resize",rawName:"v-resize.height",value:e.spacerHeight,expression:"spacerHeight",modifiers:{height:!0}}],staticClass:"search-result-wrap__spacer"}),o("div",[e.canShowAiGenerateId(t,i)?o("ai-generate-id",{attrs:{"data-fc-1438809fb":""}}):e._e(),e.canShowBottomHolder?[o("div",{style:{height:e.M_os(e.chatTextareaHeight,136)+"px"}})]:e._e()],2)]:e._e()],2)}),0),(e.showHighBottom||e.isCommentInputBarShow)&&e.canShowBottomHolder?o("div",{directives:[{name:"visible",rawName:"v-visible",value:e.onHolderVisibleChange,expression:"onHolderVisibleChange"}],staticClass:"chatbot-page__result-bottom-holder",style:e.highHolderStyle}):e._e()],1)],1),e.isChatbotHome?o("home-title",{attrs:{"data-fc-12d79349d":""}}):e._e(),o("chat-textarea",{ref:"topChatTextArea",style:{opacity:e.isTakeingScreenshot?0:1},attrs:{"init-show":e.initShowChatTextArea,placeholder:e.placeholder,"is-new-chatbot":e.isChatbot2,"is-home":e.isChatbotHome,"data-fc-12d79349e":""},on:{"height:change":e.onChatTextareaHeightChange}}),e.os.mobile&&!e.isChatbot2?o("transition-animate",{attrs:{direction:"bottom",enabled:!e.isFirstEnter,"data-fc-12d79349f":""}},[e.isShare||!e.canShowHistory||e.isVoiceMode?e._e():o("chat-history",{attrs:{"data-fc-12d7934a0":""},on:{"tap-search":e.onTapHistory,"tap-more":e.onTapHistoryMore,"tap-edit":e.onTapHistoryEdit}})],1):e._e(),e.os.mobile?o("transition-animate",{attrs:{direction:"bottom",enabled:!e.isFirstEnter,"data-fc-12d7934a1":""}},[e.isShare||!e.canShowHistory||e.isVoiceMode?e._e():o("recommend",{attrs:{"data-fc-12d7934a2":""}})],1):e._e(),o("search-dialog",{attrs:{"data-fc-12d7934a3":""}}),e.showAnswerStopBtn?o("stop-button",{attrs:{"stop-btn-style":e.stopBtnStyle,"stop-text":e.stopText,"data-fc-12d7934a4":""},on:{"stop-answer":e.onStopAnswer}}):e._e()],1)],1)],1),o("dr-background",{attrs:{"data-fc-12d7934a5":""}})],1)},n=[]},90417:function(e,t,o){var i=o(648014),n=o(703547),a=o(984928);t.Z={mixins:[i.Z],props:{maskAttrs:{type:Array,default:function(){return["chatbot-visible-mask"]}}},computed:{E_elementEventType:function(){return n.cY.TOP_QA_BOX}},methods:{E_getReportDataFromBusinessAttr:function(e){if(!!e)return{searchId:e}},E_targetRouteName:function(){return a.kO.CHATBOT}}}},826:function(e,t){t.Z={name:"AIGenerateID"}},824282:function(e,t,o){var i=o(798509),n=o(56110);t.Z={components:{ChatTextareaPop:n.Z},mixins:[i.uW,i.jB],props:{placeholder:{type:String,default:""},isNewChatbot:{type:Boolean,default:!1}}}},724272:function(e,t,o){var i,n,a=o(420629),r=o(791191),s=o(973561),c=o(783466),l=o(798509);function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}t.Z={components:{VoiceDialog:s.Z},props:{isShow:{type:Boolean,default:!0},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isNewChatbot:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1}},data:function(){return{message:"",initWindowHeight:window.innerHeight,style:{height:"".concat(56,"px")},MAX_LENGTH:500,isTextareaDisabled:!1,showMask:!1,focusStatus:"blur"}},computed:(i=u({},(0,a.rn)({keyboardHeight:function(e){return e.result.keyboardHeight},isSearchKeyboardShow:function(e){return e.result.isSearchKeyboardShow},chatMode:function(e){return e.chatbot.chatMode}})),n=(n={isVoiceMode:function(){return this.chatMode===r.jE.VOICE||this.chatMode===r.jE.VOICE_CONTINUES},needFakeTextarea:function(){return!1},textareaStyle:function(){var e=u({},this.style);return this.needFakeTextarea&&(e.position="fixed",e.top="0",e.left="-9999px",e.height="0px",e.minHeight="0px",e.maxHeight="0px"),e},fakePlaceholder:function(){return this.needFakeTextarea?"":this.placeholder}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),watch:{message:{immediate:!0,handler:function(e){this.$emit("message:change",e),this.adjustHeight()}},chatMode:function(e,t){e===r.jE.NORMAL_FOCUS?this.focus():(e===r.jE.VOICE||e===r.jE.VOICE_CONTINUES)&&this.setMessage("")},needFakeTextarea:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick(function(){var e=t.$refs.fakeTextarea;e&&(e.scrollTop=e.scrollHeight)})}}},created:function(){var e=this;l.Gc.$on(l.U3.CHAT_VOICE_STATUS,function(t){var o=t.status,i=t.content;switch(o){case r._r.START_FETCH:case r._r.TOO_SHORT:case r._r.CANCEL:e.isTextareaDisabled=!1;break;case r._r.RECORDING:i&&(e.isTextareaDisabled=!0)}})},methods:{onVoiceDialogHeightChange:function(e){this.$emit("voice-dialog-height-change",e)},onClickFake:function(){this.focus()},getHeight:function(){var e=this.$refs.textarea.getBoundingClientRect().height;return e},getMessage:function(){return this.message},setMessage:function(e){var t=e.slice(0,500);this.message=t,this.message?this.adjustHeight():this.style={height:"".concat(56,"px")}},focus:function(){this.$refs.textarea&&this.$refs.textarea.focus()},blur:function(){this.$refs.textarea.blur()},adjustHeight:function(){var e=this,t=this.$refs.textarea;if(!!t)!this.isNewChatbot&&(this.style={height:"auto"}),this.$nextTick(function(){var o=Math.max(t.scrollHeight,56),i=getComputedStyle(document.documentElement).getPropertyValue("--SAFE-BOTTOM")||"0px",n=e.initWindowHeight-e.keyboardHeight-parseInt(i)-100;if(e.chatMode===r.jE.VOICE&&(o=t.scrollHeight>n?n:t.scrollHeight),e.style={height:"".concat(o,"px")},t.scrollTop=t.scrollHeight,e.isNewChatbot){if(e.isTextareaDisabled)e.showMask=o>108;else{var a=t.clientHeight||t.getBoundingClientRect().height;e.showMask=t.scrollHeight>a}}})},onFocus:function(){this.focusStatus="showKeyboard",this.$store.commit({type:"chatbot/updateIsPerformActionEnabled",enabled:1}),this.handleFocus()},onBlur:function(){this.focusStatus="blur",this.$store.dispatch("chatbot/handleChatModeChange",{status:r.jE.NORMAL}),this.$store.commit({type:"chatbot/updateIsPerformActionEnabled",enabled:0}),this.$emit("blur")},handleFocus:function(){if(!this.isTextareaDisabled)this.$store.dispatch("chatbot/handleChatModeChange",{status:r.jE.NORMAL_FOCUS}),this.isVoiceMode&&(c.h.vibrateShort({style:"light"}),this.$store.dispatch("chatbot/setFrontVoiceStatus",r.fD.CANCEL),c.h.operateStreamVoiceInput({type:"stop"}))},onPressEnter:function(e){var t;e.preventDefault(),(null===(t=this.message)||void 0===t?void 0:t.trim())&&!e.isComposing&&this.$emit("send",{type:r.NZ.text})},onPaste:function(e){var t=e.clipboardData.files;t.length&&(e.preventDefault(),e.stopPropagation(),l.Gc.$emit(l.U3.CHAT_DROP_FILES,t))}}}},630984:function(e,t,o){var i,n,a=o(420629),r=o(798509),s=o(619269),c=o(747947);t.Z={components:{ConversationHistory:c.Z},mixins:[s.Z],data:function(){return{canTeachReport:!0}},computed:(i=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({},(0,a.Se)({conversationList:"chatbot/conversationList"})),n=(n={canShowHistory:function(){return this.totalHistoryList.length>0},conversationListToShow:function(){return this.conversationList},totalHistoryList:function(){return this.conversationList.reduce(function(e,t){return e.concat(t.historyList||[])},[])},canShowMore:function(){return!1},moreReportId:function(){return["1|1001|".concat(encodeURIComponent("最近在问")),"1|1|".concat(encodeURIComponent("最近在搜"),"|||||history|")].join("$$")},editReportId:function(){return["1|1001|".concat(encodeURIComponent("最近在问")),"2|2|history_delete|||||history_delete|"].join("$$")}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),methods:{getLimit:function(e){return Math.max(3-this.conversationList.slice(0,e).reduce(function(e,t){return e+(t.historyList||[]).length},0),0)},onTapSearch:function(e){this.$emit("tap-search",e)},onTapMore:function(){this.M_clickReportFor26897({itemReportId:this.moreReportId},0,{actionId:r.At.CLICK_SHOW_DIALOG}),this.$emit("tap-more")},onTapEditHistory:function(){this.M_clickReportFor26897({itemReportId:this.editReportId},0,{actionId:r.At.CLICK_EDIT}),this.$emit("tap-edit")},scrollResultPageToTargetIndex:function(e){if(e.conversationId===r.xB.conversationId){var t=document.querySelector(".chatbot-page__result .search-result-wrap:nth-child(".concat(e.index+1,")"));t&&t.scrollIntoView({behavior:"smooth"})}}}}},390081:function(e,t,o){var i,n,a=o(760597),r=o(694768),s=o(798509),c=o(321187),l=o(420629),u=o(791191),h=o(525770),d=o(619269),p=o(984928),f=o(111267);function v(e,t,o,i,n,a,r){try{var s=e[a](r),c=s.value}catch(e){o(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}t.Z={components:{InputButtonArea:a.Z,AutoHeightTextArea:c.Z,TransitionAnimate:h.Z,ChatUploadMediaPreview:r.Z},mixins:[s.uW,s.jB,d.Z,f.Z],props:{placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!0},isNewChatbot:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1}},data:function(){return{message:"",SEND_METHOD:u.NZ}},computed:(i=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({},(0,l.Se)({modelChoose:"chatbot/modelChoose"}),(0,l.rn)({isSearchKeyboardShow:function(e){return e.result.isSearchKeyboardShow},chatMode:function(e){return e.chatbot.chatMode},frontVoiceStatus:function(e){return e.chatbot.frontVoiceStatus},uploadFileList:function(e){return e.chatbot.uploadFileList}})),n=(n={isEditable:function(){return!!this.modelChoose},isShowOperator:function(){return this.isNewChatbot?this.frontVoiceStatus!==u.fD.RECORDING:this.chatMode===u.jE.NORMAL||this.chatMode===u.jE.NORMAL_FOCUS}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),created:function(){var e=this;s.Gc.$on(s.U3.CHAT_VOICE_STATUS,function(t){var o=t.status,i=t.content;switch(o){case u._r.TOO_SHORT:case u._r.CANCEL:e.setMessage("");break;case u._r.RECORDING:(e.frontVoiceStatus===u.fD.RECORDING||e.frontVoiceStatus===u.fD.COMPLETE)&&e.setMessage(i||"");break;case u._r.COMPLETE:document.body.style.overflow="",""!==i&&(e.sendMessage({type:u.NZ.voice}),setTimeout(function(){e.$store.dispatch("chatbot/handleChatModeChange",{status:u.jE.NORMAL})},300))}})},beforeDestroy:function(){s.Gc.$off(s.U3.CHAT_VOICE_STATUS)},methods:{onMessageChange:function(e){this.message=e},getHeight:function(){return this.$el.getBoundingClientRect().height},onClickButtonArea:function(){this.focus()},sendMessage:function(e){var t,o=e.type;return(t=function(){var e,t;return function(e,t){var o,i,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(o)throw TypeError("Generator is already executing.");for(;r;)try{if(o=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,function(i){switch(i.label){case 0:if(!((e=this.$refs.textarea.getMessage()).trim()||this.uploadFileList.length>0))return[3,3];if(!this.M_checkCanSearch(this.uploadFileList))return[2];this.$emit("send");return[3,2];case 1:i.sent(),i.label=2;case 2:return t={query:e},o===u.NZ.voice&&(t.parentType=p.X$.MMSEARCH_TYPE_AISEARCH_MIC,this.M_clickReportFor26897({itemReportId:"1|64|".concat(encodeURIComponent("搜索框"),"$$1|1|voice_input||1||||voice_input|")},0,{actionId:s.At.AI_SEARCH})),t.sendType=o,s.Gc.$emit(s.U3.CHAT_INPUT_CONFIRM,t,this.baseCtx),[3,4];case 3:this.$refs.textarea.setMessage(""),this.focus(),i.label=4;case 4:return[2]}})},function(){var e=this,o=arguments;return new Promise(function(i,n){var a=t.apply(e,o);function r(e){v(a,i,n,r,s,"next",e)}function s(e){v(a,i,n,r,s,"throw",e)}r(void 0)})}).apply(this)},setMessage:function(e){this.$refs.textarea.setMessage(e)},onClickModel:function(){this.$emit("click:model")},focus:function(){this.$refs.textarea.focus()},blur:function(){this.$refs.textarea.blur()}}}},810352:function(e,t,o){var i=o(798509),n=o(84762),a=o(619269);t.Z={mixins:[i.uW,i.jB,a.Z],props:{disabled:{type:Boolean,default:!1}},computed:{FontSize:function(){if(i.xB.chatbot===n.in.V2)return"".concat(15*Math.min(1.2,i.xB.fontRatio)/Math.min(1.4,i.xB.fontRatio),"px")}},methods:{getSearchReportId:function(){return["1|64|".concat(encodeURIComponent("搜索框")),"1|1|search||||||search|"].join("$$")},tapSearch:function(){this.$emit("tap")},reportSearchClick:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";setTimeout(function(){e.M_clickReportFor26897({itemReportId:e.getSearchReportId()},0,{actionId:i.At.VERTICAL,query:t,__allowEmptyQuery:!0})},0)}}}},354988:function(e,t,o){var i,n,a=o(489518),r=o(532721),s=o(798509),c=o(372973),l=o(791191),u=o(420629),h=o(525770);t.Z={components:{ChatInput:a.Z,AppendChatTextarea:r.Z,TransitionAnimate:h.Z},mixins:[s.uW,s.jB],props:{placeholder:{type:String,default:"提出你的问题..."},initShow:{type:Boolean,default:!0},isNewChatbot:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1}},data:function(){return{isFake:!1,canFocus:!0,canShow:this.initShow,showFakeInAnimate:!1,showFakeTime:0,hasIOSSetJSFocus:!1}},computed:(i=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({},(0,u.rn)({chatMode:function(e){return e.chatbot.chatMode},canShowAppendChatInput:function(e){return e.chatbot.canShowAppendChatInput}})),n=(n={isVoiceMode:function(){return this.chatMode===l.jE.VOICE||this.chatMode===l.jE.VOICE_CONTINUES},fakeHeight:function(){return(0,c.I)().getTextHeight({text:this.placeholder,fontSize:"var(--FONT-M)"})+40}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),created:function(){},methods:{isVisible:function(){return this.canShow},isReal:function(){return!this.isFake},setVisible:function(e){this.canShow=e,!e&&(this.showFakeInAnimate=!1)},setReal:function(){this.setVisible(!0),this.isFake=!1,this.canFocus=!0,this.style={}},setFake:function(e){if(!!this.canShowAppendChatInput){var t,o,i,n,a,r=(e||{}).animate;this.showFakeInAnimate=r,this.setVisible(!0),this.isFake=!0,(null===(t=s.xB.chatbotExtParams)||void 0===t?void 0:t.keyboardAutoFocus)&&0===this.showFakeTime&&(this.showFakeTime+=1,null===(a=this.$refs.appendChatTextarea)||void 0===a||null===(n=a.$refs)||void 0===n||null===(i=n.chatTextareaPop)||void 0===i||null===(o=i.show)||void 0===o||o.call(i))}},setMessage:function(e){var t;null===(t=this.$refs.chatInput)||void 0===t||t.setMessage(e)},focus:function(){var e,t,o=this;o.$refs.chatInput?o.$refs.chatInput.focus():(null===(t=o.$refs.appendChatTextarea)||void 0===t?void 0:null===(e=t.$refs)||void 0===e?void 0:e.chatTextareaPop)&&o.$refs.appendChatTextarea.$refs.chatTextareaPop.show()}}}},886233:function(e,t,o){var i=o(798509),n=o(420629),a=o(321187),r=o(414152),s=o(65886),c=o(791191),l=o(783466),u=o(619269),h=o(984928),d=o(694768),p=o(486920),f=o(111267),v=o(84762);function m(e,t,o,i,n,a,r){try{var s=e[a](r),c=s.value}catch(e){o(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}t.Z={components:{AutoHeightTextArea:a.Z,ChatSendButton:r.Z,OpacityAnimateShow:s.Z,ChatUploadMediaPreview:d.Z,ChatToolBtns:p.Z},mixins:[i.uW,i.jB,u.Z,f.Z],props:{placeholder:{type:String,default:""},isNewChatbot:{type:Boolean,default:!1}},data:function(){return{initShow:!1,fakeTextWidth:0,isShow:!1,isCompleteShow:!1,isCompleteHide:!0,message:"",spacerStyle:{height:"0px"},initWindowHeight:window.innerHeight,androidNeedHolder:!1,shortCloseAnimate:!1,isTextareaPlaceholder:!1,SEND_METHOD:c.NZ,voiceDialogHeight:0,buttonAreaHeight:0,fileAreaHeight:0,showDropMask:!1,AcceptFileCount:v.Xd,AcceptFileSize:v.Sr}},computed:b(y(b(y({},(0,n.rn)({resultObj:function(e){return e.result.self.resultObj},keyboardHeight:function(e){return e.result.keyboardHeight},isSearchKeyboardShow:function(e){return e.result.isSearchKeyboardShow},chatMode:function(e){return e.chatbot.chatMode},frontVoiceStatus:function(e){return e.chatbot.frontVoiceStatus},isRelaunch:function(e){return e.chatbot.isRelaunch},uploadFileList:function(e){return e.chatbot.uploadFileList},aiModel:function(e){return e.chatbot.aiModel}})),{voiceFoldMarginBottom:function(){if(!!this.isVoiceFoldMode){var e=64;return this.voiceDialogHeight&&(e=this.voiceDialogHeight-24),"calc(".concat(e,"px - var(--SAFE-BOTTOM, 0px))")}}}),(0,n.Se)({modelChoose:"chatbot/modelChoose"})),{fakePlaceholder:function(){var e;return this.isRelaunch?"提出新的问题...":(null===(e=this.resultObj.data)||void 0===e?void 0:e.length)?"继续提问...":"提出你的问题..."},holderStyle:function(){l.h.log({key:"holderStyle",msg:"isShow  ".concat(this.isShow)}),l.h.log({key:"holderStyle keyboardHeight",msg:"keyboardHeight  ".concat(this.keyboardHeight)}),l.h.log({key:"holderStyle androidNeedHolder",msg:"androidNeedHolder  ".concat(this.androidNeedHolder)});var e=this.isShow?"calc(".concat(this.keyboardHeight,"px - var(--SAFE-BOTTOM, 0px))"):"0px";return l.h.log({key:"holderStyle height",msg:"height  ".concat(e)}),{transition:"height .3s ease-in-out",height:e}},fakeMessageToShow:function(){return this.placeholder},isVoiceContinuesMode:function(){return this.chatMode===c.jE.VOICE_CONTINUES},isVoiceFoldMode:function(){return this.chatMode===c.jE.VOICE_FOLD},enable:function(){return!!i.FP.isSupportOnAiVoice||!1},modelNameReportId:function(){var e,t=(null===(e=this.modelChoose)||void 0===e?void 0:e.title)||"";return["1|64|".concat(encodeURIComponent("搜索框")),"0|0|".concat(encodeURIComponent(t),"||1||||model_type|")].join("$$")},isNoBg:function(){return this.chatMode===c.jE.VOICE_FOLD||this.chatMode===c.jE.VOICE_CONTINUES},iconSize:function(){return i.xB.fontRatio>1.2?Math.round(20/(i.xB.fontRatio/1.2)):20},modelFontSize:function(){return 15*Math.min(1.2,i.xB.fontRatio)},canShowFileListArea:function(){return this.uploadFileList.length&&!this.isVoiceContinuesMode},bodyHeight:function(){return this.isNewChatbot?this.buttonAreaHeight+(this.canShowFileListArea?this.fileAreaHeight:0)+i.Zr.getSimilarFontHeight(17,1.4)+12+12+8+16:56+this.buttonAreaHeight+16+8}}),watch:{isSearchKeyboardShow:function(e){l.h.log({key:"holderStyle isSearchKeyboardShow",msg:"androidNeedHolder  ".concat(this.androidNeedHolder)})},chatMode:{immediate:!0,handler:function(e,t){}},bodyHeight:{immediate:!0,handler:function(e){this.$emit("height:change",e)}}},created:function(){var e;return(e=function(){var e,t;return function(e,t){var o,i,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(o)throw TypeError("Generator is already executing.");for(;r;)try{if(o=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,function(o){switch(o.label){case 0:return e=this,[4,i.su.get({key:"AI_VOICE_MODE"})];case 1:return t=o.sent(),this.initShow=!0,t===c.jE.VOICE?this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD}):this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.NORMAL}),i.Gc.$on(i.U3.CHAT_VOICE_STATUS,function(t){var o,i,n,a,r,s=t.status,l=t.content;switch(s){case c._r.TOO_SHORT:case c._r.CANCEL:e.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD}),null===(o=e.$refs.textarea)||void 0===o||o.setMessage(""),null===(i=e.$refs.textarea)||void 0===i||i.blur();break;case c._r.RECORDING:(e.frontVoiceStatus===c.fD.RECORDING||e.frontVoiceStatus===c.fD.COMPLETE)&&l&&(null===(n=e.$refs.textarea)||void 0===n||n.setMessage(l));break;case c._r.COMPLETE:document.body.style.overflow="",""!==l?(e.onSend({type:c.NZ.voice}),setTimeout(function(){e.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD})},300)):""===l&&(e.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD}),null===(a=e.$refs.textarea)||void 0===a||a.setMessage(""),null===(r=e.$refs.textarea)||void 0===r||r.blur())}}),[2]}})},function(){var t=this,o=arguments;return new Promise(function(i,n){var a=e.apply(t,o);function r(e){m(a,i,n,r,s,"next",e)}function s(e){m(a,i,n,r,s,"throw",e)}r(void 0)})}).apply(this)},mounted:function(){var e=this;this.initShow=!0,this.$nextTick(function(){e.show(!1)}),this.initDragEvent()},beforeDestroy:function(){i.Gc.$off(i.U3.CHAT_VOICE_STATUS);this.removeDragEvent()},methods:{onVoiceDialogHeightChange:function(e){this.voiceDialogHeight=e},getVoiceReportId:function(){return["1|64|".concat(encodeURIComponent("搜索框")),"1|1|voice||1||||voice|"].join("$$")},onClickVoice:function(){var e=this;this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD}),setTimeout(function(){e.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD})},0),this.$refs.textarea.setMessage(""),this.$refs.textarea.blur(),l.h.vibrateShort({style:"light"}),this.M_clickReportFor26897({itemReportId:"1|64|".concat(encodeURIComponent("搜索框"),"$$1|1|voice||1||||voice|")},0,y({actionId:i.At.CLICK_VOICE},this.reportExtInfo))},onMessageChange:function(e){this.message=e},show:function(){var e,t,o,i=this,n=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.isShow=!0,this.isCompleteHide=!1,this.spacerStyle={height:"".concat(null!==(o=null===(e=this.$refs.textarea)||void 0===e?void 0:e.getHeight())&&void 0!==o?o:0,"px")},n&&(null===(t=this.$refs.textarea)||void 0===t||t.focus()),this.isNewChatbot&&(this.isCompleteShow=!0),setTimeout(function(){i.isCompleteShow=!0},300)},hide:function(){},onClickMask:function(){if(console.warn("onClickMask"),this.hide(),this.chatMode===c.jE.VOICE_CONTINUES){this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD});return}this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.NORMAL})},onTouchMask:function(){if(console.warn("onTouchMask"),this.$refs.textarea.blur(),this.hide(),this.chatMode===c.jE.VOICE_CONTINUES){this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.VOICE_FOLD});return}this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.NORMAL})},onTextAreaBlur:function(){![c.jE.VOICE_CONTINUES,c.jE.VOICE_FOLD].includes(this.chatMode)&&(this.$refs.textarea.blur(),this.$store.dispatch("chatbot/handleChatModeChange",{status:c.jE.NORMAL}))},onTapTools:function(e){this.$refs.textarea.blur()},onClickModel:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.$refs.textarea.blur(),setTimeout(function(){var e,o,n,a,r=null,s=null;var c=(null===(e=t.resultObj.data)||void 0===e?void 0:e.length)&&(r=t.resultObj.data[t.resultObj.data.length-1],t.resultObj.data[0],null===(o=r.vueChatbotInfo)||void 0===o?void 0:o.modelType)?(t.$store.state.chatbot.aiModelList||[]).find(function(e){var t;return e.modelType===(null===(t=r.vueChatbotInfo)||void 0===t?void 0:t.modelType)}):t.modelChoose,l=(t.$store.state.chatbot.aiModelList||[]).filter(function(e){return(!!c.isFastModel||!e.isFastModel)&&!0});t.resultObj.data.filter(function(e){return!e.isFake}),t.M_serviceSearchGo({pop:{type:41,triggerElement:t.$refs.modelChoose,spacingH:-20,source:null==r?void 0:null===(a=r.items)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:n.itemInfo,list:l.map(function(e){return b(y({},e),{actionType:i.At.CONFIRM_CHANGE_CODE})}),callback:function(){t.show()}}})},0),this.M_clickReportFor26897({itemReportId:this.modelNameReportId},0,{actionId:i.At.CLICK_SHOW_DIALOG})},onSend:function(e){var t=this,o=e.type,n=this.message.trim();if(!n&&!this.uploadFileList.length){this.$refs.textarea.setMessage(""),!this.isShow&&this.show();return}if(!!this.M_checkCanSearch(this.uploadFileList)){this.$refs.textarea.blur(),setTimeout(function(){t.$refs.textarea.setMessage("")},300);var a={query:n};setTimeout(function(){var e,r;if(o===c.NZ.voice&&(a.parentType=h.X$.MMSEARCH_TYPE_AISEARCH_MIC,t.M_clickReportFor26897({itemReportId:"1|64|".concat(encodeURIComponent("搜索框"),"$$1|1|voice_input||1||||voice_input|")},0,{actionId:i.At.AI_SEARCH})),a.sendType=o,t.isRelaunch&&(a.isRenewConversation=!0),t.aiModel===v.BY.DR){t.hasGoToNextChatbot=!0,i.Gc.$emit(i.U3.DR_CREATE,{parentSearchID:t.M_composeParentSid({t:o===c.NZ.voice?h.X$.MMSEARCH_TYPE_VOICE_SEARCH:h.X$.ENTER_INPUT_CONFIRM,s:"",did:"",rid:"",kv:{isFromVoice:o===c.NZ.voice?1:0,sceneType:i.xB.chatbotSecond||i.xB.shareFromChatbot?h.Hq.RESULT:h.Hq[t.$route.name],modelname:v.BY.DR}}),needStartNewPage:!0,query:n}),null===(r=t.$refs.chatSendButtonRef)||void 0===r||r.reportSearchClick(n);return}i.Gc.$emit(i.U3.CHAT_INPUT_CONFIRM,a),null===(e=t.$refs.chatSendButtonRef)||void 0===e||e.reportSearchClick(n)},350)}},initDragEvent:function(){var e=document.body;e.addEventListener("drop",this.onDropFile,!1),e.addEventListener("dragover",this.onDragOver,!1),e.addEventListener("dragleave",this.onDragLeave,!1)},removeDragEvent:function(){var e=document.body;e.removeEventListener("drop",this.onDropFile,!1),e.removeEventListener("dragover",this.onDragOver,!1),e.removeEventListener("dragleave",this.onDragLeave,!1)},onDropFile:function(e){e.preventDefault(),e.stopPropagation(),this.showDropMask=!1;var t=(e.dataTransfer||{}).files;(null==t?void 0:t.length)&&i.Gc.$emit(i.U3.CHAT_DROP_FILES,t)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),this.showDropMask=!0},onDragLeave:function(e){this.showDropMask=!1}}}},53343:function(e,t,o){var i=o(798509),n=o(984928),a=o(420629),r=o(142862),s=o(619269),c=o(144007),l=o(72433);function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}t.Z={components:{PortalTarget:l.PortalTarget},mixins:[i.uW,i.jB,s.Z],props:{canShowMore:{type:Boolean,default:!1},isTakeingScreenshot:{type:Boolean,default:!1},genReport25032ParamsByData:{type:Function},canShowHistory:{type:Boolean,default:!1},canShowNewConversation:{type:Boolean,default:!1},title:{type:String,default:""},isTitleLeftAligned:{type:Boolean,default:!1}},data:function(){return{isAndroid:!1,isIos:!1,typePos:0,hasReportExpose:!1,leftWidth:0,rightWidth:0,topAreaHeight:0,isIosCanShowCustomNavBar:!1,customNavBarHeight:0}},computed:h(u({},(0,a.rn)({resultObj:function(e){return e.result.self.resultObj}})),{titleStyle:function(){var e=Math.max(this.leftWidth,this.rightWidth)+10;return this.isTitleLeftAligned?{paddingLeft:"".concat(this.leftWidth+10+10,"px"),paddingRight:"".concat(this.rightWidth+10+(this.rightWidth?16:0),"px"),justifyContent:"flex-start",textAlign:"left"}:{paddingLeft:"".concat(e,"px"),paddingRight:"".concat(e,"px")}},canReportExposeTeach:function(){return!!(this.M_getPageType()!==n.Hq.RESULT||this.M_searchIdFor26897())||!1},newConversationReportId:function(){return this.canReportExposeTeach?"1|2|new_conversation$$1|1|new_conversation|||||new_conversation|":""},historyReportId:function(){return this.canReportExposeTeach?["1|1001|".concat(encodeURIComponent("最近在问")),"1|1|history|||||history|"].join("$$"):""}}),watch:{resultObj:{handler:function(e){var t;if(!!this.canShowMore){if((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)&&(null==e?void 0:e.searchID)&&!this.hasReportExpose){this.hasReportExpose=!0;var o,i,a=null===(i=this.resultObj)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o[this.typePos];(0,r.Z)(h(u({},this.genReport25032ParamsByData(a,"right_corner:right_corner")),{actionType:n.At.EXPOSE_ITEM}))}}},immediate:!0},customNavBarHeight:function(e){this.$emit("update:customNavBarHeight",e)}},mounted:function(){var e=this,t=function(){var t;e.customNavBarHeight=null===(t=e.$refs.customNavBarRef)||void 0===t?void 0:t.getBoundingClientRect().height};t(),this.$nextTick(function(){t()})},methods:{onClickTitle:function(){window.scrollTo({top:0,behavior:"smooth"})},onTapClose:function(){i.hi.removeWebviewPage({index:0,animated:!0,docInfo:"1|1|upbutton_back||||||upbutton_back|"})},onTapMore:function(){var e,t,o=null===(t=this.resultObj)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e[this.typePos],i=this.genReport25032ParamsByData(o,"right_corner:right_corner");if(o){var a=this.M_genClickId({searchId:i.searchId});(0,r.Z)(h(u({},i),{actionType:n.At.CLICK_SHOW_DIALOG,extInfo:JSON.stringify({clickId:a})})),this.$emit("tap:showMore",{bypassReportParams:i})}},onTapNewConversation:function(){this.M_clickReportFor26897({itemReportId:this.newConversationReportId},0,{actionId:n.At.VERTICAL_SUG}),this.onNewConversation()},onNewConversation:function(){i.Gc.$emit(i.U3.CHAT_NEW_CONVERSATION,{back:c.c3.BackFromResultPageNewConversation,open:c.c3.OpenNewConversationPage})},onTapHistory:function(){this.M_clickReportFor26897({itemReportId:this.historyReportId},0,{actionId:n.At.CLICK_SHOW_DIALOG}),this.M_serviceSearchGo({pop:{type:42,canShowNewConversation:this.canShowNewConversation}})}}}},585951:function(e,t,o){var i=o(798509),n=o(468845);t.Z={inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}}},data:function(){return{canShowBg:!1,canShowBgWhenNotSticky:!0}},computed:{canShow:function(){return this.canShowBg&&this.canShowBgWhenNotSticky},containerStyle:function(){var e=i.Zr.getSimilarFontHeight(17,1.6)+2*n.oN;return{height:"calc(100vh - ".concat(this.getCustomNavBarHeight()+3*e+i.Zr.getSafeBottomHeight(),"px)")}}},created:function(){i.Gc.$on(i.U3.TAB_STICKY_CHANGE,this.handleStickyChange),i.Gc.$on(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,this.handleShowBg),i.Gc.$on(i.U3.CHATBOT_BOTTOM_BACKGROUND_OPACITY,this.handleOpacityChange)},beforeDestroy:function(){i.Gc.$off(i.U3.TAB_STICKY_CHANGE,this.handleStickyChange),i.Gc.$off(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,this.handleShowBg),i.Gc.$off(i.U3.CHATBOT_BOTTOM_BACKGROUND_OPACITY,this.handleOpacityChange)},methods:{handleStickyChange:function(e,t){2===e.id&&(this.canShowBgWhenNotSticky=!t)},handleShowBg:function(e){console.error("handleShowBg",e),this.canShowBg=e},handleOpacityChange:function(e){this.opacity=e}}}},898751:function(e,t,o){var i,n,a=o(420629);t.Z={computed:(i=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({showServiceSearchPopForm:function(){return!!this.serviceSearchPopForm.pop}},(0,a.rn)({serviceSearchPopForm:function(e){return e.serviceSearchPopForm}})),n=(n={serviceSearchPopFormParentItemPos:function(){var e;return null===(e=this.serviceSearchPopForm.pop)||void 0===e?void 0:e.parentItemPos}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i)}},177147:function(e,t,o){var i=o(798509),n=o(414152),a=o(321187);t.Z={components:{AutoHeightTextArea:a.Z,ChatSendButton:n.Z},mixins:[i.uW,i.jB],props:{placeholder:{type:String,default:"提出你的问题..."},isInvisible:{type:Boolean,default:!1}}}},215063:function(e,t){t.Z={data:function(){return{style:{},innerStyle:{}}},methods:{show:function(){this.style={},this.innerStyle={}},showInAnimate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;this.style={height:"0px",overflow:"hidden"},this.$nextTick(function(){var o=e.$el.children[0];o&&(e.style={height:"".concat(o.getBoundingClientRect().height,"px"),overflow:"hidden",transition:"height ".concat(t,"ms linear")},setTimeout(function(){e.style={}},t))})},hide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;this.$el.getBoundingClientRect().height;this.style={height:"0px"},this.innerStyle={position:"absolute",top:0,left:0,right:0,opacity:1,transform:"translateY(0)"},this.$nextTick(function(){requestAnimationFrame(function(){requestAnimationFrame(function(){e.style={height:"0px",transition:"height ".concat(t,"ms linear")},e.innerStyle={position:"absolute",top:0,left:0,right:0,transform:"translateY(-100%)",opacity:0,transition:"transform ".concat(t,"ms linear, opacity ").concat(t,"ms linear")},setTimeout(function(){e.innerStyle={},e.style={height:"0px",overflow:"hidden"}},t)})})})}}}},85579:function(e,t,o){var i=o(798509);t.Z={name:"ChatBotHomeTitle",data:function(){return{titleGap:2,marginTop:72}},created:function(){var e=this;i.Gc.$on(i.U3.CHAT_IS_SEND_BUTTON_HIDE,function(t){e.marginTop=e.marginTop+t.height})}}},992516:function(e,t,o){var i=o(798509),n=o(420629),a=o(414152),r=o(791191),s=o(783466),c=o(574184),l=o(619269),u=o(486920);function h(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}t.Z={components:{ChatSendButton:a.Z,ChatToolBtns:u.Z,ModelRedDot:c.Z},mixins:[i.uW,i.jB,l.Z],props:{isNewChatbot:{type:Boolean,default:!1},query:{type:String,default:""}},data:function(){return{innerHeight:0}},computed:d(h({},(0,n.Se)({modelChoose:"chatbot/modelChoose",redDotIdToShow:"chatbot/redDotIdToShow"}),(0,n.rn)({uploadFileList:function(e){return e.chatbot.uploadFileList},keyboardHeight:function(e){return e.result.keyboardHeight},isSearchKeyboardShow:function(e){return e.result.isSearchKeyboardShow}})),{enable:function(){return!!i.FP.isSupportOnAiVoice||!1},modelNameReportId:function(){var e=this.modelChoose.title;return["1|64|".concat(encodeURIComponent("搜索框")),"0|0|".concat(encodeURIComponent(e),"||1|").concat(this.redDotIdToShow||"","|||model_type|")].join("$$")},isShowChatToolBtns:function(){return!0},modelFontSize:function(){return 15*Math.min(1.2,i.xB.fontRatio)}}),watch:{isSearchKeyboardShow:function(e){var t=this;e&&this.$nextTick(function(){var e=t.$refs.chatTextareaSendBtn;if(e){var o=e.getBoundingClientRect().bottom,n=window.innerHeight-o;t.innerHeight===window.innerHeight&&(n=window.innerHeight-t.keyboardHeight-o),n<0&&i.Gc.$emit(i.U3.CHAT_IS_SEND_BUTTON_HIDE,{height:n})}})}},mounted:function(){this.innerHeight=window.innerHeight},methods:{getVoiceReportId:function(){return["1|64|".concat(encodeURIComponent("搜索框")),"1|1|voice||1||||voice|"].join("$$")},sendMessage:function(){var e;this.$emit("send"),null===(e=this.$refs.chatSendButtonRef)||void 0===e||e.reportSearchClick(this.query)},onClickModel:function(){this.$emit("click:model"),this.openModelChoosePop()},onClickVoice:function(){this.$store.dispatch("chatbot/handleChatModeChange",{status:r.jE.VOICE}),s.h.vibrateShort({style:"light"}),this.M_clickReportFor26897({itemReportId:"1|64|".concat(encodeURIComponent("搜索框"),"$$1|1|voice||1||||voice|")},0,h({actionId:i.At.CLICK_VOICE},this.reportExtInfo))},openModelChoosePop:function(){var e=this.$store.state.chatbot.aiModelList;this.M_serviceSearchGo({pop:{type:41,triggerElement:this.$refs.modelChoose,spacingH:-20,list:e.map(function(e){return d(h({},e),{actionType:i.At.CONFIRM_CHANGE_CODE})})}}),this.M_clickReportFor26897({itemReportId:this.modelNameReportId},0,h({actionId:i.At.CLICK_SHOW_DIALOG},this.reportExtInfo))}}}},977346:function(e,t,o){var i,n=o(798509),a=o(636196),r=o(735146),s=o(317645),c=o(136947),l=o(984928),u=o(728223),h=o(748750),d=o(349854),p=o(607115),f=o(619269);function v(e,t,o,i,n,a,r){try{var s=e[a](r),c=s.value}catch(e){o(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function m(e){return function(){var t=this,o=arguments;return new Promise(function(i,n){var a=e.apply(t,o);function r(e){v(a,i,n,r,s,"next",e)}function s(e){v(a,i,n,r,s,"throw",e)}r(void 0)})}}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function b(e,t){var o,i,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(o)throw TypeError("Generator is already executing.");for(;r;)try{if(o=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var g="aiSearchRecommend",S=(0,r.Z)(g),C=void 0,_=void 0,w={},T=function(){var e;if(w&&w.title&&(null===(e=w.item_list)||void 0===e?void 0:e.length))return w},x=function(e){w=e},I="AI_SEARCH_RECOMMEND_KEY";var O=(i=m(function(){var e,t,o;return b(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.su.get({key:I})];case 1:if((e=i.sent())&&e.json&&e.beginTimeMs){if(o=e.json.cache_time||0,S("getRecommendKvData resp: beginTimeMs=".concat(e.beginTimeMs," cacheTime=").concat(o)),(0,s.Z)(e.beginTimeMs,1e3*o))return[2,void 0];if(e.json.title&&(null===(t=e.json.item_list)||void 0===t?void 0:t.length))return[2,e.json]}return[2,void 0];case 2:return S("getRecommendKvData err: ",i.sent()),[2,void 0];case 3:return[2]}})}),function(){return i.apply(this,arguments)}),E=function(e){n.su.set({key:I,value:e})};t.Z={components:{ExposureBlock:d.Z,RecommendItem:p.Z},mixins:[n.jB,n.uW,f.Z],data:function(){return{reportExtInfo_:{},loading:!1,refresh:!1,hasMore:!1,showRefresh:!1,title:"",recommendList:[]}},computed:{blockReportId:function(){return"2|1003|".concat(encodeURIComponent(this.title))}},created:function(){return m(function(){var e,t,o;return b(this,function(i){switch(i.label){case 0:if(_=null===(e=n.xB.chatbotExtParams)||void 0===e?void 0:e.aiSearchRecommendBypassInfo,t=T())return this.handleRecommendData(t),[2];if(_)return[3,2];return[4,O()];case 1:if(o=i.sent())return this.handleRecommendData(o),[2];i.label=2;case 2:return this.getAiSearchRecommendList(),[2]}})}).apply(this)},methods:{getBlockReportId:function(){return[this.blockReportId,"",JSON.stringify(this.reportExtInfo_)].join("$$")},getItemReportId:function(e,t){return[this.blockReportId,"".concat(t+1,"|").concat(t+1,"|").concat(encodeURIComponent(e.query),"||1|").concat(encodeURIComponent(e.doc_ext_info),"|||title|"),JSON.stringify(this.reportExtInfo_)].join("$$")},handleRecommendData:function(e){var t;console.log("handleRecommendData: ",e),(null===(t=e.item_list)||void 0===t?void 0:t.length)&&(this.title=e.title,this.recommendList=e.item_list,C=e.page_ctx||void 0,_=e.bypass_info||void 0),this.hasMore=e.has_more,this.refresh&&!this.hasMore?n.Gc.$emit(n.U3.showToast,{action:u.g.pure,text:"暂无更多内容"}):this.showRefresh=this.hasMore},getAiSearchRecommendList:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m(function(){var t,o,i,r;return b(this,function(s){switch(s.label){case 0:if(this.loading)return[2];this.loading=!0,this.refresh=e,e&&this.M_clickReportFor26897({itemReportId:this.blockReportId},0,y({actionId:n.At.CLICK_CHANGE},this.reportExtInfo_)),t=Date.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,a.z7.getAiSearchRecommendList({request_type:this.refresh?1:void 0,page_ctx:C,bypass_info:_})];case 2:return i=(null==(o=s.sent())?void 0:o.json)||{},this.handleRecommendData(i),x(i),E({json:i,beginTimeMs:Date.now()}),this.reportExtInfo_={requestId:o.request_id,searchId:o.search_id},S("reportExtInfo_: ",this.reportExtInfo_),[3,5];case 3:return r=s.sent(),S("req err: ",(0,c.Z)(r)),n.yG.reportJsCore({stack:"".concat(g," req err: ").concat((0,c.Z)(r))}),[3,5];case 4:return S("req cost-> ",Date.now()-t),this.loading=!1,[7];case 5:return[2]}})}).apply(this)},onClickItem:function(e){var t,o,i=e.item,a=e.index,r=[{key:"interact_bypass_info",textValue:i.bypass_info||""}],s={scene:n.xB.scene,query:i.query,parentSearchID:this.M_composeParentSid({t:l.ZP.parentType.MMSEARCH_TYPE_TOPQA_FOR_SOCIAL_RECOMMEND,s:"",kv:{search_id:i.searchId}}),shareKey:i.searchId,historyKvItems:r,extParams:{crossExtReqParams:[{key:"topQAShareKey",textValue:i.searchId||""}],chatbotExtParams:{historyKvItems:r}}};S("onTapItem",i,a,s),n.Gc.$emit(n.U3.CHAT_INPUT_CONFIRM,(t=y({},s),o=(o={noScroll:!0,singleChat:!0,noFakeBox:!0,noRoute:!1},o),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}),t)),this.M_clickReportFor26897({itemReportId:this.getItemReportId(i,a)},a,y({actionId:n.At.VERTICAL},this.reportExtInfo_))},onLongPressItem:function(e){var t=e.item;return m(function(){var e,o,i,r;return b(this,function(r){switch(r.label){case 0:if(!t.debug_info||!t.searchId)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),n.Gc.$emit(n.U3.showToast,{action:u.g.loading,text:""}),o={docid:t.searchId,debug_info:t.debug_info},[4,a.z7.getRecommendDebugInfo(o)];case 2:return(i=null===(e=r.sent().json)||void 0===e?void 0:e.readable_debug_info)?(n.Gc.$emit(n.U3.hideToast),this.M_serviceSearchGo({pop:{type:h.f.popDebugInfo,header:{close:!1,closeArrow:!0},popTitle:"「DEBUG」",popDesc:o.docid,debugInfo:i}})):n.Gc.$emit(n.U3.showToast,{action:u.g.pure,text:"暂无debug信息"}),[3,4];case 3:return r.sent(),n.Gc.$emit(n.U3.showToast,{action:u.g.pure,text:"暂无debug信息"}),[3,4];case 4:return[2]}})}).apply(this)}}}},855011:function(e,t,o){var i=o(513878);t.Z={components:{FriendListItem:i.Z},props:{item:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},computed:{tags:function(){return this.item.tags||[]}},methods:{onClickItem:function(){this.$emit("click-item",{item:this.item,index:this.index})},onLongPressItem:function(){this.$emit("long-press-item",{item:this.item,index:this.index})}}}},829982:function(e,t){t.Z={name:"TransitionAnimate",props:{direction:{type:String,default:"top"},enabled:{type:Boolean,default:!0},mode:{type:String,default:"slide-fade"}},computed:{transitionName:function(){return"opacity"===this.mode?"opacity":"slide-fade-".concat(this.direction)},enterActiveClass:function(){return"opacity"===this.mode?"opacity-enter-active":"slide-fade-".concat(this.direction,"-enter-active")},leaveActiveClass:function(){return"opacity"===this.mode?"opacity-leave-active":"slide-fade-".concat(this.direction,"-leave-active")},enterClass:function(){return"opacity"===this.mode?"opacity-enter":"slide-fade-".concat(this.direction,"-enter")},leaveToClass:function(){return"opacity"===this.mode?"opacity-leave-to":"slide-fade-".concat(this.direction,"-leave-to")}}}},956757:function(e,t,o){var i,n,a=o(798509),r=o(783466),s=o(791191),c=o(420629),l=o(525770),u=o(619269),h=o(728223),d=o(486920);function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}var f={INIT:"说出问题",RECORDING:"松手问AI，上滑取消",TOO_SHORT:"说话时间太短",WILL_CANCEL:"松手取消",NOT_CONTENT:"未识别到内容"};t.Z={name:"VoiceDialog",components:{TransitionAnimate:l.Z,ChatToolBtns:d.Z},mixins:[u.Z],props:{isNewChatbot:{type:Boolean,default:!1},isHome:{type:Boolean,default:!1}},data:function(){return{tipText:f.INIT,startY:0,moveY:0,isHolding:!1,isWillCancel:!1,touchStartTime:0,tipTextTimer:null,showContinuesTimer:null,textHeightStyle:{},noContentTimer:null,cacheContent:"",isTextareaDiabled:!1,isShowVoiceAnimate:!1,animatePress:!0,isEmitLight:!1,longPressTimer:null,voiceDialogHeight:0,isShowNewVoice:!1,showNewVoiceTimer:null}},computed:(i=p({},(0,c.rn)({keyboardHeight:function(e){return e.result.keyboardHeight},chatMode:function(e){return e.chatbot.chatMode},isSearchKeyboardShow:function(e){return e.result.isSearchKeyboardShow}})),n=(n={isShow:function(){return(!this.isHome||!this.isNewChatbot)&&(this.chatMode===s.jE.VOICE||this.chatMode===s.jE.VOICE_CONTINUES||this.chatMode===s.jE.VOICE_FOLD)},isShowContinues:function(){return this.chatMode===s.jE.VOICE_CONTINUES},isShowMask:function(){return this.chatMode===s.jE.VOICE},voiceGifUrl:function(){return a.Zr.isDarkModeRef()?"https://search.wxqcloud.qq.com/t/fed_upload/0b72ab740595e804281af328cea6761e/voice-dark.gif":"https://search.wxqcloud.qq.com/t/fed_upload/c1d64326d7cd1cc47c2825f988d69c7e/voice-icon.gif"},isVoiceFoldMode:function(){return this.chatMode===s.jE.VOICE_FOLD},shouldDrawCanvas:function(){return this.isShow&&this.isShowVoiceAnimate},voiceReportId:function(){return["1|64|".concat(encodeURIComponent("搜索框")),"1|1|voice_input||1||||voice_input|"].join("$$")},keyboardReportId:function(){return["1|64|".concat(encodeURIComponent("搜索框")),"1|1|keyboard||1||||keyboard|"].join("$$")},voiceUrl:function(){return this.isShowVoiceAnimate?"https://res.wx.qq.com/t/components/icons/base/mike_on_filled.svg":"https://res.wx.qq.com/t/components/icons/base/mike_on_medium.svg"}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),watch:{keyboardHeight:{immediate:!0,handler:function(e){this.voiceDialogHeightStyle={height:"".concat("calc(".concat(e,"px - var(--SAFE-BOTTOM, 0px))"))}}},isEmitLight:function(){r.h.vibrateShort({style:"light"})},chatMode:function(e){this.updateShowNewVoice(e),e===s.jE.VOICE_CONTINUES||e===s.jE.VOICE?document.body.style.overflow="hidden":document.body.style.overflow=""},shouldDrawCanvas:{handler:function(e){var t=this;e&&this.$nextTick(function(){t.drawCurveChart()})},immediate:!0},voiceDialogHeight:{handler:function(e){this.$emit("voice-dialog-height-change",e)},immediate:!0},isSearchKeyboardShow:function(e){if(!!this.isHome&&!!this.isNewChatbot)e?this.isShowNewVoice=!1:(this.$store.dispatch("chatbot/handleChatModeChange",{status:s.jE.NORMAL}),this.isShowNewVoice=!0)}},created:function(){var e=this;a.Gc.$on(a.U3.CHAT_VOICE_STATUS,function(t){var o=t.status,i=t.content;switch(o){case s._r.START_FETCH:e.cacheContent="",e.isTextareaDiabled=!1;break;case s._r.TOO_SHORT:e.isTextareaDiabled=!1,a.Gc.$emit(a.U3.showToast,{action:h.g.warn,text:f.TOO_SHORT});break;case s._r.CANCEL:e.setTipText(f.INIT),e.cacheContent="",e.isTextareaDiabled=!1;break;case s._r.RECORDING:i&&(e.isTextareaDiabled=!0);break;case s._r.COMPLETE:""===i&&e.setTipText(f.INIT),e.cacheContent=""}}),a.Zr.watchMatchMediaColor(function(){e.drawCurveChart()}),this.updateShowNewVoice(s.jE.NORMAL)},beforeDestroy:function(){this.clearNoContentTimer(),a.Gc.$off(a.U3.CHAT_VOICE_STATUS),this.showContinuesTimer&&(clearTimeout(this.showContinuesTimer),this.showContinuesTimer=null)},methods:{drawCurveChart:function(){var e=this.$refs.curveCanvas;if(e){var t=e.getContext("2d"),o=window.devicePixelRatio||1,i=window.innerWidth,n=163+parseInt(getComputedStyle(document.documentElement).getPropertyValue("--SAFE-BOTTOM")||"0");e.width=i*o,e.height=n*o,e.style.width="".concat(i,"px"),e.style.height="".concat(n,"px"),t.scale(o,o),t.clearRect(0,0,i,n),t.beginPath(),t.moveTo(0,n),t.lineTo(0,36),t.quadraticCurveTo(i/2,-36,i,36),t.lineTo(i,n),t.lineTo(0,n),t.closePath(),t.fillStyle=a.Zr.isDarkModeRef()?"#2b2b2b":"#ebebeb",t.fill()}},handleChangeVoiceInput:function(){this.isShowVoiceAnimate=!0,this.chatMode!==s.jE.VOICE&&this.$store.dispatch("chatbot/handleChatModeChange",{status:s.jE.VOICE_CONTINUES})},handleClick:function(e){this.$emit("click",e)},onClickMask:function(){if(!this.isTextareaDiabled)this.$store.dispatch("chatbot/handleChatModeChange",{status:s.jE.NORMAL})},clearLongPressTimer:function(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)},clearNoContentTimer:function(){this.noContentTimer&&(clearTimeout(this.noContentTimer),this.noContentTimer=null)},setTipText:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.tipTextTimer&&(clearTimeout(this.tipTextTimer),this.tipTextTimer=null),this.tipText=e,o&&(this.tipTextTimer=setTimeout(function(){t.isHolding?t.tipText=f.RECORDING:t.tipText=f.INIT,t.tipTextTimer=null},2e3))},onTouchStart:function(e){var t=this;this.clearLongPressTimer(),this.isHolding=!0,this.setTipText(f.RECORDING),this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.RECORDING),this.touchStartTime=Date.now(),this.startY=e.touches[0].clientY,this.moveY=this.startY,r.h.operateStreamVoiceInput({type:"start"}),r.h.vibrateShort({style:"light"}),a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{status:s._r.START_PRESS}),this.M_clickReportFor26897({itemReportId:this.voiceReportId},0,{actionId:a.At.LONG_PRESS_VOICE}),this.clearNoContentTimer(),this.noContentTimer=setTimeout(function(){""===t.cacheContent&&t.setTipText(f.NOT_CONTENT,!0)},4e3),this.longPressTimer=setTimeout(function(){t.setTipText(f.RECORDING),t.isWillCancel=!1,t.isEmitLight=!1,t.handleChangeVoiceInput()},200)},onTouchMove:function(e){this.clearLongPressTimer(),this.moveY=e.touches[0].clientY,this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.RECORDING),this.startY-this.moveY>100?(this.setTipText(f.WILL_CANCEL),this.isWillCancel=!0,this.isEmitLight=!0):(this.setTipText(f.RECORDING),this.isWillCancel=!1,this.isEmitLight=!1),Date.now()-this.touchStartTime>=200&&this.handleChangeVoiceInput()},onTouchEnd:function(){var e=this;this.clearNoContentTimer(),this.clearLongPressTimer();var t=Date.now()-this.touchStartTime;if(this.isHolding=!1,!this.isWillCancel&&t<500){this.setTipText(f.TOO_SHORT,!0),this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.CANCEL),a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{status:s._r.TOO_SHORT,content:""}),this.isShowVoiceAnimate=!1,this.animatePress=!1,setTimeout(function(){e.animatePress=!0},300);return}this.isWillCancel?(this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.CANCEL),a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{status:s._r.CANCEL,content:""}),this.M_clickReportFor26897({itemReportId:this.voiceReportId},0,{actionId:a.At.CLICK_CANCEL}),this.setTipText(f.INIT)):this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.COMPLETE),this.isShowVoiceAnimate=!1,this.animatePress=!1,setTimeout(function(){e.animatePress=!0},300),r.h.operateStreamVoiceInput({type:"stop"}),this.isWillCancel=!1},handleToggleFocus:function(){this.$store.dispatch("chatbot/handleChatModeChange",{status:s.jE.NORMAL_FOCUS}),r.h.vibrateShort({style:"light"}),this.$store.dispatch("chatbot/setFrontVoiceStatus",s.fD.CANCEL),r.h.operateStreamVoiceInput({type:"stop"}),this.M_clickReportFor26897({itemReportId:this.keyboardReportId},0,p({actionId:a.At.SWITCH_KEYBOARD},this.reportExtInfo))},updateShowNewVoice:function(e){var t=this;this.showNewVoiceTimer&&(clearTimeout(this.showNewVoiceTimer),this.showNewVoiceTimer=null),e===s.jE.NORMAL_FOCUS?this.isShowNewVoice=!1:this.showNewVoiceTimer=setTimeout(function(){t.isNewChatbot&&t.isHome&&t.chatMode!==s.jE.NORMAL_FOCUS&&!t.isSearchKeyboardShow?t.isShowNewVoice=!0:t.isShowNewVoice=!1,t.showNewVoiceTimer=null},100)}}}},442858:function(e,t,o){var i=o(798509),n=o(448188),a=o(753260),r=o(609258),s=o(11689),c=o(206830),l=o(431375),u=o(728223),h=o(185048),d=o(984928),p=o(816579),f=o(430077),v=o(532452),m=o(974275),y=o(638986);o(67916),o(325223),o(956054);var b=o(525770),g=o(333298),S=o(791191),C=o(420629),_=o(840306),w=o(151285),T=o(237168),x=o(142862),I=o(65886),O=o(703547),E=o(444542),R=o(783466);o(84762);var P=o(697932),k=o(736312),A=o(349854),D=o(619269),N=o(144007),M=o(710428),H=o(633537),B=o(735055),Z=o(838605),j=o(472114),$=o(174077),L=o(691409),F=o(407778);function V(e,t,o,i,n,a,r){try{var s=e[a](r),c=s.value}catch(e){o(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function q(e){return function(){var t=this,o=arguments;return new Promise(function(i,n){var a=e.apply(t,o);function r(e){V(a,i,n,r,s,"next",e)}function s(e){V(a,i,n,r,s,"throw",e)}r(void 0)})}}function U(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}function W(e,t){var o,i,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(o)throw TypeError("Generator is already executing.");for(;r;)try{if(o=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var K="AI_VOICE_MODE";t.Z={components:{ChatTextarea:a.Z,SearchDialog:r.Z,HeightCollapse:s.Z,ChatHistory:p.Z,Recommend:f.Z,FakeAppendChatInput:v.Z,CustomNavBar:m.Z,TransitionAnimate:b.Z,OpacityAnimateShow:I.Z,VisibleExposeBlock:T.Z,HomeTitle:P.Z,ExposureBlock:A.Z,StopButton:M.ZP,DeepResearchExposeBlock:H.Z,DrBackground:j.Z,AiGenerateId:$.Z},mixins:[l.Z,D.Z,c.Z,_.Z],provide:function(){var e=this;return{getCustomNavBarHeight:function(){return e.customNavBarHeight},getSafeContentHeight:function(){var t=e.customNavBarHeight||0,o=e.getCustomBottomHeight();return window.innerHeight-t-o},getCustomBottomHeight:this.getCustomBottomHeight}},data:function(){return{canShowAnswerStop:!1,canShowHistory:!0,hasGoToNextChatbot:!1,needToClearInput:!1,isTakeingScreenshot:!1,customNavBarHeight:0,isFirstEnter:!0,showCustomNavBar:!1,isIosCanShowCustomNavBar:!1,showHighBottom:!1,isHolderVisible:!0,parentSessionType:0,stopBtnStyle:0,stopText:"",customNavBarTitle:"",pageWidth:0,chatTextareaHeight:0,spacerHeight:0,mountedIndex:-1}},computed:G(U({},(0,C.rn)({resultObj:function(e){return e.result.self.resultObj},chatMode:function(e){return e.chatbot.chatMode},frontVoiceStatus:function(e){return e.chatbot.frontVoiceStatus},isRelaunch:function(e){return e.chatbot.isRelaunch},canShowAppendChatInput:function(e){return e.chatbot.canShowAppendChatInput},isAnswerFade:function(e){return e.chatbot.isAnswerFade}})),{canShowHistoryNavBarBtn:function(){return this.isChatbot2&&!this.isReportPage&&!i.xB.chatbotExtParams.noHistoryIcon},canShowNewConversation:function(){var e;return this.isChatbot2&&!!(null===(e=this.resultObj.data)||void 0===e?void 0:e.length)&&!this.isDeepResearchStyle},isChatbotTeach:function(){return this.canShowHistory,!this.isShare&&!i.xB.chatbotSecond},isChatbotHome:function(){return this.isChatbot2&&this.isChatbotTeach},isVoiceMode:function(){return this.chatMode===S.jE.VOICE||this.chatMode===S.jE.VOICE_CONTINUES},exposeConfig:function(){return{isStayTimeExposeReportToKv:function(){return!1}}},isSnapshot:function(){return[d.ZP.scene.MMSEARCH_SCENE_AI_SEARCH_NEWS_JUMP].includes(i.xB.scene)},placeholder:function(){var e;return this.isRelaunch?"提出新的问题...":(null===(e=this.resultObj.data)||void 0===e?void 0:e.length)?"继续提问...":"提出你的问题..."},isReportPage:function(){return this.realDataList.some(function(e){return[139].includes(e.type)})||i.xB.chatbotExtParams.deepResearchShareType===B.HE.Report},navBarTitle:function(){return this.isChatbot2||this.isDeepResearchStyle||i.xB.chatbotExtParams.useCustomNavBarTitle||this.isReportPage?this.customNavBarTitle:"AI搜索"},isTitleLeftAligned:function(){return!!this.isDeepResearchStyle},isShare:function(){return[d.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_CHAT,d.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_MOMENT,d.ZP.scene.MMSEARCH_SCENE_AI_SEARCH_CHAT_JUMP,d.ZP.scene.MMSEARCH_SCENE_AI_SEARCH_MOMENT_JUMP,d.ZP.scene.MMSEARCH_SCENE_AI_SEARCH_FAVOR_JUMP,d.ZP.scene.MMSEARCH_SCENE_AI_SEARCH_QRCODE_JUMP].includes(i.xB.scene)&&i.xB.shareFromChatbot},isSingleShare:function(){return this.isShare&&!i.xB.chatbotExtParams.conversationId},hasConversationList:function(){return!!this.$store.getters["chatbot/conversationList"].length},canShowMore:function(){return!this.isChatbotTeach},pageStyle:function(){return{"--nav-bar-height":"".concat(this.customNavBarHeight,"px"),"--stop-btn-holder-height":(0,M.D1)(this.stopBtnStyle).height,"--chatbot-page-width":"".concat(this.pageWidth,"px")}},realDataList:function(){return(this.resultObj.data||[]).filter(function(e){return!e.isFake})},initShowChatTextArea:function(){return!(i.xB.chatbotSecond||i.xB.query||i.xB.chatbotExtParams.shareId||i.xB.chatbotExtParams.historyReplayData)},visibleReportEventType:function(){return O.cY.AI_SEARCH},visibleReportData:function(){return{conversationId:i.xB.conversationId,sessionId:i.xB.sessionId}},isCommentInputBarShow:function(){return E.cS.show},canShowBottomHolder:function(){return(this.canShowAppendChatInput||this.isCommentInputBarShow)&&!this.isTakeingScreenshot},isChatbot2:function(){return!1},showAnswerStopBtn:function(){return this.canShowAnswerStop||[M.ew.DeepResearchError,M.ew.DeepResearchFinish,M.ew.DeepResearchRunningButCantStop].includes(this.stopBtnStyle)},hasDeepResearchBox:function(){return this.realDataList.find(function(e){return[138,139].includes(e.type)})},highHolderStyle:function(){return this.spacerHeight>0?{height:"calc(50vh - ".concat(this.spacerHeight,"px)")}:{}}}),watch:{hasConversationList:function(e,t){!e&&t&&i.Gc.$emit(i.U3.dialogHide)},chatMode:function(){this.isFirstEnter&&(this.isFirstEnter=!1)},canShowAnswerStop:function(e){var t;if(e&&(null===(t=this.realDataList)||void 0===t?void 0:t.length)){var o,i,n=this.genReport25032ParamsByData(null===(i=this.realDataList)||void 0===i?void 0:i[(null===(o=this.realDataList)||void 0===o?void 0:o.length)-1],"".concat(encodeURIComponent("停止回答"),":stop_answer"));(0,x.Z)(G(U({},n),{actionType:d.At.EXPOSE_ITEM}))}},isDeepResearchStyle:function(e){e?i.Gc.$emit(i.U3.SET_BODY_NO_BOUNCE):i.Gc.$emit(i.U3.UNSET_BODY_NO_BOUNCE)}},mounted:function(){if(!!i.xB.chatbot){if(i.Gc.$emit(i.U3.SET_BODY_BG_WHITE),i.xB.localSearchQuery){var e;null===(e=this.$refs.topChatTextArea)||void 0===e||e.setMessage(i.xB.localSearchQuery)}}},created:function(){var e,t=this,o=this;i.Gc.$on(i.U3.CHAT_INPUT_CONFIRM,(e=q(function(e,t){var n,a,r,s,c,l,p,f,v,m;return W(this,function(b){switch(b.label){case 0:if(!(s=e.query)&&(c=!0,o.uploadFileList.length>0&&(c=!1),o.isSingleShare&&(c=!1),c))return[2];if(o.restoreUserMode({data:e}),o.isTyping())return i.Gc.$emit(i.U3.showToast,{action:u.g.pure,text:"答案还在生成中"}),[2];(null==e?void 0:null===(n=e.uploadFileList)||void 0===n?void 0:n.length)&&o.$store.dispatch("chatbot/setUploadFileList",{uploadFileList:e.uploadFileList}),e.noReportJump||h.ZP.reportJumpType({businessType:(null==t?void 0:t.data.real_type)||(null==t?void 0:t.data.type),subType:null==t?void 0:t.data.subType,pageType:d.ZP.pageType[o.$route.name],docId:null==t?void 0:t.item.docID,clickId:null===(a=o.$store)||void 0===a?void 0:a.state.result.state.clickReportId,clickType:2,jumpType:e.jumpType||d.ZP.jumpType.SET_QUERY,newSearchType:d.ZP.searchType.CHATBOT,baseCtx:t}),i.Gc.$emit(i.U3.CHAT_VOICE_STATUS,{status:S._r.START_FETCH});if(!e.isRenewConversation&&!e.singleChat&&(!y.t.getConversationId()||!y.t.isConversationCanAsk())&&(i.xB.chatbotExtParams.transferHistoryInfo?o.transferSnapshotToHistory(i.xB.chatbotExtParams.transferHistoryInfo):!y.t.isConversationCanAsk()&&o.realDataList.length?(y.t.leave(),l=o.realDataList.map(function(e){return e.searchID||e.vueSearchId}),y.t.transferSnapshotToHistory({searchId:l[0],transferSearchIds:l})):y.t.enter()),o.canShowHistory=!1,o.isRequesting=!0,e.isRenewConversation&&(o.$store.dispatch("chatbot/setIsAnswerFade",!0),o.$store.commit({type:"result/self/setResultObj",data:{}}),o.canShareStatus=!0,y.t.leave(),y.t.enter()),null===(r=o.$refs.topChatTextArea)||void 0===r||r.setVisible(!1),p=i.Zr.generateGuuId(),!e.noFakeBox&&o.appendFakeBox({query:s,rid:p}),!e.singleChat)return[3,1];return v="",[3,4];case 1:if(m=e.conversationId)return[3,3];return[4,y.t.ensureConversationId()];case 2:m=b.sent(),b.label=3;case 3:v=m,b.label=4;case 4:return f=v,o.beforeGetSearchData(G(U({},e),{requestId:p,conversationId:f})),[2]}})}),function(t,o){return e.apply(this,arguments)})),i.Gc.$on(i.U3.TOP_QA_FINISH,function(e){var o,i,n=e.searchId,a=e.onlyCancelStopBtn,r=e.stopBtnStyle,s=e.stopText;if(t.stopBtnStyle=r||0,t.stopText=s||"",a){t.canShowAnswerStop=!1;return}var c=t.typingMap.size;t.typingMap.delete(n),0===t.typingMap.size&&((null===(o=t.$parent)||void 0===o?void 0:o.currentView)!=="home"&&(null===(i=t.$refs.topChatTextArea)||void 0===i||i.setFake({animate:!!c})),t.canShowAnswerStop=!1,t.checkHighBottomCanShow(),(0,k.Jz)({appId:d.tv.OUT_LINK,actionName:"topQA/updateTypingSearchId",data:{typingSearchId:""}}))}),i.Gc.$on(i.U3.ON_CHATBOT_TAKE_SCREENSHOT,function(){t.takeScreenshotThrottle()}),i.Gc.$on(i.U3.TOP_QA_START,function(e){var o,i=e.searchId,n=e.stopBtnStyle,a=e.stopText;t.canShowAnswerStop=!0,null===(o=t.$refs.topChatTextArea)||void 0===o||o.setVisible(!1),t.typingMap.set(i,!0),t.showHighBottom=!0,t.stopBtnStyle=n||0,t.stopText=a||"",(0,k.Jz)({appId:d.tv.OUT_LINK,actionName:"topQA/updateTypingSearchId",data:{typingSearchId:i}})}),i.Gc.$on(i.U3.CHAT_NEW_CONVERSATION,function(e){if(i.xB.chatbotExtParams.closeWhenNewConversation){var o=null==e?void 0:e.back;o&&localStorage.setItem(d.wT.PARENT_SESSION_TYPE_TEMP_KEY,"".concat(o)),i.hi.removeWebviewPage({index:0,animated:!1})}else{var n=null==e?void 0:e.open;t.openNewPageSearch({extParams:{chatbotSecond:0,chatbotExtParams:{uploadFileList:[],parentSessionType:n}}})}}),i.Gc.$on(i.U3.ON_SCREENSHOT,function(){var e=t.getMaxExposeHeightBox();if(!!e)(0,x.Z)(G(U({},t.genReport25032ParamsByData(e,"right_corner:right_corner")),{actionType:d.At.CAPTURE_SCREEN}))}),n.ZP.onWebviewResume(function(){t.hasGoToNextChatbot}),window.addEventListener("scroll",function(){t.checkHighBottomCanShow()},!1),R.N.onRefresh(function(){i.xB.curRouteName===d.kO.CHATBOT&&window.top.location.reload()}),i.Gc.$on(i.U3.CHATBOT_SHOW_NAV_BAR_TITLE,function(e){t.customNavBarTitle=e}),this.listenCancelButtonClick(),this.init()},beforeDestroy:function(){this.stopPollingCheckHisory()},methods:{onChildComponentMounted:function(e){this.mountedIndex=Math.max(this.mountedIndex,e)},canShowAiGenerateId:function(e,t){return 52===e.type&&!this.canShowAnswerStop&&!e.isFake&&this.mountedIndex>=t},onChatTextareaHeightChange:function(e){var t=this.chatTextareaHeight;this.chatTextareaHeight=e,(0,L.KG)(5)&&t&&e>t&&this.$nextTick(function(){(0,L.Bo)()})},getMaxExposeHeightBox:function(){var e,t,o,i=Array.from((null!==(o=null===(e=this.$refs.visibleExposeBlockRef)||void 0===e?void 0:e.exposeNodeMap)&&void 0!==o?o:new Map).values()).map(function(e){return e.businessAttr["visible-report-id"]});return null===(t=this.realDataList.filter(function(e){return i.includes(e.vueSearchId)}).map(function(e){var t=document.querySelector('[visible-report-id="'.concat(e.vueSearchId,'"]'));return{box:e,visibleHeight:(0,Z.getVisibleHeight)(t)}}).sort(function(e,t){return t.visibleHeight-e.visibleHeight})[0])||void 0===t?void 0:t.box},getCustomBottomHeight:function(){var e=this.showAnswerStopBtn?(0,M.qC)(this.stopBtnStyle):0;if(e)return e;var t=i.Zr.getSafeBottomHeight(this.$el);return e+(Number.isNaN(t)?0:t)},onNewTeachExpose:function(e){return q(function(){return W(this,function(t){return this.M_exposeReportFor26897(e),[2]})}).apply(this)},isTyping:function(){return this.isRequesting||this.typingMap.size>0},restoreUserMode:function(e){var t,o=e.data,n=(null!=o?o:{}).sendType;if(!![S.NZ.voice,S.NZ.text].includes(n))o.parentSearchID&&(t=o.parentSearchID.split(":")[0]),[o.parentType,Number(t)].includes(d.X$.MMSEARCH_TYPE_AISEARCH_MIC)?i.su.set({key:K,value:S.jE.VOICE}):i.su.set({key:K,value:S.jE.NORMAL})},onTapHistoryMore:function(){this.M_serviceSearchGo({pop:{type:42}})},onTapHistoryEdit:function(){this.M_serviceSearchGo({pop:{type:42,isEdit:!0}})},initParentSessionType:function(){i.xB.aiSearchPositionType?1===i.xB.aiSearchPositionType?this.parentSessionType=N.c3.GlobalTeachTopAISearch:2===i.xB.aiSearchPositionType?this.parentSessionType=N.c3.GlobalTeachSearchBoxAISearch:0===i.xB.aiSearchPositionType?this.parentSessionType=N.c3.GlobalTeachBottomAISearch:3===i.xB.aiSearchPositionType&&(this.parentSessionType=N.c3.GlobalTeachSearchBoxAISearchWithYB):this.isChatbotHome&&i.xB.chatbotExtParams.parentSessionType?this.parentSessionType=i.xB.chatbotExtParams.parentSessionType:i.xB.scene===d.ZP.scene.MMSEARCH_SCENE_TOPQA_AI_SEARCH_GLOBAL_PAGE&&!i.xB.chatbotSecond&&(this.parentSessionType=N.c3.GlobalTeachBottomAISearch)},init:function(){return q(function(){var e,t,o,n,a,r,s,c,l,u,h,p,f,v;return W(this,function(m){switch(m.label){case 0:if(e=this,(0,g.i)("chatbot init"),y.t.leave(!1),i.Gc.$emit(i.U3.SET_BODY_BG_WHITE),this.initParentSessionType(),this.getNetworkHistoryList(),!((null===(t=i.xB.chatbotExtParams)||void 0===t?void 0:t.useSnapshotPrefetchData)&&((null===(o=i.xB.chatbotExtParams)||void 0===o?void 0:o.snapshotSearchID)||(null===(n=i.xB.chatbotExtParams)||void 0===n?void 0:n.searchId))))return[3,2];return console.error("init useSnapshotPrefetchData",u=(null===(c=i.xB.chatbotExtParams)||void 0===c?void 0:c.snapshotSearchID)||(null===(l=i.xB.chatbotExtParams)||void 0===l?void 0:l.searchId)),[4,i.su.get({key:d.wT.CHATBOT_SNAPSHOT_PREFETCH_DATA})];case 1:if((h=m.sent())&&(null==h?void 0:h.shareKey)===u)return i.Gc.$emit(i.U3.CHAT_GET_SNAPSHOT_PREFETCH_DATA,h),[2];m.label=2;case 2:if(i.xB.chatbotExtParams.shareId)return i.Gc.$emit(i.U3.CHAT_GET_CONVERSATIONS_SHARE,{conversationId:i.xB.chatbotExtParams.conversationId,shareId:i.xB.chatbotExtParams.shareId,deepResearchShareType:i.xB.chatbotExtParams.deepResearchShareType,kvItems:this.$store.getters.getExtReqParams}),[2];if(i.xB.chatbotExtParams.historyReplayData)return i.Gc.$emit(i.U3.CHAT_GET_HISTORY_REPLAY,i.xB.chatbotExtParams.historyReplayData),[2];if(i.xB.chatbotExtParams.startDeepResearch)return i.Gc.$emit(i.U3.DR_CREATE,{query:i.xB.query,parentSearchID:i.xB.parentSearchID}),[2];if(i.xB.chatbotExtParams.modelType&&this.switchModel(i.xB.chatbotExtParams.modelType),(null===(a=i.xB.chatbotExtParams)||void 0===a?void 0:a.uploadFileList)&&this.$store.dispatch("chatbot/setUploadFileList",{uploadFileList:null===(p=i.xB.chatbotExtParams)||void 0===p?void 0:p.uploadFileList}),i.xB.chatbotExtParams.getSnapshotAndAskIfNeeded)return this.getSnapshotAndAskIfNeeded(i.xB.query,i.xB.chatbotExtParams.getSnapshotAndAskIfNeeded),[2];if(i.xB.chatbotExtParams.isErrorPage)return setTimeout(function(){e.handleResultAndReq({},{},{})}),[2];if((i.xB.query||(null===(s=i.xB.chatbotExtParams)||void 0===s?void 0:null===(r=s.uploadFileList)||void 0===r?void 0:r.length)||this.isSingleShare)&&(v=this.isShare||[d.X$.MMSEARCH_TYPE_TOPQA_FOR_SOCIAL_RECOMMEND].includes(i.xB.parentType)||!!(null===(f=i.xB.chatbotExtParams)||void 0===f?void 0:f.searchId),i.Gc.$emit(i.U3.CHAT_INPUT_CONFIRM,{query:i.xB.query,parentSearchID:i.xB.parentSearchID,noScroll:!0,noRoute:!0,singleChat:v||i.xB.shareFromChatbot,noFakeBox:v||i.xB.shareFromChatbot,noReportJump:!0})),this.isShare)return[2];return i.hi.preloadLiteApp({appId:"wxalite662c58496ffa1efd119b5eb4ea45a3ba",page:"pages/auto-jumping/auto-jumping"}),!i.xB.chatbotSecond&&i.hi.preloadWebSearchPage(),[2]}})}).apply(this)},listenCancelButtonClick:function(){},onBackToHome:function(){var e=localStorage.getItem(d.wT.PARENT_SESSION_TYPE_TEMP_KEY);e&&localStorage.removeItem(d.wT.PARENT_SESSION_TYPE_TEMP_KEY),this.parentSessionType=Number(e)||N.c3.BackFromResult},onBackToTeach:function(){if(this.getNetworkHistoryList(),this.loadLocalModel(),this.needToClearInput){var e;null===(e=this.$refs.topChatTextArea)||void 0===e||e.setMessage(""),this.needToClearInput=!1}},onStopAnswer:function(){var e,t;i.Gc.$emit(i.U3.TOP_QA_TERMINATE,{bypassReportParams:this.genReport25032ParamsByData(null===(t=this.realDataList)||void 0===t?void 0:t[(null===(e=this.realDataList)||void 0===e?void 0:e.length)-1],"".concat(encodeURIComponent("停止回答"),":stop_answer"))})},openNewPageSearch:function(e){var t,o,n=this,a=e.scene,r=e.query,s=e.extParams,c=void 0===s?{}:s;this.hasGoToNextChatbot=!0,i.hi.startWebSearch({query:r,type:d.WI.TOP_QA,scene:a||i.xB.scene,sessionId:i.xB.sessionId,extParams:encodeURIComponent(JSON.stringify(G(U({hideNavBar:i.FP.isSupportOnAiVoice,sessionId:i.xB.sessionId,chatbot:i.xB.chatbot,chatbotSecond:1},c),{chatbotExtParams:U({closeWhenNewConversation:!!this.isChatbotHome,parentSessionType:this.parentSessionType,uploadFileList:this.uploadFileList.map(function(e){return G(U({},e),{thumbBase64:""})})},null!==(o=null==c?void 0:c.chatbotExtParams)&&void 0!==o?o:{})}))),customNavBarParams:{nativeConfig:{title:r?"".concat(i.Zr.L("AI搜索")," - ").concat(r):"AI搜索"},hideSearchBar:!0,hideNavBar:i.FP.isSupportOnAiVoice}}),(null===(t=this.uploadFileList)||void 0===t?void 0:t.length)&&setTimeout(function(){n.$store.dispatch("chatbot/resetUploadFileList")},500),this.startPollingCheckOnResume()},startPollingCheckOnResume:function(){},stopPollingCheckHisory:function(){console.error("!!stopPollingCheckHisory"),clearInterval(this.pollingCheckHisTimer),this.pollingCheckHisTimer=0},notifyHistoryUpdate:function(){console.error("!!notifyHistoryUpdate"),localStorage.setItem("websearch:CHATBOT_DID_SEARCH",Date.now())},onTapShowMore:function(){var e,t,o,n,a=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.bypassReportParams,c=void 0===s?{}:s;if(this.isErrPage){this.openDefaultShareSheet(c);return}var l=this.realDataList.find(function(e){return i.Zr.isTopQABox(e)}),u=null==l?void 0:null===(o=l.items)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:null===(e=t.itemInfo)||void 0===e?void 0:e.shareKey;if(l&&!u){this.openDefaultShareSheet(c);return}i.Gc.$emit(i.U3.ON_CHATBOT_SHOW_MORE,{bypassReportParams:c,shareKey:u,shareSearchIds:null===(n=this.resultObj.data)||void 0===n?void 0:n.map(function(e){var t,o,i,n,a=null==l?void 0:null===(o=l.items)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.itemInfo;return(null==a?void 0:null===(n=a.cgi)||void 0===n?void 0:null===(i=n.params)||void 0===i?void 0:i.searchId)||(null==e?void 0:e.searchID)||(null==e?void 0:e.vueSearchId)}).filter(function(e){return e}),disableShareToast:this.canShare()?"":"该内容不支持分享"}),setTimeout(function(){a.isTyping()?Array.from(a.typingMap.keys()).forEach(function(e){(0,g.i)("[onTapShowMore] typingMap",e),(0,k.Jz)({appId:d.tv.OUT_LINK,actionName:"topQA/updateTypingSearchId",data:{typingSearchId:e}})}):(0,k.Jz)({appId:d.tv.OUT_LINK,actionName:"topQA/updateTypingSearchId",data:{typingSearchId:""}})},300)},takeScreenshotThrottle:i.Zr.throttle(function(){var e=this,t=this;t.isTakeingScreenshot=!0;var o=(0,F.F)("wxg_wxai_search-eb4e495e926ebeae-".concat(Date.now())),n=JSON.stringify({AIGC:{Label:"1",ContentProducer:"001191440101327598294H1M8MR",ProduceID:"search_".concat(Date.now()),ContentPropagator:"001191440101327598294H2M8MR",PropagateID:"search_".concat(Date.now()),ReservedCode1:o,ReservedCode2:o}});setTimeout(function(){var o;i.hi.takeScreenshot({cropTopHeight:(null===(o=e.$refs.navCustomNavBarRef)||void 0===o?void 0:o.topAreaHeight)||0,exif:n}).then(function(e){console.info("takeScreenshot resp:",e),t.isTakeingScreenshot=!1}),setTimeout(function(){t.isTakeingScreenshot=!1},1e4)},300)}),genReport25032ParamsByData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{if(e&&t){var o,n,a,r,s,c,l,u=null==e?void 0:null===(n=e.items)||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.itemInfo,h=null==e?void 0:null===(a=e.items)||void 0===a?void 0:a[0],p=(null==e?void 0:e.vueSearchId)||(null==u?void 0:null===(s=u.cgi)||void 0===s?void 0:null===(r=s.params)||void 0===r?void 0:r.searchId)||(null==e?void 0:e.searchID)||i.xB.searchId,f=(null==h?void 0:h.docID)||(null==e?void 0:null===(c=e.itemInfo)||void 0===c?void 0:c.oriSid)||"",v=138===e.type?"1":139===e.type?"99":"",m=U({},i.xB.getBase());return this.hasDeepResearchBox&&(m.type=d.WI.DEEP_RESEARCH,m.reqBusinessType=m.type),G(U({},m),{docInfos:["".concat(f,":1")],itemInfos:[t],boxInfo:(0,w.To)(e,this.typePos)||v,itemPoses:["0:".concat(t.split(":")[1])],businessType:e.real_type,resultSubType:e.subType,requestId:e.vueRid,resultType:e.resultType,searchId:p,showType:e.type,query:e.vueQuery||e.query||(null==u?void 0:u.query)||"",svrDocExtInfos:[(null==h?void 0:h.report_extinfo_str)||""],svrBoxExtInfo:e.report_box_extinfo_str||"",pageNumber:null!==(l=e.vuePage)&&void 0!==l?l:this.resultObj.pageNumber,conversationId:e.vueConversationId||i.xB.conversationId})}}catch(e){console.error("genReport25032ParamsByData error:",e)}return null},onHolderVisibleChange:function(e){this.isHolderVisible=e,this.checkHighBottomCanShow()},checkHighBottomCanShow:function(){var e=this;if(!!this.showHighBottom&&!(this.typingMap.size>0)){var t=function(){if(window.scrollY<=1)return!0;var t=document.querySelector(".search-result-wrap:last-child");return!!t&&!!(t.getBoundingClientRect().top>=e.customNavBarHeight-12)||!1}(),o=!this.isHolderVisible;(t||o)&&!this.isTyping()&&(this.showHighBottom=!1)}},onUpdateCustomNavBarHeight:function(e){this.customNavBarHeight=e}}}},317645:function(e,t,o){o.d(t,{Z:function(){return i}});function i(e,t){return Date.now()-e>t||Date.now()<e}},467094:function(e,t,o){o.d(t,{Z:function(){return n}});var i={e150:"\uD83D\uDE8F",e030:"\uD83C\uDF38",e151:"\uD83D\uDEBB",e152:"\uD83D\uDC6E",e031:"\uD83D\uDD31",e032:"\uD83C\uDF39",e153:"\uD83C\uDFE3",e033:"\uD83C\uDF84",e154:"\uD83C\uDFE7",e155:"\uD83C\uDFE5",e034:"\uD83D\uDC8D",e156:"\uD83C\uDFEA",e035:"\uD83D\uDC8E",e036:"\uD83C\uDFE0",e157:"\uD83C\uDFEB",e158:"\uD83C\uDFE8",e037:"⛪",e038:"\uD83C\uDFE2",e159:"\uD83D\uDE8C",e039:"\uD83D\uDE89",e15a:"\uD83D\uDE95",e03a:"⛽",e03b:"\uD83D\uDDFB",e03c:"\uD83C\uDFA4",e03d:"\uD83C\uDFA5",e03e:"\uD83C\uDFB5",e03f:"\uD83D\uDD11",e01f:"\uD83D\uDE85",e140:"\uD83D\uDEBD",e141:"\uD83D\uDD0A",e020:"❓",e142:"\uD83D\uDCE2",e021:"❗",e143:"\uD83C\uDF8C",e022:"❤️",e023:"\uD83D\uDC94",e144:"\uD83D\uDD12",e145:"\uD83D\uDD13",e024:"\uD83D\uDD50",e146:"\uD83C\uDF06",e025:"\uD83D\uDD51",e147:"\uD83C\uDF73",e026:"\uD83D\uDD52",e148:"\uD83D\uDCD6",e027:"\uD83D\uDD53",e149:"\uD83D\uDCB1",e028:"\uD83D\uDD54",e029:"\uD83D\uDD55",e14a:"\uD83D\uDCB9",e14b:"\uD83D\uDCE1",e02a:"\uD83D\uDD56",e14c:"\uD83D\uDCAA",e02b:"\uD83D\uDD57",e14d:"\uD83C\uDFE6",e02c:"\uD83D\uDD58",e02d:"\uD83D\uDD59",e14e:"\uD83D\uDEA5",e14f:"\uD83C\uDD7F️",e02e:"\uD83D\uDD5A",e02f:"\uD83D\uDD5B",e050:"\uD83D\uDC2F",e051:"\uD83D\uDC3B",e052:"\uD83D\uDC36",e053:"\uD83D\uDC2D",e054:"\uD83D\uDC33",e055:"\uD83D\uDC27",e056:"\uD83D\uDE0A",e057:"\uD83D\uDE03",e058:"\uD83D\uDE1E",e059:"\uD83D\uDE20",e05a:"\uD83D\uDCA9",e040:"\uD83C\uDFB7",e041:"\uD83C\uDFB8",e042:"\uD83C\uDFBA",e043:"\uD83C\uDF74",e044:"\uD83C\uDF78",e045:"☕",e046:"\uD83C\uDF70",e047:"\uD83C\uDF7A",e048:"⛄",e049:"☁️",e04a:"☀️",e04b:"☔",e04c:"\uD83C\uDF19",e04d:"\uD83C\uDF04",e04e:"\uD83D\uDC7C",e04f:"\uD83D\uDC31",e50b:"\uD83C\uDDEF\uD83C\uDDF5",e50c:"\uD83C\uDDFA\uD83C\uDDF8",e50d:"\uD83C\uDDEB\uD83C\uDDF7",e50e:"\uD83C\uDDE9\uD83C\uDDEA",e50f:"\uD83C\uDDEE\uD83C\uDDF9",e510:"\uD83C\uDDEC\uD83C\uDDE7",e511:"\uD83C\uDDEA\uD83C\uDDF8",e512:"\uD83C\uDDF7\uD83C\uDDFA",e513:"\uD83C\uDDE8\uD83C\uDDF3",e514:"\uD83C\uDDF0\uD83C\uDDF7",e515:"\uD83D\uDC71",e516:"\uD83D\uDC72",e517:"\uD83D\uDC73",e518:"\uD83D\uDC74",e519:"\uD83D\uDC75",e501:"\uD83C\uDFE9",e502:"\uD83C\uDFA8",e503:"\uD83C\uDFA9",e504:"\uD83C\uDFEC",e505:"\uD83C\uDFEF",e506:"\uD83C\uDFF0",e507:"\uD83C\uDFA6",e508:"\uD83C\uDFED",e509:"\uD83D\uDDFC",e52b:"\uD83D\uDC2E",e40a:"\uD83D\uDE0C",e52c:"\uD83D\uDC30",e40b:"\uD83D\uDE28",e52d:"\uD83D\uDC0D",e40c:"\uD83D\uDE37",e52e:"\uD83D\uDC14",e40d:"\uD83D\uDE33",e52f:"\uD83D\uDC17",e40e:"\uD83D\uDE12",e40f:"\uD83D\uDE30",e530:"\uD83D\uDC2B",e531:"\uD83D\uDC38",e410:"\uD83D\uDE32",e532:"\uD83C\uDD70️",e411:"\uD83D\uDE2D",e533:"\uD83C\uDD71️",e412:"\uD83D\uDE02",e534:"\uD83C\uDD8E",e413:"\uD83D\uDE22",e535:"\uD83C\uDD7E️",e414:"☺️",e536:"\uD83D\uDC63",e415:"\uD83D\uDE04",e416:"\uD83D\uDE21",e537:"™️",e417:"\uD83D\uDE1A",e418:"\uD83D\uDE18",e419:"\uD83D\uDC40",e41a:"\uD83D\uDC43",e51a:"\uD83D\uDC76",e51b:"\uD83D\uDC77",e51c:"\uD83D\uDC78",e51d:"\uD83D\uDDFD",e51e:"\uD83D\uDC82",e51f:"\uD83D\uDC83",e520:"\uD83D\uDC2C",e521:"\uD83D\uDC26",e522:"\uD83D\uDC20",e401:"\uD83D\uDE25",e523:"\uD83D\uDC24",e402:"\uD83D\uDE0F",e524:"\uD83D\uDC39",e403:"\uD83D\uDE14",e525:"\uD83D\uDC1B",e404:"\uD83D\uDE01",e526:"\uD83D\uDC18",e405:"\uD83D\uDE09",e527:"\uD83D\uDC28",e406:"\uD83D\uDE23",e528:"\uD83D\uDC12",e407:"\uD83D\uDE16",e529:"\uD83D\uDC11",e408:"\uD83D\uDE2A",e409:"\uD83D\uDE1D",e52a:"\uD83D\uDC3A",e30b:"\uD83C\uDF76",e42c:"\uD83C\uDFB1",e30c:"\uD83C\uDF7B",e42d:"\uD83C\uDFCA",e42e:"\uD83D\uDE99",e30d:"㊗️",e42f:"\uD83D\uDE9A",e30e:"\uD83D\uDEAC",e30f:"\uD83D\uDC8A",e430:"\uD83D\uDE92",e310:"\uD83C\uDF88",e431:"\uD83D\uDE91",e311:"\uD83D\uDCA3",e432:"\uD83D\uDE93",e312:"\uD83C\uDF89",e433:"\uD83C\uDFA2",e434:"\uD83D\uDE87",e313:"✂️",e314:"\uD83C\uDF80",e435:"\uD83D\uDE84",e436:"\uD83C\uDF8D",e315:"㊙️",e437:"\uD83D\uDC9D",e316:"\uD83D\uDCBD",e438:"\uD83C\uDF8E",e317:"\uD83D\uDCE3",e439:"\uD83C\uDF93",e318:"\uD83D\uDC52",e319:"\uD83D\uDC57",e43a:"\uD83C\uDF92",e43b:"\uD83C\uDF8F",e31a:"\uD83D\uDC61",e43c:"\uD83C\uDF02",e31b:"\uD83D\uDC62",e41b:"\uD83D\uDC42",e41c:"\uD83D\uDC44",e41d:"\uD83D\uDE4F",e41e:"\uD83D\uDC4B",e41f:"\uD83D\uDC4F",e420:"\uD83D\uDC4C",e421:"\uD83D\uDC4E",e422:"\uD83D\uDC50",e301:"\uD83D\uDCDD",e302:"\uD83D\uDC54",e423:"\uD83D\uDE45",e303:"\uD83C\uDF3A",e424:"\uD83D\uDE46",e304:"\uD83C\uDF37",e425:"\uD83D\uDC91",e305:"\uD83C\uDF3B",e426:"\uD83D\uDE47",e306:"\uD83D\uDC90",e427:"\uD83D\uDE4C",e307:"\uD83C\uDF34",e428:"\uD83D\uDC6B",e308:"\uD83C\uDF35",e429:"\uD83D\uDC6F",e309:"\uD83D\uDEBE",e42a:"\uD83C\uDFC0",e30a:"\uD83C\uDFA7",e42b:"\uD83C\uDFC8",e32d:"\uD83D\uDC9C",e20c:"♥️",e20d:"♦️",e32e:"✨",e20e:"♠️",e32f:"⭐",e20f:"♣️",e330:"\uD83D\uDCA8",e210:"#️⃣",e331:"\uD83D\uDCA6",e211:"➿",e332:"⭕",e212:"\uD83C\uDD95",e333:"❌",e213:"\uD83C\uDD99",e334:"\uD83D\uDCA2",e214:"\uD83C\uDD92",e335:"\uD83C\uDF1F",e215:"\uD83C\uDE36",e336:"❔",e216:"\uD83C\uDE1A",e337:"❕",e217:"\uD83C\uDE37️",e338:"\uD83C\uDF75",e218:"\uD83C\uDE38",e339:"\uD83C\uDF5E",e219:"\uD83D\uDD34",e33a:"\uD83C\uDF66",e33b:"\uD83C\uDF5F",e21a:"\uD83D\uDD32",e33c:"\uD83C\uDF61",e21b:"\uD83D\uDD33",e21c:"1️⃣",e33d:"\uD83C\uDF58",e31c:"\uD83D\uDC84",e43d:"\uD83D\uDC92",e43e:"\uD83C\uDF0A",e31d:"\uD83D\uDC85",e43f:"\uD83C\uDF67",e31e:"\uD83D\uDC86",e31f:"\uD83D\uDC87",e440:"\uD83C\uDF87",e441:"\uD83D\uDC1A",e320:"\uD83D\uDC88",e442:"\uD83C\uDF90",e321:"\uD83D\uDC58",e443:"\uD83C\uDF00",e322:"\uD83D\uDC59",e201:"\uD83D\uDEB6",e444:"\uD83C\uDF3E",e323:"\uD83D\uDC5C",e202:"\uD83D\uDEA2",e203:"\uD83C\uDE01",e445:"\uD83C\uDF83",e324:"\uD83C\uDFAC",e446:"\uD83C\uDF91",e204:"\uD83D\uDC9F",e325:"\uD83D\uDD14",e447:"\uD83C\uDF43",e326:"\uD83C\uDFB6",e205:"✴️",e448:"\uD83C\uDF85",e327:"\uD83D\uDC93",e206:"✳️",e449:"\uD83C\uDF05",e328:"\uD83D\uDC97",e207:"\uD83D\uDD1E",e329:"\uD83D\uDC98",e208:"\uD83D\uDEAD",e209:"\uD83D\uDD30",e44a:"\uD83C\uDF07",e44b:"\uD83C\uDF03",e32a:"\uD83D\uDC99",e44c:"\uD83C\uDF08",e32b:"\uD83D\uDC9A",e20a:"♿",e32c:"\uD83D\uDC9B",e20b:"\uD83D\uDCF6",e22e:"\uD83D\uDC46",e10d:"\uD83D\uDE80",e22f:"\uD83D\uDC47",e10e:"\uD83D\uDC51",e10f:"\uD83D\uDCA1",e230:"\uD83D\uDC48",e110:"\uD83C\uDF40",e231:"\uD83D\uDC49",e111:"\uD83D\uDC8F",e232:"⬆️",e112:"\uD83C\uDF81",e233:"⬇️",e113:"\uD83D\uDD2B",e234:"➡️",e114:"\uD83D\uDD0D",e235:"⬅️",e115:"\uD83C\uDFC3",e236:"↗️",e116:"\uD83D\uDD28",e237:"↖️",e117:"\uD83C\uDF86",e238:"↘️",e118:"\uD83C\uDF41",e239:"↙️",e119:"\uD83C\uDF42",e23a:"▶️",e11a:"\uD83D\uDC7F",e23b:"◀️",e11b:"\uD83D\uDC7B",e23c:"⏩",e11c:"\uD83D\uDC80",e23d:"⏪",e11d:"\uD83D\uDD25",e23e:"\uD83D\uDD2F",e21d:"2️⃣",e33e:"\uD83C\uDF5A",e21e:"3️⃣",e33f:"\uD83C\uDF5D",e21f:"4️⃣",e340:"\uD83C\uDF5C",e220:"5️⃣",e341:"\uD83C\uDF5B",e221:"6️⃣",e342:"\uD83C\uDF59",e222:"7️⃣",e343:"\uD83C\uDF62",e101:"\uD83D\uDCEB",e223:"8️⃣",e344:"\uD83C\uDF63",e102:"\uD83D\uDCEE",e224:"9️⃣",e345:"\uD83C\uDF4E",e103:"\uD83D\uDCE9",e225:"0️⃣",e346:"\uD83C\uDF4A",e104:"\uD83D\uDCF2",e226:"\uD83C\uDE50",e347:"\uD83C\uDF53",e105:"\uD83D\uDE1C",e227:"\uD83C\uDE39",e348:"\uD83C\uDF49",e106:"\uD83D\uDE0D",e228:"\uD83C\uDE02️",e349:"\uD83C\uDF45",e107:"\uD83D\uDE31",e229:"\uD83C\uDD94",e108:"\uD83D\uDE13",e109:"\uD83D\uDC35",e34a:"\uD83C\uDF46",e22a:"\uD83C\uDE35",e34b:"\uD83C\uDF82",e22b:"\uD83C\uDE33",e34c:"\uD83C\uDF71",e10a:"\uD83D\uDC19",e22c:"\uD83C\uDE2F",e34d:"\uD83C\uDF72",e10b:"\uD83D\uDC37",e22d:"\uD83C\uDE3A",e10c:"\uD83D\uDC7D",e00e:"\uD83D\uDC4D",e12f:"\uD83D\uDCB0",e00f:"☝️",e250:"\uD83D\uDCF3",e130:"\uD83C\uDFAF",e251:"\uD83D\uDCF4",e131:"\uD83C\uDFC6",e252:"⚠️",e010:"✊",e132:"\uD83C\uDFC1",e253:"\uD83D\uDC81",e011:"✌️",e133:"\uD83C\uDFB0",e012:"✋",e013:"\uD83C\uDFBF",e134:"\uD83D\uDC0E",e135:"\uD83D\uDEA4",e014:"⛳",e015:"\uD83C\uDFBE",e136:"\uD83D\uDEB2",e137:"\uD83D\uDEA7",e016:"⚾",e017:"\uD83C\uDFC4",e138:"\uD83D\uDEB9",e139:"\uD83D\uDEBA",e018:"⚽",e019:"\uD83D\uDC1F",e13a:"\uD83D\uDEBC",e01a:"\uD83D\uDC34",e13b:"\uD83D\uDC89",e13c:"\uD83D\uDCA4",e01b:"\uD83D\uDE97",e13d:"⚡",e01c:"⛵",e13e:"\uD83D\uDC60",e01d:"✈️",e01e:"\uD83D\uDE83",e13f:"\uD83D\uDEC0",e11e:"\uD83D\uDCBC",e23f:"♈",e11f:"\uD83D\uDCBA",e240:"♉",e120:"\uD83C\uDF54",e241:"♊",e242:"♋",e121:"⛲",e001:"\uD83D\uDC66",e243:"♌",e122:"⛺",e002:"\uD83D\uDC67",e244:"♍",e123:"♨️",e124:"\uD83C\uDFA1",e003:"\uD83D\uDC8B",e245:"♎",e125:"\uD83C\uDFAB",e004:"\uD83D\uDC68",e246:"♏",e005:"\uD83D\uDC69",e126:"\uD83D\uDCBF",e247:"♐",e006:"\uD83D\uDC55",e127:"\uD83D\uDCC0",e248:"♑",e007:"\uD83D\uDC5F",e128:"\uD83D\uDCFB",e249:"♒",e008:"\uD83D\uDCF7",e129:"\uD83D\uDCFC",e009:"☎️",e24a:"♓",e12a:"\uD83D\uDCFA",e24b:"⛎",e12b:"\uD83D\uDC7E",e00a:"\uD83D\uDCF1",e24c:"\uD83D\uDD1D",e24d:"\uD83C\uDD97",e00b:"\uD83D\uDCE0",e12c:"〽️",e24e:"\xa9️",e12d:"\uD83C\uDC04",e00c:"\uD83D\uDCBB",e24f:"\xae️",e12e:"\uD83C\uDD9A",e00d:"\uD83D\uDC4A"};function n(e){try{for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o).toString(16).toLowerCase();i[n]?t+=i[n]:t+=e[o]}return t}catch(t){return e}}},228175:function(e,t,o){var i=o(984928),n=o(798509),a=o(420629);t.Z={data:function(){return{M_recallBoxSet:new Set}},computed:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({},(0,a.rn)({resultObj:function(e){return e.result.self.resultObj}})),created:function(){n.Gc.$on(n.U3.ON_REPORT_ALL_ITEMS,this._onExposeAllItems)},beforeDestroy:function(){n.Gc.$off(n.U3.ON_REPORT_ALL_ITEMS,this._onExposeAllItems)},methods:{_onExposeAllItems:function(e){var t=this;null==e||e.forEach(function(e){if((e.actionType===i.At.EFFECTIVE_EXPOSE_50Precent_DOC||e.actionType>=i.At.CLICK_COMMON)&&!t.M_recallBoxSet.has(e.searchId)){var o,a,r=null===(o=t.resultObj.data)||void 0===o?void 0:o.find(function(t){return t.vueSearchId===e.searchId});if(!r)return;if(t.M_recallBoxSet.add(e.searchId),!!r.needAsyncRecall)n.hi.getCommonCgiData({cgiName:"AsyncTopQAReport",data:{oriSearchID:r.searchID||e.searchId,searchId:e.searchId,asyncReportCtx:null===(a=r.vueChatbotInfo)||void 0===a?void 0:a.asyncReportCtx,parentSearchID:e.parentSearchID}})}})}}}},431375:function(e,t,o){var i=o(420629),n=o(119806),a=o(798509),r=o(984928),s=o(448188),c=o(369353),l=o(392935),u=o(292551),h=o(638986),d=o(735055),p=o(333298),f=o(691409),v=o(84762),m=o(163433),y=o(521125),b=o(149470),g=o(253008),S=o(779716),C=o(144007),_=o(587330),w=o(593434),T=o(632600),x=o(120124),I=o(736312),O=o(893722),E=o(228175);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,i=Array(t);o<t;o++)i[o]=e[o];return i}function P(e,t,o,i,n,a,r){try{var s=e[a](r),c=s.value}catch(e){o(e);return}s.done?t(c):Promise.resolve(c).then(i,n)}function k(e){return function(){var t=this,o=arguments;return new Promise(function(i,n){var a=e.apply(t,o);function r(e){P(a,i,n,r,s,"next",e)}function s(e){P(a,i,n,r,s,"throw",e)}r(void 0)})}}function A(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}function D(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(t)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}),e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o,i,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&null!=n.return&&n.return()}finally{if(s)throw i}}return a}}(e,t)||H(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return R(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);if("Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return R(e,t)}}function B(e,t){var o,i,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(o)throw TypeError("Generator is already executing.");for(;r;)try{if(o=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{o=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var Z="aiSearchQueryHistory",j={};t.Z={mixins:[a.jB,a.uW,l.Z,n.Z,b.ZP,w.Z,E.Z],data:function(){return{blockMap:c.o,firstSearchRequest:!0,historyList:[],isRequesting:!1,canShareStatus:!0,typingMap:new Map,isDeepResearchStyle:!1,latestHistoryReplayData:null}},computed:D(A({},(0,i.rn)({resultObj:function(e){return e.result.self.resultObj},requestId:function(e){return e.result.requestId},aiModel:function(e){return e.chatbot.aiModel},aiModelList:function(e){return e.chatbot.aiModelList},isAnswerFade:function(e){return e.chatbot.isAnswerFade},uploadFileList:function(e){return e.chatbot.uploadFileList}}),(0,i.Se)({modelChoose:"chatbot/modelChoose"})),{fixedFontRatio:function(){return+a.xB.fontRatio},realDataList:function(){return(this.resultObj.data||[]).filter(function(e){return!e.isFake})},isErrPage:function(){return 0===this.realDataList.length||this.realDataList.every(function(e){return 134===e.type})}}),created:function(){var e,t,o,i,n=this;s.ZP.onResultReady(this.handleResult),a.Gc.$on(a.U3.clearResult,this.clearResult);var c=this;a.Gc.$on(a.U3.CHAT_GET_HISTORY_REPLAY,(e=k(function(e){var t,o,i,n,s,l,u,f,v;return B(this,function(m){switch(m.label){case 0:if(!e.conversationId)return[2];return a.Gc.$emit(a.U3.TOP_QA_TERMINATE),c.canShowHistory=!1,null===(t=c.$refs.topChatTextArea)||void 0===t||t.setVisible(!1),s=a.Zr.generateGuuId(),h.t.switchConversation(e.conversationId),l=c.reComposeParentSearchID({modelType:e.item.modelType,parentSearchID:e.parentSearchID,parentType:e.parentType||r.ZP.parentType.MMSEARCH_TYPE_CONVERSATION_HISTORY,parentSearchIdKv:{search_id:e.item.searchId,modelName:e.item.modelName}}),e.item.modelType&&c.switchModel(e.item.modelType,!1),a.xB.setValue({parentSearchID:l}),(null===(o=e.item)||void 0===o?void 0:o.feature)?c.reportDRStart({rid:s}):(0,y.ZP)({requestId:s,stepName:y.Gg.SearchStartToReceiveSearchResult,stepType:y.t9.Start}),c.newConversationDiagnoseID(),c.isRequesting=!0,u=e.item.searchId,[4,(0,d.jL)({requestId:s,parentSearchId:l,conversationId:e.conversationId,query:null===(i=e.item)||void 0===i?void 0:i.query,selectOriSearchId:u,kvItems:c.$store.getters.getExtReqParams})];case 1:return f=m.sent(),c.clearResult(),c.ifHistorySyncNotAllowQuestion(f)&&c.$store.dispatch("chatbot/setIsRelaunch",!0),c.notifyHistoryUpdate(),c.handleResultAndReq(f,{extReqParams:[{key:"aiSearchConversationId",textValue:e.conversationId}],noScroll:!0},{rid:s,isHistory:!0,isDeepResearchStyle:null===(n=e.item)||void 0===n?void 0:n.feature}),v=c.getScrollIndex(f,u),(0,p.i)("history replay scroll index",v,u),v>0?setTimeout(function(){c.scrollToBoxByPos(v)},100):window.scrollTo({top:0,behavior:"instant"}),c.getNetworkHistoryList(),c.latestHistoryReplayData=e,setTimeout(function(){},1e3),[2]}})}),function(t){return e.apply(this,arguments)}));var l=this;a.Gc.$on(a.U3.CHAT_GET_CONVERSATIONS_SHARE,(t=k(function(e){var t,o,i,n;return B(this,function(s){switch(s.label){case 0:return o=a.Zr.generateGuuId(),a.yG.reportJumpType({pageType:r.ZP.pageType[l.$route.name],clickId:null===(t=l.$store)||void 0===t?void 0:t.state.result.state.clickReportId,clickType:2,jumpType:(null==e?void 0:e.jumpType)||r.ZP.jumpType.SET_QUERY,newSearchType:r.ZP.searchType.CHATBOT}),e.conversationId&&h.t.switchConversation(e.conversationId,h.i.ConversationShare),l.isRequesting=!0,e.deepResearchShareType?l.reportDRStart({rid:o}):(0,y.ZP)({requestId:o,stepName:y.Gg.SearchStartToReceiveSearchResult,stepType:y.t9.Start}),l.newConversationDiagnoseID(),i=(0,T.gq)((e.kvItems||[]).concat(l.$store.getters.getExtReqParams)),[4,e.deepResearchShareType?(0,d.sj)({requestId:o,shareId:e.shareId,shareType:e.deepResearchShareType,query:a.xB.query}):(0,d.Z5)({requestId:o,shareId:e.shareId,kvItems:i})];case 1:var c;return n=s.sent(),l.handleResultAndReq(n,{extReqParams:(c=Array.from(i||[]),e.conversationId&&c.push({key:"aiSearchConversationId",textValue:e.conversationId}),c),noScroll:!0},{rid:o,isHistory:!1,isDeepResearchStyle:e.deepResearchShareType}),[2]}})}),function(e){return t.apply(this,arguments)})),a.Gc.$on(a.U3.CHATBOT_SCROLL_BY_POS_INDEX,function(e){setTimeout(function(){n.scrollToBoxByPos(e)},100)});var u=this;a.Gc.$on(a.U3.CHAT_GET_SNAPSHOT_PREFETCH_DATA,(o=k(function(e){var t,o,i;return B(this,function(n){switch(n.label){case 0:if(t=(null==e?void 0:e.requestId)||a.Zr.generateGuuId(),e.conversationId&&h.t.switchConversation(e.conversationId),u.isRequesting=!0,u.canShowHistory=!1,o=e.gData,u.newConversationDiagnoseID(),!a.xB.chatbotExtParams.GetDeepResearchReport)return[3,2];return u.$store.commit({type:"addExtReqParams",extReqParams:[{key:"parentSearchID",textValue:a.xB.parentSearchID}]}),[4,(0,d.cA)({rpcContext:{sessionId:a.xB.sessionId,requestId:t,query:a.xB.query,reqType:r.WI.DEEP_RESEARCH,scene:a.xB.scene,kvItems:u.$store.getters.getExtReqParams},taskKeyDetail:a.xB.chatbotExtParams.GetDeepResearchReport.taskKeyDetail})];case 1:return i=n.sent(),o.searchID=i.searchID,[3,3];case 2:u.$store.getters.getExtReqParams,(0,d.sC)({requestId:t,conversationId:e.conversationId,kvItems:(0,T.gq)([{key:"clickKey",textValue:o.clickKey}].concat(u.$store.getters.getExtReqParams))}),n.label=3;case 3:return u.handleResultAndReq(o,{extReqParams:M(e.kvItems||[]).concat([{key:"aiSearchConversationId",textValue:e.conversationId}]),noScroll:!0},{rid:t,isHistory:!1}),[2]}})}),function(e){return o.apply(this,arguments)})),a.Gc.$on(a.U3.SET_GLOBAL_CAN_SHARE_STATUS,function(e){n.canShareStatus=e});var f=this;a.Gc.$on(a.U3.DR_CREATE,(i=k(function(e){var t,o,i;return B(this,function(n){switch(n.label){case 0:if(!e.needStartNewPage)return[3,1];return a.hi.startWebSearch({query:e.query,scene:a.xB.scene,sessionId:a.xB.sessionId,extParams:encodeURIComponent(JSON.stringify({hideNavBar:a.FP.isSupportOnAiVoice,chatbot:a.xB.chatbot,chatbotSecond:1,chatbotExtParams:{startDeepResearch:1},parentSearchID:e.parentSearchID})),customNavBarParams:{nativeConfig:{title:"AI搜索"},hideSearchBar:!0,hideNavBar:a.FP.isSupportOnAiVoice}}),[3,4];case 1:e.parentSearchID&&f.$store.commit({type:"addExtReqParams",extReqParams:[{key:"parentSearchID",textValue:e.parentSearchID}]}),f.isRequesting=!0,f.canShowHistory=!1,null===(t=f.$refs.topChatTextArea)||void 0===t||t.setVisible(!1),f.clearResult(),o=a.Zr.generateGuuId();return[3,2];case 2:return f.reportDRStart({rid:o}),f.$store.commit("result/generateGetSearchRid",{requestId:o}),f.preHandleExtReqParams({}),[4,a.hi.getCommonCgiData({cgiName:"SubmitDeepResearch",data:{IsHomePage:a.xB.isHomePage,Offset:0,SessionID:a.xB.sessionId,Keyword:e.query,RequestID:o,CliVersion:80213349,Scene:a.xB.scene,BusinessType:r.WI.DEEP_RESEARCH,ExtReqParams:f.$store.getters.getExtReqParams.map(function(e){return{key:e.key,uint_value:e.uintValue||0,text_value:e.textValue||""}})}},{requestId:o,timeout:12e3})];case 3:i=n.sent(),f.getNetworkHistoryList(),f.handleResultAndReq(i,{requestId:o},{rid:o,isDeepResearchStyle:!0}),n.label=4;case 4:return[2]}})}),function(e){return i.apply(this,arguments)})),a.Gc.$on(s.lb.onVisibilityChange,function(){n.getNetworkHistoryList()})},mounted:function(){(a.xB.chatbot||a.xB.chatbot2)&&(s.ZP.onCommonCgiReady(function(){}),this.chatbotModel_loadModel({modelListSaveKey:"aiModelList",defaultModelSaveKey:v.jq,modelGetType:v.dk.CHATBOT,callback:function(){h.t.localModelListTask.done()}}).then(function(){h.t.modelListTask.done()}),this.getHistoryList())},methods:{getScrollIndex:function(e,t){var o=(e.data||[]).findIndex(function(e){return e.selected});return o>-1?o:t?(e.data||[]).findIndex(function(e){return e.searchID===t}):-1},getSnapshotAndAskIfNeeded:function(e,t){return k(function(){var o,i,n,r,s,c;return B(this,function(l){switch(l.label){case 0:return o=this,this.canShowHistory=!1,null===(i=this.$refs.topChatTextArea)||void 0===i||i.setVisible(!1),this.newConversationDiagnoseID(),this.isRequesting=!0,[4,this.getSearchOptions({query:e,parentSearchID:a.xB.parentSearchID})];case 1:return r=(n=l.sent()).requestId,[4,(0,d.xJ)({conversationId:t.conversationId,searchId:t.searchId,requestId:r,query:e,parentSearchId:n.parentSearchID,kvItems:n.extReqParams})];case 2:return s=l.sent(),this.handleResultAndReq(s,{noScroll:!0},{rid:r,isHistory:!0}),(c=this.getScrollIndex(s,t.searchId))>0?setTimeout(function(){o.scrollToBoxByPos(c)},100):0===c?window.scrollTo({top:0,behavior:"instant"}):-1===c&&setTimeout(function(){o.scrollToBoxByPos(s.data.length-1)},100),this.getNetworkHistoryList(),[2]}})}).apply(this)},newConversationDiagnoseID:function(){this.$store.commit({type:"addExtReqParams",extReqParams:[{key:"AIConversationDiagnoseID",textValue:(0,O.f)("".concat(a.xB.sessionId,"_").concat(a.Zr.generateGuuId()))}]})},E_getMinimizeTaskCustomData:function(){if(this.latestHistoryReplayData){var e,t;return{title:null===(e=this.latestHistoryReplayData.item)||void 0===e?void 0:e.query,chatbotExtParams:{historyReplayData:this.latestHistoryReplayData},minimizeTaskExtParams:{query:null===(t=this.latestHistoryReplayData.item)||void 0===t?void 0:t.query}}}if(this.isErrPage)return{title:"暂无相关内容",chatbotExtParams:{isErrorPage:!0}}},reportDRStart:function(e){var t=e.rid,o=Date.now();(0,_.ZP)([_.$T.SearchStartToFinish,_.$T.SearchStartToFirstPlanToken,_.$T.SearchStartToFirstStepToken,_.$T.SearchStartToFirstReportToken].map(function(e){return{requestId:t,stepName:e,stepType:_.ig.Start,agentBusinessId:_.kD.DeepResearch,actionTimestampMs:o}}))},canShare:function(){return this.canShareStatus},scrollToBoxByPos:function(e){var t=document.querySelectorAll(".search-result-wrap"),o=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;(0,f.jt)({newValueList:[t[e].offsetTop+(0===e?0:16)],oldValueList:[window.scrollY],duration:o,handler:function(e){var t=N(e,1)[0];window.scrollTo({top:t,behavior:"instant"})}})};t[e]&&(o(300),setTimeout(function(){o(50),setTimeout(function(){a.Gc.$emit(a.U3.exposeAnalysis)},50)},300))},ifHistorySyncNotAllowQuestion:function(e){var t,o,i,n,a,r,s,c,l=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)-1<=0?0:(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.length)-1;return null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(s=c[l])||void 0===s?void 0:null===(r=s.items)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:null===(n=a.itemInfo)||void 0===n?void 0:null===(i=n.syncResp)||void 0===i?void 0:i.notAllowQuestionClosely},getBlockPos:function(e,t){var o;return~~(null!==(o=e.vueBlockIndex)&&void 0!==o?o:t)+1},getOptionsTemplate:function(e){var t=j[e];return j[e]={},t||{}},loadLocalModel:function(){return k(function(){var e;return B(this,function(t){switch(t.label){case 0:return[4,a.su.get({key:v.jq})];case 1:if(!(e=t.sent()))return[2];return(this.aiModelList||[]).some(function(t){return t.value===e.value})&&this.switchModel(e.modelType,!1),[2]}})}).apply(this)},switchModel:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.$store.commit({type:"chatbot/setAIModel",value:e}),!!t&&!a.xB.chatbotExtParams.noSaveModelWhenAsk){var o=this.$store.getters["chatbot/modelChoose"],i=o||{modelType:e};a.su.set({key:v.jq,value:i})}},preHandleExtReqParams:function(e){this.$store.commit({type:"removeExtReqParamsByLifeCycle",lifeCycle:C.mP.ClearWhenNewSearch});var t=(null===(c=M(new Set(null===(l=this.uploadFileList||[])||void 0===l?void 0:l.map(function(e){return e.fileType}))))||void 0===c?void 0:c.reduce(function(e,t){return e|t},0))||268435455,o=null===(f=this.realDataList)||void 0===f?void 0:null===(d=f[(null===(p=this.realDataList)||void 0===p?void 0:p.length)-1])||void 0===d?void 0:null===(h=d.items)||void 0===h?void 0:null===(u=h[0])||void 0===u?void 0:u.itemInfo;if(o&&o.uploadInfo){var i=o.uploadInfo,n=((0,g.dW)(void 0===i?"":i)||{}).allowedContentType,r=void 0===n?268435455:n;0===r&&(r=268435455),t=r}var s=[{key:"currentPage",uintValue:1},{key:"requestId",textValue:this.requestId},{key:"cookies",textValue:this.$store.state.result.state.cookies},{key:"windowWidth",uintValue:window.innerWidth},{key:"fontRatio",uintValue:parseInt(100*this.fixedFontRatio)},{key:"TemplateNightModeType",uintValue:a.Zr.isDarkMode()?1:0},{key:"realTimeSearch",uintValue:1},{key:"firstSearchRequest",uintValue:this.firstSearchRequest?1:0},{key:"aiSearchMultiConversationTurnNum",uintValue:this.realDataList.length+1},{key:"realH5Version",uintValue:80213349}];this.$store.commit({type:"removeExtReqParams",key:["aiSearchUploadInfo","aiSearchMockEmptyQuery"]}),(null===(m=this.uploadFileList)||void 0===m?void 0:m.length)?this.$store.commit({type:"addExtReqParams",extReqParams:[{key:"aiSearchUploadInfo",textValue:JSON.stringify({uploadFiles:(null!==(w=this.uploadFileList)&&void 0!==w?w:[]).map(function(e){var t;return{cosPath:e.cos_path||e.cosPath,fileType:e.fileType,fileName:(null===(t=e.tempFile)||void 0===t?void 0:t.name)||e.fileName,url:e.fileUrl,spamKey:e.spamKey,fileContentDetail:e.fileContentDetail,fileSize:e.fileSize,isActivePost:e.isActivePost}}),contentType:(null===(S=M(new Set(null===(_=this.uploadFileList||[])||void 0===_?void 0:_.map(function(e){return e.fileType}))))||void 0===S?void 0:S.reduce(function(e,t){return e|t},0))||void 0,allowedContentType:t})}]}):this.$store.commit({type:"addExtReqParams",extReqParams:[{key:"aiSearchUploadInfo",textValue:JSON.stringify({contentType:0,allowedContentType:t})}]}),(null===(y=this.uploadFileList)||void 0===y?void 0:y.length)&&(!e.query&&(this.$store.commit({type:"addExtReqParams",extReqParams:[{key:"aiSearchMockEmptyQuery",uintValue:1}]}),e.query=null!==(T=v.aU[this.uploadFileList[0].fileType])&&void 0!==T?T:"总结"),this.$store.dispatch("chatbot/resetUploadFileList")),window.patchH5Version&&s.push({key:"patchH5Version",uintValue:Number(window.patchH5Version)}),(null===(b=a.xB.sessionExtReqParams)||void 0===b?void 0:b.length)&&this.$store.commit({type:"addExtReqParams",extReqParams:a.xB.sessionExtReqParams});var c,l,u,h,d,p,f,m,y,b,S,_,w,T,x,I,O,E,R,P=[],k=this.modelChoose,A=e.conversationId,D=e.aiResearchOriSid;D&&P.push({key:"aiResearchOriSid",lifeCycle:C.mP.ClearWhenNewSearch,textValue:D}),A&&P.push({key:"aiSearchConversationId",lifeCycle:C.mP.ClearWhenNewSearch,textValue:A}),(null==k?void 0:k.value)&&P.push({key:"selectedModelName",lifeCycle:C.mP.ClearWhenNewSearch,textValue:k.value}),e.isRenewConversation&&P.push({key:"conversionCloseBySecurity",lifeCycle:C.mP.ClearWhenNewSearch,uintValue:1});var N=null===(R=this.realDataList[0])||void 0===R?void 0:null===(E=R.items)||void 0===E?void 0:null===(O=E[0])||void 0===O?void 0:null===(I=O.itemInfo)||void 0===I?void 0:null===(x=I.syncResp)||void 0===x?void 0:x.cardType;N&&P.push({key:"aiContinueAskCardType",lifeCycle:C.mP.ClearWhenNewSearch,uintValue:N}),this.$store.commit({type:"addExtReqParams",extReqParams:P}),this.$store.commit({type:"addExtReqParams",extReqParams:s}),!this.$store.state.extReqParams.find(function(e){return"AIConversationDiagnoseID"===e.key})&&this.newConversationDiagnoseID()},reComposeParentSearchID:function(e){var t,o,i=e.modelType||(null===(t=this.modelChoose)||void 0===t?void 0:t.modelType),n=null===(o=(this.aiModelList||[]).find(function(e){return e.modelType===i}))||void 0===o?void 0:o.value,s=a.Zr.discomposeParentSearchID(e.parentSearchID),c={};return this.uploadFileList.length>0&&(c=(0,S.k)(this.uploadFileList)),this.M_composeParentSid({t:(null==s?void 0:s.t)||e.parentType||r.X$.ENTER_INPUT_CONFIRM,s:(null==s?void 0:s.s)||"",did:null==s?void 0:s.did,rid:null==s?void 0:s.rid,kv:A({clickId:(null==s?void 0:s.clickId)||(null==e?void 0:e.clickId),modelName:n,isFirst:this.realDataList.length?0:1,parentSessionType:a.xB.chatbotExtParams.parentSessionType},(null==s?void 0:s.kv)||{},c,e.parentSearchIdKv||{})})},beforeGetSearchData:function(e){return k(function(){var t;return B(this,function(o){switch(o.label){case 0:return this.isRequesting=!0,[4,this.getSearchOptions(e)];case 1:return t=o.sent(),a.hi.getResult(t),this.firstSearchRequest=!1,[2]}})}).apply(this)},getSearchOptions:function(e){return k(function(){var t,o,i;return B(this,function(n){switch(n.label){case 0:if(!e.noFakeBox)return[3,2];return[4,h.t.localModelListTask.promise];case 1:return n.sent(),[3,4];case 2:return[4,h.t.modelListTask.promise];case 3:n.sent(),n.label=4;case 4:return(o=e.modelType||(null===(t=this.modelChoose)||void 0===t?void 0:t.modelType))&&this.switchModel(o,!0),i=this.reComposeParentSearchID(e),this.$store.commit({type:"addExtReqParams",extReqParams:[{key:"parentSearchID",textValue:i}]}),a.xB.setValue({parentSearchID:i}),[2,this.getSearchDataParams(e)]}})}).apply(this)},appendFakeBox:function(e){var t,o,i=e.query,n=e.rid;""===i&&this.uploadFileList&&(i=null!==(t=v.aU[this.uploadFileList[0].fileType])&&void 0!==t?t:"总结");var a={boxPos:1,boxPosMerge:1,count:1,items:[{itemInfo:{disableUnfold:!0,uploadInfo:JSON.stringify({uploadFiles:(null!==(o=this.uploadFileList)&&void 0!==o?o:[]).map(function(e){var t;return{cosPath:e.cos_path||e.cosPath,fileType:e.fileType,fileName:(null===(t=e.tempFile)||void 0===t?void 0:t.name)||e.fileName,url:e.fileUrl,spamKey:e.spamKey,fileContentDetail:e.fileContentDetail,fileSize:e.fileSize,isActivePost:e.isActivePost}})}),query:i,type:1059},itemStyle:1}],totalCount:1,type:52,boxCol:1,vuePage:1,boxRowIndex:1,isFake:!0};this.handleResultAndReq({data:[a],query:i},{rid:n},{rid:n,isFake:!0})},getSearchDataParams:function(e){this.$store.commit("result/generateGetSearchRid",{requestId:e.requestId}),this.preHandleExtReqParams(e);var t=this.$store.getters.getExtReqParams;a.Zr.pushExclusiveItemToArray(t,{key:"parentSearchID",textValue:a.xB.parentSearchID});var o={shareKey:e.shareKey,historyKvItems:e.historyKvItems,sessionId:a.xB.sessionId,subSessionId:a.xB.subSessionId,parentSearchID:a.xB.parentSearchID,parentType:a.xB.parentType,offset:0,type:r.WI.TOP_QA,subType:0,isHomePage:0,sceneActionType:1,extReqParams:t||[],requestId:this.requestId,extClientParams:a.xB.queryString.extClientParams,searchId:"",query:e.query,scene:a.xB.scene,action:1,page:"chatbot",isBackButtonClick:!0};return(0,u.I)(o),j[o.requestId]=A({},e,o),a.yG.reportEventTrack({actionType:3,requestId:o.requestId}),this.$store.dispatch("chatbot/setIsRelaunch",!1),o},handleResult:function(e){var t,o,i=this.getOptionsTemplate(e.requestId);if(a.xB.curRouteName===r.kO.CHATBOT&&(null===(t=this.$parent)||void 0===t?void 0:t.currentView)!=="home"){a.yG.reportEventTrack({isSuccess:1,requestId:e.requestId,actionType:8}),null===(o=this.notifyHistoryUpdate)||void 0===o||o.call(this);var n=a.Zr.safeJsonParse(e.json)||{};this.handleResultAndReq(n,i,{rid:e.requestId,needRenderReport:!0}),this.getNetworkHistoryList()}},handleResultAndReq:function(e,t,o){var i,n,s,c,l,u=this,d=o.rid,p=o.isFake,v=o.isHistory,y=o.needRenderReport,b=o.isDeepResearchStyle;null===(i=this.$refs.heightCollapse)||void 0===i||i.show(),a.xB.setValue({type:b?r.WI.DEEP_RESEARCH:r.WI.TOP_QA}),a.xB.setValue({stableField:{type:a.xB.type,parentSearchID:a.xB.parentSearchID}}),setTimeout(function(){u.$store.dispatch("chatbot/setIsAnswerFade",!1)},500),e.data=(null===(n=e.data)||void 0===n?void 0:n.filter(function(e){return!!e}))||[];var g=!1;!(null===(s=e.data)||void 0===s?void 0:s.length)&&(e.data=[{boxPos:1,boxPosMerge:1,count:1,items:[{noSelectionFound:{emptyBox:{title:e.query||t.query,desc:"暂无相关内容。"},style:1}}],type:134,boxCol:1,vuePage:1,boxRowIndex:1}],g=!0,b&&this.$store.commit({type:"chatbot/setCanShowAppendChatInput",value:!1}),null===(l=this.$refs.topChatTextArea)||void 0===l||l.setFake({animate:!v})),e.conversationID&&e.conversationID!==h.t.getConversationId()&&h.t.switchConversation(e.conversationID,e.needConversationCreate?h.i.Snapshot:h.i.Normal);var S=e.conversationID||this.getKVValueFromReqOptions(t,"aiSearchConversationId"),C=this.getKVValueFromReqOptions(t,"selectedModelName"),_=C?(this.aiModelList||[]).find(function(e){return e.value===C}):this.modelChoose;(0,m.f)(e,{requestId:d||t.requestId,interactSearchId:t.shareKey,modelValue:C,modelType:null==_?void 0:_.modelType,conversationId:S,parentSearchID:a.xB.parentSearchID});var w=!1,T=(this.resultObj.data||[]).concat(e.data).filter(function(e){return!!p||!e.isFake||e.vueRid!==d||(w=!0,!1)});this.isDeepResearchStyle=T.some(function(e){return[138,139].includes(e.type)})||g&&b;var x=!u.isDeepResearchStyle&&(void 0===e.enableQuestionClosely||!!e.enableQuestionClosely);this.$store.commit({type:"chatbot/setCanShowAppendChatInput",value:x}),T.forEach(function(e){e.vueTypePos=1}),a.xB.setValue({query:e.query}),this.$store.commit({type:"result/self/setResultObj",data:D(A({},e),{data:T})}),!t.noScroll&&!w&&!this.isAnswerFade&&T.length>1&&setTimeout(function(){var e=document.querySelector(".search-result-wrap:last-child");e&&(0,f.jt)({newValueList:[e.offsetTop+16],oldValueList:[window.scrollY],duration:300,handler:function(e){var t=N(e,1)[0];window.scrollTo({top:t,behavior:"instant"})}})}),a.yG.result.reportBoxInfo({searchId:e.searchID,theme:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?2:1}),y&&this.$nextTick(function(){a.yG.reportEventTrack({isSuccess:1,requestId:d,actionType:9})});var I=this.realDataList[this.realDataList.length-1];(null==I?void 0:null===(c=I.vueChatbotInfo)||void 0===c?void 0:c.modelType)&&!p&&this.switchModel(I.vueChatbotInfo.modelType,!1),this.isRequesting=!1},getKVValueFromReqOptions:function(e,t){return((e.extReqParams||[]).find(function(e){return e.key===t})||{}).textValue},clearResult:function(){if(a.xB.curRouteName===r.kO.CHATBOT)a.Gc.$emit(a.U3.CHATBOT_SHOW_NAV_BAR_TITLE,""),this.canShareStatus=!0,this.typingMap.clear(),this.$store.commit({type:"result/self/setResultObj",data:{}}),a.Gc.$emit(a.U3.afterClearResult)},getHistoryList:function(){return k(function(){var e;return B(this,function(t){switch(t.label){case 0:return[4,a.su.get({key:Z})];case 1:return(e=t.sent())&&Array.isArray(e)&&(this.historyList=e),[2]}})}).apply(this)},saveHistoryItem:function(e){var t,o,i=this.historyList.findIndex(function(t){var o,i;return t.query===e.query&&(null===(o=t.model)||void 0===o?void 0:o.value)===(null===(i=e.model)||void 0===i?void 0:i.value)});i>=0&&this.historyList.splice(i,1),e.createTime=e.createTime||Date.now(),e.updateTime=Date.now(),e.model=this.modelChoose?{title:null===(t=this.modelChoose)||void 0===t?void 0:t.title,value:null===(o=this.modelChoose)||void 0===o?void 0:o.value}:{},this.historyList.unshift(e),this.setHistoryActiveIndex(0),this.saveHistoryList()},onDeleteHistoryItem:function(e,t){this.historyList.splice(t,1),this.saveHistoryList()},saveHistoryList:function(){a.su.set({key:Z,value:this.historyList.map(function(e){return e.active,function(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)o=a[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++){if(o=a[i],!(t.indexOf(o)>=0))Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}}return n}(e,["active"])})})},setHistoryActiveIndex:function(e){var t=this;this.historyList.forEach(function(o,i){t.$set(t.historyList[i],"active",i===e)})},onTapHistory:function(e){var t=e.query;e.extReqParams,e.item;var o=this.$store.getters["chatbot/modelChoose"];a.Gc.$emit(a.U3.CHAT_INPUT_CONFIRM,{query:t,parentSearchID:this.M_composeParentSid({t:r.X$.TEACH_FINDER_HISTORY,s:"",kv:{modelName:null==o?void 0:o.value}})})},transferSnapshotToHistory:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return k(function(){var o,i,n;return B(this,function(s){switch(s.label){case 0:if(!e)return[2];return o=e.searchSearchId,[4,h.t.transferSnapshotToHistory(e)];case 1:if(!(i=s.sent())||!t)return[2];return(n=a.Zr.safeJsonParse(localStorage.getItem(r.wT.CHATBOT_SNAPSHOT))||{})[o]={conversationId:i},localStorage.setItem(r.wT.CHATBOT_SNAPSHOT,JSON.stringify(n)),[2]}})})()},getNetworkHistoryList:function(){return k(function(){return B(this,function(e){switch(e.label){case 0:return[4,this.$store.dispatch("chatbot/refreshHistoryData")];case 1:return e.sent(),[2]}})}).apply(this)},openDefaultShareSheet:function(e){return k(function(){var t,o,i,n,r;return B(this,function(s){switch(s.label){case 0:return t=this,o=[],i=[],[4,this.isMinimizeTaskEnabled()];case 1:if(!(null==(n=s.sent())?void 0:n.enabled))return[3,3];return 1==n.multiContentSwitch&&i.push("multicontent"),r=o.push,[4,this.isTaskMinimized(C.I3.Star)];case 2:r.apply(o,[s.sent()?"cancelstar":"star"]),s.label=3;case 3:return(0,x.G)({title:"",desc:"",disableShareToast:"该内容不支持分享",enableItemList:o,extraItemList:i,bypassReportParams:e}),setTimeout(function(){(0,I.R0)("handlePicStore","").then(function(e){console.error("handlePicStore res",e),(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handlePicStore"?a.Gc.$emit(a.U3.ON_CHATBOT_TAKE_SCREENSHOT,!0):(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handleMinimize"&&("multicontent"==e.type?t.addMinimizeTask(C.I3.Float):"star"==e.type?t.addMinimizeTask(C.I3.Star):"cancelstar"==e.type&&t.removeMinimizeTask(C.I3.Star))})},400),[2]}})}).apply(this)}}}},292551:function(e,t,o){o.d(t,{I:function(){return n}});var i=o(798509);function n(e){i.su.storeHistory(e)}},840306:function(e,t,o){var i,n,a=o(798509),r=o(791191),s=o(420629),c=o(448188);t.Z={computed:(i=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){var i,n,a;i=e,n=t,a=o[t],n in i?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a})}return e}({},(0,s.rn)({frontVoiceStatus:function(e){return e.chatbot.frontVoiceStatus}})),n=(n={enable:function(){return!!a.FP.isSupportOnAiVoice||!1}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):(function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o.push.apply(o,i)}return o})(Object(n)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(n,e))}),i),beforeDestroy:function(){a.hi.operateStreamVoiceInput({type:"stop"})},created:function(){var e=this,t="";c.ZP.onStreamVoiceInputStatus(function(o){if(!!e.enable)if("onstart"===o.status)t="";else if("ondata"===o.status){if(e.frontVoiceStatus===r.fD.RECORDING||e.frontVoiceStatus===r.fD.COMPLETE){var i=o.extinfo.text;t=i,a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{content:i||"",status:r._r.RECORDING})}}else"onstop"===o.status||"onend"===o.status?(e.frontVoiceStatus===r.fD.COMPLETE&&a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{status:r._r.COMPLETE,content:t}),t=""):"oncancel"===o.status&&(a.Gc.$emit(a.U3.CHAT_VOICE_STATUS,{status:r._r.CANCEL}),t="")}),c.ZP.onWebviewPause(function(e){"onPause"===e.state&&a.hi.operateStreamVoiceInput({type:"stop"})})}}}}]);