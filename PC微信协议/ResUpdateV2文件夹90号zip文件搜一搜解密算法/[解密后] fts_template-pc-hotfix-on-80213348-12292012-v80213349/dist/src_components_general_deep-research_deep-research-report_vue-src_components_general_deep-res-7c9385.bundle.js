"use strict";(self.webpackChunkweixin_search=self.webpackChunkweixin_search||[]).push([["src_components_general_deep-research_deep-research-report_vue-src_components_general_deep-res-7c9385"],{514783:function(t,e,n){var i=n(579132),o=n(678230),r=n(551900),a=n(368972),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"28dbe3fc",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},529651:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="4a9dee12"}},297906:function(t,e,n){var i=n(880818),o=n(186633),r=n(551900),a=n(619719),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"3a142660",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},953612:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="3cab7fad"}},684741:function(t,e,n){var i=n(998848),o=n(53498),r=n(551900),a=n(942255),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"5c94e0ae",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},937159:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="4902c00a"}},448753:function(t,e,n){var i=n(776621),o=n(150735),r=n(551900),a=n(443706),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"3883cfe8",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},118871:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="63511d40"}},630658:function(t,e,n){var i=n(209343),o=n(505106),r=n(551900),a=n(331313),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"518c7713",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},404021:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="e89b3782"}},443277:function(t,e,n){var i=n(55674),o=n(871389),r=n(551900),a=n(778172),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4f329724",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},533186:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="83b5497d"}},857348:function(t,e,n){var i=n(354701),o=n(858258),r=n(551900),a=n(515336),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"c7675fbc",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},549585:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="bcd87d4d"}},285878:function(t,e,n){var i=n(471672),o=n(720932),r=n(551900),a=n(464126),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"07cfcf45",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},373075:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="be567568"}},775749:function(t,e,n){var i=n(165654),o=n(40555),r=n(551900),a=n(784043),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"c49e67ac",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},905259:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="4f5d5bad"}},936777:function(t,e,n){var i=n(873409),o=n(206290),r=n(551900),a=n(201248),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"74b9a21b",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},359494:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="49fb008f"}},993055:function(t,e,n){var i=n(72950),o=n(245855),r=n(551900),a=n(723042),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"1f792eff",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},757731:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="ec40b35b"}},338561:function(t,e,n){var i=n(894622),o=n(106246),r=n(551900),a=n(478694),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"3e85e3cf",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},760637:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="1c7734c3"}},62513:function(t,e,n){var i=n(378669),o=n(622462),r=n(551900),a=n(450390),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"2df1cd76",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},974665:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="1e72c090"}},956054:function(t,e,n){n.r(e);var i=n(315452),o=n(458899),r=n(551900),a=n(647643),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4538f456",null);"function"==typeof a.Z&&(0,a.Z)(s),e.default=s.exports},184847:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="dd5229ae"}},325223:function(t,e,n){n.r(e);var i=n(582067),o=n(448291),r=n(551900),a=n(419360),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"7396f5b3",null);"function"==typeof a.Z&&(0,a.Z)(s),e.default=s.exports},164027:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="6e274bbc"}},970778:function(t,e,n){var i=n(20437),o=n(120449),r=n(551900),a=n(45520),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"19a5e98a",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},707011:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="881bd9df"}},612482:function(t,e,n){var i=n(542813),o=n(714296),r=n(551900),a=n(17798),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"1a2514c5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},307422:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="29d469b3"}},832564:function(t,e,n){var i=n(196596),o=n(34128),r=n(551900),a=n(273645),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"52cc9205",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},411026:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="9aada9e4"}},693914:function(t,e,n){var i=n(147734),o=n(426899),r=n(551900),a=n(639331),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"1947279f",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},804919:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="49528844"}},807270:function(t,e,n){var i=n(713239),o=n(152453),r=n(551900),a=n(472008),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4081df80",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},631718:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="d336b073"}},696427:function(t,e,n){var i=n(577925),o=n(857664),r=n(551900),a=n(628774),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"5f574e1a",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},708524:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="3387914a"}},683755:function(t,e,n){var i=n(496627),o=n(522795),r=n(551900),a=n(610804),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"7c88f368",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},702658:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="30c3cb6c"}},494937:function(t,e,n){var i=n(87512),o=n(461716),r=n(551900),a=n(383260),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"96f8f22c",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},123153:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="785dd9c4"}},476435:function(t,e,n){var i=n(383852),o=n(85346),r=n(551900),a=n(669453),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"3333b397",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},48957:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="501401b0"}},929944:function(t,e,n){var i=n(934504),o=n(74397),r=n(551900),a=n(40488),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4167bb26",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},921757:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="741d374c"}},964062:function(t,e,n){var i=n(800178),o=n(704408),r=n(551900),a=n(801965),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4d8b39cf",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},472811:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="a45faebc"}},465880:function(t,e,n){var i=n(436739),o=n(12744),r=n(551900),a=n(194856),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"47e3456c",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},612239:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="1e3e8b0f"}},74614:function(t,e,n){var i=n(962223),o=n(634113),r=n(551900),a=n(394543),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"5eb444d5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},949357:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="932050dc"}},513878:function(t,e,n){var i=n(408945),o=n(783232),r=n(551900),a=n(170547),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"0034a37a",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},594439:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="7cdfae49"}},706786:function(t,e,n){var i=n(42243),o=n(244297),r=n(551900),a=n(21929),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"58366edc",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},933502:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="aa47f89a"}},661275:function(t,e,n){var i=n(792988),o=n(133202),r=n(551900),a=n(684926),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4691aa68",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},510066:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="12a1b774"}},470948:function(t,e,n){var i=n(84050),o=n(707115),r=n(551900),a=n(347133),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"7c0068cc",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},66623:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="e3f6c021"}},921554:function(t,e,n){var i=n(245307),o=n(516604),r=n(551900),a=n(689212),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"75f599de",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},975347:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="5da67a8b"}},526194:function(t,e,n){var i=n(792942),o=n(288888),r=n(551900),a=n(373946),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"34184938",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},410943:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="9a16485f"}},133804:function(t,e,n){var i=n(633621),o=n(712851),r=n(551900),a=n(344127),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"db21e0fe",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},383169:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="f9f56778"}},36278:function(t,e,n){var i=n(68142),o=n(78940),r=n(551900),a=n(542703),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"60636550",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},695276:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="9ffcc045"}},752171:function(t,e,n){var i=n(220471),o=n(385558),r=n(551900),a=n(600513),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"2a4526fb",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},321435:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="315ef32a"}},119527:function(t,e,n){var i=n(313199),o=n(580099),r=n(551900),a=n(471404),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"092bcea5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},183457:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="b29eef67"}},969925:function(t,e,n){var i=n(662450),o=n(908411),r=n(551900),a=n(943351),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"05e59768",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},472234:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="032714fb"}},434011:function(t,e,n){var i=n(212646),o=n(475794),r=n(551900),a=n(443998),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"c0611e20",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},17859:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="8400c017"}},554392:function(t,e,n){var i=n(973841),o=n(845964),r=n(551900),a=n(793795),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"6acd47f5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},462115:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="f9030d32"}},91942:function(t,e,n){var i=n(372270),o=n(134485),r=n(551900),a=n(552804),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"1f8428d9",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},593231:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="baa884d8"}},128408:function(t,e,n){var i=n(962954),o=n(641361),r=n(551900),a=n(110556),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"53c2cd81",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},387215:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="7b7d4a7a"}},178113:function(t,e,n){var i=n(157163),o=n(790377),r=n(551900),a=n(290684),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4cde1ea8",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},206701:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="f552fc24"}},75195:function(t,e,n){var i=n(521245),o=n(928914),r=n(551900),a=n(792822),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"d8e27d0e",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},326762:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="a97b388b"}},734758:function(t,e,n){var i=n(980960),o=n(796265),r=n(551900),a=n(389061),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"94a0c30c",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},974278:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="f66a4d7f"}},446916:function(t,e,n){var i=n(27805),o=n(467045),r=n(551900),a=n(397495),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"6a5f4285",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},854661:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="434d3756"}},834234:function(t,e,n){var i=n(830107),o=n(146553),r=n(551900),a=n(922980),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"8b3fdea6",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},468894:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="2473802d"}},743363:function(t,e,n){var i=n(544817),o=n(352216),r=n(551900),a=n(870608),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"713a363c",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},506164:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="92f889a6"}},659274:function(t,e,n){var i=n(1649),o=n(459114),r=n(551900),a=n(21576),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"babaf1b0",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},666074:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="66a77b37"}},232516:function(t,e,n){var i,o,r=n(509982),a=n(551900),s=n(852216),c=(0,a.Z)(r.Z,i,o,!1,null,null,null);"function"==typeof s.Z&&(0,s.Z)(c),e.Z=c.exports},736127:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="ec9106cf"}},639514:function(t,e,n){var i=n(172195),o=n(808795),r=n(551900),a=n(787541),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"30b811a5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},903548:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="abae096f"}},309131:function(t,e,n){var i=n(922666),o=n(271729),r=n(551900),a=n(998914),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"61cf0e15",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},243801:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="6ab6db2f"}},62350:function(t,e,n){var i=n(938135),o=n(594824),r=n(551900),a=n(442342),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"6aafd11c",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},423525:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="07680b44"}},350342:function(t,e,n){var i=n(142115),o=n(392105),r=n(551900),a=n(427940),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"3420ae18",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},379883:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="4b5b53f7"}},991740:function(t,e,n){var i=n(906534),o=n(137631),r=n(551900),a=n(953709),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"7c50c1ee",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},530268:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="54c2855c"}},189539:function(t,e,n){var i=n(192016),o=n(612701),r=n(551900),a=n(368383),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"f051c7f0",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},76333:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="4b0757ea"}},166656:function(t,e,n){var i=n(922949),o=n(666465),r=n(551900),a=n(378),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"61a7dec5",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},437398:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="b7d3a9a0"}},307886:function(t,e,n){var i=n(269077),o=n(111698),r=n(551900),a=n(168245),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"cac902c8",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},464489:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="10db4ba1"}},975110:function(t,e,n){var i=n(671081),o=n(953467),r=n(551900),a=n(311648),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"6b4fc2ea",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},603316:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="be4e537d"}},67916:function(t,e,n){n.r(e);var i=n(455667),o=n(540579),r=n(551900),a=n(764682),s=n(25248),c=(0,r.Z)(o.Z,i.s,i.x,!1,null,"5b2196d1",null);"function"==typeof a.Z&&(0,a.Z)(c),"function"==typeof s.Z&&(0,s.Z)(c),e.default=c.exports},17613:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__ruleConfig={version:1,componentPath:"154dd3c57",componentType:0,rules:[{model:"cnProps.source.jumpInfo",path:".article-source",isReportIdFromJson:!0,event:3,type:2,isInformal:!0}]}}},213330:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="1f5e73bb"}},266289:function(t,e,n){var i=n(663660),o=n(616901),r=n(551900),a=n(457330),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"1651efd4",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},622884:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="f80ea1c4"}},674861:function(t,e,n){var i=n(460560),o=n(379048),r=n(551900),a=n(199716),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4ad568e0",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},474741:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="27a215c1"}},726524:function(t,e,n){var i=n(160622),o=n(515126),r=n(551900),a=n(289227),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"4eeb93e8",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},664205:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="745fc3a8"}},231211:function(t,e,n){var i=n(942252),o=n(819457),r=n(551900),a=n(779944),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,null,null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},99693:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="417d01b9"}},52005:function(t,e,n){var i=n(116593),o=n(373402),r=n(551900),a=n(920402),s=(0,r.Z)(o.Z,i.s,i.x,!1,null,"391c0446",null);"function"==typeof a.Z&&(0,a.Z)(s),e.Z=s.exports},43585:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="11131282"}},710428:function(t,e,n){n.d(e,{D1:function(){return o.D1},ew:function(){return o.ew},qC:function(){return o.qC}});var i=n(180535),o=n(725729),r=n(551900),a=n(753048),s=(0,r.Z)(o.ZP,i.s,i.x,!1,null,"1cb630d1",null);"function"==typeof a.Z&&(0,a.Z)(s),e.ZP=s.exports},246021:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){t.options.__wxs_id="99676371"}},368972:function(t,e,n){var i=n(529651);e.Z=i.Z},619719:function(t,e,n){var i=n(953612);e.Z=i.Z},942255:function(t,e,n){var i=n(937159);e.Z=i.Z},443706:function(t,e,n){var i=n(118871);e.Z=i.Z},331313:function(t,e,n){var i=n(404021);e.Z=i.Z},778172:function(t,e,n){var i=n(533186);e.Z=i.Z},515336:function(t,e,n){var i=n(549585);e.Z=i.Z},464126:function(t,e,n){var i=n(373075);e.Z=i.Z},784043:function(t,e,n){var i=n(905259);e.Z=i.Z},201248:function(t,e,n){var i=n(359494);e.Z=i.Z},723042:function(t,e,n){var i=n(757731);e.Z=i.Z},478694:function(t,e,n){var i=n(760637);e.Z=i.Z},450390:function(t,e,n){var i=n(974665);e.Z=i.Z},647643:function(t,e,n){var i=n(184847);e.Z=i.Z},419360:function(t,e,n){var i=n(164027);e.Z=i.Z},45520:function(t,e,n){var i=n(707011);e.Z=i.Z},17798:function(t,e,n){var i=n(307422);e.Z=i.Z},273645:function(t,e,n){var i=n(411026);e.Z=i.Z},639331:function(t,e,n){var i=n(804919);e.Z=i.Z},472008:function(t,e,n){var i=n(631718);e.Z=i.Z},628774:function(t,e,n){var i=n(708524);e.Z=i.Z},610804:function(t,e,n){var i=n(702658);e.Z=i.Z},383260:function(t,e,n){var i=n(123153);e.Z=i.Z},669453:function(t,e,n){var i=n(48957);e.Z=i.Z},40488:function(t,e,n){var i=n(921757);e.Z=i.Z},801965:function(t,e,n){var i=n(472811);e.Z=i.Z},194856:function(t,e,n){var i=n(612239);e.Z=i.Z},394543:function(t,e,n){var i=n(949357);e.Z=i.Z},170547:function(t,e,n){var i=n(594439);e.Z=i.Z},21929:function(t,e,n){var i=n(933502);e.Z=i.Z},684926:function(t,e,n){var i=n(510066);e.Z=i.Z},347133:function(t,e,n){var i=n(66623);e.Z=i.Z},689212:function(t,e,n){var i=n(975347);e.Z=i.Z},373946:function(t,e,n){var i=n(410943);e.Z=i.Z},344127:function(t,e,n){var i=n(383169);e.Z=i.Z},542703:function(t,e,n){var i=n(695276);e.Z=i.Z},600513:function(t,e,n){var i=n(321435);e.Z=i.Z},471404:function(t,e,n){var i=n(183457);e.Z=i.Z},943351:function(t,e,n){var i=n(472234);e.Z=i.Z},443998:function(t,e,n){var i=n(17859);e.Z=i.Z},793795:function(t,e,n){var i=n(462115);e.Z=i.Z},552804:function(t,e,n){var i=n(593231);e.Z=i.Z},110556:function(t,e,n){var i=n(387215);e.Z=i.Z},290684:function(t,e,n){var i=n(206701);e.Z=i.Z},792822:function(t,e,n){var i=n(326762);e.Z=i.Z},389061:function(t,e,n){var i=n(974278);e.Z=i.Z},397495:function(t,e,n){var i=n(854661);e.Z=i.Z},922980:function(t,e,n){var i=n(468894);e.Z=i.Z},870608:function(t,e,n){var i=n(506164);e.Z=i.Z},21576:function(t,e,n){var i=n(666074);e.Z=i.Z},852216:function(t,e,n){var i=n(736127);e.Z=i.Z},787541:function(t,e,n){var i=n(903548);e.Z=i.Z},998914:function(t,e,n){var i=n(243801);e.Z=i.Z},442342:function(t,e,n){var i=n(423525);e.Z=i.Z},427940:function(t,e,n){var i=n(379883);e.Z=i.Z},953709:function(t,e,n){var i=n(530268);e.Z=i.Z},368383:function(t,e,n){var i=n(76333);e.Z=i.Z},378:function(t,e,n){var i=n(437398);e.Z=i.Z},168245:function(t,e,n){var i=n(464489);e.Z=i.Z},311648:function(t,e,n){var i=n(603316);e.Z=i.Z},764682:function(t,e,n){var i=n(17613);e.Z=i.Z},25248:function(t,e,n){var i=n(213330);e.Z=i.Z},457330:function(t,e,n){var i=n(622884);e.Z=i.Z},199716:function(t,e,n){var i=n(474741);e.Z=i.Z},289227:function(t,e,n){var i=n(664205);e.Z=i.Z},779944:function(t,e,n){var i=n(99693);e.Z=i.Z},920402:function(t,e,n){var i=n(43585);e.Z=i.Z},753048:function(t,e,n){var i=n(246021);e.Z=i.Z},678230:function(t,e,n){var i=n(941372);e.Z=i.Z},186633:function(t,e,n){var i=n(65307);e.Z=i.Z},53498:function(t,e,n){var i=n(516935);e.Z=i.Z},150735:function(t,e,n){var i=n(342193);e.Z=i.Z},505106:function(t,e,n){var i=n(259799);e.Z=i.Z},871389:function(t,e,n){var i=n(102848);e.Z=i.Z},858258:function(t,e,n){var i=n(915360);e.Z=i.Z},720932:function(t,e,n){var i=n(184851);e.Z=i.Z},40555:function(t,e,n){var i=n(623811);e.Z=i.Z},206290:function(t,e,n){var i=n(715122);e.Z=i.Z},245855:function(t,e,n){var i=n(32645);e.Z=i.Z},106246:function(t,e,n){var i=n(24992);e.Z=i.Z},622462:function(t,e,n){var i=n(86042);e.Z=i.Z},458899:function(t,e,n){var i=n(788639);e.Z=i.Z},448291:function(t,e,n){var i=n(198597);e.Z=i.Z},120449:function(t,e,n){var i=n(753438);e.Z=i.Z},714296:function(t,e,n){var i=n(520650);e.Z=i.Z},34128:function(t,e,n){var i=n(34962);e.Z=i.Z},426899:function(t,e,n){var i=n(583545);e.Z=i.Z},152453:function(t,e,n){var i=n(361253);e.Z=i.Z},857664:function(t,e,n){var i=n(263095);e.Z=i.Z},522795:function(t,e,n){var i=n(562434);e.Z=i.Z},461716:function(t,e,n){var i=n(565477);e.Z=i.Z},85346:function(t,e,n){var i=n(908600);e.Z=i.Z},74397:function(t,e,n){var i=n(569554);e.Z=i.Z},704408:function(t,e,n){var i=n(501950);e.Z=i.Z},12744:function(t,e,n){var i=n(759950);e.Z=i.Z},634113:function(t,e,n){var i=n(247326);e.Z=i.Z},783232:function(t,e,n){var i=n(523035);e.Z=i.Z},244297:function(t,e,n){var i=n(603645);e.Z=i.Z},133202:function(t,e,n){var i=n(892626);e.Z=i.Z},707115:function(t,e,n){var i=n(164766);e.Z=i.Z},516604:function(t,e,n){var i=n(188346);e.Z=i.Z},288888:function(t,e,n){var i=n(115391);e.Z=i.Z},712851:function(t,e,n){var i=n(906262);e.Z=i.Z},78940:function(t,e,n){var i=n(872672);e.Z=i.Z},385558:function(t,e,n){var i=n(848421);e.Z=i.Z},580099:function(t,e,n){var i=n(42344);e.Z=i.Z},908411:function(t,e,n){var i=n(177680);e.Z=i.Z},475794:function(t,e,n){var i=n(754935);e.Z=i.Z},845964:function(t,e,n){var i=n(809106);e.Z=i.Z},134485:function(t,e,n){var i=n(938030);e.Z=i.Z},641361:function(t,e,n){var i=n(62046);e.Z=i.Z},790377:function(t,e,n){var i=n(684398);e.Z=i.Z},928914:function(t,e,n){var i=n(347294);e.Z=i.Z},796265:function(t,e,n){var i=n(747516);e.Z=i.Z},467045:function(t,e,n){var i=n(712425);e.Z=i.Z},146553:function(t,e,n){var i=n(190135);e.Z=i.Z},352216:function(t,e,n){var i=n(664648);e.Z=i.Z},459114:function(t,e,n){var i=n(777548);e.Z=i.Z},509982:function(t,e,n){var i=n(587019);e.Z=i.Z},808795:function(t,e,n){var i=n(747039);e.Z=i.Z},271729:function(t,e,n){var i=n(444132);e.Z=i.Z},594824:function(t,e,n){var i=n(170181);e.Z=i.Z},392105:function(t,e,n){var i=n(73781);e.Z=i.Z},137631:function(t,e,n){var i=n(383659);e.Z=i.Z},612701:function(t,e,n){var i=n(662142);e.Z=i.Z},666465:function(t,e,n){var i=n(116225);e.Z=i.Z},111698:function(t,e,n){var i=n(285069);e.Z=i.Z},953467:function(t,e,n){var i=n(448633);e.Z=i.Z},540579:function(t,e,n){var i=n(621115);e.Z=i.Z},616901:function(t,e,n){var i=n(896082);e.Z=i.Z},379048:function(t,e,n){var i=n(305648);e.Z=i.Z},515126:function(t,e,n){var i=n(744443);e.Z=i.Z},819457:function(t,e,n){var i=n(663813);e.Z=i.Z},373402:function(t,e,n){var i=n(522613);e.Z=i.Z},725729:function(t,e,n){n.d(e,{D1:function(){return i.D1},ew:function(){return i.ew},qC:function(){return i.qC}});var i=n(305043);e.ZP=i.ZP},579132:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"rootRef",staticClass:"ui-load-more",class:{"ui-load-more--divider":this.finished&&!this.empty,"ui-load-more--empty":this.empty&&!this.dense,"ui-load-more--with-retry-icon":this.error&&this.renderErrorRetryIcon},attrs:{"data-fcn-component":"","data-fr-15aeb3b1c":""},on:{click:this.onClick}},[this.renderLoading?[this._t("loading",[this.loadingIcon?e("svg-icon",{staticClass:"ui-load-more__loading-icon",attrs:{name:"ask-loading","data-fc-1027c2895":""}}):this._e(),this.loadingText?e("div",[this._v(this._s(this.loadingText))]):this._e()])]:this.error?[this._t("error",[this.renderErrorRetryIcon?e("svg-icon",{staticClass:"ui-load-more__retry-icon",attrs:{name:"outlined-refresh","data-fc-1027c2896":""}}):this._e(),this.renderErrorText?e("div",[this._v(this._s(this.renderErrorText))]):this._e()])]:this.finished&&this.empty?[this._t("empty",[this.emptyText?e("div",[this._v(this._s(this.emptyText))]):this._e()])]:this.finished?[this._t("finished",[e("div",this.finishedText?[this._v(this._s(this.finishedText))]:{staticClass:"ui-load-more__dot"})])]:this.canLoadMore?[this._t("load-more",[e("div",[this._v(this._s(this.renderLoadMoreText))])])]:this._e()],2)},o=[]},880818:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dr-report-inner-scroll",attrs:{"data-fcn-dr-report-inner-scroll":"","data-fr-15a21ad68":""}},[e("markdown-content",{staticClass:"deep-research-report__content deep-research-report__content--header",class:{"deep-research-report__content--finish":this.isAnswerFinish},attrs:{"markdown-class-list":["markdown--deep-chatbot"],markdown:this.markdownTitle,"is-finish":!!this.markdownBody,"data-fc-1ea13ff36":""}}),e("div",{directives:[{name:"resize",rawName:"v-resize.height",value:this.bodyHeight,expression:"bodyHeight",modifiers:{height:!0}}],staticClass:"deep-research-report__body"},[this.markdownBody&&this.showLoading?e("transition",{attrs:{name:"fade-loading","data-fc-1ea13ff34":""},on:{"after-leave":this.onLoadingLeave}},[e("div",[this.needFixBodyToBottom?e("div",{staticClass:"fix-bottom__gradient"}):this._e(),e("div",{class:{"deep-research-report__content--fix-bottom":this.needFixBodyToBottom,"deep-research-report__content--fix-top":!this.needFixBodyToBottom}},[e("markdown-content",{directives:[{name:"resize",rawName:"v-resize.height",value:this.contentHeight,expression:"contentHeight",modifiers:{height:!0}}],staticClass:"deep-research-report__content",attrs:{"markdown-class-list":["markdown--deep-chatbot"],markdown:this.markdownBody,"is-finish":this.isAnswerFinish,"data-fc-1ea13ff32":""}})],1)])]):this._e(),this.markdownBodyForFinish&&this.showFinish?e("transition",{attrs:{name:"fade-finish","data-fc-1ea13ff30":""}},[e("div",{staticClass:"deep-research-report__content--fix-top"},[e("markdown-content",{staticClass:"deep-research-report__content deep-research-report__content--finish",attrs:{"markdown-class-list":["markdown--deep-chatbot"],markdown:this.markdownBodyForFinish,"is-finish":"","data-fc-1ea13ff2e":""}})],1)]):this._e()],1),this._t("footer")],2)},o=[]},998848:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"deep-research-report__header",attrs:{"data-fcn-report-header":"","data-fr-1216dae70":""}},[e("ui-image",{staticClass:"deep-research-report__header-icon",attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/search_medium.svg","data-fc-10c481f2e":""}}),e("div",[this._v("AI搜索深度研究报告")])],1)},o=[]},776621:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"report-warning",class:{"report-warning--only-line-one":this.isWordingOnlyLineOne},attrs:{"data-fcn-report-warning":"","data-fr-1cd88531e":""}},[e("ui-image",{staticClass:"report-warning__icon",attrs:{size:16,url:"https://res.wx.qq.com/t/components/icons/base/exclamation_mark_circle_regular.svg","data-fc-1e3821040":""}}),e("div",{directives:[{name:"resize",rawName:"v-resize.height",value:this.wordingHeight,expression:"wordingHeight",modifiers:{height:!0}}],staticClass:"report-warning__wording"},[this._v(this._s(this.wording))])],1)},o=[]},209343:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"security-tips",attrs:{"data-fcn-security-tips":"","data-fr-1e6841cb2":""}},[this._v(this._s(this.wording||"暂无相关内容，换个话题问问吧"))])},o=[]},55674:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"deep-research-step-finish",attrs:{"data-fcn-finish-task":"","data-fr-1b32bbfac":""}},[e("div",{staticClass:"deep-research-step-finish__item"},[this.taskInfo&&this.taskInfo.searcherInfo&&this.taskInfo.searcherInfo.queryInfo&&this.taskInfo.searcherInfo.queryInfo.length?e("search-list-finish-step",{staticClass:"deep-research-step-finish__item-search-list",attrs:{"query-info":this.taskInfo&&this.taskInfo.searcherInfo&&this.taskInfo.searcherInfo.queryInfo,"task-summary":this.taskInfo&&this.taskInfo.taskSummary,"is-end-style":this.isEndStyle,"task-info":this.taskInfo,"is-finish":this.isFinish,"data-fc-126d9e547":""}}):this._e(),e("div",{ref:"markdownRef"},[e("markdown-content",{staticClass:"deep-research-step-finish__item-summary",attrs:{markdown:this.text,"is-finish":this.isFinish,"markdown-class-list":["markdown--chatbot"],"data-fc-126d9e548":""}})],1)],1)])},o=[]},354701:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("more-tag",{attrs:{"data-fc-17679c062":"","data-fcn-loading-step":"","data-fr-150ab74a2":""}})},o=[]},471672:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{position:"relative"},attrs:{"data-fcn-normal-task":"","data-fr-11b47e354":""}},[n("div",{ref:"header",staticClass:"title"},[n("span",{staticClass:"title-prefix",class:t.animationFinish?"title-prefix--active":""},[t._v("\n        调研"+t._s(t.animationFinish?"":"中")+"：\n      ")]),t._v("\n      "+t._s(t.animationFinish?t.taskInfo.taskDesc:t.showTitle)+"\n    ")]),t.currentComponent?n("transition",{attrs:{name:"fade",appear:"","data-fc-15925bc9b":""}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],style:{height:t.isEndStyle?"unset":t.animationWrapHeight-t.headerHeight+"px",marginTop:"4px"}},[t.currentComponent?n(t.currentComponent,t._b({key:t.componentKey,tag:"component",attrs:{"mp-content-map":t.mpContentMap,"header-height":t.headerHeight,"is-end-style":t.isEndStyle,"data-fc-15925bc9c":""},on:{"animation:finish":function(){return t.onSearchAnimationFinish(t.currentComponent)}}},"component",t.currentComponentProps,!1)):t._e()],1)]):n("div",{style:{position:"relative",minHeight:t.taskInfo&&!(t.animationFinish||t.isEndStyle)?t.animationWrapHeight-t.headerHeight+"px":"unset"}},[n("finish-task",{attrs:{"task-info":t.taskInfo,"task-idx":t.taskIdx,"task-infos":t.taskInfos,"task-summary":t.taskInfo&&t.taskInfo.taskSummary,"is-cache":t.isCache,"is-end-style":t.isEndStyle,"data-fc-15925bc9d":""},on:{"scroll-to-bottom":function(e){return t.$emit("scroll-to-bottom",e)},finish:t.onSummaryFinish}})],1)],1)},o=[]},165654:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-list-finish-step",attrs:{"data-fcn-search-list-finish-step":"","data-fr-13ea7c147":""}},[n("transition",{attrs:{name:t.isFinish?"":"title-fade",appear:!t.isFinish,"data-fc-1d35f306c":""}},[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:t.taskSummary,expression:"taskSummary",modifiers:{stop:!0}}],staticClass:"title active__opacity",attrs:{"dr-doc-report-id":t.expandDocReportId,"data-cli":""},on:{click:t.tapExpand}},[n("span",[t._v("搜索"+t._s(t.queryInfo.length)+"个查询词\n          "),t.taskSummary&&t.taskInfo&&t.taskInfo.status>0||t.isEndStyle?t.taskInfo.status>0&&t.urls.length?n("span",[t._v("，找到"+t._s(t.urls.length)+"个参考资料")]):t._e():n("span",[t._v("，正在整理资料")])]),n("ui-arrow",{staticClass:"arrow-icon",attrs:{direction:t.isExpand?"up":"down",align:"flex","data-fc-1d35f306a":""}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isExpand,expression:"isExpand"}],key:t.isExpand},[n("div",{staticClass:"sub-title"},t._l(t.queryInfo,function(e){return n("span",{key:e.searchSid},[t._v("“"+t._s(e.query)+"”")])}),0),n("div",{staticClass:"retrieve-url"},t._l(t.urls,function(e,i){return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}},{name:"mp-preload",rawName:"v-mp-preload",value:t.isMpDoc(e.url)?{url:e.url,jumpType:3}:void 0,expression:"isMpDoc(retrieveUrl.url) ? { url: retrieveUrl.url, jumpType: 3 } : undefined"}],key:e.docId,staticClass:"retrieve-url__item active__mask",attrs:{"dr-doc-report-id":t.getDocInfo(e,i),"data-cli":""},on:{click:function(n){return t.openUrl(e,i)}}},[n("div",{staticClass:"retrieve-url__item-header"},[n("div",{staticClass:"retrieve-url__item-header-left"},[n("ui-image",{staticClass:"retrieve-url__item-header-left-icon",attrs:{url:e.iconUrl,"allow-empty":"",mode:"avatar",size:16,"data-fc-1d35f3068":""}}),n("span",{staticClass:"retrieve-url__item-header-left-nickname"},[t._v(t._s(e.nickName))]),n("div",{staticClass:"retrieve-url__item-header-left-title"},[t._v("\n                ："+t._s(e.title)+"\n              ")])],1),n("ui-arrow",{attrs:{direction:"right",align:"flex","data-fc-1d35f3066":""}})],1)])}),0)])],1)},o=[]},873409:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deep-search-list deep-research-step-card",style:t.contentStyle,attrs:{"data-fcn-search-list-step":"","data-fr-16212f59b":""}},[n("transition",{attrs:{name:t.isAnimation?"title-fade":"",appear:t.isAnimation,"data-fc-13f688414":""}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"deep-search__title"},[t._v("搜索："+t._s(t.queryItem.query))])]),n("transition",{attrs:{name:t.isAnimation?"slide-left":"",appear:t.isAnimation,"data-fc-13f688412":""}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],ref:"retrieveWrapRef",staticClass:"retrieve-url-wrap"},[n("div",{staticClass:"retrieve-url"},[n("transition-group",{attrs:{name:t.isAnimation?"item-fade":"",appear:t.isAnimation,"data-fc-13f688410":""}},t._l(t.showList,function(e,i){return n("div",{key:e.docId,staticClass:"url-item",style:{"--index":i+2}},[n("transition",{attrs:{name:t.activeIndex===i?"mask-show":"",appear:t.activeIndex===i,"data-fc-13f68840e":""}},[n("div",{staticClass:"retrieve-url__item",class:{active__bg:t.activeIndex===i},style:{paddingTop:0===i?"0px":"16px"}},[n("div",{staticClass:"retrieve-url__item-header"},[n("ui-image",{staticClass:"retrieve-url__item-header-icon",attrs:{url:e.iconUrl,"allow-empty":"",mode:"avatar",size:16,"data-fc-13f68840c":""}}),n("span",{staticClass:"retrieve-url__item-header-nickname"},[t._v(t._s(e.nickName))])],1),n("div",{staticClass:"retrieve-url__item-title"},[t._v("\n                    "+t._s(e.nickName?":":"")+" "+t._s(e.title)+"\n                  ")])])]),n("text-typewriter",{attrs:{"mp-content-map":t.mpContentMap,"retrieve-url":e,"data-fc-13f68840a":""},on:{finish:function(){return t.onTypeFinish(i)}}})],1)}),0)],1)])])],1)},o=[]},72950:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.canShow,expression:"canShow"}],staticClass:"single-type-writer",attrs:{"data-fcn-search-list-text-typewriter":"","data-fr-100d5c24e":""}},[e("div",[e("span",{directives:[{name:"xss-html",rawName:"v-xss-html",value:this.showText,expression:"showText"}]}),this.isFinish?this._e():e("more-tag",{attrs:{"data-fc-119e287a3":""}})],1)])},o=[]},894622:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-header-sticky-container",attrs:{"data-fcn-tab-header-sticky-container":"","data-fr-1071e3927":""}},[this._t("default"),this.topStickyList.length&&this.enable?e("div",{staticClass:"tab-header-sticky-container__sticky-list",style:this.topListStyle},this._l(this.topStickyList,function(t){return e("tab-header",{key:t.tabInfo.id,attrs:{"tab-info":t.tabInfo,"is-sticky":"","data-fc-146ae282c":""}})}),1):this._e(),this.bottomStickyList.length&&this.enable?e("div",{staticClass:"tab-header-sticky-container__sticky-list",style:this.bottomListStyle},this._l(this.bottomStickyList,function(t){return e("tab-header",{key:t.tabInfo.id,attrs:{"tab-info":t.tabInfo,"is-sticky":"","data-fc-146ae282a":""}})}),1):this._e()],2)},o=[]},378669:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"active",rawName:"v-active.stop.instant",modifiers:{stop:!0,instant:!0}}],staticClass:"deep-research-tab-container__tab-item-header active__absolute",class:{"deep-research-tab-container__tab-item-header--not-start":t.isNotStart,"deep-research-tab-container__tab-item-header--sticky":t.isSticky,"deep-research-tab-container__tab-item-header--self-sticky":t.isSelfSticky},attrs:{"dr-doc-report-id":t.tabInfo.reportData.canReport?t.DRR_docExposeReportId({docId:t.tabInfo.reportData.docId,docType:"tab"}):"","data-cli":"","data-fcn-tab-header":"","data-fr-1240ccf9a":""},on:{click:function(e){return e.stopPropagation(),t.onClickHeader(e)}}},[t.tabInfo.style&&t.tabInfo.style.topLine?n("div",{staticClass:"deep-research-tab-container__tab-item-header-top-line"}):t._e(),t.tabInfo.style&&t.tabInfo.style.bottomLine?n("div",{staticClass:"deep-research-tab-container__tab-item-header-bottom-line"}):t._e(),n("div",{staticClass:"deep-research-tab-container__tab-item-header-icon"},[t.isLoading?n("div",{staticClass:"icon-loading"},[n("ui-icon-loading",{attrs:{"data-fc-15d8d2344":""}})],1):t.isNotStart||t.isTerminate?n("div",{staticClass:"icon-not-start",class:{"icon-not-start--terminate":t.isTerminate}}):n("ui-image",{staticClass:"icon-check",attrs:{url:"https://res.wx.qq.com/t/components/icons/base/check_mark_regular.svg",size:20,"data-fc-15d8d2342":""}})],1),n("div",{staticClass:"deep-research-tab-container__tab-item-header-title",class:{"deep-research-tab-container__tab-item-header-title--not-start":t.isNotStart,"deep-research-tab-container__tab-item-header-title--start":!t.isNotStart}},[t._v(t._s(t.tabInfo.title))])])},o=[]},315452:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deep-research-full-report",attrs:{"visible-report-id":t.drSearchIdForReport,"data-expose-ratio":"0.01","dr-doc-report-id":t.DRR_docExposeReportId({docId:t.reportId,docType:"full_report"}),"visible-report-action-value":t.visibleReportActionValue,"data-fcn-deep-research-report":"","data-fr-1aae0b200":""}},[t.markdownText?n("portal",{attrs:{to:"custom-nav-bar","data-fc-1b1358d9e":""}},[n("deep-research-expose-data-middle",t._b({staticClass:"deep-research-full-report-button-list",attrs:{"data-fc-1b1358d9c":""}},"deep-research-expose-data-middle",t.DRR_boxData,!1),[n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"button-item active__mask",attrs:{"dr-doc-report-id":t.DRR_docExposeReportId({docId:t.reportId,docType:"copy_report"}),"data-cli":""},on:{click:t.handleCopy}},[n("ui-image",{attrs:{size:24,url:"https://res.wx.qq.com/t/components/icons/base/copy_regular.svg","data-fc-1b1358d9a":""}})],1),t.os.mobile?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"button-item active__mask",attrs:{"dr-doc-report-id":t.DRR_docExposeReportId({docId:t.reportId,docType:"download"}),"data-cli":""},on:{click:function(e){return t.handleOpenPdf(!0)}}},[n("ui-image",{attrs:{size:24,url:"https://search.wxqcloud.qq.com/t/fed_upload/a98d8daddaa5f994f0771bcf6224769c/pdf.svg","data-fc-1b1358d98":""}})],1):t._e()])],1):t._e(),n("report-header",{attrs:{"data-fc-1b1358d96":""}}),t.markdownContent?[n("markdown-content",{ref:"markdownContent",attrs:{markdown:t.markdownText,"is-finish":"","reference-list":t.refUrls,"markdown-class-list":["markdown--chatbot","markdown--dr-full-report"],"max-table-cell-width":t.maxTableCellWidth,"data-fc-1b1358d94":""},on:{"content:expose":t.handleContentExpose}}),t.warningWording?n("report-warning",{attrs:{wording:t.warningWording,"data-fc-1b1358d92":""}}):t._e(),n("dr-reference",{attrs:{"ref-urls":t.refUrls,"data-fc-1b1358d90":""}}),n("div",{staticClass:"dr-pdf-gen-container__footer"},[t._v("由搜一搜AI搜索深度研究生成")])]:[n("div",{staticClass:"deep-research-full-report__title"},[t._v(t._s(t.itemInfo.userQuery))]),n("security-tips",{attrs:{wording:t.securityWording,"data-fc-1b1358d8e":""}})]],2)},o=[]},582067:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("deep-research-tab-container",{ref:"tabContainer",staticClass:"deep-research",attrs:{"visible-report-id":t.drSearchIdForReport,"tab-info-list":t.tabInfoList,"data-fc-139ffcf20":"","data-fcn-deep-research":"","data-fr-112631731":""},scopedSlots:t._u([{key:"before",fn:function(){return[n("dr-header",{directives:[{name:"resize",rawName:"v-resize.height",value:t.headerHeight,expression:"headerHeight",modifiers:{height:!0}}],attrs:{"is-finish":t.isFinish,query:t.d.itemInfo.userQuery,"data-fc-139ffcf21":""}}),t.isSecurityBlockedStyle?n("security-tips",{attrs:{wording:t.securityWording,"data-fc-139ffcf22":""}}):t._e(),t.canShowStopAnswer?n("div",{staticClass:"deep-research-stop-answer",class:{"deep-research-stop-answer--finish":t.isFinish},on:{click:t.onStopAnswer}},[t._v(t._s(t.stopText))]):t._e()]},proxy:!0},{key:"tab-item",fn:function(e){var i=e.tabInfo;return[t.cgiPlanData&&i.id===t.TabType.Plan?n("research-plan",t._b({ref:"researchPlan",attrs:{item:t.cgiPlanData,"data-fc-139ffcf23":""},on:{finish:t.onPlanFinish,"scroll-to-bottom":function(e){return t.onAutoScrollToBottom(i,e)}}},"research-plan",t.commonProps,!1)):t.cgiStepData&&i.id===t.TabType.Step?n("research-step",t._b({ref:"researchStep",attrs:{item:t.cgiStepData,"data-fc-139ffcf24":""},on:{finish:t.onStepFinish,"scroll-to-bottom":function(e){return t.onAutoScrollToBottom(i,e)}}},"research-step",t.commonProps,!1)):t.cgiReportData&&i.id===t.TabType.Report?n("research-report",t._b({ref:"researchReport",attrs:{item:t.cgiReportData,"is-finish":t.isFinish,"data-fc-139ffcf25":""},on:{finish:t.onReportFinish}},"research-report",t.commonProps,!1)):t._e()]}}])})},o=[]},20437:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dr-header",class:{"dr-header--no-tips":!0},attrs:{"data-fcn-dr-header":"","data-fr-1d7120c5e":""}},[e("div",{ref:"queryRef",staticClass:"dr-header__query"},[this._v(this._s(this.query))]),this._e()])},o=[]},542813:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tab-header-sticky-container",{staticClass:"deep-research-tab-container",attrs:{"tab-info-list":t.tabInfoList,enable:t.enableSticky,"data-fc-16f74b4fa":"","data-fcn-tab-container":"","data-fr-166b12f24":""}},[t._t("before"),n("div",{directives:[{name:"resize",rawName:"v-resize",value:t.handleResize,expression:"handleResize"}],staticClass:"deep-research-tab-container__tab-list"},t._l(t.tabInfoList,function(e,i){return n("deep-research-tab-item",{key:e.id||e.title,ref:"tabItem",refInFor:!0,attrs:{"sticky-info":t.getStickyInfo(i),"tab-info":e,"data-fc-16f74b4f8":""}},[t._t("tab-item",null,{tabInfo:e})],2)}),1)],2)},o=[]},196596:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"deep-research-tab-container__tab-item",attrs:{"data-fcn-tab-item":"","data-fr-1b96b6d94":""}},[e("tab-header",{attrs:{"tab-info":this.tabInfo,"sticky-info":this.stickyInfo,"data-fc-17402448a":""}}),e("div",{staticClass:"deep-research-tab-container__tab-item-body"},[e("div",{staticClass:"deep-research-tab-container__tab-item-body-indicator"}),e("div",{staticClass:"deep-research-tab-container__tab-item-body-content"},[this._t("default")],2)]),this.tabInfo.style&&this.tabInfo.style.bottomHeight&&!this.isNotStart?e("div",{style:{height:this.tabInfo.style.bottomHeight}}):this._e()],1)},o=[]},147734:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"resize",rawName:"v-resize",value:this.handleResize,expression:"handleResize"}],staticClass:"deep-research-plan",attrs:{"data-fcn-plan":"","data-fr-1ad897722":""}},[e("markdown-content",{attrs:{markdown:this.textToShow,"is-finish":this.isAnswerFinish,"markdown-class-list":["markdown--chatbot"],"data-fc-17e2d49a2":""}})],1)},o=[]},713239:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deep-research-report-container",style:t.style,attrs:{"data-fcn-report":"","data-fr-13dd6050c":""}},[n("div",{staticClass:"deep-research-report-top-spacer"}),n("div",{directives:[{name:"active",rawName:"v-active"},{name:"resize",rawName:"v-resize.borderBox.height",value:t.cardHeight,expression:"cardHeight",modifiers:{borderBox:!0,height:!0}}],staticClass:"deep-research-report active__absolute",class:{"deep-research-report--not-finish":!t.isAnswerFinish,"deep-research-report--finish":t.isAnswerFinish},attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickReportPanel(e)}}},[n("report-header",{directives:[{name:"resize",rawName:"v-resize.borderBox.height",value:t.headerHeight,expression:"headerHeight",modifiers:{borderBox:!0,height:!0}}],class:{"deep-research-report__header--not-finish":!t.isAnswerFinish},attrs:{"data-fc-1418ab1f7":""}}),n("div",{style:{height:"calc(100% - "+t.headerHeight+"px)"}},[n("dr-report-inner-scroll",{attrs:{"text-to-show":t.textToShow,"is-answer-finish":t.isAnswerFinish,"data-fc-1418ab1f8":""},scopedSlots:t._u([{key:"footer",fn:function(){return[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:t.isAnswerFinish,expression:"isAnswerFinish",modifiers:{stop:!0}}],staticClass:"deep-research-report__footer active__absolute",class:{"deep-research-report__footer--finish":t.isAnswerFinish,"deep-research-report__footer--loading":!t.isAnswerFinish},attrs:{"dr-doc-report-id":t.DRR_docExposeReportId({docId:t.item.id,docType:"full_report"}),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickReportPanel(e)}}},[t.isAnswerFinish?[n("div",{staticClass:"deep-research-report__footer-finish-text"},[t._v("\n                  看完整报告\n                ")]),n("ui-arrow",{attrs:{direction:"right",size:"big","data-fc-1418ab1f9":""}})]:[n("div",{staticClass:"deep-research-report__footer-icon"},[n("ui-icon-loading",{attrs:{"data-fc-1418ab1fa":""}})],1),n("div",{staticClass:"deep-research-report__footer-loading-text"},[t._v("报告撰写中")])]],2)]},proxy:!0}])})],1)],1)])},o=[]},577925:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"deep-research-step",style:t.style,attrs:{"data-fcn-step":"","data-fr-1e1ff92dc":""}},[n("div",{staticClass:"wrapper"},[t.showTaskList.length?t._l(t.showTaskList,function(e,i){return n("div",{key:e&&e.id||i,staticClass:"task-wrap"},[n(t.TaskComponents[0],{tag:"component",attrs:{"task-cnt":t.item.taskCnt,"task-idx":i,"task-info":e,"task-infos":t.taskInfos,"animation-wrap-height":t.animationWrapHeight,"is-cache":t.item.isCache,"is-end-style":t.isEndStyle,"data-fc-151069bdf":""},on:{"scroll-to-bottom":function(e){return t.$emit("scroll-to-bottom",e)},finish:t.onTaskFinish}})],1)}):t._e()],2)])},o=[]},496627:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("text-height-animate",{ref:"animateRef",attrs:{"is-sync-cache":t.isSyncCache,"is-finish":t.hasAnimateFinish,"data-fc-14ee7d43c":"","data-fcn-text-answer":"","data-fr-13417fe95":""}},[t.isLoading?[t._t("loading")]:n("text-content",t._b({ref:"textContentRef",attrs:{think:t.thinkToShow,"show-complete-think":t.showCompleteThink,answer:t.answerToShow,"boxes-json":t.boxesJson,"expand-html":t.expandHtml,"is-sync-cache":t.isSyncCache,reference:t.bottomSource,"is-finish":t.isTextContentFinish,"is-answer-finish":t.hasAnimateFinish,"sub-items":t.subItems,"sub-items-wording":t.subItemsWording,"status-flag":t.statusFlag,"get-type-writer":t.getTypeWriter,"is-sub-items-show-when-full":t.isShowSubItemsWhenFullExp,"is-calculate-height-mode":t.isCalculateHeightMode,"data-fc-14ee7d43d":""},on:{"speed-change":t.onSpeedChange,"tap:unfold":t.onTapUnfold,"show-complete-think:change":t.onShowCompleteThinkChange,"show-reference-rest":t.onShowReferenceRest,"hide:stopAnswerBtn":function(e){return t.$emit("hide:stopAnswerBtn")}},scopedSlots:t._u([{key:"answer-bottom",fn:function(){return[(t.isBusy||t.timeTitle)&&t.isChatbot?n("div",{staticClass:"answer-bottom",class:{"answer-bottom--has-show-rest":t.hasShowReferenceRest}},[t.isBusy?n("div",{staticClass:"busy-tips"},[t._v(t._s(t.busyWording))]):t._e(),n("div",{staticClass:"infos"},[t.timeTitle?n("div",{staticClass:"time-title"},[t._v(t._s(t.timeTitle))]):t._e(),t.hasSnapshotHistory?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"history-btn active__mask",attrs:{"data-report-id":t.M_itemReportId(t.snapshotHistoryReportId),"data-cli":""},on:{click:t.openHistoryHalfScreen}},[t._v("版本记录")]):t._e()])]):t._e()]},proxy:!0},{key:"content-bottom",fn:function(){return[t._t("content-bottom",null,{isCompactBottom:t.isCompactBottom})]},proxy:!0},{key:"universal-source-right",fn:function(){return[t._t("universal-source-right")]},proxy:!0},{key:"mixed-chatbot-bottom",fn:function(){return[t._t("mixed-chatbot-bottom")]},proxy:!0},{key:"before-reference",fn:function(){return[t.allowOnlineReAnswer?n("div",{staticClass:"online-regenerate",class:{"online-regenerate--quark":t.isQuarkStyle&&!t.bottomSource}},[n("div",[t._v("已根据本文内容回答")]),n("ui-button",{attrs:{"data-report-id":t.M_itemReportId("online_reanswer:online_reanswer"),type:10,"data-fc-14ee7d43e":""},nativeOn:{click:function(e){return t.onTapOnlineReAnswer(e)}}},[t._v("结合网络内容重答")])],1):t._e(),t._t("before-reference")]},proxy:!0},{key:"collapse-bottom-when-collapse",fn:function(){return[t._t("collapse-bottom-when-collapse")]},proxy:!0}],null,!0)},"text-content",t.commonProps,!1))],2)},o=[]},87512:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{"data-fcn-video-answer":"","data-fr-150d98129":""}},[this.isLoading?this._t("loading"):e("div",{directives:[{name:"resize",rawName:"v-resize.value",value:this.onContainerResize,expression:"onContainerResize",modifiers:{value:!0}}]},[e("video-content",{ref:"videoContentRef",attrs:{"video-source":this.videoSource,"step-items":this.stepItems,"play-range":this.playRange,"is-finish":this.isFinish,"is-typewriter-finish":this.isAnswerTypeAnimateFinish,duration:this.duration,"markdown-text":this.text,"has-text":!this.isStepAnswer,"is-sync-cache":this.isSyncCache,query:this.source.query||this.source.title,"sub-items":this.subItems,"data-fc-16b52b7b0":""},on:{"speed-change":this.onSpeedChange}})],1)],2)},o=[]},383852:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer-interaction-item",attrs:{"data-fcn-answer-interaction-item":"","data-fr-1b061bbc2":""}},[n("friend-list-item",{staticClass:"friend-list-box",attrs:{size:"large","friend-like-info":t.interactInfo&&t.interactInfo.real_like_info,"disabled-click":!1,"report-id":t.M_itemReportId(t.reportIdMap.realLikeFriend),"data-fc-1521521f2":""},on:{"click-friend-list":t.onClickFriendList}}),n("div",{staticClass:"interaction-box js--top-one-qa-interaction-bar"},[t._t("default"),n("div",{staticClass:"interaction-gap"}),t.actionFlag.like_flag>0?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"interaction-btn interaction-item active__absolute",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.like),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickLike(e)}}},[n("svg-icon",{staticClass:"interaction-icon",style:{fill:t.renderLikeColor},attrs:{name:t.renderLikeIcon,"data-fc-1521521f3":""}}),n("div",{staticClass:"interaction-text"},[t._v(t._s(t.getInteractionText("赞",t.likeCount)))])],1):t._e(),t.actionFlag.real_like_flag>0?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"interaction-btn interaction-item active__absolute",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.realLike),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickFriend(e)}}},[n("svg-icon",{staticClass:"interaction-icon",style:{fill:t.renderFriendColor},attrs:{name:t.renderFriendIcon,"data-fc-1521521f4":""}}),n("div",{staticClass:"interaction-text"},[t._v(t._s(t.getInteractionText("推荐",t.realLikeCount)))])],1):t._e(),t.actionFlag.forward_flag>0&&t.canShare?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"interaction-btn interaction-item active__absolute",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.forward),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickShare(e)}}},[n("svg-icon",{staticClass:"interaction-icon",attrs:{name:"outlined-forward","data-fc-1521521f5":""}}),n("div",{staticClass:"interaction-text"},[t._v(t._s(t.getInteractionText("转发",t.forwardCount)))])],1):t._e(),t.actionFlag.comment_flag>0?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"interaction-btn interaction-item active__absolute",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.comment),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickComment(e)}}},[n("svg-icon",{staticClass:"interaction-icon",attrs:{name:"outlined-comment","data-fc-1521521f6":""}}),n("div",{staticClass:"interaction-text"},[t._v(t._s(t.getInteractionText("评论",t.commentCount)))])],1):t._e()],2),!t.canShowAppendChatInput&&t.actionFlag.comment_flag>0?n("div",{staticClass:"write-comment-box js--top-one-qa-write-comment-bar",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.commentBar)},on:{click:function(e){return e.stopPropagation(),t.onClickCommentBar(e)}}},[t._v("\n      写评论\n    ")]):t._e()],1)},o=[]},934504:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"rootRef",attrs:{"data-fcn-auto-load-more-wrapper":"","data-fr-10a69dc72":""}},[this._t("default",null,{autoLoadMoreDisabled:this.autoLoadMoreDisabled})],2)},o=[]},800178:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-comment-list-item":"","data-fr-132cdd214":""}},[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.isThinking,expression:"!isThinking",modifiers:{stop:!0}},{name:"long-press",rawName:"v-long-press"}],staticClass:"comments-item js--top-one-qa-comment-list-item",class:[{"comments-item--has-secondary":t.hasSecondaryCommentsPart,"comments-item--divider":t.index>0&&!t.secondary},t.secondary?"comments-item--secondary active__mask":"comments-item--top-level active__absolute"],attrs:{"data-comment-id":t.commentId,"data-report-id":t.M_itemReportId(t.reportIdMap.text),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClick(e)},"long-press-start":t.onLongPress}},[n("ui-image",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"avatar-icon active__absolute",class:["avatar-icon--"+t.avatarStyle],attrs:{url:t.avatar,size:t.secondary?20:32,mode:"avatar","allow-empty":"","data-report-id":t.M_itemReportId(t.reportIdMap.avatar),"data-fc-126ec700a":"","data-cli":""},nativeOn:{click:function(e){return e.stopPropagation(),t.onClickAvatar(t.commentInfo)}}}),n("div",{staticClass:"content-box"},[n("div",{staticClass:"author-info"},[n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"author-nickname active__link",attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickAvatar(t.commentInfo)}}},[n("div",{staticClass:"author-nickname-text"},[t._v("\n              "+t._s(t.nickname)+"\n            ")])]),t.isThinking?t._e():n("div",{staticClass:"author-ext"},[t._v(t._s(t.location)+" "+t._s(t.dateTime))]),n("div",{staticClass:"author-auto-gap"}),!t.isThinking&&t.showLikeButton?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"author-like active__absolute",class:{"author-like--liked":t.isLiked},attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.like),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickLike(e)}}},[t.likeCount?n("div",{staticClass:"author-like-text"},[t._v(t._s(t.likeCount))]):t._e(),n("svg-icon",{staticClass:"author-like-icon",attrs:{name:t.isLiked?"filled-thumb":"outlined-thumb","data-fc-126ec7008":""}})],1):t._e()]),n("div",{staticClass:"comment-box"},[n("div",{ref:"contentRef",staticClass:"comment-text",class:{"text-ellipsis":!t.expanded},style:{lineHeight:t.commentLineHeight},attrs:{role:"option"}},[t.replyToCommentId&&t.replyToNickname?[n("span",[t._v("回复 ")]),n("span",{staticClass:"reply-to-nickname"},[t._v(t._s(t.replyToNickname))]),n("span",[t._v(": ")])]:t._e(),t.richtextRenderInfo.length?n("comment-richtext",{attrs:{items:t.richtextRenderInfo,"data-fc-126ec7006":""},scopedSlots:t._u([{key:"default",fn:function(e){return[3===e.type?n("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"chatbot-text active__link",attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickAvatar(t.commentInfo,!0)}}},[t._v("@"+t._s(t.atAiNickname))]):t._e()]}}],null,!1,957683030)}):t.isThinking?n("span",{staticClass:"comment-thinking-text"},[t._v("搜索并思考中")]):t._e(),t.isThinking?n("more-tag",{attrs:{"dot-size":"0.125rem",color:"var(--FG-2)","data-fc-126ec7004":""}}):t._e()],2),t.canExpand&&!t.expanded?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"expand-area",attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickExpand(e)}}},[n("span",{staticClass:"expand-area__inner"},[t._v("展开")])]):t._e(),t.canExpand&&t.expanded?n("div",{directives:[{name:"active",rawName:"v-active.longPressChild",modifiers:{longPressChild:!0}}],staticClass:"fold-area",attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickCollapse(e)}}},[t._v("\n            收起\n          ")]):t._e()]),t.pictureList.length?n("div",{staticClass:"comment-picture-wrapper"},t._l(t.pictureList.slice(0,3),function(e,i){return n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}},{name:"image",rawName:"v-image",value:e.thumb_url,expression:"item.thumb_url"}],key:i,staticClass:"comment-picture active__absolute",class:{"comment-picture--fixed-size":t.fixedSize},style:t.pictureStyle,attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.pic),"data-cli":""},on:{click:function(n){return n.stopPropagation(),t.onPreviewImage(n,e)}}},[n("div",{staticClass:"comment-picture-spacer"}),t.pictureList.length>3&&2===i?n("div",{staticClass:"comment-picture-pic-num"},[n("div",{staticClass:"comment-picture-pic-num-row"},[n("ui-image",{attrs:{url:"https://res.wx.qq.com/t/components/icons/base/picture_regular.svg",size:16,"data-fc-126ec7002":""}}),n("span",[t._v(t._s(t.pictureList.length))])],1)]):t._e()])}),0):t._e()])],1),t.hasSecondaryCommentsPart?n("div",{staticClass:"secondary-comments-wrap"},[t.secondaryCommentList.length?n("div",{staticClass:"secondary-comments"},t._l(t.secondaryCommentList,function(e,i){return n("comment-list-item",{key:e.comment_id,staticClass:"secondary-comments-item",attrs:{"comment-info":e,"interact-info":t.interactInfo,secondary:!0,index:i,"do-polling":t.doPolling,"has-debug-entry":t.hasDebugEntry,"data-fc-126ec7000":""},on:{"click:reply":function(e){return t.$emit("click:reply",e)},"click:delete":function(n){return t.$emit("click:delete",e.comment_id)},"click:debug":function(e){return t.$emit("click:debug",e)},"click:toggle-like":function(n){return t.$emit("click:toggle-like",e.comment_id)}}})}),1):t._e(),t.hasLoadMore?n("auto-load-more-wrapper",{attrs:{"can-load-more":t.canAutoLoadMore&&!t.loadMoreLoading,"data-fc-126ec6ffe":""},on:{load:t.onAutoLoadMore}},[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.loadMoreLoading,expression:"!loadMoreLoading",modifiers:{stop:!0}}],staticClass:"secondary-comments-load-more active__opacity",attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.more),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickMore(e)}}},[n("div",{staticClass:"secondary-comments-load-more-text"},[t._v(t._s(t.loadMoreText))]),t.loadMoreLoading?n("div",{staticClass:"secondary-comments-load-more-loading circle-loading"}):n("ui-arrow",{staticClass:"secondary-comments-load-more-arrow",attrs:{direction:"down",size:"small",align:"flex","data-fc-126ec6ffc":""}})],1)]):t._e()],1):t._e()])},o=[]},436739:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-comment-list-load-more":"","data-fr-144d30eee":""}},[t.canAutoLoadMore?n("auto-load-more-wrapper",{attrs:{"can-load-more":t.hasLoadMore&&!t.loading&&t.canAutoLoadMore,"data-fc-1558ece70":""},on:{load:t.onAutoLoadMore},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.autoLoadMoreDisabled;return[t.hasLoadMore?n("ui-load-more",{staticClass:"top-comments-auto-load-more",class:{"top-comments-auto-load-more--finished":!t.hasLoadMore},attrs:{dense:"","disable-expose-auto-load":"","can-load-more":t.hasLoadMore&&!t.loading&&i,loading:t.loading,finished:!t.hasLoadMore,"data-fc-1558ece6e":""},on:{click:t.onAutoLoadMore}}):t._e()]}}],null,!1,3240945430)}):t.hasLoadMore?n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.loading,expression:"!loading",modifiers:{stop:!0}}],staticClass:"top-comments-load-more active__opacity",class:{"top-comments-load-more--divider":t.index>0},attrs:{"data-report-id":t.M_itemReportId(t.reportIdMap.more),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClick(e)}}},[n("div",{staticClass:"top-comments-load-more__text"},[t._v(t._s(t.loadMoreText))]),t.loading?n("div",{staticClass:"top-comments-load-more__loading circle-loading"}):n("ui-arrow",{staticClass:"top-comments-load-more__arrow",attrs:{direction:"down",size:"small",align:"flex","data-fc-1558ece6c":""}})],1):n("div")],1)},o=[]},962223:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.interactInfo?n("div",{attrs:{"data-fcn-community":"","data-fr-145d2896b":""}},[n("answer-interaction-item",{attrs:{"type-pos":t.typePos,"can-share":t.canShare,"interact-info":t.interactInfo,"data-fc-1747ea426":""},on:{"click-share":t.onClickShare,"click-like":function(e){return t.onClickLike()},"click-friend":function(e){return t.onClickFriend()},"click-comment":function(e){return t.showCommentInput()},"click-friend-list":t.onClickFriendList}},[t._t("default")],2),t.canShowAppendChatInput&&t.topLevelComments.length?n("div",{staticClass:"comment-area-header"},[t._v("评论")]):t._e(),t._l(t.topLevelComments,function(e,i){return n("comment-list-item",{key:e.comment_id,attrs:{"comment-info":e,"interact-info":t.interactInfo,index:i,"load-more-loading":!!t.commentLoading.second[e.comment_id],"do-polling":t.getTopQACommentById,"has-debug-entry":t.hasDebugEntry,"can-auto-load-more":t.isLastBox&&!t.canShowAppendChatInput&&!t.topLevelPageInfo.has_more&&i===t.topLevelComments.length-1,"data-fc-1747ea427":""},on:{"click:reply":function(n){return t.showCommentInput(e.comment_id,n)},"click:load":function(n){return t.loadSecondComments(e.comment_id)},"click:toggle-like":function(e){return t.toggleLike(e)},"click:delete":function(e){return t.handleDeleteComment(e)},"click:debug":t.handleDebugComment}})}),n("comment-list-load-more",{attrs:{index:t.topLevelComments.length,"top-level-page-info":t.topLevelPageInfo,loading:t.commentLoading.top,"can-auto-load-more":t.isLastBox&&!t.canShowAppendChatInput,"data-fc-1747ea428":""},on:{click:t.loadTopComments}})],2):t._e()},o=[]},408945:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.renderFriendList.length?n("div",{staticClass:"friend-list",attrs:{"data-fcn-friend-list-item":"","data-fr-1bc8bde3e":""}},[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.disabledClick,expression:"!disabledClick",modifiers:{stop:!0}},{name:"no-scale",rawName:"v-no-scale",value:t.maxRatio,expression:"maxRatio"}],staticClass:"friend-box active__absolute",class:["friend-box-"+t.size,{"friend-box--special-chars":t.hasSpecialChars}],attrs:{"data-report-id":t.reportId,"data-cli":""},on:{click:t.onClickFriendList}},[n("div",{staticClass:"friend-avarar-list"},t._l(t.renderFriendList,function(e,i){return n("ui-image",{key:i,staticClass:"friend-avarar-list-item",attrs:{size:t.iconSize,mode:"avatar","allow-empty":"",url:e.head_img_url||e.headImgUrl,"data-fc-1d4efe920":""}})}),1),t.disabledShowNickname?t._e():n("div",{staticClass:"friend-nickname"},[t._v("\n        "+t._s(t.displayNickname)+"\n      ")]),t.renderFriendList.length>1?n("div",{staticClass:"friend-postname"},[t._v("\n        "+t._s("等"+t.friendTotalCount+"个朋友")+"\n      ")]):t._e(),n("svg-icon",{staticClass:"friend-icon",attrs:{name:"like_outlined_medium","data-fc-1d4efe91e":""}})],1)]):t._e()},o=[]},42243:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return this.canShow?e("div",{staticClass:"friend-list-out",attrs:{"data-fcn-friend-list-out":"","data-fr-17695f770":""}},[e("friend-list-item",{attrs:{"friend-like-info":this.friendLikeInfo,size:"middle","data-fc-15c28f6c1":""}})],1):this._e()},o=[]},792988:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"more-pop-body",attrs:{"data-fcn-MorePopBody":"","data-fr-12e6383f4":""}},[t.showFeedbackReason?n("reason",t._b({attrs:{"data-fc-1c3e60a86":""},on:{confirm:t.onConfirm}},"reason",t.$props,!1)):n("div",{staticClass:"more-pop-body__content"},[t.buttonList&&t.buttonList.length?t._l(t.buttonList,function(e){return n("div",{directives:[{name:"active",rawName:"v-active"}],key:e.title,staticClass:"more-pop-body__button active__absolute",attrs:{"data-report-id":e.reportId?t.M_itemReportId(e.reportId):"","data-cli":""},on:{click:function(n){return t.$emit("tap:item",e)}}},[n("ui-image",{attrs:{size:20,url:e.iconUrl,"data-fc-1c3e60a84":""}}),n("div",{staticClass:"more-pop-body__button__text"},[t._v(t._s(e.title))])],1)}):[n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"more-pop-body__button active__absolute",attrs:{"data-report-id":t.M_itemReportId("%E5%A4%8D%E5%88%B6btn:copy"),"data-cli":""},on:{click:t.onClickCopy}},[n("ui-image",{attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/copy_regular.svg","data-fc-1c3e60a82":""}}),n("div",{staticClass:"more-pop-body__button__text"},[t._v("复制")])],1)],n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"more-pop-body__button active__absolute",attrs:{"data-report-id":t.M_itemReportId("feedback:feedback"),"data-cli":""},on:{click:t.onClickFeedback}},[n("ui-image",{attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/exclamation_mark_triangle_regular.svg","data-fc-1c3e60a80":""}}),n("div",{staticClass:"more-pop-body__button__text"},[t._v("反馈")])],1)],2)],1)},o=[]},84050:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-MorePopOver":"","data-fr-12f1ec3b4":""}},[n("PopOver",{ref:"popoverRef",staticClass:"top-qa-feedback-popover",attrs:{"data-fc-125a326cb":""},on:{trigger:t.onTrigger,hide:t.onEmitHide},nativeOn:{click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("div",{staticClass:"multiple-source-header__right-item",style:{width:t.size/16+"rem",height:t.size/16+"rem"}},[n("ui-image",{attrs:{size:t.size,url:"https://res.wx.qq.com/t/components/icons/base/dot_3_regular.svg","data-fc-125a326cc":""}})],1)]},proxy:!0},{key:"content",fn:function(){return[n("more-pop-body",t._b({attrs:{"button-list":t.buttonList,"feedback-data":t.feedbackData,"template-id":t.feedbackTemplateId,"data-fc-125a326cd":""},on:{confirm:t.onConfirm,copy:t.onCopy,"tap:item":t.onTapItem,"refresh:position":t.onRefreshPosition}},"more-pop-body",t.$props,!1))]},proxy:!0}])})],1)},o=[]},245307:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-chatbot-bottom":"","data-fr-16baef5a3":""}},[t.canShow?n("div",{staticClass:"top-qa-chatbot-bottom",style:{"--bottom-icon-size":t.iconSize/16+"rem"}},[n("div",{staticClass:"top-one-qa__btns"},[n("div",{directives:[{name:"active",rawName:"v-active"}],ref:"modelChoose",staticClass:"top-one-qa__btn active__mask",attrs:{"data-report-id":t.M_itemReportId(t.regenerateAnswerReportId),"data-cli":""},on:{click:t.onClickRegenerateAnswer}},[n("ui-image",{attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/transfer_medium.svg","data-fc-10a2fbeee":""}}),n("div",[t._v("切换模型")])],1),t.canShowSearchMore?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"top-one-qa__btn active__mask",attrs:{"data-report-id":t.M_itemReportId(t.source.searchMore),"data-cli":""},on:{click:t.onClickJump}},[t.source.searchMore.iconUrl?n("ui-image",{attrs:{size:20,url:t.source.searchMore.iconUrl,"data-fc-10a2fbeef":""}}):t._e(),n("div",[t._v(t._s(t.source.searchMore.title))])],1):t._e()]),t.canShowButtonList?n("div",{staticClass:"top-one-qa__btns"},[n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%A4%8D%E5%88%B6btn:copy"),"data-cli":""},on:{click:function(e){return t.$emit("copy")}}},[n("ui-image",{attrs:{size:t.iconSize,url:"https://res.wx.qq.com/t/components/icons/base/copy_regular.svg","data-fc-10a2fbef0":""}})],1),t.canShare?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%88%86%E4%BA%ABbtn:button"),"data-cli":""},on:{click:function(e){return t.$emit("share",e)}}},[n("ui-image",{attrs:{size:t.iconSize,url:"https://res.wx.qq.com/t/components/icons/base/share_regular.svg","data-fc-10a2fbef1":""}})],1):t._e(),t.feedbackData?n("feedback",{attrs:{"feedback-data":t.feedbackData,"template-id":t.feedbackTemplateId,"icon-style":t.FeedbackType.Warn,"model-type":t.modelType,"report-search-id":t.topQASearchIdForServer,"report-content-type":t.reportContentType,"icon-size":t.iconSize,"data-fc-10a2fbef2":""}}):t._e()],1):t._e()]):t._e(),n("transition",{attrs:{name:"pop-fade","data-fc-10a2fbef3":""}},[t.canShowDrTeachPopover?n("div",{ref:"drPopoverRef",staticClass:"dr-teach-popover",attrs:{"data-report-id":t.M_itemReportId(t.drTeachPopoverReportId)}},[n("div",{staticClass:"dr-teach-popover__content"},[n("span",[t._v("正在搜索复杂问题，试试「深度研究」")]),n("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"dr-teach-popover__close active__mask",attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickDrTeachPopClose(e)}}},[n("ui-image",{attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/xmark_regular.svg","data-fc-10a2fbef4":""}})],1)]),n("div",{staticClass:"dr-teach-popover__arrow"})]):t._e()])],1)},o=[]},792942:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return this.text?e("div",{staticClass:"mixed-chatbot-wording",attrs:{"data-fcn-chatbot-mixed-wording":"","data-fr-1c6d70404":""}},[e("div",{staticClass:"mixed-chatbot-wording__image",style:this.imageStyle},[e("ui-image",{attrs:{size:18,url:"https://search.wxqcloud.qq.com/t/fed_upload/80e88a30346ea1de919fa8c68e748714/ai-light.svg","data-fc-114097c1a":""}})],1),e("span",{staticClass:"mixed-chatbot-wording__text"},[this._v(this._s(this.text))])]):this._e()},o=[]},633621:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("span",{directives:[{name:"fast-click",rawName:"v-fast-click",value:this.handleClick,expression:"handleClick"}],staticClass:"underline-selection-poster spilt-text",attrs:{"data-fcn-underline-span-poster":"","data-fr-14c3f6b6b":""}},[this._t("default")],2)},o=[]},68142:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{style:this.style,attrs:{"data-fcn-height-animate-provider":"","data-fr-16367a54e":""}},[this._t("default")],2)},o=[]},220471:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("height-animate",{staticClass:"chatbot-loading",attrs:{"without-enter":"",transfrom:"",duration:t.loadingHeightAnimateDuration,"without-leave":t.isWithoutLeave,"immediate-show":"","data-fc-139727030":"","data-fcn-chatbot-loading":"","data-fr-14edfd7be":""}},[n("div",{staticClass:"chatbot-loading__content"},[t._l(t.lineContentList,function(e,i){return n("div",{key:i,staticClass:"chatbot-loading__content--delay-animate",class:{"chatbot-loading__item--animate":i>0}},[n("div",{staticClass:"chatbot-loading__tips"},[n("div",[t._v(t._s(e.content))]),e.isLoading?n("div",{staticClass:"chatbot-loading__icon"},[n("ui-icon-loading",{attrs:{"data-fc-139727031":""}})],1):n("ui-image",{staticClass:"chatbot-loading__mark",attrs:{size:16,url:"https://res.wx.qq.com/t/components/icons/base/check_mark_filled.svg","data-fc-139727032":""}})],1)])}),t.isFinish?n("div",{staticClass:"chatbot-loading__text chatbot-loading__item--animate"},[n("div",[t._v("阅读已完成")]),n("ui-image",{staticClass:"chatbot-loading__mark",attrs:{size:16,url:"https://res.wx.qq.com/t/components/icons/base/check_mark_filled.svg","data-fc-139727033":""}})],1):t.loadingText?n("div",{staticClass:"chatbot-loading__text chatbot-loading__item--animate chatbot-loading__content--delay-animate"},[n("div",{staticClass:"chatbot-loading__text-prefix"},[t._v(t._s(t.textPrefix))]),n("div",{staticClass:"chatbot-loading__doc"},[t._v(t._s(t.loadingText))]),n("div",{staticClass:"chatbot-loading__text-suffix"},[n("div",[t._v("》")]),n("div",{staticClass:"chatbot-loading__icon"},[n("ui-icon-loading",{attrs:{"data-fc-139727034":""}})],1)])]):t._e()],2)])},o=[]},313199:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-qa-loading--one",attrs:{"data-fcn-one-line-loading":"","data-fr-12b171fb7":""}},[e("div",{staticClass:"flow-loading__icon"},[e("ui-icon-loading",{attrs:{"data-fc-137ccd75a":""}})],1),e("div",{staticClass:"flow-loading__text"},[this._v(this._s(this.loadingText))])])},o=[]},662450:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"top-qa-loading--two",attrs:{"data-fcn-two-line-loading":"","data-fr-1cc1ed6de":""}},[e("div",{staticClass:"flow-loading"},[this.loadingText?this._e():e("ui-icon-loading",{staticClass:"flow-loading__icon",attrs:{"data-fc-1b7bc0480":""}}),e("ui-image",{staticClass:"finish-icon",style:this.finishIconStyle,attrs:{size:16,url:"https://search.wxqcloud.qq.com/t/fed_upload/f264f84daac26aaff97211f052590148/checkmark.circle.svg","data-fc-1b7bc047e":""}}),e("div",{staticClass:"flow-loading__text"},[this._v(this._s(this.loadingHardcodeText))])],1),this.loadingText?e("div",{staticClass:"flow-loading"},[e("div",{staticClass:"flow-loading__icon"},[e("ui-icon-loading",{attrs:{"data-fc-1b7bc047c":""}})],1),e("div",{staticClass:"flow-loading__text"},[this._v(this._s(this.loadingText))])]):this._e()])},o=[]},212646:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{"data-fcn-collapse-container":"","data-fr-1e7ad02e6":""}},[e("div",{staticClass:"collapse-container-wrapper"},[e("div",{staticClass:"collapse-container",style:this.wrapStyle},[e("div",{directives:[{name:"resize",rawName:"v-resize.height",value:this.beforeHeight,expression:"beforeHeight",modifiers:{height:!0}}],ref:"beforeRef"},[this._t("before")],2),this._t("think"),e("div",{staticClass:"collapse-container__content",style:this.contentStyle,attrs:{"data-report-container":""}},[this.enable?e("div",{directives:[{name:"resize",rawName:"v-resize.value",value:this.onContainerResize,expression:"onContainerResize",modifiers:{value:!0}}],ref:"containerRef"},[this._t("main")],2):this._e(),this.canShowAfter?this._t("after"):this._e()],2)],2),this.canShowFoldButton?e("fold-button",{attrs:{"need-show-animate":!this.isSyncCache,"data-report-id":this.M_itemReportId("unfold:unfold"),"can-show-gradient":this.canShowGradient||this.forceShowGradientUnfold,"prevent-unfold-interaction":this.preventUnfoldInteraction,"fold-button-text":this.foldButtonText,"auto-unfold":this.autoUnfold,"data-fc-10df35978":""},on:{"tap:unfold":this.onClickUnfold,tap:this.onClickButton}}):this._e()],1),this.isCollapse&&!this.hasClickUnfold?[this._t("show-when-collapse")]:this._e(),e("transition",{attrs:{name:this.isSubItemsCache?"":"opacity","data-fc-10df35976":""}},[this.canShowSubItems?[this._t("sub-items",null,{canShowFoldButton:this.canShowFoldButton})]:this._e()],2),this.needSubItemsHolder?e("div",{style:{height:this.subItemsHeight+"px"}}):this._e()],2)},o=[]},973841:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fold-button",class:{"fold-button--anim":t.needShowAnimate,"fold-button--gradient":t.canShowGradient},style:{width:t.unFoldBtnWidth?t.unFoldBtnWidth+"px":void 0},attrs:{"data-fcn-fold-button":"","data-fr-114bcde82":""}},[n("div",{staticClass:"fold-button__gradient"},[n("div",{staticClass:"fold-button__gradient-bg",on:{click:function(e){return e.stopPropagation(),t.onGradientBGClick(e)}}}),n("div",{ref:"gradientInnerRef",staticClass:"fold-button__gradient-inner",on:{click:t.onGradientInnerClick}})]),n("div",{directives:[{name:"active",rawName:"v-active.instant.stop",modifiers:{instant:!0,stop:!0}}],staticClass:"fold-button__btn active__absolute",attrs:{"data-cli":""},on:{touchend:t.onTouchEnd,click:function(e){return e.stopPropagation(),t.onTapFoldButton(e)}}},[n("div",{staticClass:"fold-button__btn__content"},[t._v(t._s(t.unFoldBtnText))])])])},o=[]},372270:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"markdown-content",class:{"markdown-content--compose":this.isCompose},style:this.contentStyle,attrs:{"data-fcn-markdown-content":"","data-fr-12bdb1dc7":""}},[e("div",{ref:"markdownRef",staticClass:"markdown-holder"}),e("div",{staticClass:"markdown markdown--unfold markdown--select",class:this.classList},[e("reuse-html",{attrs:{html:this.textToShow,"boxes-json":this.boxesJson,"reference-list":this.referenceList,"enable-gradient-more-tag":this.enableGradientMoreTag,"data-fc-14f889b4a":""},on:{tap:this.onClickDomInHtmlContent,"tap:component":this.onTapComponentInHtmlContent}})],1)])},o=[]},962954:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{"data-fcn-text-animate":"","data-fr-1f72da526":""}},[e("transition",{attrs:{name:"fade",mode:"out-in",css:this.shouldAnimate,"data-fc-108bc8064":""}},[e("div",{key:this.text,staticClass:"text-content"},[e("div",[this._v(this._s(this.text))]),this._t("after")],2)])],1)},o=[]},157163:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"think-btn",attrs:{"data-fcn-think-button":"","data-fr-1cd155cce":""}},[n("div",{directives:[{name:"active",rawName:"v-active.instant",modifiers:{instant:!0}}],staticClass:"think-btn__content",class:{active__mask:t.canShowThinkBtnMask},attrs:{"data-report-id":t.M_itemReportId("%E6%80%9D%E8%80%83%E8%BF%87%E7%A8%8B:think"),"data-cli":""},on:{click:t.onClickThink}},[n("text-animate",{attrs:{text:t.thinkButtonContent,"data-fc-1d5963c90":""},scopedSlots:t._u([{key:"after",fn:function(){return[n("ui-arrow",{attrs:{align:"flex",direction:t.showCompleteThink?"up":"down","data-fc-1d5963c8e":""}})]},proxy:!0}])})],1)])},o=[]},521245:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{"think-container--scroll":this.isScrollMode},style:this.containerStyle,attrs:{"data-fcn-think-container":"","data-fr-157a68f6a":""}},[e("div",{directives:[{name:"resize",rawName:"v-resize.height",value:this.contentHeight,expression:"contentHeight",modifiers:{height:!0}}],class:{"think-container__content-full":this.isFull}},[this._t("default")],2),this.isFull&&this.isScrollMode?e("div",{staticClass:"think-container__content-gradient"}):this._e()])},o=[]},980960:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-one-qa__tips",class:{"top-one-qa__tips--quark":t.isQuarkStyle},attrs:{"data-fcn-top-qa-bottom":"","data-fr-13671ea14":""}},[n("div",{staticClass:"top-one-qa__tips-content"},[t.modelChooseName?n("div",{directives:[{name:"active",rawName:"v-active",value:!t.canNotSwitch,expression:"!canNotSwitch"}],ref:"modelChoose",staticClass:"top-one-qa__tips-model-choose",class:{active__mask:!t.canNotSwitch},attrs:{"data-report-id":t.M_itemReportId(t.modelSwitchReportId),"data-cli":""},on:{click:t.onClickModelChoose}},[n("div",[t._v(t._s(t.modelChooseName))]),t.redDotIdToShow&&!t.canNotSwitch?n("model-red-dot",{attrs:{"data-fc-1d0694ec6":""}}):t._e(),t.canNotSwitch?t._e():n("ui-image",{staticClass:"top-one-qa__tips-model-choose-icon",class:{"top-one-qa__tips-model-choose-icon--has-red-dot":t.redDotIdToShow},attrs:{size:t.isQuarkStyle?18:16,url:"https://res.wx.qq.com/t/components/icons/base/transfer_medium.svg","data-fc-1d0694ec4":""}})],1):t.isQuarkStyleBackCardStyle?t._e():n("div",[t._v(t._s(t.bottomTips))])]),t.source.bottomEntry&&t.source.bottomEntry.title?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"top-one-qa__tips-more active__mask",attrs:{"data-report-id":t.M_itemReportId(t.bottomEntryReportId),"data-cli":""},on:{click:function(e){return t.$emit("click:tips-more",t.source.bottomEntry)}}},[n("div",{staticClass:"top-one-qa__tips-more-title"},[t._v(t._s(t.source.bottomEntry.title))]),n("ui-arrow",{attrs:{direction:"right",align:"flex",gap:"","data-fc-1d0694ec2":""}})],1):t._e()])},o=[]},27805:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mixed-chatbot-bottom",attrs:{"data-fcn-mixed-chatbot-bottom":"","data-fr-1e4cb2196":""}},[t.canShowQuarkCommunity?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("real_like:real_like"),"data-cli":""},on:{click:function(e){return t.$emit("like")}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",style:{fill:t.renderFriendColor},attrs:{name:t.renderFriendIcon,"data-fc-125b3779c":""}})],1):t._e(),t.canShowRegenerate&&t.canRegenerate?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("reanswer:reanswer"),"data-cli":""},on:{click:t.onTapQuarkReGenerate}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"refresh_regular","data-fc-125b3779d":""}})],1):t._e(),t.canShare?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%88%86%E4%BA%ABbtn:button"),"data-cli":""},on:{click:function(e){return t.$emit("share",e)}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"share_regular","data-fc-125b3779e":""}})],1):t._e(),n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%A4%8D%E5%88%B6btn:copy"),"data-cli":""},on:{click:function(e){return t.$emit("copy")}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"copy_regular","data-fc-125b3779f":""}})],1),t.feedbackData?n("feedback",{attrs:{"feedback-data":t.feedbackData,"template-id":t.feedbackTemplateId,"icon-style":t.FeedbackType.Warn,"model-type":t.modelType,"report-search-id":t.topQASearchIdForServer,"report-content-type":t.reportContentType,"icon-size":20,"data-fc-125b377a0":""}}):t._e()],1)},o=[]},830107:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mixed-chatbot-sub-items-wrap",attrs:{"data-fcn-mixed-chatbot-sub-items":"","data-fr-102da044e":""}},[this.subItems&&this.subItems.length?[this.subItemsWording?e("div",{staticClass:"mixed-chatbot-sub-items-wording"},[this._v(this._s(this.subItemsWording))]):this._e(),e("div",{staticClass:"mixed-chatbot-sub-items-card"},[e("sub-items",this._b({attrs:{"sub-items":this.subItemsForShow,"data-fc-158668510":""}},"sub-items",this.commonProps,!1))],1)]:this._e(),this.canShowLastWording?e("chatbot-mixed-wording",{staticClass:"mixed-chatbot-sub-items-wording--last",attrs:{"data-fc-15866850e":""}}):this._e()],2)},o=[]},544817:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"no-scale",rawName:"v-no-scale"}],staticClass:"wrap",attrs:{"data-fcn-poster-underline":"","data-fr-1721d0fa6":""}},[e("div",{ref:"markdownRef",staticClass:"markdown-holder"}),e("div",{staticStyle:{"padding-top":"0px",background:"#f7f7f7"},attrs:{id:"poster-underline"}},[e("div",{style:{width:"100%",height:"24px"}}),e("div",{staticClass:"poster-underline-wrap",style:{height:this.posterStyle.height}},[e("div",{staticClass:"poster-underline-before-none"}),e("div",{staticClass:"poster-underline-before"}),e("div",{staticClass:"poster-underline markdown markdown--unfold markdown--chatbot",class:{"markdown--scale":this.isScaleMoreThanOne},style:Object.assign({},this.contentStyle,this.posterStyle)},[this.thinkHtml?e("reuse-html",{attrs:{html:this.thinkHtml,"data-fc-15cf6356a":""}}):this._e(),this.html?e("reuse-html",{attrs:{html:this.html,"data-fc-15cf63568":""}}):this._e()],1),e("div",{staticClass:"poster-underline-after"}),e("div",{staticClass:"poster-underline-after-none"})]),e("div",{ref:"",staticClass:"bottom-wrap"},[this._m(0),e("div",{staticClass:"bottom-wrap__middle"},[e("div",{staticClass:"bottom-wrap__middle-title"},[this._v("AI 搜索")]),e("div",{staticClass:"bottom-wrap__middle-desc-wrap"},[e("div",{staticClass:"bottom-wrap__middle-desc",style:this.descStyle},[this._v(this._s(this.shareInfo.query))]),this._e(),e("div",{staticClass:"bottom-wrap__middle-desc-fake"},[this._v(this._s(this.shareInfo.query))])])]),e("div",{staticClass:"bottom-wrap__right"},[e("img",{staticClass:"bottom-wrap__right-qrcode",attrs:{src:this.qrcodeImgBase64}})])])])])},o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom-wrap__left"},[e("div",{staticClass:"bottom-wrap__left-logo-wrap"},[e("img",{staticClass:"bottom-wrap__left-logo",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAMAAAC4uKf/AAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////+/v7/////O0f/P0r/+Pj/+/v/9fX/5eb/i4//XGP/dXr/ubr/0NH/o6b/7O3/2tv/T1j/aG//rrD/mJv/lpn/w8X/gIT/d3z/7u//gYX/anD/xcdQev+DAAAAE3RSTlMAEO8g37+Az5+gkHBAYFBfrzDPXjIWZwAABFFJREFUaN7tmtl22jAQhi0jG8csSTrW4g0wBEq393+9BtNmgiNbI5lw6Dn9rpKL5D+j+T0ajRS4MFnEydOUh/BKyKdREi+fg0+AzdMoBBNRumRXVZpFMEj0OLmJEupdQSoOgQhPxoU3eQAnRsgxlPKXoy+gB2HsoTXn4Amfu4aVwghSN2NwGAV3yNxjCCMJZ1StGK4AzScsgauQMILWFK7ElN1CC9VuoYVqNq2bqSVwZRKy5z/1C5gBCdXkUgGVx54aFdK09kJU9YYqF5orFwcSeptlmRB7qho3mYRa5xuRnRDNiD1gDjRU/UcsBypz30UEWWQthQQqnPm6Xu8wMCqxmxORzXkVjxLohJehkfsotWrFxApcSC4CAyrqpRUrNTgx8QkM5PEkJmoFTiQ+gYEuMTAXmEdgkLeruMbAnA3JgYr6Koy+pxtyAWTUQeAH7cTf3i4CMrLCwNyInO0B+hRYJcED5rCKWPLFVwUezMiriJ+0j+9xHRnQkQfjB01fxyXQUWvhExhuayk4IOuiARtKGWNPe1KmtO5poJQcFJFSb/Jf9TrvSZp5tbbH9WqDisO0IvokUuxK8Uq21YYiEgTP/Q2U2BUvjZZSWURWbyJt4ezdyCdGf2j8IyGq/ddcf9D7K1JdigyKLYK4r7QjQpRdu+c/OiIUsTh4MG/9HXay0xVng5jbhsRoxuaDWCW7DrKJGRL9FEyN7XxZllXLsTix767K95cCqd5TtuwlfGSKG2cn/Vq+x/C99aBbJBjgQQg3IwzghvwXu0SBFz4GUatagwchuWdUm+9tPOfj4A8fNR5MgUCrIF7U+ce9Z+s4DZ6AhC6xQObbLBNrd7WI2OerlcADYNuDC/d+PyGeb2Xxvq1Shwx/pRMTW9RcXOxRmxIrO50lrfmWRedQ1m5C2waceA5IH5ouOwY8n3bLHFzAVs7i+26O5LfMVS2iNKnmg1K+bdU2QCalzZFy0T1HvzUqP+lqSzxY2OyBKUP/nyg0EGGkI1P+YRqB/s/EQVJTdmJmt4e5E2zatFEL12NgP6CZRx/of3LhmtgO8OgETFnH/9TCFZEG0fJo+ofofyxcpME0Cy32wJSZoiYVLo6TTavvsx2mrOt/LCWkSRmz2MOQMvQ/TW1iGwGi73H2YfS/vZQkhOHm8EgY/d+qaUtgltDQAZgyo/+xcFkCGzAkZbCOaRMHSbwiiXt9jymzRI+lxHbVxDgYoF1PtEPIgZk4p12PyF2GKevn+y4bqiRz2sWP/CZIdyE51n/SxY95IXVdCYEpG/T/tjZqcfplnZJ5Xdl3LPlDlI2yOxFZgBFFmWDp1QaMzO7hghULydV4uJdLcWe1+3lcMGX39EQDX1uN5YHd27OaV2bjHwwt7vMp1CvjHnmx+32+dsL3YR7zfd3oTML+hceUZznusYD+LGgPYGcoNYoJ6hGUxsOWqVkwjNI5Cz6B52WcRG/Psb88JbHbY+Xf/XW3kJtt1NcAAAAASUVORK5CYII="}})])])}]},1649:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.canShow?n("div",{staticClass:"top-qa-quark-bottom",class:{"top-qa-quark-bottom--quark-style-v2":!t.isQuarkStyle,"top-qa-quark-bottom--compact":t.isCompactBottom,"top-qa-quark-bottom--btn-at-bottom-style-v2":t.isButtonAtBottomStyleV2},attrs:{"data-fcn-quark-bottom":"","data-fr-111090508":""}},[n("div",{staticClass:"top-qa-quark-bottom__button-line"},[n("div",{staticClass:"top-one-qa__btns"},[t.hasTerminate?n("div",{staticClass:"top-one-qa__btns-time"},[t._v("已停止回答")]):t.canShowGenerateTime&&t.source.generateTime?n("div",{staticClass:"top-one-qa__btns-time"},[t._v(t._s(t.source.generateTime))]):t._e()]),t.canShowButtonList?n("div",{staticClass:"top-one-qa__btns"},[t.canShowRegenerate&&!t.canShowQuarkCommunity&&t.canRegenerate?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("reanswer:reanswer"),"data-cli":""},on:{click:t.onTapQuarkReGenerate}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"refresh_regular","data-fc-110179b96":""}})],1):t._e(),t.canShowQuarkCommunity?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("real_like:real_like"),"data-cli":""},on:{click:function(e){return t.$emit("like")}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",style:{fill:t.renderFriendColor},attrs:{name:t.renderFriendIcon,"data-fc-110179b94":""}})],1):t._e(),n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%A4%8D%E5%88%B6btn:copy"),"data-cli":""},on:{click:function(e){return t.$emit("copy")}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"copy_regular","data-fc-110179b92":""}})],1),t.canShare?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":t.M_itemReportId("%E5%88%86%E4%BA%ABbtn:button"),"data-cli":""},on:{click:function(e){return t.$emit("share",e)}}},[n("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"share_regular","data-fc-110179b90":""}})],1):t._e(),!t.feedbackData||t.canShowQuarkCommunity&&t.canShowRegenerate?t._e():n("feedback",{attrs:{"feedback-data":t.feedbackData,"template-id":t.feedbackTemplateId,"icon-style":t.FeedbackType.Warn,"model-type":t.modelType,"report-search-id":t.topQASearchIdForServer,"report-content-type":t.reportContentType,"icon-size":t.iconSize,"data-fc-110179b8e":""}}),t.canShowQuarkCommunity&&t.canShowRegenerate?n("div",{staticClass:"top-one-qa__btns-item top-one-qa__btns-item--more-pop-over"},[n("more-pop-over",t._b({attrs:{"button-list":t.morePopOverButtonList,"data-fc-110179b8c":""},on:{"tap:item":t.onTapMorePopOverItem}},"more-pop-over",t.commonProps,!1))],1):t._e()],1):t._e()])]):t._e()},o=[]},172195:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"resize",rawName:"v-resize.value",value:this.onContainerResize,expression:"onContainerResize",modifiers:{value:!0}}],attrs:{"data-fcn-text-answer-height-animate":"","data-fr-135199964":""}},[this._t("default")],2)},o=[]},922666:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-top-qa-header":"","data-fr-1187efaf0":""}},[t.titleToShow?n("div",{ref:"originalHeader",staticClass:"top-one-qa__header underline-selection--disabled",class:{"top-one-qa__header--chatbot":t.chatbot,"top-one-qa__header--quark-style":t.quarkStyle,"top-one-qa__header--quark-style-back-card-style":t.isQuarkStyleBackCardStyle}},[n("div",{attrs:{id:"top-one-qa__header"},on:{click:function(e){return e.stopPropagation(),t.onClickTitle(e)}}},[n("ui-clamp",{ref:"titleRef",staticClass:"top-one-qa__header-clamp",attrs:{autoresize:"","max-lines":t.maxLineCount,"data-fc-1f76062ae":""},scopedSlots:t._u([{key:"before",fn:function(){return[t.shouldShowButtons||t.voiceTtsid?n("div",{staticClass:"top-one-qa__header-button"},[t.canShowAiVoice?n("top-qa-voice-button",{attrs:{"ref-name":"_voicePopHalfScreen","is-playing":t.isAiVoicePlaying,"is-loading":t.isAiVoiceLoading,"report-id":t.voiceDefaultInfo.reportId,"data-fc-1f76062ac":""},on:{click:t.onClickVoice}}):t._e(),t.shouldShowButtons&&t.shareData.show?n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"top-one-qa__header-share active__mask",attrs:{"data-report-id":t.M_itemReportId("%E5%88%86%E4%BA%ABbtn:button"),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onClickShare(e)}}},[n("ui-image",{attrs:{size:20,url:"https://res.wx.qq.com/t/components/icons/base/share_regular.svg","data-fc-1f76062aa":""}})],1):t._e(),t.shouldShowButtons&&t.feedbackData?n("feedback",{attrs:{"feedback-data":t.feedbackData,"template-id":t.feedbackTemplateId,"model-type":t.modelType,"report-content-type":t.reportContentType,"report-search-id":t.topQASearchIdForServer,"data-fc-1f76062a8":""}}):t._e()],1):t._e()]},proxy:!0},t.isQuarkStyleBackCardStyle?{key:"after",fn:function(){return[n("span",[t._v(" - AI搜索")])]},proxy:!0}:null],null,!0)},[n("span",{staticClass:"top-one-qa__header-title"},[t._v(t._s(t.titleToShow))])])],1),t.uploadFileList.length?n("div",{staticClass:"top-one-qa__picture"},[n("chat-upload-media-preview",{attrs:{"upload-file-list":t.uploadFileList,"forbid-close":"","is-top-qa-header":"","data-fc-1f76062a6":""}})],1):t._e()]):t._e()])},o=[]},938135:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return this.chatBotStyle?e("chatbot-loading",this._b({attrs:{"data-fc-11e99b400":"","data-fcn-top-qa-loading":"","data-fr-132891651":""}},"chatbot-loading",this.$props,!1)):this.isOneLineStyle?e("one-line-loading",this._b({attrs:{"data-fc-11e99b401":"","data-fcn-top-qa-loading":"","data-fr-132891651":""}},"one-line-loading",this.$props,!1)):e("two-line-loading",this._b({attrs:{"data-fc-11e99b402":"","data-fcn-top-qa-loading":"","data-fr-132891651":""}},"two-line-loading",this.$props,!1))},o=[]},142115:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PopOver",{ref:t.refName,attrs:{position:"center top","spacing-v":8,"mask-style":{background:"transparent"},"cancel-passive-trigger":"","data-fc-16a224f49":"","data-fcn-top-qa-voice-button":"","data-fr-17f4b6de8":""},scopedSlots:t._u([{key:"trigger",fn:function(){return[n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"top-qa-voice-button active__mask",attrs:{"data-report-id":t.dataReportId,"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)}}},[n("i",{staticClass:"top-qa-voice-button__icon top-qa-voice-button__icon--once",class:{"circle-loading":t.isLoading,"top-qa-voice-button__icon--playing":t.isPlaying&&!t.isLoading}},[n("span",{staticClass:"ui-aria-hidden"},[t._v("播放")])])])]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"top-qa-voice-button__popover"},[t._v("自动听回答中，轻触可停止")])]},proxy:!0}])})},o=[]},906534:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-content",class:{"text-content--chatbot":t.isChatbot||t.isQuarkStyle},style:t.totalStyle,attrs:{"data-fcn-text-content":"","data-fr-120d433b7":""}},[t.think&&!t.topQAInitHeight?n("think-button",{attrs:{"show-complete-think":t.showCompleteThink,"think-button-content":t.thinkButtonContent,"data-fc-10c9b794c":""},on:{tap:t.onClickThink}}):t._e(),n("collapse-container",t._b({ref:"collapseContainerRef",attrs:{"is-sync-cache":t.isSyncCache,"max-row-count":t.maxRowCount,"need-fold-button":!t.disableUnfold,"auto-unfold":t.autoUnfold,"is-finish":t.isFinishStatus,"show-click-think":t.canShowClickThink,"has-think":!!t.think,"is-sub-items-show-when-full":t.isSubItemsShowWhenFull,"sub-items-height":t.isThinkAnimateFinish?t.subItemsHeight:0,"force-show-gradient-unfold":t.isBigPMarginWhenInit,"data-fc-10c9b794a":""},on:{"tap:unfold":t.onAnswerUnfold,"collapse:change":t.onCollapseChange,"hide:stopAnswerBtn":function(e){return t.$emit("hide:stopAnswerBtn")}},scopedSlots:t._u([{key:"before",fn:function(){return[t.think&&t.topQAInitHeight?n("think-button",{attrs:{"show-complete-think":t.showCompleteThink,"think-button-content":t.thinkButtonContent,"data-fc-10c9b7948":""},on:{tap:t.onClickThink}}):t._e()]},proxy:!0},{key:"think",fn:function(){return[t.think?n("think-container",t._b({attrs:{"is-finish":t.isThinkAnimateFinish,"max-row-count":t.maxRowCount,"data-fc-10c9b7946":""}},"think-container",t.commonProps,!1),[t.showCompleteThink?n("height-animate",{attrs:{"immediate-show":!t.hasClickCompleteThink,"without-enter":!t.hasClickCompleteThink,"without-leave":!t.think,"data-fc-10c9b7944":""}},[n("markdown-content",t._b({ref:"thinkRef",staticClass:"text-content__think",class:{"text-content__think--finish":t.answer},attrs:{"markdown-class-list":t.isChatbot||t.isQuarkStyle?["markdown--chatbot-think"]:[],markdown:t.think,"selection-data-list":t.selectionDataList,"text-tag":"think","enable-gradient-more-tag":!t.isChatbot&&t.topQANewMoreTagStyle,"is-finish":t.isThinkAnimateFinish,"data-fc-10c9b7942":""},on:{"tap:component":t.onTapComponent,disappear:t.onContentDisappear,"content:expose":t.onContentExpose}},"markdown-content",t.commonProps,!1)),t.answer&&t.think?n("div",{staticClass:"text-answer__answer-title"},[t._v("以下是本次提问的回答")]):t._e()],1):t._e(),t.isThinkAnimateFinish||t.showCompleteThink||!t.think?t._e():n("more-tag",{attrs:{"data-fc-10c9b7940":""}})],1):t._e()]},proxy:!0},{key:"main",fn:function(){return[t.isThinkAnimateFinish?n("div",{style:t.answerStyle},[n("markdown-content",t._b({ref:"answerRef",attrs:{"is-compose":t.isCompose,markdown:t.answer,"markdown-class-list":t.answerMarkdownClassList,"expand-html":t.expandHtml,"selection-data-list":t.selectionDataList,"text-tag":"answer","boxes-json":t.boxesJson,"is-finish":t.isFinishStatus,"enable-gradient-more-tag":!t.isChatbot&&t.topQANewMoreTagStyle,"data-fc-10c9b793e":""},on:{"tap:component":t.onTapComponent,disappear:t.onContentDisappear,"content:expose":t.onContentExpose}},"markdown-content",t.commonProps,!1))],1):t._e()]},proxy:!0},{key:"after",fn:function(){return[t._t("before-reference"),t.mixedBoxChatbotCtx?[t.isFinishStatus?n("mixed-chatbot-sub-items",t._b({attrs:{"can-show-last-wording":t.mixedBoxChatbotSubBoxIsLastBox(),"sub-items":t.subItems,"sub-items-wording":t.subItemsWording,"data-fc-10c9b793c":""}},"mixed-chatbot-sub-items",t.commonProps,!1)):t._e(),n("mixed-chatbot-source",t._b({attrs:{reference:t.reference,"data-fc-13c962816":""}},"mixed-chatbot-source",t.commonProps,!1),[t._t("mixed-chatbot-bottom")],2)]:[t.reference&&t.isFinishStatus?n("universal-source",{staticClass:"text-content__reference-wrap",class:{"text-content__reference-wrap-show-right":t.hasUniversalSourceRightSlot,"text-content__reference-wrap-bottom-line":t.hasUniversalSourceRightSlot&&t.subItems&&t.subItems.length},attrs:{reference:t.reference,"data-fc-13c962817":""},on:{"show-rest":function(e){return t.$emit("show-reference-rest")}},scopedSlots:t._u([{key:"right",fn:function(){return[t._t("universal-source-right")]},proxy:!0}],null,!0)}):!t.reference&&t.isFinish&&t.hasUniversalSourceRightSlot?n("div",{staticClass:"text-content__empty-universal-wrap",class:{"text-content__empty-universal-wrap-bottom-line":t.hasUniversalSourceRightSlot&&t.subItems&&t.subItems.length}},[t._t("universal-source-right")],2):t._e()],t._t("answer-bottom"),t._t("content-bottom")]},proxy:!0},{key:"show-when-collapse",fn:function(){return[t._t("collapse-bottom-when-collapse")]},proxy:!0},t.mixedBoxChatbotCtx||t.forceHideSubItems?null:{key:"sub-items",fn:function(){return[n("sub-items-wrap",t._b({attrs:{"sub-items":t.subItems,"data-fc-13c962818":""}},"sub-items-wrap",t.commonProps,!1))]},proxy:!0}],null,!0)},"collapse-container",t.commonProps,!1)),t.needPrerenderSubItems?n("sub-items-wrap",t._b({directives:[{name:"resize",rawName:"v-resize.height",value:t.subItemsHeight,expression:"subItemsHeight",modifiers:{height:!0}}],staticClass:"sub-items-wrap--prerender",style:{width:t.subItemsPreRenderWidth+"px"},attrs:{"sub-items":t.subItems,"data-fc-13c962819":""}},"sub-items-wrap",t.commonProps,!1)):t._e()],1)},o=[]},192016:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-content",attrs:{"data-fcn-video-content":"","data-fr-17205cb39":""}},[t.hasText?n("markdown-text",{staticClass:"top-one-qa__video-text",attrs:{"markdown-text":t.markdownText,"max-line-count":2,"is-finish":t.isTypewriterFinish,"is-sync-cache":t.isSyncCache,"data-fc-16298c7d0":""},on:{"speed-change":t.onSpeedChange}}):t._e(),n("video-card",{ref:"videoPlayerRef",staticClass:"top-one-qa__video-step-video",attrs:{item:t.videoSource,"data-report-id":t.M_itemReportId(t.videoReportId),"data-fc-16298c7ce":""},on:{"currentTime:update":t.onCurrentTimeUpdate,"video:event":t.onHandleVideoEvent,tap:t.onTapVideoCard},scopedSlots:t._u([t.duration?{key:"productBanner",fn:function(){return[n("div",{staticClass:"top-one-qa__video-progress-container"},[n("div",{staticClass:"top-one-qa__video-progress-inner",style:t.progressStyle})])]},proxy:!0}:null],null,!0)}),t.hasText?t._e():n("ui-scroll",{directives:[{name:"arrow-scroll",rawName:"v-arrow-scroll"}],ref:"scrollRef",staticClass:"top-one-qa__video-step-scroll",attrs:{"scroll-to-center":"",wait:50,items:t.showItems,"data-fc-16298c7cc":""},on:{scroll:t.onScroll,scrollEnd:t.onScrollEnd},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item,o=e.index;return[i.isLoading?n("div",{staticClass:"top-one-qa__video-step-loading"},[n("ui-icon-loading",{attrs:{"data-fc-16298c7ca":""}})],1):n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"top-one-qa__video-step-btn active__mask",class:{"top-one-qa__video-step-btn--active":t.currentIndex===o},style:{width:t.getItemWidth(i)+"px"},attrs:{"data-report-id":t.M_itemReportId(t.getItemReportId(o),o+1),"data-cli":""},on:{click:function(e){return t.onClickItem(i,o)}}},[n("div",{staticClass:"top-one-qa__video-step-btn_text"},[t._v(t._s(i.title))])])]}}],null,!1,1073902370)}),n("sub-items",t._b({attrs:{"sub-items":t.subItems,"data-fc-16298c7c8":""}},"sub-items",t.commonProps,!1))],1)},o=[]},922949:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mixed-chatbot-source",attrs:{"data-fcn-mixed-chatbot-source":"","data-fr-16ac647e7":""}},[this._t("default"),this.referenceList.length?e("div",{directives:[{name:"active",rawName:"v-active"},{name:"no-scale",rawName:"v-no-scale"}],staticClass:"active__mask top-one-qa__btns-item",attrs:{"data-report-id":this.M_itemReportId(this.referenceList.length+":footer"),"data-cli":""},on:{click:this.onTapReference}},[e("svg-icon",{staticClass:"top-qa-quark-bottom__svg",attrs:{name:"article_regular","data-fc-123fa95ac":""}}),e("div",{staticClass:"top-one-qa__btns-item__text"},[e("div",[this._v(this._s(this.referenceList.length))])])],1):this._e()],2)},o=[]},269077:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 4===t.reference.type?n("single-source",{attrs:{source:t.reference,"data-fc-12569a650":"","data-fcn-universal-source":"","data-fr-1644dbb0e":""},scopedSlots:t._u([{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)}):5===t.reference.type?n("multiple-source",{attrs:{source:t.reference,"data-fc-12569a64e":"","data-fcn-universal-source":"","data-fr-1644dbb0e":""},on:{"show-rest":function(e){return t.$emit("show-rest")}},scopedSlots:t._u([{key:"right",fn:function(){return[t._t("right")]},proxy:!0}],null,!0)}):t._e()},o=[]},671081:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sub-items-wrap",attrs:{"data-fcn-sub-items-wrap":"","data-fr-19802f928":""}},[this.subItems.length&&!this.isChatbot?e("div",{staticClass:"sub-items-divider"}):this._e(),e("sub-items",this._b({attrs:{"sub-items":this.subItems,"data-fc-1685c2b76":""}},"sub-items",this.commonProps,!1))],1)},o=[]},455667:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"containerRef",staticClass:"top-one-qa",class:{"top-one-qa--chatbot":t.isChatBot||t.isQuarkStyle,"top-one-qa--quark":t.isQuarkStyle&&!t.isQuarkStyleBackCardStyle},style:t.totalStyle,attrs:{"visible-report-id":t.topQASearchIdForReport,"mixer-visible-report-id":t.M_visibleReportId(void 0,!0),"visible-report-action-value":t.visibleReportActionValue,"data-fcn-top-one-qa":"","data-fr-154dd3c57":""}},[n("underline-selection",{ref:"underlineSelectionRef",attrs:{source:t.source,"can-share":t.canShare,"is-support-ai-forward":t.isSupportAiForward,"data-fc-146ca4eba":""},on:{favorites:t.onFavorites,forward:t.onForward}},[t.mixedBoxChatbotCtx?t._e():n("top-qa-header",t._b({attrs:{"hide-button":t.isButtonAtBottomStyleV2,"share-data":t.shareData,"model-type":t.modelType,"main-event-center":t.mainEventCenter,"data-fc-146ca4ebb":""},on:{share:t.onClickShare}},"top-qa-header",t.$props,!1)),n("height-animate-provider",{ref:"heightAnimateProviderRef",attrs:{"is-calculate-height-mode":t.isCalculateHeightMode,"data-fc-146ca4ebc":""}},[t.posterHtmlInfo?n("poster-underline",{ref:"posterRef",attrs:{"page-global":t.pageGlobal,"think-html":t.posterHtmlInfo.thinkHtml,html:t.posterHtmlInfo.answerHtml,"share-info":t.posterHtmlInfo.shareInfo,"data-fc-146ca4ebd":""}}):t._e(),t.answerType&&t.initResponse?n(t.answerComponent,t._b({key:t.answerKey,ref:"answerRef",tag:"component",staticClass:"top-one-qa__content",attrs:{"is-box-visible":t.isBoxVisible,"is-loading":t.isLoading||!t.canExpand,"init-response":t.initResponse,"main-event-center":t.mainEventCenter,"do-report-rsp":t.reportRsp,"answer-type":t.answerType,"is-calculate-height-mode":t.isCalculateHeightMode,"data-fc-146ca4ebe":""},on:{"update:is-loading":t.onUpdateIsLoading,"answer-finish":t.onAnswerFinish,degenerate:t.onDegenerate,"update:can-share":t.onUpdateCanShare,"update:can-interact":t.onUpdateCanInteract,"update:can-show-button-list":t.onUpdateCanShowButtonList,regenerate:t.regenerateWithModel,"hide:stopAnswerBtn":t.handleHideStopAnswerBtn},scopedSlots:t._u([{key:"loading",fn:function(){return[n("top-qa-loading",t._b({attrs:{"chat-bot-style":t.isChatbotLoadingStyle,"state-list":t.loadingStateList,line:t.loadingLine,"loading-text":t.loadingText,"loading-height-animate-duration":t.loadingHeightAnimateDuration,"is-finish":t.isLoadingTextOutOfRange,"loading-pos":t.loadingTextIdx+1,"data-fc-146ca4ebf":""}},"top-qa-loading",t.commonProps,!1))]},proxy:!0},t.friend_canShowFriendList&&!t.mixedBoxChatbotCtx?{key:"collapse-bottom-when-collapse",fn:function(){return[n("friend-list-out",{attrs:{"interact-info":t.friend_innerInteractInfo,"data-fc-146ca4ec0":""}})]},proxy:!0}:null,t.friend_canShowFriendList&&!t.mixedBoxChatbotCtx?{key:"before-reference",fn:function(){return[n("div",{staticClass:"top-one-qa__friend-list-item"},[n("friend-list-item",{attrs:{"friend-like-info":t.friend_friendLikeInfo,size:"middle","data-fc-146ca4ec1":""}})],1)]},proxy:!0}:null,t.isButtonAtBottomStyleV2?{key:"universal-source-right",fn:function(){return[n("quark-bottom",t._b({attrs:{"can-show-button-list":t.canShowButtonList,"can-share":t.shareData.show,"can-regenerate":t.canShare,"model-type":t.modelType,"has-terminate":t.hasTerminate||t.statusFlag===t.StatusFlag.StatusFlagStopAnswer,"interact-info":t.friend_innerInteractInfo,"can-show-generate-time":!1,"is-button-at-bottom-style-v2":"","data-fc-146ca4ec2":""},on:{copy:t.onClickCopy,share:t.onClickBottomShare,regenerate:t.regenerateWithModel,like:t.friend_onTapLike}},"quark-bottom",t.$props,!1))]},proxy:!0}:null,t.isButtonAtBottomStyleV2?{key:"mixed-chatbot-bottom",fn:function(){return[n("mixed-chatbot-bottom",t._b({attrs:{"can-show-button-list":t.canShowButtonList,"can-share":t.shareData.show,"can-regenerate":t.canShare,"model-type":t.modelType,"interact-info":t.friend_innerInteractInfo,"data-fc-1db00ee94":""},on:{copy:t.onClickCopy,share:t.onClickBottomShare,regenerate:t.regenerateWithModel,like:t.friend_onTapLike}},"mixed-chatbot-bottom",t.$props,!1))]},proxy:!0}:null,t.isButtonAtBottomStyleV2&&t.mixedBoxChatbotCtx&&t.friend_canShowFriendList?{key:"content-bottom",fn:function(){return[n("friend-list-out",{attrs:{"interact-info":t.friend_innerInteractInfo,"data-fc-1db00ee92":""}})]},proxy:!0}:null],null,!0)},"component",t.$props,!1)):t.isLoading?n("top-qa-loading",t._b({staticClass:"top-one-qa__content",attrs:{"chat-bot-style":t.isChatbotLoadingStyle,"state-list":t.loadingStateList,line:t.loadingLine,"loading-text":t.loadingText,"loading-height-animate-duration":t.loadingHeightAnimateDuration,"is-finish":t.isLoadingTextOutOfRange,"loading-pos":t.loadingTextIdx+1,"data-fc-1db00ee90":""}},"top-qa-loading",t.commonProps,!1)):t._e(),t.canShowStopBtn&&t.allowLoadStopBtnComponent?n("stop-answer-button",{attrs:{"position-mode":"top-qa-box-abs",data:t.data,"type-pos":t.typePos,"data-fc-1db00ee8e":""}}):t._e()],1)],1),t.canShowBottom&&t.source.chatLink&&t.source.chatLink.title?n("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"top-one-qa__lnk active__item",attrs:{"data-report-id":t.M_itemReportId(t.bottomEntryReportId),"data-cli":""},on:{click:function(e){return t.onClickTipsMore(t.source.chatLink)}}},[n("div",{staticClass:"top-one-qa__lnk-title"},[t._v(t._s(t.source.chatLink.title))]),n("ui-arrow",{attrs:{direction:"right",align:"flex",gap:"","data-fc-1db00ee8c":""}})],1):t._e(),t.canShowCommunity&&t.isAnswerFinish?[n("chatbot-bottom",t._b({attrs:{"can-show-button-list":!1,"can-share":t.shareData.show,"model-type":t.modelType,"show-deep-research-teach-pop":t.showDeepResearchTeachPop,"data-fc-1db00ee8a":""},on:{copy:t.onClickCopy,share:t.onClickBottomShare}},"chatbot-bottom",t.$props,!1)),n("community",t._b({attrs:{"can-share":t.shareData.show,"data-fc-1db00ee88":""},on:{share:t.onClickBottomShare}},"community",t.$props,!1),[n("more-pop-over",t._b({attrs:{"data-fc-1db00ee86":""},on:{copy:t.onClickCopy}},"more-pop-over",t.$props,!1))],1)]:t.canShowBottom?n("top-qa-bottom",t._b({attrs:{"data-fc-1db00ee84":""},on:{"click:tips-more":t.onClickTipsMore,"model-switch":t.handleModelSwitch,regenerate:t.regenerateWithModel}},"top-qa-bottom",t.commonProps,!1)):t.isAnswerFinish&&t.isChatBot?n("chatbot-bottom",t._b({attrs:{"can-show-button-list":t.canShowButtonList,"can-share":t.shareData.show,"model-type":t.modelType,"show-deep-research-teach-pop":t.showDeepResearchTeachPop,"data-fc-1db00ee82":""},on:{copy:t.onClickCopy,share:t.onClickBottomShare}},"chatbot-bottom",t.$props,!1)):t._e(),t.debugInfoText?n("div",{staticClass:"debug-info"},[n("div",[t._v(t._s(t.debugInfoText))]),n("universal-source",{attrs:{reference:t.debugSource,"data-fc-1db00ee56":""}})],1):t._e()],2)},o=[]},663660:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-input-container",attrs:{"data-fcn-comment-input-bar":"","data-fr-189e2d02c":""},on:{"!mousedown":function(t){t.preventDefault()}}},[n("ui-mask",{ref:"maskRef",attrs:{"enter-dur":t.maskEnterDur,"data-fc-1b27734f2":""},on:{tap:t.onTapMask}}),t.isShow?n("div",{ref:"barRef",staticClass:"comment-input-bar",style:t.barStyle,on:{touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.preventDefault()}}},[n("div",{staticClass:"comment-input-bar__input-row"},[n("div",{staticClass:"comment-input-bar__avatar-box",on:{click:function(e){return e.stopPropagation(),t.onChangeAvatar(e)}}},[n("ui-image",{staticClass:"comment-input-bar__avatar",class:"comment-input-bar__avatar--"+t.avatarVariant,attrs:{url:t.avatar,mode:"avatar","allow-empty":"","data-fc-1b27734f0":""}}),n("div",{staticClass:"comment-input-bar__transfer"},[n("ui-image",{staticClass:"comment-input-bar__transfer__icon",attrs:{url:"https://search.wxqcloud.qq.com/t/fed_upload/ac7815c82aab53b5a871a9f96abaef25/outlined-transfer-medium.svg","data-fc-1b27734ee":""}})],1)],1),n("div",{staticClass:"comment-input-bar__text-box"},[n("div",{staticClass:"comment-input-bar__textarea-wrapper",class:{"comment-input-bar__textarea-wrapper--float":t.textareaFloating},attrs:{role:"textbox"},on:{"!click":function(e){return e.stopPropagation(),t.onClickTextBox(e)}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content.text,expression:"content.text"},{name:"inner-scroll",rawName:"v-inner-scroll"},{name:"textarea-autosize",rawName:"v-textarea-autosize"}],ref:"textareaRef",staticClass:"comment-input-bar__textarea",class:{"comment-input-bar__textarea--disabled":0===t.focusState},attrs:{maxlength:"10000",placeholder:t.placeholder},domProps:{value:t.content.text},on:{focus:t.onFocus,blur:t.onBlur,touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()},scroll:t.onScroll,input:function(e){if(!e.target.composing)t.$set(t.content,"text",e.target.value)}}})]),t.textareaFloating?n("div",{ref:"fakeTextareaRef",staticClass:"comment-input-bar__fake-textarea",class:{"comment-input-bar__fake-textarea--placeholder":!t.content.text},domProps:{textContent:t._s(t.content.text||t.placeholder)}}):t._e()])]),n("div",{staticClass:"comment-input-bar__below-action"},[n("ui-image",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"comment-input-bar__icon-button active__opacity",attrs:{url:t.isStickerPanelOpened?"https://res.wx.qq.com/t/components/icons/base/keyboard_circle_regular.svg":"https://search.wxqcloud.qq.com/t/components/icons/base/smile_regular.svg",size:28,color:"var(--FG-0)","no-rpx":"","data-fc-1b27734ec":"","data-cli":""},nativeOn:{click:function(e){return t.onToggleStickerPanel(e)},touchmove:function(t){t.preventDefault()}}}),n("ui-button",{staticClass:"comment-input-bar__send-button",attrs:{type:9,disabled:t.isSubmitDisabled,title:t.buttonTitle,"data-fc-1b27734ea":""},on:{tap:t.onClickSubmit},nativeOn:{touchmove:function(t){t.preventDefault()}}})],1),n("div",{staticClass:"comment-input-bar__below-bar"},[n("sticker-panel",{staticClass:"sticker-panel",class:{"sticker-panel--hidden":!t.isStickerPanelOpened},attrs:{"action-disabled":t.isSubmitDisabled,"data-fc-1b27734e8":""},on:{click:t.onClickSticker,"click:backspace":t.onClickBackspace,"click:confirm":t.hideStickerPanel}})],1)]):t._e()],1)},o=[]},460560:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-fcn-sticker-panel":"","data-fr-10da2c2bc":""}},[n("div",{directives:[{name:"inner-scroll",rawName:"v-inner-scroll"}],staticClass:"sticker-panel",on:{touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()}}},[n("div",{staticClass:"sticker-panel__grid"},[t._l(t.stickerList,function(e,i){return[e?n("div",{key:e.key,staticClass:"sticker-panel__item",on:{click:function(n){return t.$emit("click",e.cn)}}},[n("div",{staticClass:"sticker-panel__item-img we-emoji",class:e.style,style:{fontSize:Math.floor(32*t.scaleFactor)+"px"}})]):n("div",{key:"space-"+i,staticClass:"sticker-panel__spacer"})]})],2)]),n("div",{staticClass:"sticker-panel__button-wrapper"},[n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.actionDisabled,expression:"!actionDisabled",modifiers:{stop:!0}}],staticClass:"sticker-panel__button sticker-panel__button--default active__absolute",class:{"sticker-panel__button--disabled":t.actionDisabled},attrs:{"data-cli":""},on:{click:function(e){e.stopPropagation(),t.actionDisabled||t.$emit("click:backspace")}}},[n("ui-image",{attrs:{url:"https://res.wx.qq.com/t/components/icons/base/delete_keyboard_regular.svg",size:24,"no-rpx":"","data-fc-1b294d616":""}})],1),t.showConfirm?n("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.actionDisabled,expression:"!actionDisabled",modifiers:{stop:!0}}],staticClass:"sticker-panel__button sticker-panel__button--primary active__absolute",class:{"sticker-panel__button--disabled":t.actionDisabled},attrs:{"data-cli":""},on:{click:function(e){e.stopPropagation(),t.actionDisabled||t.$emit("click:confirm")}}},[t._v("\n        "+t._s(t.confirmText)+"\n      ")]):t._e()])])},o=[]},160622:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement,e=this._self._c||t;return this.canShowBg&&this.canShowBgWhenNotSticky?e("div",{staticClass:"chatbot-bottom-background",class:{"chatbot-bottom-background--at-bottom":this.isAtBottom},style:this.style,attrs:{"data-fcn-ChatbotBottomBackground":"","data-fr-1396d1f33":""}}):this._e()},o=[]},942252:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{"data-fcn-DeepResearchExposeDataMiddle":"","data-fr-17da19ca2":""}},[this._t("default")],2)},o=[]},116593:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dr-page-bottom",attrs:{"data-fcn-DeepResearchPageBottom":"","data-fr-10807f3f4":""}},t._l(t.buttonList,function(e,i){return n("div",{key:e.title,staticClass:"dr-page-bottom__button"},[i?n("div",{staticClass:"dr-page-bottom__button__divider"}):t._e(),t.feedbackData&&e.isFeedBack?n("feedback",{attrs:{"feedback-data":t.feedbackData,"icon-style":t.FeedbackType.Text,"model-type":t.modelType,"report-search-id":t.searchId,data:t.lastBox,"data-fc-1f8f68a2a":""}}):n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"active__mask",attrs:{"data-cli":""},on:{click:e.onClick}},[t._v(t._s(e.title))])],1)}),0)},o=[]},180535:function(t,e,n){n.d(e,{s:function(){return i},x:function(){return o}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.stopBtnHeightHolderHeight,attrs:{"data-fcn-StopButton":"","data-fr-1379abb8e":""}},[n("div",{staticClass:"stop-button",class:["stop-button--"+t.stopBtnStyle],style:t.style,attrs:{"chatbot-visible-mask":"bottom"}},[n("div",{staticClass:"stop-button__bg"}),n("chatbot-bottom-background",{attrs:{"is-at-bottom":t.isAtBottom,"data-fc-1bbbcb5d0":""}}),n("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"stop-button-text active__mask",attrs:{"data-cli":""},on:{click:function(e){return t.$emit("stop-answer")}}},[t._v("\n        "+t._s(t.showTitle)+"\n      ")]),t.canShowDeepResearchPageBottom?n("deep-research-page-bottom",{attrs:{"data-fc-1bbbcb5ce":""}}):t._e()],1)])},o=[]},941372:function(t,e){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}e.Z={props:{finished:{type:Boolean,default:!1},finishedText:{type:String,default:""},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"加载中"},loadingIcon:{type:Boolean,default:!0},error:{type:Boolean,default:!1},errorRetryIcon:{type:Boolean,default:void 0},errorText:{type:String,default:void 0},empty:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无内容"},emptyErrorText:{type:String,default:void 0},canLoadMore:{type:Boolean,default:!1},loadMoreText:{type:String,default:void 0},dense:{type:Boolean,default:!1},disableExposeAutoLoad:{type:Boolean,default:!1}},data:function(){return{observer:null,timer:0,isWaitingExposeLoadMore:!1,visible:!1}},computed:{renderLoading:function(){return this.loading||this.isWaitingExposeLoadMore},renderErrorRetryIcon:function(){var t;return null!==(t=this.errorRetryIcon)&&void 0!==t?t:this.canLoadMore},tmpErrorText:function(){var t;return null!==(t=this.errorText)&&void 0!==t?t:this.canLoadMore?"网络繁忙, 轻触重试":"加载失败, 请稍后再试"},renderErrorText:function(){return this.error&&this.emptyErrorText||this.tmpErrorText},renderLoadMoreText:function(){var t;return this.isWaitingExposeLoadMore?this.loadingText:null!==(t=this.loadMoreText)&&void 0!==t?t:this.empty?"轻触加载":"轻触加载更多"},loadMoreStatus:function(){return{error:this.error,canLoadMore:this.canLoadMore,visible:this.visible}}},watch:{loadMoreStatus:function(t){var e=t.error,n=t.canLoadMore,i=t.visible;if(!this.disableExposeAutoLoad)n&&!e&&i?this.onExposeLoadMore():this.cancelExposeLoadMore()}},mounted:function(){var t=this;this.observer=new IntersectionObserver(function(e){var i,o,r=(o=1,function(t){if(Array.isArray(t))return t}(i=e)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(i,1)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}}(i,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].isIntersecting;t.visible=r},{threshold:0,rootMargin:"0px"}),this.observer.observe(this.$refs.rootRef)},destroyed:function(){var t,e;null===(e=this.observer)||void 0===e||null===(t=e.disconnect)||void 0===t||t.call(e)},methods:{onClick:function(t){t.stopPropagation(),this.$emit("click")},onExposeLoadMore:function(){this.isWaitingExposeLoadMore=!0,this.$emit("click")},cancelExposeLoadMore:function(){this.isWaitingExposeLoadMore=!1,this.timer&&clearTimeout(this.timer)}}}},65307:function(t,e,n){var i=n(91942);e.Z={name:"DrReportInnerScroll",components:{MarkdownContent:i.Z},props:{textToShow:{type:String,default:""},isAnswerFinish:{type:Boolean,default:!1}},data:function(){return{contentHeight:0,bodyHeight:0,showLoading:!this.isAnswerFinish,showFinish:this.isAnswerFinish}},computed:{needFixBodyToBottom:function(){return!this.isAnswerFinish&&this.bodyHeight<=this.contentHeight},markdownBody:function(){var t=this.textToShow.trim(),e=t;return e=t.startsWith("# ")?t.replace(/^#.*/,""):this.textToShow,this.isAnswerFinish,e},markdownBodyForFinish:function(){return this.markdownBody.slice(0,600)},markdownTitle:function(){var t,e=this.textToShow.trim();return e.startsWith("# ")&&(null===(t=/^#.*/.exec(e))||void 0===t?void 0:t[0])||""}},watch:{isAnswerFinish:function(t){t&&(this.showLoading=!1)}},methods:{onLoadingLeave:function(){if(!!this.isAnswerFinish)this.showFinish=!0}}}},516935:function(t,e){e.Z={}},342193:function(t,e,n){var i=n(798509);e.Z={name:"ReportWarning",props:{wording:{type:String,default:""}},data:function(){return{wordingHeight:0}},computed:{isWordingOnlyLineOne:function(){return this.wordingHeight<=i.Zr.getSimilarFontHeight(15,1.6)}}}},259799:function(t,e){e.Z={props:{wording:{type:String,default:""}}}},102848:function(t,e,n){var i=n(798509),o=n(91942),r=n(775749),a=n(342622),s=n(152750);n(770719),e.Z={name:"FinishTask",components:{MarkdownContent:o.Z,SearchListFinishStep:r.Z},mixins:[i.uW,i.jB,s.lq],props:{taskInfo:{type:Object,default:function(){return{}}},isCache:{type:Boolean,default:!1},isEndStyle:{type:Boolean,default:!1},taskIdx:{type:Number,default:-1},taskInfos:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{text:"",isAnswerFinish:!1,hasEmitFinish:!1,typewriter:new a.r({minDuration:10,maxDuration:30,range:15,tag:"answer",needTypeTimeRectify:!0},(function(e,n){t.text=e;var i=n||t.isAnswerFinish;i&&!t.hasEmitFinish&&(t.$emit("finish"),t.hasEmitFinish=!0),t.isAnswerFinish=i}).bind(this))}},computed:{DRR_taskReportId:function(){var t,e;return this.DRR_generateTaskReportId({taskId:null===(t=this.taskInfo)||void 0===t?void 0:t.id,taskDesc:null===(e=this.taskInfo)||void 0===e?void 0:e.taskDesc})},isFinish:function(){return!!this.isEndStyle||this.taskIdx+1!==this.taskInfos.length&&this.isAnswerFinish}},watch:{"taskInfo.taskSummary":{handler:function(t,e){t&&t!==e&&this.handleMarkdownText(t)},immediate:!0},"taskInfo.status":{handler:function(t){if(t){var e;this.handleMarkdownText(null===(e=this.taskInfo)||void 0===e?void 0:e.taskSummary)}}},isEndStyle:{handler:function(){var t;this.handleMarkdownText(null===(t=this.taskInfo)||void 0===t?void 0:t.taskSummary)}}},created:function(){var t;!(null===(t=this.taskInfo)||void 0===t?void 0:t.taskSummary)&&this.taskInfo.status>0&&(this.$emit("finish"),this.hasEmitFinish=!0,this.isAnswerFinish=!0)},mounted:function(){var t=this;this.resizeObserver=new ResizeObserver(function(e){var n=!0,i=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;if(!t.isFinish){var c=s.contentRect.height;console.log("组件高度变化:",c),t.$emit("scroll-to-bottom",{})}}}catch(t){i=!0,o=t}finally{try{!n&&null!=a.return&&a.return()}finally{if(i)throw o}}}),this.resizeObserver.observe(this.$refs.markdownRef)},beforeDestroy:function(){this.resizeObserver&&this.resizeObserver.disconnect()},methods:{handleMarkdownText:function(t){var e;this.typewriter.handleNewDescAnimate({newText:t,oldText:this.text,isCache:this.isCache||this.isEndStyle,answerFinish:(null===(e=this.taskInfo)||void 0===e?void 0:e.status)>0,needDefaultContent:!1})}}}},915360:function(t,e,n){var i=n(793299);e.Z={name:"LoadingStep",components:{MoreTag:i.Z},mixins:[],props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}}},184851:function(t,e,n){var i=n(798509),o=n(936777),r=n(857348),a=n(342622),s=n(770719),c=n(443277);e.Z={name:"NormalTask",components:{SearchListStep:o.Z,FinishTask:c.Z,LoadingStep:r.Z},mixins:[i.uW,i.jB],inject:{drSearchIdForServer:{default:""}},props:{taskInfo:{type:Object},taskInfos:{type:Array,default:function(){return[]}},taskIdx:{type:Number,default:0},isCache:{type:Boolean,default:!1},animationWrapHeight:{type:Number,default:400},isEndStyle:{type:Boolean,default:!1}},data:function(){var t=this;return{currentDocIndex:0,currentQueryIndex:0,queryAnimationStateMap:{},docAnimationStateMap:{},componentKey:0,currentComponent:"",currentComponentProps:{},mpContentMap:{},isVisible:!1,showTitle:"",typewriter:new a.r({minDuration:10,maxDuration:20,range:10,tag:"answer",needTypeTimeRectify:!0},function(e,n){!t.isFinish&&(t.showTitle="".concat(e)),n&&(t.Finish=!0)}),isFinish:!1,headerHeight:36,Status:s.qb,animationFinish:!1}},computed:{queryInfo:function(){var t,e,n,i;return null!==(i=null===(n=this.taskInfo)||void 0===n?void 0:null===(e=n.searcherInfo)||void 0===e?void 0:null===(t=e.queryInfo)||void 0===t?void 0:t.filter(function(t){var e;return(null==t?void 0:null===(e=t.urls)||void 0===e?void 0:e.length)>0}))&&void 0!==i?i:[]},urls:function(){var t,e,n;return null!==(n=null===(e=this.queryInfo)||void 0===e?void 0:null===(t=e[this.currentQueryIndex])||void 0===t?void 0:t.urls)&&void 0!==n?n:[]}},watch:{taskInfo:{handler:function(t){var e,n,i,o,r,a,c,l=this;"LoadingStep"===this.currentComponent&&this.onSearchAnimationFinish("LoadingStep"),(null==t?void 0:t.taskDesc)&&("".concat(t.taskDesc)!==this.showTitle&&this.$nextTick(function(){l.typewriter.handleNewDescAnimate({newText:t.taskDesc,oldText:l.showTitle,duration:30,isCache:l.isCache,needDefaultContent:!1})}),this.$nextTick(function(){l.headerHeight=l.$refs.header.offsetHeight+28})),(null==t?void 0:t.searcherInfo)&&""===this.currentComponent&&((null==t?void 0:t.taskSummary)||(null==t?void 0:t.status)>s.qb.Running||this.isEndStyle?(this.animationFinish=!0,this.taskIdx===this.taskInfos.length-1&&this.$nextTick(function(){l.$emit("scroll-to-bottom",{resetUserScroll:!0,needAnimate:!1})})):((null==t?void 0:null===(o=t.searcherInfo)||void 0===o?void 0:null===(i=o.queryInfo)||void 0===i?void 0:i.length)>0?(this.currentComponent="SearchListStep",this.currentComponentProps={queryItem:null===(a=t.searcherInfo)||void 0===a?void 0:null===(r=a.queryInfo)||void 0===r?void 0:r[this.currentQueryIndex]},this.docAnimationStateMap["".concat(this.taskIdx,"_").concat(this.currentQueryIndex,"_").concat(this.currentDocIndex)]={hasFinish:!0}):this.currentComponent="LoadingStep",this.$nextTick(function(){l.$emit("scroll-to-bottom",{resetUserScroll:!0,needAnimate:!1})}))),(null==t?void 0:null===(n=t.searcherInfo)||void 0===n?void 0:null===(e=n.queryInfo)||void 0===e?void 0:e.length)&&!((null==t?void 0:t.status)>s.qb.Running||this.isEndStyle)&&(null===(c=t.searcherInfo.queryInfo)||void 0===c||c.forEach(function(t){var e;(null==t?void 0:null===(e=t.urls)||void 0===e?void 0:e.length)>0&&t.urls.forEach(function(t){l.fetchMpContent(t)})}))},immediate:!0,deep:!0}},mounted:function(){},created:function(){this.isVisible=!0},methods:{fetchMpContent:function(t){var e,n,o=this;!(null===(e=this.mpContentMap[t.url])||void 0===e?void 0:e.isLoading)&&!(null===(n=this.mpContentMap[t.url])||void 0===n?void 0:n.content)&&!(null==t?void 0:t.desc)&&(this.$set(this.mpContentMap,t.url,{isLoading:!0,content:null}),i.hi.getCommonCgiData({cgiName:"GetDocumentInfo",data:{url:t.url,docid:t.docId,sid:this.drSearchIdForServer}}).then(function(e){(null==e?void 0:e.ret)===0?o.$set(o.mpContentMap,t.url,{isLoading:!1,content:e.data}):o.$set(o.mpContentMap,t.url,{isLoading:!1,content:null})}).catch(function(){o.$set(o.mpContentMap,t.url,{isLoading:!1,content:null})}))},onSearchAnimationFinish:function(t){var e,n;console.warn("onSearchAnimationFinish",t),(null===(e=this.taskInfo)||void 0===e?void 0:e.taskSummary)||this.isEndStyle?(this.currentComponent=null,this.animationFinish=!0):this.currentQueryIndex<(null===(n=this.queryInfo)||void 0===n?void 0:n.length)-1?(this.currentQueryIndex+=1,this.currentDocIndex=0,this.currentComponent="SearchListStep",this.currentComponentProps={queryItem:this.queryInfo[this.currentQueryIndex]},this.docAnimationStateMap["".concat(this.taskIdx,"_").concat(this.currentQueryIndex,"_").concat(this.currentDocIndex)]={hasFinish:!0}):"SearchListStep"===t&&(this.currentComponent="LoadingStep"),this.componentKey+=1},onSummaryFinish:function(){this.$emit("finish",this.taskIdx)}}}},623811:function(t,e,n){var i=n(798509),o=n(984928),r=n(770719),a=n(468845),s=n(152750),c=n(462474);e.Z={name:"SearchListFinishStep",components:{},mixins:[i.uW,i.jB,s.fE,s.lq,s.kP,s.Ao],props:{queryInfo:{type:Array,default:function(){return[]}},isEndStyle:{type:Boolean,default:!1},taskSummary:{type:String,default:""},taskInfo:{type:Object,default:function(){return{}}},isFinish:{type:Boolean,default:!1}},data:function(){return{isExpand:!1,Status:r.qb}},computed:{urls:function(){return(this.queryInfo||[]).reduce(function(t,e){var n;return t.concat(null===(n=e.urls)||void 0===n?void 0:n.filter(function(t){return 1==t.type}))},[]).filter(Boolean).reduce(function(t,e){return!t.find(function(t){return t.docId===e.docId})&&t.push(e),t},[])},DRR_stepReportId:function(){return this.DRR_generateStepReportId({stepId:a.$h.Step})},DRR_taskReportId:function(){var t,e;return this.DRR_generateTaskReportId({taskId:null===(t=this.taskInfo)||void 0===t?void 0:t.id,taskDesc:null===(e=this.taskInfo)||void 0===e?void 0:e.taskDesc})},expandDocReportId:function(){var t,e,n,i,o;return this.DRR_docExposeReportId({docId:null===(t=this.taskInfo)||void 0===t?void 0:t.id,docType:"task_detail"},{agentReportId:this.DRR_generateAgentReportId({agentId:null===(n=this.queryInfo)||void 0===n?void 0:null===(e=n[this.queryInfo.length-1])||void 0===e?void 0:e.searchSid,pos:this.queryInfo.length,desc:{query:null===(o=this.queryInfo)||void 0===o?void 0:null===(i=o[this.queryInfo.length-1])||void 0===i?void 0:i.query}})})}},watch:{},mounted:function(){},methods:{getDocInfo:function(t,e){var n,i,o,r,a,s=null===(n=this.queryInfo)||void 0===n?void 0:n.findIndex(function(e){var n;return null==e?void 0:null===(n=e.urls)||void 0===n?void 0:n.find(function(e){return e.docId===t.docId})});return this.DRR_docExposeReportId({docId:t.docId,docType:t.sourceType,docPos:e+1},{agentReportId:this.DRR_generateAgentReportId({agentId:null===(o=this.queryInfo)||void 0===o?void 0:null===(i=o[s])||void 0===i?void 0:i.searchSid,pos:s+1,desc:{query:null===(a=this.queryInfo)||void 0===a?void 0:null===(r=a[s])||void 0===r?void 0:r.query}})})},isMpDoc:function(t){return(null==t?void 0:t.indexOf("mp.weixin.qq.com"))>-1},openUrl:function(t,e){this.M_go({jumpType:o.sn.H5,jumpUrl:t.url,opType:4,itemType:0});var n,i,r,a,s,c=null===(n=this.queryInfo)||void 0===n?void 0:n.findIndex(function(e){var n;return null==e?void 0:null===(n=e.urls)||void 0===n?void 0:n.find(function(e){return e.docId===t.docId})});this.DRR_clickReport({actionType:o.At.H5,docInfo:this.DRR_generateDocReportId({docId:t.docId,docType:t.sourceType,docPos:e+1})},{agentReportId:this.DRR_generateAgentReportId({agentId:null===(r=this.queryInfo)||void 0===r?void 0:null===(i=r[c])||void 0===i?void 0:i.searchSid,pos:c+1,desc:{query:null===(s=this.queryInfo)||void 0===s?void 0:null===(a=s[c])||void 0===a?void 0:a.query}})})},tapExpand:function(){var t,e,n,i,r;this.isExpand=!this.isExpand,this.DRR_clickReport({actionType:this.isExpand?o.At.CLICK_UNFOLD:o.At.CLICK_FOLD,docInfo:this.DRR_generateDocReportId({docId:null===(t=this.taskInfo)||void 0===t?void 0:t.id,docType:"task_detail"})},{agentReportId:this.DRR_generateAgentReportId({agentId:null===(n=this.queryInfo)||void 0===n?void 0:null===(e=n[this.queryInfo.length-1])||void 0===e?void 0:e.searchSid,pos:this.queryInfo.length,desc:{query:null===(r=this.queryInfo)||void 0===r?void 0:null===(i=r[this.queryInfo.length-1])||void 0===i?void 0:i.query}})}),this.$nextTick(function(){c.Z.$emit(c.U.drExposeAnalysis)})}}}},715122:function(t,e,n){var i=n(798509),o=n(993055);e.Z={name:"SearchListStep",components:{TextTypewriter:o.Z},mixins:[i.uW,i.jB],props:{queryItem:{type:Object},isAnimation:{type:Boolean,default:!0},headerHeight:{type:Number,default:0},mpContentMap:{type:Object,default:function(){return{}}},isEndStyle:{type:Boolean,default:!1}},data:function(){return{isVisible:!1,animatedCount:0,activeIndex:-1,showActiveIndex:-1,showList:[],resizeObserver:null,isInit:!1}},computed:{contentStyle:function(){return{"--search-list-step-height":"-".concat(this.headerHeight+18,"px")}}},watch:{isEndStyle:{handler:function(t){var e=this;t&&(this.isVisible=!1,setTimeout(function(){e.$emit("animation:finish")},300))},immediate:!0},"queryItem.urls":{handler:function(t){t.length&&!this.isInit&&(this.isInit=!0,this.handleInsert())},immediate:!0}},mounted:function(){var t,e=this;console.warn("[dr] search-list-step",null===(t=this.queryItem)||void 0===t?void 0:t.urls),this.resizeObserver=new ResizeObserver(function(t){var n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){r.value.contentRect.height;var s=e.$refs.retrieveWrapRef;null==s||s.scrollTo({top:s.scrollTop+s.clientHeight,behavior:"instant"})}}catch(t){i=!0,o=t}finally{try{!n&&null!=a.return&&a.return()}finally{if(i)throw o}}}),this.resizeObserver.observe(this.$el.querySelector(".retrieve-url"))},beforeDestroy:function(){this.resizeObserver&&this.resizeObserver.disconnect()},created:function(){this.isVisible=!0},methods:{getShowText:function(t){var e,n;return null===(n=this.mpContentMap)||void 0===n?void 0:null===(e=n[t])||void 0===e?void 0:e.content},handleInsert:function(){var t,e,n,i,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(null===(e=this.queryItem)||void 0===e?void 0:null===(t=e.urls)||void 0===t?void 0:t[r])?this.showList.push(null===(i=this.queryItem)||void 0===i?void 0:null===(n=i.urls)||void 0===n?void 0:n[r]):console.error("[dr] handleInsert err",r,null===(o=this.queryItem)||void 0===o?void 0:o.urls)},onTypeFinish:function(t){var e,n,i,o,r,a,s;console.warn("[dr] onTypeFinish",t,null===(i=this.queryItem)||void 0===i?void 0:null===(n=i.urls)||void 0===n?void 0:null===(e=n[t])||void 0===e?void 0:e.title,(null!==(s=null===(a=this.queryItem)||void 0===a?void 0:null===(r=a.urls)||void 0===r?void 0:null===(o=r[t])||void 0===o?void 0:o.desc)&&void 0!==s?s:"").slice(0,200)),t<this.queryItem.urls.length-1?this.handleInsert(t+1):this.handleLeaveAnimationComplete()},handleLeaveAnimationComplete:function(){var t=this;setTimeout(function(){t.isVisible=!1},600),setTimeout(function(){t.$emit("animation:finish")},900)}}}},32645:function(t,e,n){var i=n(342622),o=n(372973),r=n(793299);e.Z={name:"TextTypewriter",components:{MoreTag:r.Z},props:{text:{type:String},mpContentMap:{type:Object,default:function(){return{}}},retrieveUrl:{type:Object,default:function(){return{}}}},data:function(){var t=this;return{typewriter:new i.r({minDuration:15,maxDuration:15,tag:"answer"},(function(e,n){t.showText=e,n&&!t.isFinish&&(t.$emit("finish"),t.isFinish=!0),t.$nextTick(function(){var e=t.$el;e.scrollHeight-e.clientHeight>1&&!t.isFinish&&(t.$emit("finish"),t.isFinish=!0)})}).bind(this)),showText:"",hadTyped:!1,isFinish:!1,canShow:!1}},computed:{minLineHeight:function(){return 4*(0,o.I)().getTextHeight({text:"测试",fontSize:15,lineHeight:1.6})}},watch:{mpContentMap:{handler:function(t){var e,n,i,o,r,a;(null==t?void 0:null===(e=t[null===(n=this.retrieveUrl)||void 0===n?void 0:n.url])||void 0===e?void 0:e.isLoading)===!1&&this.handleType(null==t?void 0:null===(r=t[null===(a=this.retrieveUrl)||void 0===a?void 0:a.url])||void 0===r?void 0:null===(o=r.content)||void 0===o?void 0:null===(i=o.content)||void 0===i?void 0:i.replace(/<[^>]*>/g,""))},immediate:!0,deep:!0},"retrieveUrl.desc":{handler:function(t){this.handleType(null==t?void 0:t.replace(/<[^>]*>/g,""))},immediate:!0}},mounted:function(){var t=this;setTimeout(function(){!t.isFinish&&(t.$emit("finish"),t.isFinish=!0)},4e3)},created:function(){},methods:{handleType:function(t){var e=this;t&&!this.hadTyped&&(this.hadTyped=!0,setTimeout(function(){e.canShow=!0,e.typewriter.handleNewDescAnimate({newText:t,oldText:e.showText,isCache:!1,answerFinish:!0,needDefaultContent:!1})},600))}}}},24992:function(t,e,n){var i=n(798509),o=n(62513);e.Z={name:"DeepResearchTabItem",components:{TabHeader:o.Z},mixins:[i.uW,i.jB],inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}},getCustomBottomHeight:{default:function(){return function(){return 0}}}},provide:function(){return{notifyStickyChange:this.handleStickyChange}},props:{tabInfoList:{type:Array,default:function(){return[]}},enable:{type:Boolean,default:!0}},data:function(){return{topStickyList:[],bottomStickyList:[]}},computed:{topListStyle:function(){return{top:"".concat(this.getCustomNavBarHeight(),"px")}},bottomListStyle:function(){return{bottom:"".concat(this.getCustomBottomHeight(),"px")}}},watch:{tabInfoList:{immediate:!0,handler:function(t){var e=this;t.forEach(function(t){e.topStickyList.forEach(function(e){e.tabInfo.id===t.id&&(e.tabInfo=t)}),e.bottomStickyList.forEach(function(e){e.tabInfo.id===t.id&&(e.tabInfo=t)})})}}},beforeDestroy:function(){this.topStickyList.forEach(function(t){var e=t.tabInfo;i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!1)}),this.bottomStickyList.forEach(function(t){var e=t.tabInfo;i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!1)})},methods:{handleStickyChange:function(t){var e=t.tabInfo,n=t.index,o=t.position;"top"===o?(!this.topStickyList.find(function(t){return t.tabInfo.id===e.id})&&(this.topStickyList.push({tabInfo:e,index:n}),i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!0)),this.bottomStickyList=this.bottomStickyList.filter(function(t){return t.tabInfo.id!==e.id})):"bottom"===o?(!this.bottomStickyList.find(function(t){return t.tabInfo.id===e.id})&&(this.bottomStickyList.push({tabInfo:e,index:n}),i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!0)),this.topStickyList=this.topStickyList.filter(function(t){return t.tabInfo.id!==e.id})):(this.topStickyList.find(function(t){return t.tabInfo.id===e.id})&&i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!1),this.bottomStickyList.find(function(t){return t.tabInfo.id===e.id})&&i.Gc.$emit(i.U3.TAB_STICKY_CHANGE,e,!1),this.topStickyList=this.topStickyList.filter(function(t){return t.tabInfo.id!==e.id}),this.bottomStickyList=this.bottomStickyList.filter(function(t){return t.tabInfo.id!==e.id})),this.topStickyList=this.topStickyList.sort(function(t,e){return t.index-e.index}),this.bottomStickyList=this.bottomStickyList.sort(function(t,e){return t.index-e.index})}}}},86042:function(t,e,n){var i=n(798509),o=n(468845),r=n(912139),a=n(152750),s=n(984928);function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function l(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={name:"DeepResearchTabHeader",components:{UiIconLoading:r.Z},mixins:[i.uW,i.jB,a.kP,a.lq,a.Ao,a.fE],inject:{notifyStickyChange:{default:function(){return function(){}}},scrollToTab:{default:function(){return function(){}}}},props:{tabInfo:{type:Object,default:function(){}},stickyInfo:{type:Object,default:function(){}},isSticky:{type:Boolean,default:!1}},data:function(){return{dispose:null,isSelfSticky:!1}},computed:{DRR_taskReportId:function(){var t;return this.DRR_generateTaskReportId({taskId:null===(t=this.tabInfo.reportData)||void 0===t?void 0:t.taskId})},DRR_agentReportId:function(){return""},DRR_stepReportId:function(){return this.DRR_generateStepReportId({stepId:this.tabInfo.stepId})},isLoading:function(){return this.tabInfo.status===o.HE.Running},isNotStart:function(){return this.tabInfo.status===o.HE.NotStart},isTerminate:function(){return this.tabInfo.status===o.HE.Terminate}},mounted:function(){var t=this;if(!!this.stickyInfo){var e=function(){t.checkPosition()};i.Gc.$on(i.U3.DR_CONTENT_RESIZE,e),window.addEventListener("scroll",e),window.addEventListener("resize",e),this.dispose=function(){window.removeEventListener("scroll",e),i.Gc.$off(i.U3.DR_CONTENT_RESIZE,e),window.removeEventListener("resize",e)}}},beforeDestroy:function(){var t;null===(t=this.dispose)||void 0===t||t.call(this)},methods:{checkPosition:function(){if(!!this.$el){var t={tabInfo:this.tabInfo,stickyInfo:this.stickyInfo,index:this.stickyInfo.index};this.$el.getBoundingClientRect().top-this.stickyInfo.top<-1?(this.notifyStickyChange(l(c({},t),{position:"top"})),this.isSelfSticky=!0):this.$el.getBoundingClientRect().bottom-window.innerHeight+this.stickyInfo.bottom>1?(this.notifyStickyChange(l(c({},t),{position:"bottom"})),this.isSelfSticky=!0):(this.notifyStickyChange(l(c({},t),{position:"none"})),this.isSelfSticky=!1)}},onClickHeader:function(){if(this.scrollToTab({tabType:this.tabInfo.id,needAnimate:!1}),!!this.tabInfo.reportData.canReport)this.DRR_clickReport({actionType:s.At.CLICK_UNFOLD,docInfo:this.DRR_generateDocReportId({docId:this.tabInfo.reportData.docId,docType:"tab"})})}}}},788639:function(t,e,n){var i=n(798509),o=n(392935),r=n(684741),a=n(91942),s=n(445718),c=n(728223),l=n(275834),u=n(735055),d=n(369794),h=n(790497),f=n(984928),p=n(736312),m=n(152750),v=n(468845),y=n(192451),g=n(883031),b=n(448753),_=n(407778),S=n(461788),I=n(372973),w=n(72433),x=n(231211),T=n(630658);function C(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function k(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){C(r,i,o,a,s,"next",t)}function s(t){C(r,i,o,a,s,"throw",t)}a(void 0)})}}function A(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}e.Z={name:"DeepResearchFullReport",components:{ReportHeader:r.Z,MarkdownContent:a.Z,DrReference:y.Z,ReportWarning:b.Z,Portal:w.Portal,DeepResearchExposeDataMiddle:x.Z,SecurityTips:T.Z},mixins:[i.uW,i.jB,o.Z,l.Z,m.fE,m.lq,m.Ao,m.kP,S.Z],inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}}},props:{d:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},data:function(){return{pdfBase64Image:"",reportCache:{},heightExposeTimer:null,startTime:Date.now(),visibleAreaInfo:{},visibleAreaInfoTimer:null}},computed:{visibleReportActionValue:function(){var t,e,n=(0,I.I)().getTextHeight({text:"测试",fontSize:"var(--FONT-L)",lineHeight:1.6,enableCache:!0});return encodeURIComponent(JSON.stringify({vs_height:"0_0_0_".concat(Math.floor(null!==(t=this.visibleAreaInfo.startY)&&void 0!==t?t:0),"_").concat(Math.floor(null!==(e=this.visibleAreaInfo.endY)&&void 0!==e?e:0),"_").concat(Math.floor(n))}))},refUrls:function(){var t,e;return(null===(e=this.itemInfo.data)||void 0===e?void 0:null===(t=e.researchReport)||void 0===t?void 0:t.refUrls)||[]},reportId:function(){var t,e;return null===(e=this.itemInfo.data)||void 0===e?void 0:null===(t=e.researchReport)||void 0===t?void 0:t.id},securityWording:function(){var t;return(null===(t=this.itemInfo.data)||void 0===t?void 0:t.wording)||""},DRR_stepReportId:function(){return this.DRR_generateStepReportId({stepId:v.$h.SingleReport})},DRR_taskReportId:function(){return this.DRR_generateTaskReportId({taskId:this.reportId})},DRR_agentReportId:function(){return""},markdownText:function(){var t,e;return(null===(e=this.d.itemInfo.data)||void 0===e?void 0:null===(t=e.researchReport)||void 0===t?void 0:t.content)||""},warningWording:function(){var t,e;return null===(e=this.d.itemInfo.data)||void 0===e?void 0:null===(t=e.researchReport)||void 0===t?void 0:t.disclaimer},markdownContent:function(){var t=this.markdownText.trim(),e=t;return e=t.startsWith("# ")?t.replace(/^#.*/,""):this.markdownText},markdownTitle:function(){var t,e=this.markdownText.trim();return e.startsWith("# ")&&(null===(t=/^#.*/.exec(e))||void 0===t?void 0:t[0])||""},pdfTitle:function(){return(0,s.k)(this.markdownTitle)||this.itemInfo.userQuery},maxTableCellWidth:function(){return .7*i.Zr.getPageWidth()}},mounted:function(){var t=this;i.Gc.$on(i.U3.ON_CHATBOT_SHOW_MORE,this.onShowMore),this.$store.commit({type:"chatbot/updateIsPerformActionEnabled",enabled:1}),this.refreshVisibleAreaInfo(),this.visibleAreaInfoTimer=setInterval(function(){t.refreshVisibleAreaInfo()},1e3),setTimeout(function(){t.getPdfBase64Image()},100)},beforeDestroy:function(){i.Gc.$off(i.U3.ON_CHATBOT_SHOW_MORE,this.onShowMore),this.visibleAreaInfoTimer&&clearInterval(this.visibleAreaInfoTimer),this.visibleAreaInfoTimer=null},methods:{refreshVisibleAreaInfo:function(){var t,e;if(!!(null===(t=this.$refs.markdownContent)||void 0===t?void 0:t.$el))this.visibleAreaInfo=this.V_getVisibleAreaInfo(null===(e=this.$refs.markdownContent)||void 0===e?void 0:e.$el)},handleContentExpose:function(t){var e=this,n=t.height,i=t.totalHeight;if(!(n<=this.reportCache.height)){this.$set(this.reportCache,"height",n);var o=function(){var t=e.DRR_getCommonReportData({actionType:f.At.QA_EXPOSE});t.docInfo=e.DRR_generateDocReportId({docId:e.reportId,docType:"full_report"}),t.actionValue={height:n,totalHeight:i,windowHeight:window.innerHeight-e.getCustomNavBarHeight()},(0,g.Z)(t)};if(this.heightExposeTimer&&clearTimeout(this.heightExposeTimer),this.heightExposeTimer=setTimeout(function(){e.heightExposeTimer=null,o()},300),n>=i&&!this.reportCache.isFullExpose){this.$set(this.reportCache,"isFullExpose",!0);var r=this.DRR_getCommonReportData({actionType:f.At.TOP_QA_ANSWER_FULL_EXPOSE});r.docInfo=this.DRR_generateDocReportId({docId:this.reportId,docType:"full_report"}),r.actionValue={duration:Date.now()-this.startTime},(0,g.Z)(r)}}},handleCopy:function(){this.DRR_clickReport({actionType:f.At.CLICK_COPY,docInfo:this.DRR_generateDocReportId({docId:this.reportId,docType:"copy_report"})});var t=(0,s.k)(this.markdownText,!0,!0).replace(/<hr>/g,"").replace(/<br>/g,"\n");t&&i.Zr.copyText(t,!0).then(function(){i.Gc.$emit(i.U3.showToast,{action:c.g.pure,text:"已复制全文",top:"0px"})})},getPdfBase64Image:function(t){return k(function(){var e,n,o;return A(this,function(r){switch(r.label){case 0:if(this.pdfBase64Image||!this.markdownText)return[2,this.pdfBase64Image];return t&&i.Gc.$emit(i.U3.showToast,{action:c.g.loading,text:"加载中",top:"0px"}),e=(0,_.F)("wxg_wxai_search-eb4e495e926ebeae-".concat(Date.now())),n=JSON.stringify({Label:"1",ContentProducer:"001191440101327598294H1M8MR",ProduceID:"search_".concat(this.drSearchIdForServer||Date.now()),ContentPropagator:"001191440101327598294H2M8MR",PropagateID:"search_".concat(this.drSearchIdForReport||this.drSearchIdForServer||Date.now()),ReservedCode1:e,ReservedCode2:e}),[4,(0,h.l)(this.markdownText,{aigc:n,urlRefs:this.refUrls})];case 1:return o=r.sent(),this.pdfBase64Image=o,[2,o]}})}).apply(this)},handleOpenPdf:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return k(function(){var e,n;return A(this,function(o){switch(o.label){case 0:return t&&this.DRR_clickReport({actionType:f.At.DOWNLOAD,docInfo:this.DRR_generateDocReportId({docId:this.reportId,docType:"download"})}),[4,this.getPdfBase64Image(!0)];case 1:if(!(e=o.sent()))return i.Gc.$emit(i.U3.showToast,{action:c.g.pure,text:"打开失败",top:"0px"}),[2];return n=(0,d.A)(this.pdfTitle,"pdf"),i.hi.openLiteApp({appId:f.tv.OUT_LINK,page:"pages/pdf-save/entry",isTransparent:!0,minVersion:"0.2.6",query:{path:n},preInjectData:{base64Image:e.replace(/^data:application\/pdf;filename=generated\.pdf;base64,/,"")}}),i.Gc.$emit(i.U3.hideToast),[2]}})}).apply(this)},onShowMore:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).bypassReportParams;this.DR_openShareSheet({title:(0,s.k)(this.markdownTitle),desc:(0,s.k)(this.markdownContent).replace(/<hr>/g,"").replace(/<br>/g,"\n"),shareType:u.HE.Report,extraItemList:[{icon:"save",text:"下载PDF",colour:!1,type:"pdf",callbackMethod:"handleOpenPdf",reportId:"right_conner:open_pdf",actionType:f.At.DOWNLOAD}],bypassReportParams:e,disableSaveImage:!0}),setTimeout(function(){(0,p.R0)("handleOpenPdf","").then(function(e){console.error("handleOpenPdf res",e),(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handleOpenPdf"&&setTimeout(function(){t.handleOpenPdf(!1)},300)})},400)}}}},198597:function(t,e,n){var i=n(798509),o=n(392935),r=n(947808),a=n(528430),s=n(612482),c=n(693914),l=n(696427),u=n(807270),d=n(468845),h=n(970778),f=n(116746),p=n(275834),m=n(735055),v=n(770719),y=n(684266),g=n(736312),b=n(984928),_=n(699691),S=n(152750),I=n(710428),w=n(728223),x=n(630658),T=n(587330),C=n(593434),k=n(144007);function A(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function R(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){A(r,i,o,a,s,"next",t)}function s(t){A(r,i,o,a,s,"throw",t)}a(void 0)})}}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function P(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function E(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var B=new f.J({Plan:0,Step:1,Report:2});e.Z={name:"DeepResearch",components:{ResearchPlan:c.Z,ResearchStep:l.Z,ResearchReport:u.Z,DeepResearchTabContainer:s.Z,DrHeader:h.Z,SecurityTips:x.Z},mixins:[i.uW,i.jB,o.Z,p.Z,S.kP,C.Z],inject:{getSafeContentHeight:{default:function(){return function(){return 0}}}},provide:function(){return{getInnerSafeContentHeight:this.getInnerSafeContentHeight}},props:{d:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},data:function(){return{TabType:B,polling:this.newPolling(),isFinish:!1,cgiResponse:null,isPlanFinish:!1,isStepFinish:!1,isReportFinish:!1,headerHeight:0,isSecurityBlockedStyle:!1,reportCache:{}}},computed:{tabInfoList:function(){var t,e,n,i,o,r=this;return this.isSecurityBlockedStyle?[]:[{id:B.Plan,title:"研究规划",stepId:d.$h.Plan,status:r.isPlanTerminate?d.HE.Terminate:r.isPlanFinish?d.HE.Finish:d.HE.Running,style:{bottomLine:!0},reportData:{canReport:!!(null===(e=this.cgiPlanData)||void 0===e?void 0:null===(t=e.content)||void 0===t?void 0:t.trim()),taskId:d.$h.Plan,docId:d.$h.Plan}},{id:B.Step,title:"任务执行",stepId:d.$h.Step,style:{topLine:!0,bottomLine:!0},status:!r.cgiStepData||r.isPlanTerminate?d.HE.NotStart:r.cgiStepData.status===v.qb.Terminate?d.HE.Terminate:r.isStepFinish?d.HE.Finish:r.isFinish?d.HE.NotStart:d.HE.Running,reportData:{canReport:!!this.cgiStepData,taskId:d.$h.Step,docId:d.$h.Step}},{id:B.Report,title:"报告撰写",stepId:d.$h.Report,style:{topLine:!0,bottomHeight:"calc(32px + 1.5rem)"},status:r.cgiReportData?r.isReportFinish?d.HE.Finish:d.HE.Running:d.HE.NotStart,reportData:{canReport:!!(null===(n=this.cgiReportData)||void 0===n?void 0:n.id),taskId:null===(i=this.cgiReportData)||void 0===i?void 0:i.id,docId:null===(o=this.cgiReportData)||void 0===o?void 0:o.id}}]},isPlanTerminate:function(){var t;return(null===(t=this.cgiPlanData)||void 0===t?void 0:t.status)===v.qb.Terminate||!this.cgiPlanData&&this.isFinish},cgiPlanData:function(){var t,e=null===(t=this.cgiResponse)||void 0===t?void 0:t.researchPlan,n=null==e?void 0:e.content;if(!!n&&!!n.trim()||!!(0,_.M)(null==e?void 0:e.status))return e},cgiStepData:function(){var t,e;if(!!this.isPlanFinish&&(!this.isFinish||!!(null===(t=this.cgiResponse)||void 0===t?void 0:t.researchStep)))return(null===(e=this.cgiResponse)||void 0===e?void 0:e.researchStep)||{}},cgiReportData:function(){if(!this.isStepFinish||(null===(t=this.cgiStepData)||void 0===t?void 0:t.status)===v.qb.Terminate)return;var t,e,n=null===(e=this.cgiResponse)||void 0===e?void 0:e.researchReport;if((null==n?void 0:n.status)!==v.qb.Finish&&!this.isFinish||!!(null==n?void 0:n.content))return n||{}},canShowStopAnswer:function(){return i.xB.curRouteName,b.kO.RESULT,!1},stopText:function(){var t;return(null===(t=this.cgiResponse)||void 0===t?void 0:t.wording)||"停止回答"},securityWording:function(){var t;return(null===(t=this.cgiResponse)||void 0===t?void 0:t.wording)||""}},watch:{itemInfo:{handler:function(t){t.cgiParams&&t.syncRspType!==v.CF.Finish?this.startPolling(t.cgiParams,t.data):t.data&&this.handleResponse(t.data,!0)},immediate:!0}},mounted:function(){i.Gc.$on(i.U3.ON_CHATBOT_SHOW_MORE,this.onShowMore),i.Gc.$on(i.U3.TOP_QA_TERMINATE,this.onStopAnswer),this.$store.commit({type:"chatbot/updateIsPerformActionEnabled",enabled:1})},beforeDestroy:function(){var t;i.Gc.$off(i.U3.ON_CHATBOT_SHOW_MORE,this.onShowMore),i.Gc.$off(i.U3.TOP_QA_TERMINATE,this.onStopAnswer),null===(t=this.polling)||void 0===t||t.finish()},methods:{getInnerSafeContentHeight:function(t){var e=0;0===t&&(e+=this.headerHeight+16);var n=i.Zr.getSimilarFontHeight(17,1.6)+2*d.oN;return(this.getSafeContentHeight()||.8*window.innerHeight)-this.tabInfoList.length*n-e},scrollToTab:function(t){return R(function(){return E(this,function(e){switch(e.label){case 0:if(!this.$refs.tabContainer)return[2,!1];return[4,this.$refs.tabContainer.scrollToTab(t)];case 1:return e.sent(),[2,!0]}})}).apply(this)},onPlanFinish:function(t){if(!this.isPlanFinish)this.DR_realTimeReport({actionType:y.o.DR_STEP_FINISH,extInfo:{tabType:B.Plan,options:t}}),this.isPlanFinish=!0,this.scrollToTabAuto(t)},onStepFinish:function(t){if(this.isStepFinish)return;if(this.DR_realTimeReport({actionType:y.o.DR_STEP_FINISH,extInfo:{tabType:B.Step,options:t}}),this.isStepFinish=!0,this.scrollToTabAuto(t),!this.isFinish)i.Gc.$emit(i.U3.TOP_QA_FINISH,{stopBtnStyle:I.ew.DeepResearchRunningButCantStop,onlyCancelStopBtn:!0})},onReportFinish:function(t){if(!this.isReportFinish)this.DR_realTimeReport({actionType:y.o.DR_STEP_FINISH,extInfo:{tabType:B.Report,options:t}}),this.isReportFinish=!0},getMayBeTabToShow:function(){return this.isReportFinish||this.isStepFinish?B.Report:this.isPlanFinish?B.Step:B.Plan},scrollToTabAuto:function(t){var e=this,n=this.getMayBeTabToShow();console.error("scrollToTabAuto",n),this.DR_realTimeReport({actionType:y.o.DR_SCROLL_TO_TAB,extInfo:{options:t,tabType:n}});var i=function(){e.scrollToTab({tabType:n,needAnimate:null==t?void 0:t.needAnimate})};t.needAnimate?this.$nextTick(function(){i()}):i()},onStopAnswer:function(){return R(function(){var t,e,n,o;return E(this,function(r){switch(r.label){case 0:if(t=this,this.isFinish)return[2];return this.DRR_clickReport({actionType:b.At.STOP_AI_ANSWER},{agentReportId:"",taskReportId:"",stepReportId:t.isPlanFinish?t.isStepFinish?t.isReportFinish?"":d.$h.Report:d.$h.Step:d.$h.Plan}),e=P(O({},this.cgiResponse),{wording:"已停止回答",jobState:v.Zy.UserCanceled}),!this.isPlanFinish&&(e.researchPlan={content:null===(n=this.$refs.researchPlan)||void 0===n?void 0:n.textToShow,status:v.qb.Terminate}),!this.isStepFinish&&(e.researchStep=P(O({},e.researchStep),{status:v.qb.Terminate})),!this.isReportFinish&&(e.researchReport={content:null===(o=this.$refs.researchReport)||void 0===o?void 0:o.textToShow,status:v.qb.Terminate}),this.polling.handleResponse(e),this.polling.finish(),[4,i.hi.getCommonCgiData({cgiName:"StopDeepResearch",data:this.itemInfo.cgiParams})];case 1:return r.sent(),this.reportFinishRead(e),[2]}})}).apply(this)},onShowMore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.bypassReportParams,n=t.disableShareToast;return R(function(){var t,o,r,a,s,c,l;return E(this,function(u){switch(u.label){case 0:return t=this,r=null===(o=this.$refs.researchReport)||void 0===o?void 0:o.getShareDesc(),a=[],s=[],[4,this.isMinimizeTaskEnabled()];case 1:if(!(null==(c=u.sent())?void 0:c.enabled))return[3,3];return 1==c.multiContentSwitch&&s.push("multicontent"),l=a.push,[4,this.isTaskMinimized(k.I3.Star)];case 2:l.apply(a,[u.sent()?"cancelstar":"star"]),u.label=3;case 3:return this.DR_openShareSheet({shareType:m.HE.Page,desc:r?"深度研究：".concat(r):"深度研究",bypassReportParams:e,disableShareToast:n,enableItemList:a,extraItemList:s}),setTimeout(function(){(0,g.R0)("handlePicStore","").then(function(e){console.error("handlePicStore res",e),(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handlePicStore"?i.Gc.$emit(i.U3.ON_CHATBOT_TAKE_SCREENSHOT,!0):(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handleMinimize"&&("multicontent"==e.type?t.addMinimizeTask(k.I3.Float):"star"==e.type?t.addMinimizeTask(k.I3.Star):"cancelstar"==e.type&&t.removeMinimizeTask(k.I3.Star))})},400),[2]}})}).apply(this)},E_getMinimizeTaskCustomData:function(t){return{title:this.d.itemInfo.userQuery,chatbotExtParams:{historyReplayData:{conversationId:this.itemInfo.conversationId,item:{searchId:this.drSearchIdForServer,feature:1,query:this.d.itemInfo.userQuery}}},minimizeTaskExtParams:{query:this.d.itemInfo.userQuery}}},reportFinishRead:function(t){return R(function(){return E(this,function(e){switch(e.label){case 0:return[4,(0,m._i)({searchId:this.drSearchIdForServer,conversationId:this.itemInfo.conversationId,jobState:t.jobState})];case 1:return e.sent(),this.$store.dispatch("chatbot/refreshHistoryData"),[2]}})}).apply(this)},onFinish:function(t){if(!this.isFinish){this.isFinish=!0;var e=t.jobState===v.Zy.Blocked||t.jobState===v.Zy.Intervention;i.Gc.$emit(i.U3.TOP_QA_FINISH,{searchId:this.drSearchIdForReport,stopBtnStyle:e?I.ew.Normal:(0,_.o)(t.jobState)?I.ew.DeepResearchError:I.ew.DeepResearchFinish,stopText:t.wording}),this.reportFinishRead(t),this.DR_realTimeReport({actionType:y.o.DR_FINISH}),e&&(i.Gc.$emit(i.U3.SET_GLOBAL_CAN_SHARE_STATUS,!1),this.isSecurityBlockedStyle=!0)}},newPolling:function(){var t=this;this.polling&&this.polling.finish();var e=this.itemInfo,n=new r.E(e);return n.on("onData",function(e,n){t.handleResponse(e,n)}),n.on("onFinish",function(e){t.onFinish(e)}),n.on("onSSEClose",function(){t.DR_realTimeReport({actionType:y.o.DR_SSE_CLOSE})}),n.on("onSSEOpen",function(){t.DR_realTimeReport({actionType:y.o.DR_SSE_OPEN})}),n.on("onError",function(e){t.DR_realTimeReport({actionType:y.o.DR_SSE_ERROR,extInfo:{errMsg:e}})}),n.on("onSwitchToSinglePolling",function(){t.DR_realTimeReport({actionType:y.o.DR_SWITCH_TO_SINGLE_POLLING})}),n.on("onNetworkError",function(){i.Gc.$emit(i.U3.showToast,{action:w.g.pure,text:"当前网络不稳定，请稍后再试"}),i.hi.log({key:"[dr]",msg:" network error, sid=".concat(t.drSearchIdForReport,", oriSid=").concat(t.drSearchIdForServer)})}),n},startPolling:function(t,e){i.Gc.$emit(i.U3.TOP_QA_START,{searchId:this.drSearchIdForReport,stopBtnStyle:I.ew.DeepResearch}),this.notifyStore(),this.polling=this.newPolling(),e&&this.polling.handleResponse(e,!0),this.polling.start(t,this.itemInfo.useSse),this.DR_realTimeReport({actionType:y.o.DR_START})},notifyStore:function(){var t=this.d.itemInfo.userQuery,e=this.drSearchIdForServer,n=this.d.itemInfo.conversationId,o=i.xB.crossExtReqParams||[],r={historyReplayData:{conversationId:n,parentSearchID:i.xB.parentSearchID,item:{searchId:e}}};(0,g.Jz)({appId:b.tv.STORE,actionName:"searchToStoreEvents/prepareDeepResearchTask",data:{searchId:e,scene:i.xB.scene,type:i.xB.type,isHomePage:1==i.xB.isHomePage,query:t,extParams:JSON.stringify({sessionId:i.xB.sessionId,parentSearchID:i.xB.parentSearchID,chatbot:i.xB.chatbot,chatbotSecond:i.xB.chatbot,chatbotExtParams:r,crossExtReqParams:o,minimizeTaskExtParams:{query:t},hideSearchBar:!0,hideNavBar:!0}),navBarParams:JSON.stringify({hideSearchBar:!0,hideNavBar:!0,title:"AI搜索"})}})},handleResponse:function(t,e){var n,i,o,r=this,a=O({},t);e&&["researchPlan","researchReport","researchStep"].forEach(function(e){t[e]&&(a[e]=P(O({},t[e]),{isCache:!0}))}),t.jobState&&t.jobState>v.Zy.Running&&this.onFinish(t),(null===(n=t.researchPlan)||void 0===n?void 0:n.status)===v.qb.Finish&&e&&this.onPlanFinish({needAnimate:!1}),(null===(i=t.researchStep)||void 0===i?void 0:i.status)===v.qb.Finish&&e&&this.onStepFinish({needAnimate:!1}),(null===(o=t.researchReport)||void 0===o?void 0:o.status)===v.qb.Finish&&e&&this.onReportFinish({needAnimate:!1}),!this.$refs.tabContainer&&e&&this.$nextTick(function(){r.scrollToTabAuto({needAnimate:!1})}),this.cgiResponse=a,this.reportResp(a)},reportResp:function(t){var e,n,i,o,r,a,s,c,l,u,d,h,f,p,m,g,b,_,S,I,w,x,C,k,A,R,O,P,E,B=this;this.DR_realTimeReport({aggregation:!0,actionType:y.o.DR_GET_RESULT,extInfo:[Date.now(),null!==(I=t.jobState)&&void 0!==I?I:0,null!==(w=null===(e=t.researchPlan)||void 0===e?void 0:e.status)&&void 0!==w?w:0,null!==(x=null===(i=t.researchPlan)||void 0===i?void 0:null===(n=i.content)||void 0===n?void 0:n.length)&&void 0!==x?x:0,null!==(C=null===(o=t.researchReport)||void 0===o?void 0:o.status)&&void 0!==C?C:0,null!==(k=null===(a=t.researchReport)||void 0===a?void 0:null===(r=a.content)||void 0===r?void 0:r.length)&&void 0!==k?k:0,null!==(A=null===(s=t.researchStep)||void 0===s?void 0:s.status)&&void 0!==A?A:0,null!==(R=null===(l=t.researchReport)||void 0===l?void 0:null===(c=l.refUrls)||void 0===c?void 0:c.length)&&void 0!==R?R:0,null!==(O=null===(d=t.researchStep)||void 0===d?void 0:null===(u=d.taskInfos)||void 0===u?void 0:u.length)&&void 0!==O?O:0,null!==(P=null===(f=t.researchStep)||void 0===f?void 0:null===(h=f.showTitle)||void 0===h?void 0:h.length)&&void 0!==P?P:0,null!==(E=null===(m=t.researchStep)||void 0===m?void 0:null===(p=m.taskCnt)||void 0===p?void 0:p.length)&&void 0!==E?E:0].join("_")});var Z=function(t){(0,T.ZP)({searchId:B.drSearchIdForReport,requestId:B.d.vueRid,stepName:t,stepType:T.ig.End,agentBusinessId:T.kD.DeepResearch})};(null===(g=t.researchPlan)||void 0===g?void 0:g.content)&&!this.reportCache.planFirstToken&&(this.reportCache.planFirstToken=!0,Z(T.$T.SearchStartToFirstPlanToken)),(null===(b=t.researchReport)||void 0===b?void 0:b.content)&&!this.reportCache.reportFirstToken&&(this.reportCache.reportFirstToken=!0,Z(T.$T.SearchStartToFirstReportToken)),(null===(S=t.researchStep)||void 0===S?void 0:null===(_=S.taskInfos)||void 0===_?void 0:_.length)&&!this.reportCache.stepFirstToken&&(this.reportCache.stepFirstToken=!0,Z(T.$T.SearchStartToFirstStepToken)),t.jobState&&t.jobState>v.Zy.Running&&!this.reportCache.finish&&(this.reportCache.finish=!0,Z(T.$T.SearchStartToFinish))},onAutoScrollToBottom:function(t,e){var n;if((t.id!==B.Plan||!this.isPlanFinish)&&(t.id!==B.Step||!this.isStepFinish)&&(t.id!==B.Report||!this.isReportFinish))null===(n=this.$refs.tabContainer)||void 0===n||n.scrollToBottom(e)}}}},753438:function(t,e,n){var i=n(798509);e.Z={inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}}},props:{isFinish:{type:Boolean,default:!1},query:{type:String,default:""}},data:function(){return{observer:null}},mounted:function(){var t=this;this.observer=new IntersectionObserver(function(e){var n=e[0];if(n){var o=void 0!==n.isIntersecting?n.isIntersecting:n.intersectionRatio>0;i.Gc.$emit(i.U3.CHATBOT_SHOW_NAV_BAR_TITLE,o?"":t.query)}},{threshold:[0,.1,.9,1],rootMargin:"-".concat(this.getCustomNavBarHeight()+1,"px 0px 0px 0px")}),this.$refs.queryRef&&this.observer.observe(this.$refs.queryRef)},beforeDestroy:function(){var t;null===(t=this.observer)||void 0===t||t.disconnect(),this.observer=null},methods:{}}},520650:function(t,e,n){var i=n(798509),o=n(832564),r=n(338561),a=n(691409),s=n(468845),c=n(684266),l=n(744314);function u(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}e.Z={name:"DeepResearchTabContainer",components:{DeepResearchTabItem:o.Z,TabHeaderStickyContainer:r.Z},mixins:[i.uW,i.jB,l.Z],inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}},getCustomBottomHeight:{default:function(){return function(){return 0}}},DR_realTimeReport:{default:function(){return function(){}}}},provide:function(){return{scrollToTab:this.scrollToTab}},props:{tabInfoList:{type:Array,default:function(){return[]}}},computed:{enableSticky:function(){var t;return!!(null===(t=this.tabInfoList)||void 0===t?void 0:t.length)}},methods:{handleResize:function(){i.Gc.$emit(i.U3.DR_CONTENT_RESIZE)},scrollToTab:function(t){var e,n=t.tabType,o=t.needAnimate;return(e=function(){var t,e,r,l,u,d;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(h){switch(h.label){case 0:if(!(e=this.tabInfoList.find(function(t){return t.id===n})))return[2];if(r=null===(t=this.$refs.tabItem)||void 0===t?void 0:t.findIndex(function(t){return t.tabInfo.id===n}),l=this.$refs.tabItem[r].$el,-1===r||!l)return i.hi.log({key:"[dr]",msg:"DR_SCROLL_TO_TAB_ANIMATE fail"}),[2];if(e.status!==s.HE.Running)return[3,2];return this.DR_realTimeReport({actionType:c.o.DR_SCROLL_TO_RUNNING_TAB,extInfo:{tabType:n,needAnimate:o}}),(0,a.Bo)(o?300:0),[4,new Promise(function(t){return setTimeout(t,o?350:0)})];case 1:return h.sent(),[2];case 2:if(u=l.getBoundingClientRect(),d=window.scrollY+u.top-this.getCustomNavBarHeight()-(i.Zr.getSimilarFontHeight(17,1.6)+16)*r,!o)return[3,4];return(0,a.G$)(d),[4,new Promise(function(t){return setTimeout(t,350)})];case 3:return h.sent(),console.log("标签滚动完成"),[3,5];case 4:window.scrollTo({top:d,behavior:"instant"}),h.label=5;case 5:return this.DR_realTimeReport({actionType:c.o.DR_SCROLL_TO_END_TAB,extInfo:{tabType:n,needAnimate:o,targetY:d,top:u.top,windowHeight:window.innerHeight,y:window.scrollY,height:u.height}}),[2]}})},function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function a(t){u(r,i,o,a,s,"next",t)}function s(t){u(r,i,o,a,s,"throw",t)}a(void 0)})}).apply(this)},scrollToBottom:function(t){this.Scroll_scrollToBottom(t)},getStickyInfo:function(t){var e=this.tabInfoList.length,n=i.Zr.getSimilarFontHeight(17,1.6)+2*s.oN;return{top:t*n+this.getCustomNavBarHeight(),bottom:(e-t-1)*n+this.getCustomBottomHeight(),index:t}}}}},34962:function(t,e,n){var i=n(798509),o=n(468845),r=n(62513),a=n(152750);e.Z={name:"DeepResearchTabItem",components:{TabHeader:r.Z},mixins:[i.uW,i.jB,a.fE],props:{stickyInfo:{type:Object,default:function(){return{}}},tabInfo:{type:Object,default:function(){}}},computed:{DRR_stepReportId:function(){return this.DRR_generateStepReportId({stepId:this.tabInfo.stepId})},isLoading:function(){return this.tabInfo.status===o.HE.Running},isNotStart:function(){return this.tabInfo.status===o.HE.NotStart}}}},583545:function(t,e,n){var i=n(798509),o=n(342622),r=n(91942),a=n(699691);e.Z={name:"DeepResearchPlan",components:{MarkdownContent:r.Z},mixins:[i.uW,i.jB],inject:{getInnerSafeContentHeight:{default:function(){return function(){return 0}}}},props:{item:{type:Object}},data:function(){var t=this;return{text:"",isAnswerFinish:!1,isShortStyle:(0,a.M)(this.item.status),typewriter:new o.r({minDuration:10,maxDuration:30,range:50,tag:"answer",needTypeTimeRectify:!0},(function(e,n,i,o){t.text=e;var r=n||t.isAnswerFinish;!t.isAnswerFinish&&r&&(o.isCache?t.$emit("finish",{needAnimate:!1}):setTimeout(function(){t.$emit("finish",{needAnimate:!0})},3e3)),t.isAnswerFinish=r}).bind(this))}},computed:{markdownText:function(){return this.item.content},resStatus:function(){return this.item.status},textToShow:function(){return this.text}},watch:{markdownText:{handler:function(t){this.handleMarkdownText(t)},immediate:!0},resStatus:{handler:function(){this.handleMarkdownText(this.markdownText)}}},methods:{handleResize:function(){this.$emit("scroll-to-bottom")},handleMarkdownText:function(t){this.typewriter.handleNewDescAnimate({newText:t,oldText:this.text,isCache:this.item.isCache,answerFinish:(0,a.M)(this.item.status),needDefaultContent:!1})}}}},361253:function(t,e,n){var i=n(798509),o=n(342622),r=n(912139),a=n(684741),s=n(984928),c=n(445718),l=n(152750),u=n(297906),d=n(728223);function h(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function p(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={name:"DeepResearchReport",components:{UiIconLoading:r.Z,ReportHeader:a.Z,DrReportInnerScroll:u.Z},mixins:[i.uW,i.jB,i.Sx,l.Ao,l.lq,l.kP],inject:{getInnerSafeContentHeight:{default:function(){return function(){return 0}}},getCustomBottomHeight:{default:function(){return function(){return 0}}},drSearchIdForReport:{default:""},drSearchIdForServer:{default:""}},props:{item:{type:Object},isFinish:{type:Boolean,default:!1}},data:function(){var t=this;return{text:"",isAnswerFinish:!1,contentHeight:0,cardHeight:0,headerHeight:0,typewriter:new o.r({minDuration:10,maxDuration:30,range:50,tag:"answer",needTypeTimeRectify:!0},(function(e,n){t.text=e,t.isAnswerFinish=n||t.isAnswerFinish,t.isAnswerFinish&&t.$emit("finish")}).bind(this))}},computed:{DRR_agentReportId:function(){return""},DRR_taskReportId:function(){return this.DRR_generateTaskReportId({taskId:this.item.id})},style:function(){return{height:"calc(".concat(this.getInnerSafeContentHeight(2),"px - 32px - 1.5rem)")}},markdownText:function(){return this.item.content},textToShow:function(){return this.text}},watch:{markdownText:{handler:function(t){this.handleMarkdownText(t)},immediate:!0},isFinish:{handler:function(){this.handleMarkdownText(this.markdownText)}}},mounted:function(){i.Gc.$emit(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,!0),setTimeout(function(){i.Gc.$emit(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,!0)})},beforeDestroy:function(){i.Gc.$emit(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,!1)},methods:{handleMarkdownText:function(t){this.typewriter.handleNewDescAnimate({newText:t,oldText:this.text,isCache:this.item.isCache||this.isFinish,answerFinish:this.isFinish,needDefaultContent:!1})},getShareDesc:function(){return(0,c.k)(this.text).replace(/<hr>/g,"").replace(/<br>/g,"\n")},onClickReport:function(){var t;return(t=function(){var t;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(e){switch(e.label){case 0:return[4,i.su.set({key:s.wT.CHATBOT_SNAPSHOT_PREFETCH_DATA,value:{shareKey:this.drSearchIdForServer,gData:{data:[p(f({},this.data),{itemInfo:p(f({},this.data.itemInfo),{data:p(f({},this.data.itemInfo.data),{researchReport:this.item})}),type:139})],searchID:this.drSearchIdForServer}}})];case 1:return e.sent(),this.M_serviceSearchGo({jumpType:s.sn.AI_SEARCH,query:this.data.itemInfo.userQuery,chatbotExtParams:{useSnapshotPrefetchData:2,searchId:this.drSearchIdForServer,noHistoryIcon:!0,useCustomNavBarTitle:!0,GetDeepResearchReport:{taskKeyDetail:null===(t=this.data.itemInfo.cgiParams)||void 0===t?void 0:t.taskKeyDetail}},parentSearchID:this.M_composeParentSid({t:s.X$.MMSERACH_TYPE_DR_JUMP,did:this.drSearchIdForServer,s:this.drSearchIdForReport,rid:this.data.vueRid})}),[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){h(r,i,o,a,s,"next",t)}function s(t){h(r,i,o,a,s,"throw",t)}a(void 0)})}).apply(this)},onClickReportPanel:function(){if(!this.isAnswerFinish){i.Gc.$emit(i.U3.showToast,{action:d.g.pure,text:"报告撰写中，待完成后查看",top:"0px"});return}this.DRR_clickReport({actionType:s.At.AI_SEARCH_V2,docInfo:this.DRR_generateDocReportId({docId:this.item.id,docType:"full_report"})}),this.onClickReport()}}}},263095:function(t,e,n){var i,o=n(798509),r=n(91942),a=n(285878),s=n(443277),c=n(342622),l=n(699691),u=n(770719);function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=(d(i={},0,a.Z),d(i,1,s.Z),i);e.Z={name:"DeepResearchStep",components:{MarkdownContent:r.Z,normalTask:a.Z},mixins:[o.uW,o.jB],inject:{getInnerSafeContentHeight:{default:function(){return function(){return 0}}}},props:{item:{type:Object}},data:function(){var t=this;return{TaskComponents:h,showTaskIdx:-1,showTitle:"",isEndStyle:(0,l.M)(this.item.status),typewriter:new c.r({minDuration:10,maxDuration:20,range:10,tag:"answer",needTypeTimeRectify:!0},function(e){t.showTitle="调研中: ".concat(e)}),resizeObserver:null,hasEmitFinish:!1}},computed:{taskInfos:function(){var t,e;return null!==(e=null===(t=this.item)||void 0===t?void 0:t.taskInfos)&&void 0!==e?e:[]},animationWrapHeight:function(){return this.getInnerSafeContentHeight(1)},style:function(){if(this.isEndStyle)return{};var t=this.getInnerSafeContentHeight(1);return 0===t?{}:{minHeight:"".concat(t,"px")}},showTaskList:function(){var t,e;return null!==(e=null===(t=this.taskInfos)||void 0===t?void 0:t.slice(0,this.showTaskIdx+1))&&void 0!==e?e:[]}},watch:{"item.taskInfos.0":{handler:function(t){t&&-1===this.showTaskIdx&&(this.showTaskIdx=0)},immediate:!0},"item.status":{handler:function(){this.checkTotalFinish()},immediate:!0}},mounted:function(){},methods:{onTaskFinish:function(t){t+1>this.showTaskIdx&&(this.showTaskIdx=t+1),this.checkTotalFinish()},checkTotalFinish:function(){if(!this.hasEmitFinish&&!!(0,l.M)(this.item.status)){if(this.item.status===u.qb.Terminate){this.isEndStyle=!0;return}(this.showTaskIdx>=this.taskInfos.length||!this.taskInfos.length)&&(this.hasEmitFinish=!0,this.$emit("finish",{needAnimate:!this.item.isCache})),this.isEndStyle=!0}}}}},562434:function(t,e,n){var i=n(798509),o=n(984928),r=n(462474),a=n(448188),s=n(578248),c=n(142862),l=n(20881),u=n(342622),d=n(760934),h=n(445718),f=n(639514),p=n(684266),m=n(176068),v=n(991740),y=n(612303),g=n(748750),b=n(271323),_=n(521125),S=n(48807),I=n(365551),w=n(984537),x=n(665332),T=n(420629),C=n(16726);function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function A(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function O(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(t,e)||B(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||B(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(t,e)}}e.Z={components:{textContent:v.Z,TextHeightAnimate:f.Z},mixins:[l.ZP,y.Z,b.Z],inject:{getCustomNavBarHeight:{default:function(){return 0}},topQARealTimeReport:{default:function(){return function(){}}},topQASearchIdForReport:{default:""},topQASearchIdForServer:{default:""},topQAInitHeight:{default:0},topQAHideSearchLinkMagnifying:{default:!1},mixedBoxChatbotCtx:{default:function(){return null}},topQANewMoreTagStyle:{default:!1}},provide:function(){return{isTop10704Exp:this.isTop10704Exp,topQARelationQuestionPollingCollection:this.relationQuestionPollingCollection}},props:{isCalculateHeightMode:{type:Boolean,default:!1}},data:function(){var t,e,n=this,a=function(t,e,i,r){"start"===t?(0,c.Z)(n.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_TYPING_FREEZE_START,reportId:n.itemInfo.reportId,extInfo:JSON.stringify({type:r,length:e})}),{reportLogId:31863}):"end"===t&&(i>0&&(0,c.Z)(n.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_TYPING_FREEZE_END,reportId:n.itemInfo.reportId,extInfo:JSON.stringify({time:i,type:r,length:e})}),{reportLogId:31863}),n.freezeTime+=1,w.Z.topQABoxData.search_id===n.topQASearchIdForServer&&(w.Z.topQABoxData=O(R({},w.Z.topQABoxData),{lag_cnt:(w.Z.topQABoxData.lag_cnt||0)+1})))},l=this;var d=(e=(t=function(t,e,n,o){var a,c,u,d,h;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(n){switch(n.label){case 0:if((null==t?void 0:t.trim())&&!(null===(a=l.text)||void 0===a?void 0:a.trim())&&!l.hasVibrateWhenStart&&!(l.isSyncCache&&o.isCache)&&!e&&l.topQANewMoreTagStyle){l.hasVibrateWhenStart=!0;(function(t){var e=0,n=function(){s.ZP.vibrateShort({style:"light"}),(e+=1)<t&&setTimeout(n,150)};n()})(4)}if(l.text=t,l.text&&!l.hasSetShowCompleteThink&&(l.needToAutoFoldThink&&(l.showCompleteThink=!1),l.hasSetShowCompleteThink=!0),!(e&&l.isBigImg)||!(u=null===(c=(l.cgiTableHtml||"").match(/<img src="(.*?)"><\/img>/))||void 0===c?void 0:c[1]))return[3,2];return[4,i.Zr.preloadImages([u])];case 1:(d=P.apply(void 0,[n.sent(),1])[0])&&d.width&&d.height&&(h=d.width/d.height,l.cgiTableHtml=l.cgiTableHtml.replace(/<img src=".*?"><\/img>/,'<img src="'.concat(u,'" style="width: 100%; height: auto; aspect-ratio: ').concat(h,';">'))),n.label=2;case 2:return l.hasAnimateFinish=!!e,l.hasAnimateFinish&&(l.topQARealTimeReport({actionType:p.o.TOP_QA_ANSWER_TYPING_FINISH}),l.emitEventOnce({event:r.U.TOP_QA_TYPING_END,data:{content:"answer"},keySuffix:"answer"}),l.isFinish?l.emitFinish():!l.animateFinishTimer&&(l.animateFinishTimer=setTimeout(function(){l.isAnimateFinishTimeout=!0},2e3)),l.freezeTime>0&&(w.Z.topQABoxData.search_id===l.topQASearchIdForServer&&(w.Z.topQABoxData=O(R({},w.Z.topQABoxData),{lag_cnt:0})),l.doReportRsp({lag_cnt:l.freezeTime},l.initResponse||{}),l.freezeTime=0)),e&&l.$emit("answer-finish"),!l.hasReportFirstTokenRender&&t&&l.receiveTimestamp&&(l.hasReportFirstTokenRender=!0,l.$nextTick(function(){(0,_.ZP)({requestId:l.M_getCommonReportInfo().reportOption.requestId,searchId:l.topQASearchIdForReport,stepName:_.Gg.GetFirstTokenToFirstTokenExpose,stepType:_.t9.End})})),[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){A(r,i,o,a,s,"next",t)}function s(t){A(r,i,o,a,s,"throw",t)}a(void 0)})}),function(t,n,i,o){return e.apply(this,arguments)});return{dispose:null,text:"",cgiText:"",cgiTextNoRemove:"",cgiTextWithNoReveal:"",cgiTableHtml:"",isFinish:!1,answerFinish:!1,hasAnimateFinish:!1,hasThinkAnimateFinish:!1,isAnimateFinishTimeout:!1,animateFinishTimer:null,pollingTimerId:null,timerId:null,cgiSearchJson:null,cgiRelatedQuestionJson:null,cgiRelatedAccountJson:null,cgiRelatedFunctionJson:null,cgiSource:null,canShowRestImmediate:!0,canShowSource:!0,hasClickUnfold:!1,isPageLeave:!1,typewriter:new u.r({minDuration:5,maxDuration:20,tag:"answer",onGetTotalFreezeList:function(t){var e=Array.from(n.think).length,i=n.thinkTypewriter.getFreezeList().map(function(t,e){return[e+1,t.time,t.length]}),o=t.map(function(t,n){return[n+1+i.length,t.time,t.length+e]});(0,x.A)({searchId:n.topQASearchIdForServer,resultKey:n.mainEventCenter.resultKey,numberFormat:[3,5,5],numberList:E(i).concat(E(o)),title:"freezeInfo"})},needTypeTimeRectify:!0},d.bind(this),a.bind(this)),thinkTypewriter:new u.r({minDuration:5,maxDuration:15,tag:"think",needTypeTimeRectify:!0},(function(t,e,i,o){n.think=t,n.hasThinkAnimateFinish=!!e,n.hasThinkAnimateFinish&&(n.emitEventOnce({event:r.U.TOP_QA_TYPING_END,data:{content:"think"},keySuffix:"think"}),n.emitEventOnce({event:r.U.TOP_QA_TYPING_START,data:{content:"answer"},keySuffix:"answer"}),n.typewriter.handleNewDescAnimate({newText:n.cgiText,oldText:n.text,isCache:n.isTypingInCache(o),answerFinish:n.answerFinish,needDefaultContent:!1}))}).bind(this),a.bind(this)),threadChecker:new I.l({onStuck:(function(t){n.topQARealTimeReport({actionType:p.o.THREAD_STUCK,extInfo:{duration:t}})}).bind(this)}),relationQuestionPollingCollection:{},think:"",cgiThink:"",showCompleteThink:!0,hasSetShowCompleteThink:!1,canShowThinkBtnMask:!0,isBusy:!1,canShowAnswer:!0,busyWording:"暂时无法提供相关内容，请稍后再试。",hasEmitEventMap:{},boxesJson:{},statusFlag:void 0,hasTerminate:!1,cardType:0,hasShowReferenceRest:!1,allowOnlineReAnswer:!1,cgiHighlightInfoList:[],highlightInfoList:[],freezeTime:0,disableSearchJson:!1,hasVibrateWhenStart:!1,hasReportFirstTokenRender:!1,reportRspCache:{}}},computed:O(R({},(0,T.rn)({receiveTimestamp:function(t){if(null===(e=this.data.vueChatbotInfo)||void 0===e?void 0:e.receiveTimestamp)return null===(n=this.data.vueChatbotInfo)||void 0===n?void 0:n.receiveTimestamp;var e,n,i=t.result.searchEndTimeInfo;return i.searchId===this.topQASearchIdForReport?i.endTimestamp:0}})),{subItemsWording:function(){var t,e,n,i;return(null===(e=this.cgiRelatedFunctionJson)||void 0===e?void 0:null===(t=e.items)||void 0===t?void 0:t.length)?"为你推荐相关功能:":(null===(i=this.cgiRelatedAccountJson)||void 0===i?void 0:null===(n=i.items)||void 0===n?void 0:n.length)?"为你推荐相关账号:":""},subItems:function(){if(this.disableSearchJson||this.statusFlag)return[];var t,e,n,i,o=[];return(null===(e=this.cgiRelatedFunctionJson)||void 0===e?void 0:null===(t=e.items)||void 0===t?void 0:t.length)?o.push.apply(o,E(this.cgiRelatedFunctionJson.items)):(null===(i=this.cgiRelatedAccountJson)||void 0===i?void 0:null===(n=i.items)||void 0===n?void 0:n.length)?o.push.apply(o,E(this.cgiRelatedAccountJson.items)):this.cgiRelatedQuestionJson&&!this.mixedBoxChatbotCtx?o.push(this.cgiRelatedQuestionJson):this.cgiSearchJson&&!this.mixedBoxChatbotCtx&&o.push(this.cgiSearchJson),o},hasSnapshotHistory:function(){var t;return!!(null===(t=this.source)||void 0===t?void 0:t.history)},snapshotHistoryReportId:function(){return"".concat(encodeURIComponent("版本记录"),":highlight_text")},isChatbot:function(){return i.xB.chatbot},isQuarkStyle:function(){return i.xB.quarkStyle},isCompactBottom:function(){var t,e,n=!!this.subItems.length,i=!this.bottomSource&&this.allowOnlineReAnswer,o=(null===(t=this.bottomSource)||void 0===t?void 0:t.type)===4,r=(null===(e=this.bottomSource)||void 0===e?void 0:e.type)===5&&!this.hasShowReferenceRest;return!n&&(r||o||i)},needToAutoFoldThink:function(){var t,e,n,o,r,a;return((null===(t=this.source.shareUnderScore)||void 0===t?!void 0:!t.json)||(null===(e=i.Zr.safeJsonParse(this.source.shareUnderScore.json))||void 0===e?void 0:e.startTag)!=="think")&&(!this.source.disableUnfold||!!this.topQAInitHeight||(null===(n=this.source.syncResp)||void 0===n?void 0:n.isCache)&&((null===(r=this.source.syncResp)||void 0===r?void 0:null===(o=r.answer)||void 0===o?void 0:o.answerFinish)||!(null===(a=this.source.syncResp)||void 0===a?void 0:a.continueFlag)))},timeTitle:function(){var t,e,n;return(null===(t=this.source)||void 0===t?void 0:t.bottomTitle)==="AI搜索"?"":null!==(n=null===(e=this.source)||void 0===e?void 0:e.bottomTitle)&&void 0!==n?n:""},isBigImg:function(){return/^<img src=".*?"><\/img>$/.test(this.cgiTableHtml||"")},thinkToShow:function(){return this.canShowAnswer?this.think:""},answerToShow:function(){return this.canShowAnswer?this.textToShow:""},textToShow:function(){var t=(0,S.aJ)(this.text||"",this.highlightInfoList,this.topQAHideSearchLinkMagnifying?{hideMagnifying:!0}:{});if(this.cardType){var e,n=i.Zr.safeJsonParse(null===(e=this.source.shareUnderScore)||void 0===e?void 0:e.json),o=i.xB.chatbotExtParams.greenText||(null==n?void 0:n.greenText),r=null==n?void 0:n.noGreen;return(0,S.eS)(t,o,r)}return t},expandHtml:function(){if(!this.hasAnimateFinish||!this.cgiTableHtml||!this.canShowAnswer)return"";var t=/^<html/.test(this.cgiTableHtml);return'<html class="html-table '.concat(t?"mp-html-table":"web-html-table",'">').concat(this.cgiTableHtml,"</html>")},isShowSubItemsWhenFullExp:function(){var t,e=null===(t=(this.source.experiment||[]).find(function(t){return"mmsearch_topqa_related_questions_exp"===t.key}))||void 0===t?void 0:t.value;return!(e&&2===Number(e))||!!this.cgiRelatedAccountJson||!!this.cgiRelatedFunctionJson},isTop10704Exp:function(){var t,e=null===(t=(this.source.experiment||[]).find(function(t){return"mmsearch_topqa_box_optimize_exp"===t.key}))||void 0===t?void 0:t.value;return e&&Number(e)>0},containerStyle:function(){return this.isTop10704Exp?i.Zr.getResetFontSizeStyle("-TOP-QA"):null},reference:function(){return this.cgiSource||this.source.source},bottomSource:function(){if(!!this.canShowSource&&!!this.canShowAnswer)return this.reference},accomplishInfo:function(){return{isFinish:this.isFinish,text:this.cgiText}},isTextContentFinish:function(){return this.hasClickUnfold||this.isAnimateFinishTimeout?this.hasAnimateFinish:this.isFinish}}),watch:{reference:{handler:function(t){var e=(t||{}).jumpInfo;(null==e?void 0:e.jumpType)===o.sn.H5&&e.jumpUrl&&void 0!==e.itemType&&void 0!==e.openScene&&r.Z.$emit(r.U.PRELOADED_MP_LINKS,[{item_show_type:e.itemType||0,url:e.jumpUrl,mpScene:e.openScene}])},immediate:!0},isBoxVisible:{handler:function(t,e){if(this.canShowRestImmediate=t,void 0!==e&&t!==e&&!this.mixedBoxChatbotCtx){var n,i;t?null===(i=this.$refs.animateRef)||void 0===i||i.resumeHeight():null===(n=this.$refs.animateRef)||void 0===n||n.freezeHeight()}},immediate:!0},subItems:{handler:function(){setTimeout(function(){r.Z.$emit(r.U.exposeAnalysis)},300)}},isBusy:function(t){t&&![m.dA.StatusFlagStopAnswer].includes(this.statusFlag)&&this.$emit("update:can-share",!1)}},created:function(){var t=this,e=function(){t.isPageLeave=!0};r.Z.$on(a.lb.onVisibilityChange,e),this.dispose=function(){r.Z.$off(a.lb.onVisibilityChange,e)},this.handleResponse(this.mainEventCenter.getResponse()||this.initResponse),this.mainEventCenter.on("onData",this.handleResponse)},mounted:function(){var t,e=this;(null===(t=i.xB.chatbotExtParams)||void 0===t?void 0:t.anchor)&&this.cardType===m.Ai.poetry&&this.$nextTick(function(){var t,n,o=document.getElementById(null===(t=i.xB.chatbotExtParams)||void 0===t?void 0:t.anchor),r=null==o?void 0:o.getBoundingClientRect().top,a=(null===(n=e.getCustomNavBarHeight)||void 0===n?void 0:n.call(e))||100;setTimeout(function(){r&&window.scrollTo({top:r+window.scrollY-a})},0)}),this.threadChecker.start()},beforeDestroy:function(){this.mainEventCenter.off("onData",this.handleResponse),Object.values(this.relationQuestionPollingCollection).forEach(function(t){t.destroy()})},destroyed:function(){this.typewriter.destroy(),this.thinkTypewriter.destroy(),this.threadChecker.stop()},methods:{getVisibleAreaInfo:function(){var t,e;return null===(e=this.$refs.textContentRef)||void 0===e?void 0:null===(t=e.getVisibleAreaInfo)||void 0===t?void 0:t.call(e)},onTapOnlineReAnswer:function(){var t=this.M_clickReport({clickContent:"online_reanswer",actionType:o.At.AI_SEARCH,reportId:"online_reanswer:online_reanswer"});this.$emit("regenerate",null,{extReqParams:[{key:"aiSearchExplicitOnlineSearchSwitch",uintValue:1}],clickId:t.clickId})},openHistoryHalfScreen:function(){var t,e=i.Zr.safeJsonParse(null===(t=this.source)||void 0===t?void 0:t.history)||{};!e.searchId&&(e.searchId=this.topQASearchIdForServer||"");var n={pop:{header:{close:!1,title:"版本记录",closeArrow:!0},history:e,type:g.f.popAiSnapshotHistory},reportId:this.snapshotHistoryReportId};this.M_commonJump(n)},onShowReferenceRest:function(){this.hasShowReferenceRest=!0},getIsDescFull:function(){var t,e;return null===(e=this.$refs.textContentRef)||void 0===e?void 0:null===(t=e.getIsDescFull)||void 0===t?void 0:t.call(e)},onShowCompleteThinkChange:function(t){this.showCompleteThink=t},getAllHtml:function(){var t,e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{thinkHtml:null===(e=this.$refs.textContentRef)||void 0===e?void 0:null===(t=e.markdownToHtml)||void 0===t?void 0:t.call(e,this.cgiThink,R({textTag:"think"},o)),answerHtml:null===(i=this.$refs.textContentRef)||void 0===i?void 0:null===(n=i.markdownToHtml)||void 0===n?void 0:n.call(i,this.textToShow,R({textTag:"answer"},o))}},getShareDesc:function(){return(0,h.k)(this.text).replace(/<hr>/g,"").replace(/<br>/g,"\n")},getCopyDesc:function(){return(0,h.k)(this.text,!0,!0).replace(/<hr>/g,"").replace(/<br>/g,"\n")},onSpeedChange:function(t){var e=t.fast,n=t.includeThink;this.typewriter.setTypingSpeedFast(e),n&&this.thinkTypewriter.setTypingSpeedFast(e)},onTapUnfold:function(){this.hasClickUnfold=!0,this.$emit("hide:stopAnswerBtn")},emitEventOnce:function(t){var e=t.event,n=t.data,i=t.keySuffix,o="".concat(e,"-").concat(i||"");if(!this.hasEmitEventMap[o])r.Z.$emit(e,R({docID:this.item.docID,searchId:this.topQASearchIdForReport},void 0===n?{}:n)),this.hasEmitEventMap[o]=!0},emitFinish:function(){var t,e,n,o,a,s,c=this,l=!!i.Zr.safeJsonParse(null===(e=this.source)||void 0===e?void 0:null===(t=e.syncResp)||void 0===t?void 0:t.searchJson)||!!i.Zr.safeJsonParse(null===(o=this.source)||void 0===o?void 0:null===(n=o.syncResp)||void 0===n?void 0:n.relatedQuestionJson)||!!i.Zr.safeJsonParse(null===(s=this.source)||void 0===s?void 0:null===(a=s.syncResp)||void 0===a?void 0:a.relatedAccountJson)||this.cardType;this.subItems.length&&!l?setTimeout(function(){c.emitEventOnce({event:r.U.TOP_QA_FINISH})},300):this.emitEventOnce({event:r.U.TOP_QA_FINISH})},handleResponse:function(t){if(this.hasTerminate&&this.emitFinish(),!!t&&!this.hasTerminate)this.handleTextAnswerResponse(t),this.handleRelationQuestionPolling(),this.reportRsp(t)},handleRelationQuestionPolling:function(){var t,e,n,o,r=this;if(!!this.cgiRelatedQuestionJson&&(null===(e=this.cgiRelatedQuestionJson)||void 0===e?void 0:null===(t=e.itemInfo)||void 0===t?void 0:t.type)===1099)((null===(o=this.cgiRelatedQuestionJson)||void 0===o?void 0:null===(n=o.itemInfo)||void 0===n?void 0:n.questionList)||[]).forEach(function(t){var e,n,o,a,s=i.Zr.safeJsonParse(t.jsonResult);if((!!t.resultKey||!!s)&&!r.relationQuestionPollingCollection[t.resultKey]){(null===(n=r.source.cgi)||void 0===n?void 0:null===(e=n.params)||void 0===e?void 0:e.searchId)||i.xB.searchId;var c=new d.P;s&&c.handleResponse(s),t.resultKey&&c.start({cgiName:(null===(o=r.source.cgi)||void 0===o?void 0:o.name)||"TopQAResult",params:O(R({},(null===(a=r.source.cgi)||void 0===a?void 0:a.params)||{}),{resultKey:t.resultKey,pollResultType:1})}),r.relationQuestionPollingCollection[t.resultKey||t.title]=c}})},handleTextAnswerResponse:function(t){if(!!t){var e,n,o,a,s,c,l,d,h,f=t.statusFlag&&[m.dA.StatusFlagBusy,m.dA.StatusFlagNoResult,m.dA.StatusFlagStopAnswer].includes(t.statusFlag),v=null===(e=t.answer)||void 0===e?void 0:e.think,y=null===(n=t.answer)||void 0===n?void 0:n.text,g=t.statusFlag===m.dA.StatusFlagStopAnswer;this.statusFlag=t.statusFlag,this.cardType=t.cardType||this.cardType,i.FP.isSupportTopQAFingerSearch&&(null===(a=t.answer)||void 0===a?void 0:null===(o=a.highlightPositionInfoList)||void 0===o?void 0:o.length)&&(this.cgiHighlightInfoList=t.answer.highlightPositionInfoList),g&&!i.xB.chatbot&&(this.showCompleteThink=!1,this.hasSetShowCompleteThink=!0),this.boxesJson=t.payload?Object.entries(t.payload||{}).reduce(function(t,e){var n=P(e,2),o=n[0],r=n[1];return t[o]=i.Zr.safeJsonParse(r),t},{}):this.boxesJson,t.statusFlag&&!f&&(this.cgiThink=v),(t.statusFlag||t.timeout)&&i.xB.chatbot&&!g&&(this.isBusy=!0,t.statusFlag&&this.$emit("update:can-show-button-list",!1),this.busyWording=t.tips||y||this.busyWording,(!(null===(d=this.cgiText)||void 0===d?void 0:d.trim())||!f)&&(this.canShowAnswer=!1,this.$emit("update:can-show-button-list",!1))),this.cgiThink=v||this.cgiThink,this.isFinish=this.isFinish||!t.continueFlag,this.answerFinish=this.isFinish||!!(null===(s=t.answer)||void 0===s?void 0:s.answerFinish)||this.answerFinish;var b=y||this.cgiText;this.cgiTextWithNoReveal=b,this.cgiTableHtml=null===(c=t.answer)||void 0===c?void 0:c.tableHtml,this.allowOnlineReAnswer=null===(l=t.answer)||void 0===l?void 0:l.allowOnlineReAnswer;var _=this.answerFinish&&!b&&!this.cgiTableHtml&&!g;this.isFinish&&this.hasAnimateFinish&&this.emitFinish(),this.answerFinish&&i.xB.chatbot&&g?(this.busyWording="已停止回答",this.isBusy=!0):(!(null===(h=y||this.cgiText)||void 0===h?void 0:h.trim())&&this.answerFinish&&i.xB.chatbot&&!g&&(this.isBusy=!0,this.canShowAnswer=!1,this.busyWording=t.tips||this.busyWording,this.$emit("update:can-show-button-list",!1)),this.answerFinish&&(t.timeout||t.errCode||t.noRequestId)&&!g&&this.$emit("update:can-share",!1)),(this.answerFinish&&(t.timeout||t.errCode||t.noRequestId)||t.statusFlag)&&this.$emit("update:can-interact",!1);var I=i.Zr.safeJsonParse(t.searchJson),w=i.Zr.safeJsonParse(t.relatedQuestionJson),x=i.Zr.safeJsonParse(t.relatedAccountJson),T=i.Zr.safeJsonParse(t.relatedFunctionJson);this.preHandleNextItem(I),t.disableSearchJson||_?(this.disableSearchJson=t.disableSearchJson,this.cgiSearchJson=null):this.isAnimateFinishTimeout?!this.subItems.length&&!t.statusFlag&&this.topQARealTimeReport({actionType:p.o.TOP_QA_DISCARD_SUB_ITEMS_BY_TIMEOUT,extInfo:{searchJson:!!I,relatedQuestionJson:!!w,relatedAccountJson:!!x,relatedFunctionJson:!!T}}):(I&&(this.cgiSearchJson=I,this.preloadImagesByItems([I])),w&&(this.cgiRelatedQuestionJson=w,this.cgiRelatedQuestionJson.docID=this.item.docID),x&&(this.cgiRelatedAccountJson=x),T&&(this.cgiRelatedFunctionJson=this.preHandleRelatedFunctionJson(T))),this.canShowSource=!t.disableSource&&!_&&!g,this.cgiSource=i.Zr.safeJsonParse(t.source)||this.cgiSource,this.cgiTextNoRemove=b||(this.answerFinish&&!this.cgiTableHtml?g?"":u.o:""),this.cgiText=this.cgiTextNoRemove.replace(/\[[\d,]+\]\(@ref\)/g,""),this.cgiText.length!==this.cgiTextNoRemove.length?this.highlightInfoList=(0,S.X$)(this.cgiTextNoRemove,this.cgiHighlightInfoList):this.highlightInfoList=this.cgiHighlightInfoList;var C=!this.cgiText&&!this.isFinish&&!this.cgiThink;this.$emit("update:is-loading",C),this.isPageLeave&&(this.isPageLeave=!1,this.typewriter.nextStepBig=!0),!this.hasThinkAnimateFinish&&(this.emitEventOnce({event:r.U.TOP_QA_TYPING_START,data:{content:"think"},keySuffix:"think"}),this.thinkTypewriter.handleNewDescAnimate({newText:this.cgiThink,oldText:this.think,isCache:t.isCache||this.isBusy||this.isCalculateHeightMode,answerFinish:!!this.cgiText||this.answerFinish,needDefaultContent:!1})),(this.hasThinkAnimateFinish||this.cgiText&&!this.cgiThink)&&(this.emitEventOnce({event:r.U.TOP_QA_TYPING_START,data:{content:"answer"},keySuffix:"answer"}),this.typewriter.handleNewDescAnimate({newText:this.cgiText,oldText:this.text,isCache:this.isTypingInCache(t),answerFinish:this.answerFinish,needDefaultContent:!1})),this.preloadImagesInSource(this.cgiSource)}},isTypingInCache:function(t){return!!this.isBusy||!!this.isCalculateHeightMode||(i.xB.chatbot||[o.X$.GUESS_SEARCH_HISTORY,o.X$.TURN_BACK].includes(i.xB.parentType)?t.isCache:!(0,l.vq)(this.source)&&(!this.mixedBoxChatbotCtx||!!this.data.newSearchID)&&t.isCache)},preHandleRelatedFunctionJson:function(t){if(!(null==t?void 0:null===(e=t.items)||void 0===e?void 0:e.length))return t;var e,n,o,r=null===(o=t.items.find(function(t){return!!t.itemInfo.header}))||void 0===o?void 0:null===(n=o.itemInfo)||void 0===n?void 0:n.header;return t.items=t.items.filter(function(t){if(1085===t.itemInfo.type&&t.itemInfo.versionControl){var e=i.Zr.safeJsonParse(t.itemInfo.versionControl);if(e&&999999999===e[i.xB.deviceType])return!1}return!0}),t.items.forEach(function(t,e){t.itemInfo.header=0===e?r:void 0}),t},preloadImagesByItems:function(t){null==t||t.forEach(function(t){var e,n,o;(null==t?void 0:null===(e=t.itemInfo)||void 0===e?void 0:e.type)===65&&(null==t?void 0:null===(o=t.itemInfo)||void 0===o?void 0:null===(n=o.videos)||void 0===n?void 0:n.length)&&i.Zr.preloadImages(t.itemInfo.videos.map(function(t){var e,n;return(null===(e=t.imageData)||void 0===e?void 0:e.url)||t.image||(null===(n=t.videoData)||void 0===n?void 0:n.thumbUrl)||""}).filter(Boolean),!0)})},preloadImagesInSource:function(t){if(!!t){var e=[];t.iconUrl&&e.push(t.iconUrl),t.list&&e.push.apply(e,E(t.list.map(function(t){return t.iconUrl}).filter(Boolean))),i.Zr.preloadImages(e,!0)}},preHandleNextItem:function(t){var e,n;return(null==t?void 0:null===(e=t.itemInfo)||void 0===e?void 0:e.type)===65?O(R({},t),{itemInfo:O(R({},t.itemInfo),{itemWidth:this.isTop10704Exp?100/3.5:void 0,header:(null===(n=t.itemInfo)||void 0===n?void 0:n.header)?O(R({},t.itemInfo.header),{isTopLine:!0}):void 0})}):t},reportRsp:function(t){var e,n,r,a,s,l,u,d,h,f,m,v,y,g,b,_,S,I,w,x,T,k,A,P,E,B,Z,F,L,D,M,H,j,N,q,$,U,Q,G,V,z,W,K,J,Y,X,tt,te,tn,ti,to,tr,ta=this;if(!t){(0,C.U)("reportRsp no rsp!");return}var ts=!t.continueFlag||(null===(n=t.answer)||void 0===n?void 0:n.answerFinish),tc=!!(null===(r=t.answer)||void 0===r?void 0:r.text)||(null===(a=t.answer)||void 0===a?void 0:a.tableHtml)||this.cgiTextWithNoReveal||this.cgiTableHtml;t.statusFlag?(0,c.Z)(this.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_MODEL_REJECT_ANSWER,extInfo:JSON.stringify({rejectype:t.statusFlag}),reportId:this.itemInfo.reportId}),{reportLogId:31863}):ts&&!tc&&(0,c.Z)(this.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_MODEL_REJECT_ANSWER,extInfo:JSON.stringify({rejectype:-1}),reportId:this.itemInfo.reportId}),{reportLogId:31863});var tl=i.Zr.safeJsonParse(t.searchJson),tu=i.Zr.safeJsonParse(t.relatedQuestionJson),td=i.Zr.safeJsonParse(t.source),th=i.Zr.safeJsonParse(t.relatedAccountJson),tf=i.Zr.safeJsonParse(t.relatedFunctionJson);if(!t.vueIsFromSSE){;(0,C.U)("polling res",O(R({},t),{resultKey:null===(A=t.resultKey)||void 0===A?void 0:A.slice(0,10),source:O(R({},td),{list:(e=JSON.stringify(null==td?void 0:td.list),"".concat((null==e?void 0:e.slice(0,50))||"").concat((null==e?void 0:e.length)>50?"...":"")),listLength:"".concat(null!==(q=null==td?void 0:null===(P=td.list)||void 0===P?void 0:P.length)&&void 0!==q?q:0)}),searchId:this.topQASearchIdForReport,searchJson:"".concat((null===(E=t.searchJson)||void 0===E?void 0:E.slice(0,50))||"").concat((null===(B=t.searchJson)||void 0===B?void 0:B.length)>50?"...":""),relatedQuestionJson:"".concat((null===(Z=t.relatedQuestionJson)||void 0===Z?void 0:Z.slice(0,50))||"").concat((null===(F=t.relatedQuestionJson)||void 0===F?void 0:F.length)>50?"...":""),searchJsonItemsLength:"".concat(null!==($=null==tl?void 0:null===(D=tl.itemInfo)||void 0===D?void 0:null===(L=D.videos)||void 0===L?void 0:L.length)&&void 0!==$?$:0),relatedQuestionJsonItemsLength:"".concat(null!==(U=null==tu?void 0:null===(H=tu.itemInfo)||void 0===H?void 0:null===(M=H.questionList)||void 0===M?void 0:M.length)&&void 0!==U?U:0),relatedAccountJsonObjLength:"".concat(null!==(Q=null==th?void 0:null===(j=th.items)||void 0===j?void 0:j.length)&&void 0!==Q?Q:0),relatedFunctionJsonObjLength:"".concat(null!==(G=null==tf?void 0:null===(N=tf.items)||void 0===N?void 0:N.length)&&void 0!==G?G:0)}))}var tp=null!==(V=null==tl?void 0:null===(l=tl.itemInfo)||void 0===l?void 0:null===(s=l.videos)||void 0===s?void 0:s.length)&&void 0!==V?V:0,tm=null!==(z=null==tu?void 0:null===(d=tu.itemInfo)||void 0===d?void 0:null===(u=d.questionList)||void 0===u?void 0:u.length)&&void 0!==z?z:0,tv=null!==(W=null==th?void 0:null===(h=th.items)||void 0===h?void 0:h.length)&&void 0!==W?W:0,ty=null!==(K=null==tf?void 0:null===(f=tf.items)||void 0===f?void 0:f.length)&&void 0!==K?K:0;this.topQARealTimeReport({aggregation:!!t.continueFlag,actionType:p.o.TOP_QA_POLLING_GET_RESULT,extInfo:[Date.now(),null!==(J=null===(v=t.answer)||void 0===v?void 0:null===(m=v.text)||void 0===m?void 0:m.length)&&void 0!==J?J:0,null!==(Y=null===(g=t.answer)||void 0===g?void 0:null===(y=g.think)||void 0===y?void 0:y.length)&&void 0!==Y?Y:0,null!==(X=null===(b=t.answer)||void 0===b?void 0:b.answerFinish)&&void 0!==X?X:0,null!==(tt=null===(S=t.answer)||void 0===S?void 0:null===(_=S.highlightPositionInfoList)||void 0===_?void 0:_.length)&&void 0!==tt?tt:0,null!==(te=t.seq)&&void 0!==te?te:0,t.continueFlag?1:0,null!==(tn=t.statusFlag)&&void 0!==tn?tn:0,t.timeout?1:0,null!==(ti=null===(I=t.resultKey)||void 0===I?void 0:I.length)&&void 0!==ti?ti:0,null!==(to=null==td?void 0:td.type)&&void 0!==to?to:0,null!==(tr=null==td?void 0:null===(w=td.list)||void 0===w?void 0:w.length)&&void 0!==tr?tr:0,t.searchJson?1:0,t.relatedQuestionJson?1:0,tp,tm,tv,ty,t.disableDeepResearch?1:0].join("_")});var tg=!!(null===(x=t.answer)||void 0===x?void 0:x.text)||(null===(T=t.answer)||void 0===T?void 0:T.tableHtml),tb=!!(null===(k=t.answer)||void 0===k?void 0:k.think),t_={get_answer:tg,get_think:tb,get_first_char:tg||tb,answer_finish:!!ts,revert_answer:!!t.disableSearchJson&&!!t.disableSource,get_searchjson:!!tl,get_related_question_json:!!tu},tS=this.doReportRsp(t_,t);tS.get_answer&&setTimeout(function(){var t,e,n=null===(t=ta.$refs.textContentRef)||void 0===t?void 0:t.getIsVisible("answer");(0,c.Z)(ta.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_GET_FIRST_ANSWER,extInfo:JSON.stringify({is_visible:n,type:"ans"}),reportId:ta.itemInfo.reportId}),{reportLogId:31863}),null===(e=ta.$refs.textContentRef)||void 0===e||e.cacheVisible("answer",n)},0),tS.get_think&&setTimeout(function(){var t,e,n,i=null!==(n=null===(t=ta.$refs.textContentRef)||void 0===t?void 0:t.getIsVisible("think"))&&void 0!==n&&n;(0,c.Z)(ta.top1_rm_getExposeData({actionType:o.At.TOP_ONE_QA_GET_FIRST_ANSWER,extInfo:JSON.stringify({is_visible:i,type:"think"}),reportId:ta.itemInfo.reportId}),{reportLogId:31863}),null===(e=ta.$refs.textContentRef)||void 0===e||e.cacheVisible("think",i)},0);var tI={};!this.reportRspCache.searchJson&&tp&&(this.reportRspCache.searchJson=!0,tI.searchJson=tp),!this.reportRspCache.relatedQuestionJson&&tm&&(this.reportRspCache.relatedQuestionJson=!0,tI.relatedQuestionJson=tm),!this.reportRspCache.relatedAccountJson&&tv&&(this.reportRspCache.relatedAccountJson=!0,tI.relatedAccountJson=tv),!this.reportRspCache.relatedFunctionJson&&ty&&(this.reportRspCache.relatedFunctionJson=!0,tI.relatedFunctionJson=ty),Object.keys(tI).length&&this.topQARealTimeReport({actionType:p.o.TOP_QA_GET_SUB_ITEMS,extInfo:tI}),(t.disableSearchJson||t.statusFlag)&&!this.reportRspCache.safeFlag&&(this.reportRspCache.safeFlag=!0,this.topQARealTimeReport({actionType:p.o.TOP_QA_DISCARD_SUB_ITEMS_BY_SAFE}))},onTerminate:function(){this.handleResponse({statusFlag:m.dA.StatusFlagStopAnswer,answer:{text:this.text,think:this.think}}),this.hasTerminate=!0,!i.xB.chatbot&&(this.showCompleteThink=!1,this.hasSetShowCompleteThink=!0)},getTypewriterLength:function(){var t,e,n,i,o=(null===(t=this.thinkTypewriter)||void 0===t?void 0:t.getText())||"",r=(null===(e=this.typewriter)||void 0===e?void 0:e.getText())||"";return console.warn("getTypewriterLength thinkText",o,null==o?void 0:o.length),console.warn("getTypewriterLength answerText",r,null==o?void 0:o.length),(null!==(n=null==o?void 0:o.length)&&void 0!==n?n:0)+(null!==(i=null==r?void 0:r.length)&&void 0!==i?i:0)},getTypeWriter:function(t){return"think"===t?this.thinkTypewriter:this.typewriter}}}},565477:function(t,e,n){var i=n(798509),o=n(20881),r=n(189539),a=n(342622),s=n(684266),c=n(445718),l=n(176068),u=n(984928),d=n(142862),h=n(462474);n(521125);e.Z={components:{VideoContent:r.Z},mixins:[o.ZP],inject:["topQAAnimateCtx","topQARealTimeReport","topQASearchIdForReport"],data:function(){var t=this;return{pollingTimerId:null,videoSource:void 0,stepItems:[],playRange:null,isFinish:!1,answerFinish:!1,duration:0,text:"",cgiText:"",isAnswerTypeAnimateFinish:!1,typewriter:new a.r({},(function(e,n){t.text=e,t.isAnswerTypeAnimateFinish=n,n&&!t.isStepAnswer&&t.$emit("answer-finish")}).bind(this)),subItems:[],hasReportFirstChar:!1,hasEmitFinish:!1}},computed:{isStepAnswer:function(){return this.answerType===l.oK.VideoStepAnswer}},mounted:function(){if(!this.initResponse){console.error("initResponse is required");return}this.handleResponse(this.mainEventCenter.getResponse()||this.initResponse),this.mainEventCenter.on("onData",this.handleResponse)},beforeDestroy:function(){this.mainEventCenter.off("onData",this.handleResponse)},methods:{getShareDesc:function(){return this.isStepAnswer?this.stepItems.map(function(t){return t.title}).join(" "):(0,c.k)(this.text)},onContainerResize:function(t){var e=t.height;e&&this.topQAAnimateCtx.setHeightTo({height:e,animate:!this.isSyncCache,autoWhenFinish:!0})},handleResponse:function(t){if(!!t){if(this.isLoading&&(null===(e=t.answer)||void 0===e?void 0:e.text)&&this.isStepAnswer){this.$emit("degenerate",t);return}this.handleVideoAnswerResponse(t);var e,n=i.Zr.safeJsonParse(t.relatedQuestionJson);if(n){n.docID=this.item.docID;this.subItems=[n],setTimeout(function(){h.Z.$emit(h.U.exposeAnalysis)},300)}}},handleVideoAnswerResponse:function(t){this.isFinish=this.isFinish||!t.continueFlag||!!t.isCache,this.answerFinish=this.isFinish||(null===(o=t.answer)||void 0===o?void 0:o.answerFinish)||this.answerFinish;var e,n,o,r,a,s,c,l,u,d,h=i.Zr.safeJsonParse(t.source);if(h){;this.videoSource=(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({style:1,intersectionThreshold:.1,hideExtraWrap:!0},h),n=(n={duration:void 0},n),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e),this.duration=h.duration||0}(null==h?void 0:h.image)&&i.Zr.preloadImages([h.image]),this.stepItems=(null===(a=t.answer)||void 0===a?void 0:null===(r=a.videoAnswerInfo)||void 0===r?void 0:r.videoAnswerSteps)||this.stepItems||[],this.playRange=(null===(c=t.answer)||void 0===c?void 0:null===(s=c.videoAnswerInfo)||void 0===s?void 0:s.videoShortAnswer)||this.playRange||{},this.cgiText=(null===(l=t.answer)||void 0===l?void 0:l.text)||this.cgiText||"";var f=(null!==(d=null===(u=this.stepItems[0])||void 0===u?void 0:u.startTime)&&void 0!==d?d:this.playRange.startTime)!==void 0,p=this.stepItems.length,m=!(f&&(p>=3||this.cgiText)||this.isFinish);this.$emit("update:is-loading",m),this.typewriter.handleNewDescAnimate({newText:this.answerFinish?this.cgiText||"很抱歉，暂时无法提供相关信息。":this.cgiText,oldText:this.text,duration:30,isCache:t.isCache,answerFinish:this.answerFinish}),this.answerFinish&&this.isStepAnswer&&(this.$emit("answer-finish"),this.emitFinish()),this.reportRsp(t,m)},reportRsp:function(t,e){var n,i,o,r,a,c,l,h,f=this;!t.continueFlag&&this.stepItems.length&&this.$nextTick(function(){var t,e=null===(t=f.$refs.videoContentRef)||void 0===t?void 0:t.getItemReportId(f.stepItems.length-1);e&&(0,d.Z)(f.M_getCommonReportInfo({actionType:u.At.TOP_ONE_QA_ALL_VIDEO_STEP_EXPOSE,itemInfos:[e],itemPoses:["0:".concat(f.M_getItemType(e))]}).reportOption,{reportLogId:31863})}),this.topQARealTimeReport({actionType:s.o.TOP_QA_POLLING_GET_VIDEO_RESULT,extInfo:{answer:{answerLen:null!==(l=null===(i=t.answer)||void 0===i?void 0:null===(n=i.text)||void 0===n?void 0:n.length)&&void 0!==l?l:0,stepSize:null!==(h=null===(a=t.answer)||void 0===a?void 0:null===(r=a.videoAnswerInfo)||void 0===r?void 0:null===(o=r.videoAnswerSteps)||void 0===o?void 0:o.length)&&void 0!==h?h:0},continueFlag:t.continueFlag,resultKey:null===(c=t.resultKey)||void 0===c?void 0:c.slice(0,10),hasSource:!!t.source}}),!e&&!this.hasReportFirstChar&&(this.hasReportFirstChar=!0)},onSpeedChange:function(t){this.typewriter.setTypingSpeedFast(t.fast)},emitFinish:function(){if(!this.hasEmitFinish)h.Z.$emit(h.U.TOP_QA_FINISH,{docID:this.item.docID,searchId:this.topQASearchIdForReport}),this.hasEmitFinish=!0}}}},908600:function(t,e,n){var i,o,r=n(984928),a=n(253008),s=n(513878),c=n(798509),l=n(420629);e.Z={name:"AnswerInteractionItem",components:{FriendListItem:s.Z},mixins:[c.jB,c.uW,c.Sx],props:{interactInfo:{type:Object,default:function(){return{}}},canShare:{type:Boolean,default:!0}},data:function(){return{FeedbackType:r.nw,reportIdMap:{forward:"%E5%88%86%E4%BA%ABbtn:button",like:"like:like",realLike:"real_like:real_like",realLikeFriend:"real_like_friend:real_like_friend",comment:"comment:comment",commentBar:"comment_write:comment_write"}}},computed:(i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},(0,l.rn)({canShowAppendChatInput:function(t){return t.chatbot.canShowAppendChatInput}})),o=(o={actionFlag:function(){var t;return(null===(t=this.interactInfo)||void 0===t?void 0:t.action_flag)||{}},likeCount:function(){var t;return null===(t=this.interactInfo)||void 0===t?void 0:t.like_count},forwardCount:function(){var t;return null===(t=this.interactInfo)||void 0===t?void 0:t.forward_count},commentCount:function(){var t;return null===(t=this.interactInfo)||void 0===t?void 0:t.comment_count},renderLikeIcon:function(){return 2===this.actionFlag.like_flag?"filled-thumb":"outlined-thumb"},renderLikeColor:function(){return 2===this.actionFlag.like_flag?"var(--RED)":"var(--FG-0)"},realLikeCount:function(){var t;return null===(t=this.interactInfo)||void 0===t?void 0:t.real_like_count},renderFriendIcon:function(){return 2===this.actionFlag.real_like_flag?"filled-heart":"outlined-heart"},renderFriendColor:function(){return 2===this.actionFlag.real_like_flag?"var(--RED)":"var(--FG-0)"}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))}),i),methods:{getInteractionText:function(t,e){return e>0?(0,a.Ct)(e):t},onClickShare:function(t){this.$emit("click-share",t)},onClickLike:function(t){this.M_clickReport({clickContent:t.target.textContent.trim(),actionType:2===this.actionFlag.like_flag?r.At.CLICK_LIKE_CANCEL:r.At.CLICK_LIKE,reportId:this.reportIdMap.like}),this.$emit("click-like")},onClickFriend:function(t){this.M_clickReport({clickContent:t.target.textContent.trim(),actionType:2===this.actionFlag.real_like_flag?r.At.CLICK_UNDO_REAL_LIKE:r.At.CLICK_REAL_LIKE,reportId:this.reportIdMap.realLike}),this.$emit("click-friend")},onClickComment:function(t){this.M_clickReport({clickContent:t.target.textContent.trim(),actionType:r.At.CLICK_INPUT,reportId:this.reportIdMap.comment}),this.$emit("click-comment")},onClickCommentBar:function(t){this.M_clickReport({clickContent:t.target.textContent.trim(),actionType:r.At.CLICK_INPUT,reportId:this.reportIdMap.commentBar}),this.$emit("click-comment")},onClickFriendList:function(t){var e=this.reportIdMap.realLikeFriend;this.M_clickReport({clickContent:"".concat(t.length,"个朋友"),actionType:r.At.CLICK_SHOW_DIALOG,reportId:e}),this.$emit("click-friend-list",t,{reportId:e})}}}},569554:function(t,e,n){var i=n(720144);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}e.Z=i.default.extend({name:"AutoLoadMoreWrapper",props:{canLoadMore:{type:Boolean,default:!1}},data:function(){return{isVisible:!1,canLoadMoreWithCoolDown:!1,lastRectTop:null,sameRectTopCount:0,cleanups:[]}},computed:{shouldLoadMore:function(){return this.isVisible&&this.canLoadMoreWithCoolDown},autoLoadMoreDisabled:function(){return this.sameRectTopCount>=2}},watch:{shouldLoadMore:{handler:function(t){if(t){var e,n=null===(e=this.$refs.rootRef)||void 0===e?void 0:e.getBoundingClientRect();n&&(this.lastRectTop===n.bottom?this.sameRectTopCount+=1:(this.lastRectTop=n.bottom,this.sameRectTopCount=0),!this.autoLoadMoreDisabled&&this.$emit("load"))}},immediate:!0},canLoadMore:function(t){var e=this;clearTimeout(this.timer),t?this.timer=setTimeout(function(){e.canLoadMoreWithCoolDown=!0},300):this.canLoadMoreWithCoolDown=!1}},created:function(){this.canLoadMoreWithCoolDown=this.canLoadMore},mounted:function(){var t=this,e=this.$refs.rootRef;!e&&console.error("[auto-load-more-wrapper] No root element found");var n=new IntersectionObserver(function(e){var n,i,r=(i=1,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(n,1)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}(n,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];t.isVisible=r.intersectionRatio>=.5},{threshold:[.05,.2,.4,.6,.8,.95],rootMargin:"30000px 1000px 300px 1000px"});n.observe(e),this.cleanups.push(function(){n.disconnect()})},beforeDestroy:function(){this.cleanups.forEach(function(t){return t()}),this.cleanups.length=0},unmounted:function(){clearTimeout(this.timer)}})},501950:function(t,e,n){var i=n(964062),o=n(793299),r=n(253008),a=n(467094),s=n(523544),c=n(798509),l=n(41519),u=n(748750),d=n(301638),h=n(929944);function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function p(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){p(r,i,o,a,s,"next",t)}function s(t){p(r,i,o,a,s,"throw",t)}a(void 0)})}}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function y(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var g=/\udb8c\udf03/g,b="\udb8c\udf03",_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,r.F4)((0,a.Z)(t))};e.Z={name:"CommentListItem",components:{AutoLoadMoreWrapper:h.Z,CommentRichtext:d.Z,CommentListItem:i.Z,MoreTag:o.Z},mixins:[c.jB,c.uW,c.Sx],props:{commentInfo:{type:Object,required:!0},interactInfo:{type:Object,default:function(){return{}}},secondary:{type:Boolean,default:!1},index:{type:Number,default:0},loadMoreLoading:{type:Boolean,default:!1},doPolling:{type:Function,default:function(){}},hasDebugEntry:{type:Boolean,default:!1},canAutoLoadMore:{type:Boolean,default:!1}},data:function(){return{commentLineHeight:1.4,canExpand:!1,expanded:!1,detectingExpandable:!1,canStopPolling:!0}},computed:{aiControlInfo:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.ai_control_info)||{}},atAiNickname:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.at_ai_user_attr_info)||void 0===t?void 0:t.nickname)||""},atAiAvatar:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.at_ai_user_attr_info)||void 0===t?void 0:t.head_img_url)||""},isThinking:function(){return this.aiControlInfo.can_polling},intervalMs:function(){return this.aiControlInfo.interval_ms},commentId:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.comment_id)||""},avatar:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.avatar)||""},avatarStyle:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.user_identity_type)>0?"round":"square"},nickname:function(){var t;return(0,a.Z)(null===(t=this.commentInfo)||void 0===t?void 0:t.nickname)},content:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.content)||{}},replyToCommentId:function(){var t;return null===(t=this.commentInfo)||void 0===t?void 0:t.reply_to_comment_id},replyToNickname:function(){var t;return _(null===(t=this.commentInfo)||void 0===t?void 0:t.reply_to_comment_nickname)},text:function(){return(0,r.hO)(this.content.text)},richtextRenderInfo:function(){var t,e,n,i=[];return(null===(t=this.content.richtext)||void 0===t?void 0:t.length)?e=(0,r.hO)(this.content.richtext.map(function(t){switch(t.type){case 0:case 1:case void 0:return(t.str||"").replace(g,"");case 3:return i.push(t),b;default:return""}}).join("")):(e=(this.content.text||"").replace(g,""),(null===(n=this.commentInfo)||void 0===n?void 0:n.is_at_ai)&&(i.push({type:3}),e="".concat(b).concat(e))),(0,l.decode)(String(e).replace(/[&<>"']/g,function(t){return({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[t]})).split(b).reduce(function(t,e,n){return n>0&&t.push(i[n-1]),e&&t.push(e),t},[])},location:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.location)||""},dateTime:function(){var t,e,n=[null===(t=this.commentInfo)||void 0===t?void 0:t.ai_release_time,null===(e=this.commentInfo)||void 0===e?void 0:e.create_time].filter(function(t){return!!t});return n[0]?(0,r.BV)(n[0]):""},pictureList:function(){return 1===this.content.type&&this.content.picture_list||[]},fixedSize:function(){return this.pictureList.length>1},pictureSize:function(){var t,e,n=120,i=!1,o=this.pictureList[0]||{},r=o.width,a=o.height;r&&a&&(n=Math.min(160,Math.round(120*Math.max(r,a)/Math.min(r,a))),i=r>a);var s=(e=2,function(t){if(Array.isArray(t))return t}(t=i?[n,120]:[120,n])||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(t,2)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{width:s[0],height:s[1]}},pictureStyle:function(){return this.fixedSize?{}:{width:"".concat(this.pictureSize.width,"px"),height:"".concat(this.pictureSize.height,"px")}},showLikeButton:function(){var t,e,n=null===(e=this.commentInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.like_flag;return 1===n||2===n},likeCount:function(){var t;return(null===(t=this.commentInfo)||void 0===t?void 0:t.like_count)&&this.commentInfo.like_count>0&&(0,r.Ct)(this.commentInfo.like_count,!0)||""},isLiked:function(){var t,e;return 2===(null===(e=this.commentInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.like_flag)},secondaryCommentListInfo:function(){var t;return v({comment_list:[],page_ctx:"",has_more:0,more_count:0},null===(t=this.commentInfo)||void 0===t?void 0:t.second_comment_list_info)},secondaryCommentList:function(){return this.secondaryCommentListInfo.comment_list},hasLoadMore:function(){return!this.secondary&&!!this.secondaryCommentListInfo.has_more},loadMoreText:function(){var t,e=0===this.secondaryCommentList.length?null===(t=this.commentInfo)||void 0===t?void 0:t.second_comment_count:this.secondaryCommentListInfo.more_count;return e?"".concat((0,r.Ct)(e,!0),"条回复"):"更多回复"},hasSecondaryCommentsPart:function(){return this.secondaryCommentList.length>0||this.hasLoadMore},reportIdMap:function(){var t=this,e=encodeURIComponent(this.commentId),n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.secondary;return"comment_".concat(e).concat(n?"_lv2":"")};return{text:"".concat(e,":").concat(n("text")),avatar:"".concat(e,":").concat(n("avatar")),pic:"".concat(e,":").concat(n("pic")),like:"".concat(e,":").concat(n("like")),more:"".concat(e,":").concat(n("unfold",!0))}}},watch:{isThinking:{handler:function(t){t&&this.intervalMs>0?(this.canStopPolling=!1,this.startPollingAiComment(this.intervalMs)):this.canStopPolling=!0},immediate:!0}},mounted:function(){this.recalculateExpandable()},beforeDestroy:function(){this.canStopPolling=!0},methods:{startPollingAiComment:function(t){return m(function(){var e;return y(this,function(n){switch(n.label){case 0:if(this.canStopPolling)return[2];return e=this,[4,this.doPolling(this.commentId)];case 1:return e.canStopPolling=n.sent(),[4,(0,s.Z)(t)];case 2:return n.sent(),this.startPollingAiComment(t),[2]}})}).apply(this)},recalculateExpandable:function(){return m(function(){var t,e,n;return y(this,function(i){switch(i.label){case 0:return this.canExpand=!1,this.expanded=!1,this.detectingExpandable=!0,[4,this.$nextTick()];case 1:return i.sent(),n=(null===(t=this.$refs.contentRef)||void 0===t?void 0:t.clientHeight)||0,this.expanded=!0,[4,this.$nextTick()];case 2:return i.sent(),((null===(e=this.$refs.contentRef)||void 0===e?void 0:e.clientHeight)||0)-n>15*this.commentLineHeight*.5&&(this.expanded=!1,this.canExpand=!0),this.detectingExpandable=!1,[2]}})}).apply(this)},onClickExpand:function(){this.canExpand&&!this.expanded&&(this.M_clickReport({clickContent:this.text.slice(0,50),actionType:c.At.CLICK_UNFOLD,reportId:this.reportIdMap.text}),this.expanded=!0)},onClickCollapse:function(){this.expanded&&(this.M_clickReport({clickContent:this.text.slice(0,50),actionType:c.At.CLICK_FOLD,reportId:this.reportIdMap.text}),this.expanded=!1)},onClick:function(){!this.isThinking&&(this.canExpand&&!this.expanded?(this.M_clickReport({clickContent:this.text.slice(0,50),actionType:c.At.CLICK_UNFOLD,reportId:this.reportIdMap.text}),this.expanded=!0):(this.M_clickReport({clickContent:this.text.slice(0,50),actionType:c.At.CLICK_INPUT,reportId:this.reportIdMap.text}),this.$emit("click:reply",this.secondary?this.commentId:void 0)))},onCopy:function(){this.M_clickReport({clickContent:this.text.slice(0,50),actionType:c.At.CLICK_COPY,reportId:this.reportIdMap.text}),c.Zr.copyText(this.text,!0)},onLongPress:function(){var t,e,n=this;!this.isThinking&&this.M_serviceSearchGo({pop:{type:39,sheet:[{title:"复制",handler:function(){n.onCopy()}},this.hasDebugEntry?{title:"DEBUG",handler:function(){n.$emit("click:debug",n.commentId)}}:null,(null===(e=this.commentInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.delete_flag)===1?{title:"删除",handler:function(){n.M_serviceSearchGo({pop:{type:39,alertText:"删除后将无法恢复，是否继续删除",sheet:[{title:"删除",style:{color:"var(--RED)"},handler:function(){n.M_clickReport({clickContent:n.text.slice(0,50),actionType:c.At.CLICK_DELETE,reportId:n.reportIdMap.text}),n.$emit("click:delete",n.commentId)}}]}})}}:null].filter(function(t){return!!t})}})},onPreviewImage:function(t,e){var n,i=null==e?void 0:e.img_url;if(!i)return;var o=this.pictureList.map(function(t){return t.img_url}).filter(function(t){return!!t});if(!!o.length&&!!o.includes(i))c.hi.imagePreview({urls:o,current:i,currentInfo:{pos:null===(n=t.target)||void 0===n?void 0:n.getBoundingClientRect()}}),this.M_clickReport({clickContent:i,actionType:c.At.CLICK_PREVIEW_IMAGE,reportId:this.reportIdMap.pic})},onClickAvatar:function(t,e){var n,i,o=e?t.at_user_jump_info:t.topqa_user_jump_info,r={clickContent:e?this.atAiNickname:this.nickname,reportId:this.reportIdMap.avatar};if(null==o?void 0:o.jumpType){;this.M_clickReport(r,o),this.M_serviceSearchGo((n=v({},t),i=(i={jumpInfo:o},i),Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}),n));return}var a=e?t.at_identity_pass_info:t.identity_pass_info;if(a){var s={pop:{header:{close:!1,closeArrow:!0},nickName:e?this.atAiNickname:t.nickname,headImgUrl:e?this.atAiAvatar:t.avatar,identityPassInfo:a,type:u.f.popMiniProfile}};this.M_clickReport(r,s),this.M_serviceSearchGo(s);return}},onClickLike:function(t){this.M_clickReport({clickContent:t.target.textContent.trim()||"赞",actionType:this.isLiked?c.At.CLICK_LIKE_CANCEL:c.At.CLICK_LIKE,reportId:this.reportIdMap.like}),this.$emit("click:toggle-like",this.commentId)},onClickMore:function(t){this.M_clickReport({clickContent:t.target.textContent.trim(),actionType:c.At.CLICK_UNFOLD,reportId:this.reportIdMap.more}),this.$emit("click:load")},onAutoLoadMore:function(){this.$emit("click:load")}}}},759950:function(t,e,n){var i=n(720144),o=n(891854),r=n(253008),a=n(798509),s=n(929944);e.Z=i.default.extend({name:"CommentListLoadMore",components:{AutoLoadMoreWrapper:s.Z,UiLoadMore:o.x},mixins:[a.jB,a.uW,a.Sx],props:{index:{type:Number,default:0},topLevelPageInfo:{type:Object,required:!0},loading:{type:Boolean,default:!1},canAutoLoadMore:{type:Boolean,default:!1}},computed:{hasLoadMore:function(){var t;return!!(null===(t=this.topLevelPageInfo)||void 0===t?void 0:t.has_more)},loadMoreText:function(){var t,e=(null===(t=this.topLevelPageInfo)||void 0===t?void 0:t.more_count)||0;return e?"".concat((0,r.Ct)(e,!0),"条评论"):"更多评论"},reportIdMap:function(){return{more:"more:comment_unfold"}},isLastBox:function(){var t;return this.baseCtx.typePos===(null===(t=this.resultObj.data)||void 0===t?void 0:t.length)}},methods:{onClick:function(){this.M_clickReport({clickContent:this.loadMoreText,actionType:a.At.CLICK_UNFOLD,reportId:this.reportIdMap.more}),this.$emit("click")},onAutoLoadMore:function(){this.$emit("click")}}})},247326:function(t,e,n){var i=n(798509),o=n(735146),r=n(136947),a=n(476435),s=n(964062),c=n(636196);n(728223);var l=n(630755),u=n(465880),d=n(748750),h=n(142662),f=n(938798),p=n(253008),m=n(420629);function v(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function y(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){v(r,i,o,a,s,"next",t)}function s(t){v(r,i,o,a,s,"throw",t)}a(void 0)})}}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function b(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function _(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var S=(0,o.Z)("aiSearchCommunity");e.Z={name:"Community",components:{CommentListLoadMore:u.Z,AnswerInteractionItem:a.Z,CommentListItem:s.Z},mixins:[i.jB,i.uW,i.Sx,l.M],props:{canShare:{type:Boolean,default:!0}},data:function(){return{interactInfo:null,likeLoading:!1,friendLikeLoading:!1,userAttrInfo:{}}},computed:b(g({},(0,m.rn)({canShowAppendChatInput:function(t){return t.chatbot.canShowAppendChatInput}})),{reportSearchId:function(){return this.data.vueSearchId||i.xB.searchId},snapshotSearchId:function(){var t;return(null===(t=this.data.vueChatbotInfo)||void 0===t?void 0:t.interactSearchId)||this.data.vueSearchId||i.xB.searchId},snapshotQuery:function(){return this.data.vueQuery||i.xB.query},isLastBox:function(){var t;return this.baseCtx.typePos===(null===(t=this.resultObj.data)||void 0===t?void 0:t.length)}}),watch:{reportSearchId:{handler:function(t){t&&(0,c.AA)({search_id:t,parent_type:i.xB.parentType,parent_search_id:i.xB.parentSearchID})},immediate:!0},itemInfo:{handler:function(t){var e,n;if(!!(null==t?void 0:t.interactInfo))this.interactInfo=(0,p.dW)(t.interactInfo),this.userAttrInfo=null===(e=this.interactInfo)||void 0===e?void 0:e.user_attr_info,this.initInitialComments(null===(n=this.interactInfo)||void 0===n?void 0:n.comment_list_info)},immediate:!0}},created:function(){this.$store.dispatch("aiSearchCommunity/getIdentityList")},methods:{doInteract:function(t){return y(function(){var e,n;return _(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),S("topQAInteract req: ",e={interact_type:t,search_id:this.snapshotSearchId,snapshot_query:this.snapshotQuery}),[4,c.z7.topQAInteract(e)];case 1:return i.sent(),[2,!0];case 2:return n=i.sent(),S("topQAInteract err: ",(0,r.Z)(n)),[2,!1];case 3:return[2]}})}).apply(this)},onClickLike:function(){return y(function(){var t,e,n;return _(this,function(i){switch(i.label){case 0:if(!this.interactInfo||this.likeLoading)return[2];return this.likeLoading=!0,e=2===(t=this.interactInfo.action_flag.like_flag),n=this.interactInfo.like_count||0,this.interactInfo.action_flag.like_flag=e?1:2,this.interactInfo=b(g({},this.interactInfo),{like_count:Math.max(0,e?n-1:n+1)}),[4,this.doInteract(e?h.e.UNDO_LIKE:h.e.LIKE)];case 1:return!i.sent()&&(this.interactInfo.action_flag.like_flag=t,this.interactInfo=b(g({},this.interactInfo),{like_count:n})),this.likeLoading=!1,[2]}})}).apply(this)},onClickFriend:function(){return y(function(){var t,e;return _(this,function(n){switch(n.label){case 0:if(!this.interactInfo||this.friendLikeLoading)return[2];return this.friendLikeLoading=!0,t=2===this.interactInfo.action_flag.real_like_flag,e=(0,f.Z)({item:this.interactInfo,likeFlag:t?1:2,privateUserInfo:this.userAttrInfo}),this.interactInfo=g({},this.interactInfo,e),[4,this.doInteract(t?h.e.UNDO_REAL_LIKE:h.e.FRIEND_REAL_LIKE)];case 1:return!n.sent()&&(e=(0,f.Z)({item:this.interactInfo,likeFlag:t?2:1,privateUserInfo:this.userAttrInfo}),this.interactInfo=g({},this.interactInfo,e)),this.friendLikeLoading=!1,[2]}})}).apply(this)},onClickShare:function(t){var e=this;this.$emit("share",t,{validateForward:function(){e.doInteract(h.e.FORWARD)}})},onClickFriendList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(t.length,"个朋友");this.M_serviceSearchGo({pop:{popTitle:n,header:{close:!1,closeArrow:!0},type:d.f.popFriendList,friendList:t,reportId:e.reportId},reportId:e.reportId})}}}},523035:function(t,e,n){var i=n(467094),o=n(253008);e.Z={name:"FriendListItem",props:{friendLikeInfo:{type:Object,default:function(){return{}}},size:{type:String,default:"small"},disabledClick:{type:Boolean,default:!0},reportId:{type:String,default:""},disabledShowNickname:{type:Boolean,default:!1}},data:function(){return{}},computed:{friendList:function(){var t;return(null===(t=this.friendLikeInfo)||void 0===t?void 0:t.list)||[]},renderFriendList:function(){return this.friendList.slice(-3)},friendTotalCount:function(){var t;return(null===(t=this.friendLikeInfo)||void 0===t?void 0:t.total_count)||0},iconSize:function(){return"small"===this.size?16:"middle"===this.size?28:32},maxRatio:function(){return"1.4"},displayNickname:function(){return this.renderFriendList.length?(0,i.Z)(this.renderFriendList[this.renderFriendList.length-1].nickname||""):""},hasSpecialChars:function(){return!!this.displayNickname&&RegExp("[\\u{1F300}-\\u{1F9FF}]|[\\u{1F600}-\\u{1F64F}]|[\\u{1F680}-\\u{1F6FF}]|[\\u{2600}-\\u{26FF}]|[\\u{2700}-\\u{27BF}]|[\\u{1F1E0}-\\u{1F1FF}]|[\\u{1F900}-\\u{1F9FF}]|[\\u{1FA00}-\\u{1FAFF}]","u").test(this.displayNickname)}},methods:{decodeSoftbankEmoji:i.Z,getInteractionText:function(t,e){return e?(0,o.Ct)(e):t},onClickFriendList:function(t){!this.disabledClick&&(t.stopPropagation(),this.$emit("click-friend-list",this.friendList))}}}},603645:function(t,e,n){var i=n(798509),o=n(513878);e.Z={components:{FriendListItem:o.Z},mixins:[i.jB,i.uW,i.Sx],props:{interactInfo:{type:Object,default:function(){return{}}}},computed:{canShow:function(){var t,e;return!!(null===(e=this.friendLikeInfo)||void 0===e?void 0:null===(t=e.list)||void 0===t?void 0:t.length)},friendLikeInfo:function(){var t;return null===(t=this.interactInfo)||void 0===t?void 0:t.real_like_info}}}},892626:function(t,e,n){var i=n(798509),o=n(462474),r=n(28161),a=n(984928);e.Z={components:{Reason:r.Z},mixins:[i.jB,i.uW,i.Sx],props:{feedbackData:{type:Object,default:function(){return{}}},templateId:{type:String,default:""},buttonList:{type:Array,default:function(){return[]}}},data:function(){return{showFeedbackReason:!1}},computed:{},mounted:function(){this.resetData(),o.Z.$on(o.U.negativeHide,this.resetData)},destroyed:function(){o.Z.$off(o.U.negativeHide,this.resetData)},methods:{resetData:function(){this.showFeedbackReason=!1},onClickFeedback:function(){var t=this;this.showFeedbackReason=!0,this.M_clickReport({reportId:"feedback:feedback",clickContent:"feedback",actionType:a.At.CLICK_SHOW_DIALOG}),this.$nextTick(function(){t.$emit("refresh:position")})},onConfirm:function(){this.$emit("confirm")},onClickCopy:function(){this.$emit("copy")}}}},164766:function(t,e,n){var i=n(798509),o=n(462474),r=n(984928),a=n(661275),s=n(115794);e.Z={name:"TopQaFeedback",components:{MorePopBody:a.Z},mixins:[i.jB,i.uW,i.Sx,s.Z],props:{size:{type:Number,default:20},buttonList:{type:Array,default:function(){return[]}}},data:function(){return{FeedbackType:r.nw}},methods:{onTrigger:function(){},onEmitHide:function(){o.Z.$emit(o.U.negativeHide)},onConfirm:function(){var t,e;null===(e=this.$refs.popoverRef)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)},onCopy:function(){var t,e;null===(e=this.$refs.popoverRef)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e),this.$emit("copy")},onTapItem:function(t){var e,n;null===(n=this.$refs.popoverRef)||void 0===n||null===(e=n.hide)||void 0===e||e.call(n),this.$emit("tap:item",t)},onRefreshPosition:function(){var t,e;null===(e=this.$refs.popoverRef)||void 0===e||null===(t=e.refreshPosition)||void 0===t||t.call(e)}}}},188346:function(t,e,n){var i=n(798509),o=n(984928),r=n(420629),a=n(792578),s=n(115794),c=n(253008),l=n(84762),u=n(783466);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function f(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={components:{Feedback:a.Z},mixins:[i.jB,i.uW,i.Sx,s.Z],inject:{topQASearchIdForReport:{type:String,default:""},topQASearchIdForServer:{type:String,default:""}},props:{canShowButtonList:{type:Boolean,default:!0},canShare:{type:Boolean,default:!0},modelType:{type:Number,default:0},showDeepResearchTeachPop:{type:Boolean,default:!1}},data:function(){return{FeedbackType:o.nw,observer:null,canShowDrTeachPopover:!1}},computed:f(h({},(0,r.Se)({modelChoose:"chatbot/modelChoose"}),(0,r.rn)({resultObj:function(t){return t.result.self.resultObj},aiModelList:function(t){return t.chatbot.aiModelList}})),{regenerateAnswerReportId:function(){return"".concat(encodeURIComponent("切换模型"),":pick_type")},drTeachPopoverReportId:function(){return"dr_pop:dr_pop"},canShowRegenerateAnswer:function(){return this.source.regenerateAnswer&&this.source.regenerateAnswer.title},canShowSearchMore:function(){return this.source.searchMore&&this.source.searchMore.title},canShow:function(){return this.canShowButtonList||this.canShowRegenerateAnswer||this.canShowSearchMore},reportContentType:function(){return(i.Zr.safeJsonParse(this.source.uploadInfo)||{}).contentType||0},iconSize:function(){return 24}}),watch:{showDeepResearchTeachPop:{handler:function(t){var e=this;console.warn("showDeepResearchTeachPop",t),t&&this.$nextTick(function(){e.registerDrTeachPopObserver()})},immediate:!0},resultObj:{handler:function(t){var e;(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)>1&&(this.canShowDrTeachPopover=!1)},immediate:!0}},beforeDestroy:function(){this.observer&&this.observer.disconnect(),u.N.onWebviewPause(this.handleWebviewResume)},methods:{registerDrTeachPopObserver:function(){var t=this;!this.observer&&(this.observer=new IntersectionObserver(function(e){var n,o;(o=1,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(n,1)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}}(n,o)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].intersectionRatio>=.1&&(t.canShowDrTeachPopover=!0,i.su.set({key:l.bP,value:1}),t.$nextTick(function(){i.Gc.$emit(i.U3.exposeAnalysis)}),t.observer.disconnect())},{threshold:.1,rootMargin:"0px 0px -140px 0px"}),this.$refs.modelChoose&&this.observer.observe(this.$refs.modelChoose)),u.N.onWebviewPause(this.handleWebviewResume)},handleWebviewResume:function(){this.canShowDrTeachPopover=!1},onClickRegenerateAnswer:function(){var t,e,n,r=this;this.M_clickReport({clickContent:"切换模型",actionType:o.At.CLICK_SHOW_DIALOG,reportId:this.regenerateAnswerReportId});var a=(this.$store.state.chatbot.aiModelList||[]).find(function(t){var e;return t.modelType===(null===(e=r.data.vueChatbotInfo)||void 0===e?void 0:e.modelType)}),s=(this.$store.state.chatbot.aiModelList||[]).filter(function(t){return(null==a?!!void 0:!!a.isFastModel)||!t.isFastModel||!1})||[],u=this.resultObj.data.filter(function(t){return!t.isFake})||[],d=u[u.length-1],p=u[0];this.M_serviceSearchGo({pop:{type:41,triggerElement:this.$refs.modelChoose,spacingH:0,needSwitchDesc:!0,source:(null==d?void 0:null===(e=d.items)||void 0===e?void 0:null===(t=e[0])||void 0===t?void 0:t.itemInfo)||this.source,list:s.map(function(t){return f(h({},t),{actionType:o.At.AI_SEARCH})}),modelChoose:{modelType:null===(n=this.data.vueChatbotInfo)||void 0===n?void 0:n.modelType},handler:function(t,e){if(t.modelType===l.BY.DR){i.Gc.$emit(i.U3.DR_CREATE,{parentSearchID:r.M_composeParentSid({t:o.X$.MMSEARCH_TYPE_MIXER_QUESTION_CLOSELY_JUMP_AISEARCH,s:r.topQASearchIdForServer,did:"",rid:"",kv:{isFromVoice:0,sceneType:i.xB.chatbotSecond||i.xB.shareFromChatbot?o.Hq.RESULT:o.Hq[r.$route.name],modelname:l.BY.DR}}),needStartNewPage:!0,query:null==p?void 0:p.vueQuery});return}var n,a,s=r.data.vueQuery||i.xB.query;console.warn("重答",r.data),r.$store.dispatch("chatbot/resetUploadFileList");var u=r.source.uploadInfo;if(u){;n=(null!==(a=null==(u=(0,c.dW)(u)||{})?void 0:u.uploadFiles)&&void 0!==a?a:[]).map(function(t){return f(h({},t),{fileUrl:t.url})})}i.Gc.$emit(i.U3.CHAT_INPUT_CONFIRM,{query:s,parentType:o.X$.MMSEARCH_TYPE_MIXER_SWITCH_AISEARCH,aiResearchOriSid:r.topQASearchIdForServer,modelType:t.modelType,clickId:null==e?void 0:e.clickId,uploadFileList:n})}}})},onClickJump:function(){var t,e,n=(null===(t=this.data.vueChatbotInfo)||void 0===t?void 0:t.modelValue)||(null===(e=this.modelChoose)||void 0===e?void 0:e.value),i=this.M_genClickId({searchId:this.topQASearchIdForReport});this.M_commonJump({jumpInfo:{reportId:this.source.searchMore.reportId,jumpType:o.sn.ALL_SEARCH,scene:o.RL.MMSEARCH_SCENE_AI_SEARCH_BOX_BOTTOM,query:(this.data.vueQuery||"").trim(),parentType:o.X$.MMSEARCH_TYPE_FROM_TOPQA_SEARCH_GUIDE,parentSearchID:this.M_composeParentSid({t:o.X$.MMSEARCH_TYPE_FROM_TOPQA_SEARCH_GUIDE,s:this.topQASearchIdForReport,rid:this.data.vueRid,kv:{clickId:i}}),extParams:{crossExtReqParams:[{key:"aiSearchFromGuidePageModelValue",textValue:n}]}}},{clickId:i})},onClickDrTeachPopClose:function(){this.canShowDrTeachPopover=!1}}}},115391:function(t,e,n){var i=n(798509);e.Z={mixins:[i.jB,i.uW,i.Sx],props:{text:{type:String,default:"你可以继续追问，让我为你总结重点、简化解释、对比分析，或补充更多细节。"}},computed:{imageStyle:function(){var t=i.Zr.getSimilarFontHeight(17,1.4);return{height:"".concat(t,"px")}}}}},906262:function(t,e){e.Z={props:{},computed:{},methods:{}}},872672:function(t,e){function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function i(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={provide:function(){return{topQAAnimateCtx:{setHeightToAuto:this.setHeightToAuto,setHeightTo:this.setHeightTo,setHeightFit:this.setHeightFit,getNowHeight:this.getNowHeight,log:this.log}}},props:{isCalculateHeightMode:{type:Boolean,default:!1}},data:function(){return{dynamicStyle:{},queue:[],isInAnimate:!1,timer:null,containerRect:null}},computed:{style:function(){if(this.isCalculateHeightMode){var t=this.containerRect;return{position:"fixed",top:"100vh",left:"100vw",width:t?"".concat(t.width,"px"):"100%"}}return this.dynamicStyle}},mounted:function(){this.updateContainerRect()},methods:{log:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n]},updateContainerRect:function(){var t=this.$el&&this.$el.parentElement;if(!t){this.containerRect=null;return}this.containerRect=t.getBoundingClientRect()},getNowHeight:function(){return this.$el.getBoundingClientRect().height},setHeightToAuto:function(){this.log("setHeightToAuto"),this.stopHeightAnimate(),this.dynamicStyle={}},setHeightFit:function(){if(this.log("setHeightFit"),!this.$el.firstElementChild){this.log("no child");return}var t=this.$el.firstElementChild.getBoundingClientRect().height;this.setHeightTo({height:t,animate:!0,autoWhenFinish:!0})},setHeightTo:function(t){var e=t.height,n=t.animate,i=t.min,o=t.autoWhenFinish;if(!n){this.stopHeightAnimate(),this.setHeightVal(e,i),o&&this.setHeightToAuto();return}this.queue.push(t),this.checkHeightToSetInAnimate()},checkHeightToSetInAnimate:function(){var t=this;if(this.isInAnimate&&!this.dynamicStyle.transition)return;var e=this.queue.shift()||{},o=e.height,r=e.min,a=e.autoWhenFinish,s=e.duration,c=void 0===s?300:s;if(!!o){if(this.isInAnimate)this.log("set height ".concat(o," in animate"),Date.now()),this.setHeightVal(o);else{var l=this.getNowHeight();if(l===o){this.setHeightVal(o,r),a&&this.setHeightToAuto(),this.checkHeightToSetInAnimate();return}this.dynamicStyle={height:"".concat(l,"px")},this.log("trans height from ".concat(l," to ").concat(o),Date.now())}this.isInAnimate=!0,this.timer&&clearTimeout(this.timer),this.$nextTick(function(){if(!t.isInAnimate){t.checkHeightToSetInAnimate();return}t.dynamicStyle={height:"".concat(o,"px"),transition:"height ".concat(c/1e3,"s")},t.timer=setTimeout(function(){t.timer=null,t.dynamicStyle=i(n({},t.dynamicStyle),{transition:void 0}),a?t.setHeightToAuto():t.setHeightVal(o,r),t.isInAnimate=!1,t.checkHeightToSetInAnimate()},c)})}},stopHeightAnimate:function(){this.log("stopHeightAnimate"),this.isInAnimate=!1,this.timer&&clearTimeout(this.timer)},setHeightVal:function(t,e){e?this.dynamicStyle=i(n({},this.dynamicStyle),{height:void 0,minHeight:"".concat(t,"px")}):this.dynamicStyle=i(n({},this.dynamicStyle),{height:"".concat(t,"px"),minHeight:void 0})}}}},848421:function(t,e,n){var i=n(798509),o=n(912139),r=n(411795);e.Z={name:"ChatbotLoading",components:{UiIconLoading:o.Z,HeightAnimate:r.Z},mixins:[i.jB,i.uW,i.Sx],inject:{topQAAnimateCtx:{type:Object,default:function(){return null}},topQAInitHeight:{type:Number,default:0}},props:{loadingText:{type:String,default:""},isFinish:{type:Boolean,default:!1},loadingPos:{type:Number,default:1},stateList:{type:Array,default:function(){return[]}},loadingHeightAnimateDuration:{type:Number,default:300}},computed:{isWithoutLeave:function(){return!this.loadingHeightAnimateDuration||1===this.lineContentList.length&&this.loadingPos<1},textPrefix:function(){return"阅读第".concat(this.loadingPos,"篇《")},lineContentList:function(){var t=this,e=[{wording:"分析问题"}].concat(this.stateList);return e.map(function(n,i){return{content:n.wording,isLoading:i===e.length-1&&!t.loadingText&&!t.isFinish}})}},mounted:function(){var t,e,n,o;if(this.topQAInitHeight){null===(n=this.topQAAnimateCtx)||void 0===n||n.setHeightTo({height:this.topQAInitHeight,animate:!1});return}if(i.xB.chatbot){null===(o=this.topQAAnimateCtx)||void 0===o||o.setHeightToAuto();return}null===(t=this.topQAAnimateCtx)||void 0===t||t.setHeightTo({height:210,min:!0}),null===(e=this.topQAAnimateCtx)||void 0===e||e.log("chat loading，设为 210 min")}}},42344:function(t,e,n){var i=n(912139),o=n(372973),r=n(798509);e.Z={components:{UiIconLoading:i.Z},mixins:[r.jB,r.uW,r.Sx],inject:["topQAAnimateCtx","topQAInitHeight"],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},loadingText:{type:String,default:""}},mounted:function(){if(this.topQAInitHeight){this.topQAAnimateCtx.setHeightTo({height:this.topQAInitHeight,animate:!1});return}var t=(0,o.I)(),e=t.getTextHeight({text:"问题分析中",fontSize:"var(--FONT-M)"}),n=t.getTextWidth({width:"1rem"});this.topQAAnimateCtx.setHeightTo({height:Math.max(e,n),animate:!0}),this.topQAAnimateCtx.log("loading，高度设为一行文本高度")}}},177680:function(t,e,n){var i=n(912139),o=n(372973),r=n(798509);e.Z={components:{UiIconLoading:i.Z},mixins:[r.jB,r.uW,r.Sx],inject:["topQAAnimateCtx","topQAInitHeight"],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},loadingText:{type:String,default:""}},computed:{finishIconStyle:function(){return this.loadingText?{opacity:1,width:"1rem",marginRight:"6px"}:{opacity:0,width:"0px"}},loadingHardcodeText:function(){return"搜索信息"}},mounted:function(){if(this.topQAInitHeight){this.topQAAnimateCtx.setHeightTo({height:this.topQAInitHeight,animate:!1});return}var t=(0,o.I)(),e=t.getTextHeight({text:"问题分析中",fontSize:"var(--FONT-M)"}),n=t.getTextWidth({width:"1rem"});this.topQAAnimateCtx.setHeightTo({height:2*Math.max(e,n)+8,animate:!0}),this.topQAAnimateCtx.log("loading，高度设为 2 行文本高度")}}},754935:function(t,e,n){var i=n(798509),o=n(372973),r=n(554392),a=n(234031),s=n(984928),c=n(16726);e.Z={components:{FoldButton:r.Z},mixins:[i.jB,i.uW,i.Sx,a.Z],provide:function(){var t=this;return{topQAGetCalcHeight:function(){return t.getCalcHeight()}}},inject:{topQAAnimateDuration:{default:function(){return 300}},topQALineHeight:{default:1.6},topQAInitHeight:{default:0},topQAInitContentHeight:{default:0}},props:{maxRowCount:{type:Number,default:10},isSyncCache:{type:Boolean,default:!1},isFinish:{type:Boolean,default:!1},enable:{type:Boolean,default:!0},needFoldButton:{type:Boolean,default:!0},autoUnfold:{type:Boolean,default:!1},showClickThink:{type:Boolean,default:!1},hasThink:{type:Boolean,default:!1},preventUnfoldInteraction:{type:Boolean,default:!1},foldButtonText:{type:String,default:""},isSubItemsShowWhenFull:{type:Boolean,default:!1},subItemsHeight:{type:Number,default:0},forceShowGradientUnfold:{type:Boolean,default:!1}},data:function(){return{innerHeight:0,canShowGradient:!1,hasClickUnfold:!1,isCollapse:!1,hasCollapseCalcInit:!1,isDescNotFullAndFinish:!1,isAttentive:!1,hasCheckAttentive:!1,dispose:function(){},hasScroll:!1,startTime:Date.now(),beforeHeight:0}},computed:{needSubItemsHolder:function(){return!this.canShowSubItems&&this.subItemsHeight&&this.isSubItemsShowWhenFull},isChatbot:function(){return i.xB.chatbot},canShowSubItems:function(){return this.needFoldButton?this.isSubItemsShowWhenFull?this.isCollapse||this.isDescNotFullAndFinish||this.hasClickUnfold:this.isDescNotFullAndFinish||this.hasClickUnfold&&this.isFinish:this.isFinish},isTopQAThinkStyle:function(){return this.hasThink&&!i.xB.chatbot},canShowAfter:function(){return this.isDescNotFullAndFinish||this.isFinish&&this.hasClickUnfold},canShowFoldButton:function(){return this.needFoldButton&&!this.hasClickUnfold&&this.isCollapse},wrapStyle:function(){return this.hasClickUnfold||this.isDescNotFullAndFinish||!this.enable?{}:this.needFoldButton||i.xB.chatbot?!this.isTopQAThinkStyle||this.showClickThink||this.isAttentive?{}:this.contentStyle:{minHeight:"".concat(this.initHeight+this.beforeHeightCalc,"px"),overflow:"hidden"}},contentStyle:function(){return this.hasClickUnfold||this.isDescNotFullAndFinish||!this.needFoldButton||!this.enable||this.isAttentive?{}:{height:"".concat(this.initHeight+this.beforeHeightCalc,"px"),overflow:"hidden"}},beforeHeightCalc:function(){return this.beforeHeight?this.beforeHeight+8:this.hasThink&&this.topQAInitHeight?(0,o.I)().getTextHeight({text:"深度思考中",fontSize:"var(--FONT-M)",enableCache:!0})+8:0},initHeight:function(){if(this.topQAInitContentHeight)return this.topQAInitContentHeight-(this.isSubItemsShowWhenFull?this.subItemsHeight:0);var t,e=Math.floor(this.maxRowCount/(null!==(t=i.xB.fontRatio)&&void 0!==t?t:1));return(0,o.I)().getTextHeight({text:"测试",fontSize:"var(--FONT-M)",lineHeight:this.topQALineHeight,enableCache:!0})*e},isSubItemsCache:function(){var t,e,n,o,r,a;return!!i.Zr.safeJsonParse(null===(e=this.source)||void 0===e?void 0:null===(t=e.syncResp)||void 0===t?void 0:t.searchJson)||!!i.Zr.safeJsonParse(null===(o=this.source)||void 0===o?void 0:null===(n=o.syncResp)||void 0===n?void 0:n.relatedQuestionJson)||!!i.Zr.safeJsonParse(null===(a=this.source)||void 0===a?void 0:null===(r=a.syncResp)||void 0===r?void 0:r.relatedAccountJson)||this.isAICardType},getAnimateDuration:function(){var t=300;return t=this.isDescNotFullAndFinish?300:this.isCollapse&&!this.hasClickUnfold?300:this.isSyncCache?300:0}},watch:{needFoldButton:{handler:function(t){!t&&((0,c.U)("needFoldButton",t),this.$emit("collapse:change",!1))},immediate:!0},isFinish:{handler:function(t){var e=this;t&&this.$nextTick(function(){e.checkIsDescNotFullAndFinish()})},immediate:!0},canShowFoldButton:{handler:function(t){t&&this.$nextTick(function(){i.Gc.$emit(i.U3.exposeAnalysis)})},immediate:!0},getAnimateDuration:{handler:function(t){this.topQAAnimateDuration(t)},immediate:!0}},mounted:function(){var t=this,e=function(){t.hasScroll=!0};i.Gc.$on(i.U3.CONTAINER_BODY_SCROLL,e),this.dispose=function(){i.Gc.$off(i.U3.CONTAINER_BODY_SCROLL,e)}},beforeDestroy:function(){this.dispose()},methods:{onContainerResize:function(t){this.innerHeight=t.height,this.checkFoldStatus(),this.isFinish&&this.checkIsDescNotFullAndFinish()},getCalcHeight:function(){return this.initHeight},checkIsAttentive:function(){return!1},checkFoldStatus:function(){if(!!this.innerHeight||!!this.$el.clientWidth){var t=this.needFoldButton&&this.innerHeight>this.getCalcHeight();t&&!this.hasCheckAttentive&&(this.isAttentive=this.checkIsAttentive(),this.hasCheckAttentive=!0),this.isCollapse=t&&!this.isAttentive,this.canShowGradient=!!this.isCollapse&&this.checkNeedGradient(),this.hasCollapseCalcInit=!0,this.needFoldButton&&this.$emit("collapse:change",t);var e=(0,o.I)().getTextHeight({text:"测试",fontSize:"var(--FONT-M)",lineHeight:this.topQALineHeight,enableCache:!0});this.innerHeight>this.getCalcHeight()-e&&this.$emit("hide:stopAnswerBtn")}},checkIsDescNotFullAndFinish:function(){var t;this.innerHeight=(null===(t=this.$refs.containerRef)||void 0===t?void 0:t.getBoundingClientRect().height)||this.innerHeight,this.checkFoldStatus(),this.isDescNotFullAndFinish=!this.isCollapse&&this.isFinish},checkNeedGradient:function(){if(this.canShowGradient||(null===(o=this.itemInfo)||void 0===o?void 0:o.cardType))return!0;var t=this.$refs.containerRef.getBoundingClientRect().top,e=!0,n=!1,i=void 0;try{for(var o,r,a=[{text:'<span class="katex-scroll">',selector:".katex-scroll"},{text:'<span class="katex">',selector:".katex"},{text:"</code>",selector:"code"},{text:"<table",selector:"table"},{text:"<img",selector:"img"}][Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s,c=r.value,l=(c.text,c.selector),u=null===(s=this.$refs.containerRef.querySelector(l))||void 0===s?void 0:s.getBoundingClientRect();if(u&&u.top<t+this.getCalcHeight())return!0}}catch(t){n=!0,i=t}finally{try{!e&&null!=a.return&&a.return()}finally{if(n)throw i}}return!1},onClickUnfold:function(){this.hasClickUnfold=!0,this.M_clickReport({clickContent:this.foldButtonText||"展开回答",actionType:s.At.CLICK_UNFOLD,reportId:"unfold:unfold"}),this.$emit("tap:unfold")},onClickButton:function(){this.$emit("tap")}}}},809106:function(t,e,n){var i=n(798509),o=n(372973);function r(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}e.Z={mixins:[i.jB,i.uW,i.Sx],inject:{topQALineHeight:{default:1.6},topQAFontSize:{default:"var(--FONT-M)"}},props:{needShowAnimate:{type:Boolean,default:!0},canShowGradient:{type:Boolean,default:!1},preventUnfoldInteraction:{type:Boolean,default:!1},foldButtonText:{type:String,default:""},autoUnfold:{type:Boolean,default:!1}},data:function(){return{innerHeight:0,hasClickUnfold:!1}},computed:{unFoldBtnText:function(){return this.foldButtonText?this.foldButtonText:this.canShowGradient?"展开全部":"展开"},unFoldBtnWidth:function(){if(!this.canShowGradient)return(0,o.I)().getTextWidth({text:this.unFoldBtnText,fontSize:this.topQAFontSize,lineHeight:this.topQALineHeight})+72}},created:function(){var t=this;i.Gc.$on(i.U3.TOP_QA_TOGGLE_FOLD,function(e){!e&&(t.hasClickUnfold=!1,t.onTapFoldButton())}),this.autoUnfold&&setTimeout(this.onTapFoldButton)},methods:{onTouchUnfoldEnd:function(t){var e,n,i,o=this,r=(null===(e=t.changedTouches)||void 0===e?void 0:e[0])||{},a=r.clientX,s=r.clientY,c=(null===(i=t.currentTarget)||void 0===i?void 0:null===(n=i.getBoundingClientRect)||void 0===n?void 0:n.call(i))||{},l=c.left,u=c.top,d=c.width,h=c.height;if(!(a<l)&&!(a>l+d)&&!(s<u)&&!(s>u+h))setTimeout(function(){o.onTapUnfold()},100)},onTapUnfold:function(){var t;return(t=function(){return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(t){switch(t.label){case 0:if(this.hasClickUnfold)return[2];return[4,i.Zr.handleToggleFullScreen()];case 1:return t.sent(),this.hasClickUnfold=!0,this.$emit("tap:unfold"),[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)})}).apply(this)},onGradientBGClick:function(){this.onTapFoldButton()},onGradientInnerClick:function(t){var e=t.clientX,n=t.clientY,i=document.elementsFromPoint(e,n),o=this.$refs.gradientInnerRef,r=function(t){var e;return null===(e=t.classList)||void 0===e?void 0:e.contains("active__opacity")},a=!0,s=!1,c=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d,h=function(){var i=l.value;if(i===o)return"continue";if(r(i)){t.preventDefault(),t.stopPropagation(),i.classList.add("active"),setTimeout(function(){i.classList.remove("active")},100);var a=new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:e,clientY:n,view:window});return i.dispatchEvent(a),{v:void 0}}}();if("object"==((d=h)&&"undefined"!=typeof Symbol&&d.constructor===Symbol?"symbol":typeof d))return h.v}}catch(t){s=!0,c=t}finally{try{!a&&null!=u.return&&u.return()}finally{if(s)throw c}}t.stopPropagation(),this.onTapFoldButton()},onTapFoldButton:function(){if(this.preventUnfoldInteraction){this.$emit("tap");return}this.onTapUnfold()},onTouchEnd:function(t){if(!this.preventUnfoldInteraction)this.onTouchUnfoldEnd(t)}}}},938030:function(t,e,n){var i=n(798509),o=n(439508),r=n(684667),a=n(984928),s=n(612303),c=n(977768),l=n(372973),u=n(271323),d=n(236842),h=n(333095),f=n(684266);function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function v(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.Z={components:{reuseHtml:r.Z},mixins:[i.jB,i.uW,i.Sx,s.Z,c.Z,u.Z],inject:{topQALineHeight:{default:1.6},topQAFontSize:{default:""},topQARealTimeReport:{default:function(){return function(){}}}},props:{markdown:{type:String,default:""},expandHtml:{type:String,default:""},selectionDataList:{type:Array,default:function(){return[]}},textTag:{type:String,default:""},isFinish:{type:Boolean,default:!0},boxesJson:{type:Object,default:function(){return{}}},markdownClassList:{type:Array,default:function(){return[]}},referenceList:{type:Array,default:function(){return[]}},enableGradientMoreTag:{type:Boolean,default:!1},maxTableCellWidth:{type:Number,default:0},isCompose:{type:Boolean,default:!1}},data:function(){return{styleConfig:{},hasInitMathEngine:!1,hasInitCodeHighlight:!1,renderCache:{}}},computed:{classList:function(){var t,e=((null===(t=this.classListStyleStrategy)||void 0===t?void 0:t.call(this))||{}).classList;return v(void 0===e?[]:e).concat(v(this.markdownClassList))},contentStyle:function(){var t,e,n={},i=(0,l.I)(this.$refs.markdownRef).getTextHeight({text:"测试",fontSize:this.topQAFontSize||"var(--top-qa-stand-font, var(--FONT-M))",lineHeight:this.topQALineHeight,enableCache:!0});return t=m({},n),e=(e={"--markdown-dot-top":"".concat(i/2,"px")},e),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),n=t,this.styleConfig&&(n=m({},n,this.styleConfig)),n},isContentVisible:function(){return this.v_isVisible},moreTagSpan:function(){return this.isFinish?"":o.AI},textToShow:function(){return this.hasInitMathEngine,this.hasInitCodeHighlight,this.markdownToHtml(this.markdown,{moreTag:this.moreTagSpan})}},watch:{textToShow:{handler:function(t){this.checkContentExpose({content:t})},immediate:!0},isFinish:{handler:function(t){t&&this.checkContentExpose()},immediate:!0}},created:function(){var t,e=((null===(t=this.classListStyleStrategy)||void 0===t?void 0:t.call(this))||{}).styleConfig;e&&(this.styleConfig=e)},mounted:function(){var t=this;this.v_startWatchVisible(this.$el,function(e){e?t.checkContentExpose():t.$emit("disappear",{textTag:t.textTag}),t.topQARealTimeReport({actionType:f.o.TOP_QA_INTERSECTING_CHANGE,extInfo:{isVisible:e,textTag:t.textTag}})}),this.top1_rm_startListenVisibleArea(this.$el,function(e){t.checkContentExpose({exposeHeight:e})}),(0,d.VJ)().then(function(){t.hasInitMathEngine=!0}),(0,h.Bh)().then(function(){t.hasInitCodeHighlight=!0})},methods:{checkContentExpose:function(t){var e=this;if(!!this.isContentVisible)this.$nextTick(function(){var n,i,o,r,a=null!==(i=null===(n=e.$el)||void 0===n?void 0:n.getBoundingClientRect().height)&&void 0!==i?i:0;if(!!a){var s=null!==(o=null==t?void 0:t.exposeHeight)&&void 0!==o?o:e.top1_rm_getVisibleHeight(),c=null!==(r=null==t?void 0:t.content)&&void 0!==r?r:e.textToShow;e.$emit("content:expose",{height:s,html:c,textTag:e.textTag,totalHeight:a})}})},markdownToHtml:function(t,e){return(0,o.c8)(t,m({cache:this.renderCache,parentEl:this.$refs.markdownRef,textTag:this.textTag,selectionDataList:this.selectionDataList,referenceList:this.referenceList,maxTableCellWidth:this.maxTableCellWidth},e))+this.expandHtml},onClickDomInHtmlContent:function(t,e){var n=function(t){return(null==t?void 0:t.tagName)?t.tagName.toLowerCase():""},o=function(t){var e,n,i=null===(e=t.dataset)||void 0===e?void 0:e.miniprogramAppid,o=null===(n=t.dataset)||void 0===n?void 0:n.miniprogramPath,r=t.getAttribute("href")||t.href;return i?{jumpType:a.sn.WE_APP,weappUrl:o,appId:i}:r?{jumpType:a.sn.H5,jumpUrl:/^[a-zA-Z]+:\/\//.test(r)?r:"http://".concat(r)}:void 0},r=n(e);if("a"===r){var s=o(e);s&&(t.preventDefault(),t.stopPropagation(),this.M_serviceSearchGo(s))}else if("img"===r){var c=e.src,l=e.parentElement;c&&!("a"===n(l)&&o(l))&&i.Zr.WeixinJSBridgeInvoke("imagePreview",{current:c,urls:[c],enableBottomBar:!0,scene:i.xB.scene})}},onTapComponentInHtmlContent:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.$emit.apply(this,["tap:component"].concat(v(e)))}}}},62046:function(t,e){e.Z={name:"TextAnimate",props:{text:{type:String,default:""}},data:function(){return{prevText:"",contentHeight:"auto",contentWidth:"auto"}},computed:{shouldAnimate:function(){return""!==this.prevText&&""!==this.text}},watch:{text:{handler:function(t){this.prevText=t},immediate:!0}}}},684398:function(t,e,n){var i=n(798509),o=n(984928),r=n(128408);e.Z={components:{TextAnimate:r.Z},mixins:[i.jB,i.uW,i.Sx],props:{thinkButtonContent:{type:String,default:""},showCompleteThink:{type:Boolean,default:!1}},data:function(){return{canShowThinkBtnMask:!0}},methods:{onClickThink:function(){var t=this;this.M_clickReport({clickContent:this.thinkButtonContent,actionType:this.showCompleteThink?o.At.CLICK_FOLD:o.At.CLICK_UNFOLD,reportId:"%E6%80%9D%E8%80%83%E8%BF%87%E7%A8%8B:think"}),this.$emit("tap"),setTimeout(function(){t.canShowThinkBtnMask=!1,setTimeout(function(){t.canShowThinkBtnMask=!0},100)},100)}}}},347294:function(t,e,n){var i=n(798509),o=n(372973);e.Z={mixins:[i.jB,i.uW,i.Sx],inject:{topQAGetCalcHeight:{default:function(){return function(){return 0}}},topQALineHeight:{default:1.6},topQAInitHeight:{default:0}},props:{isFinish:{type:Boolean,default:!1},maxRowCount:{type:Number,default:0}},data:function(){return{contentHeight:0}},computed:{isFull:function(){return this.contentHeight>=this.initHeight},isScrollMode:function(){return!this.isFinish&&!i.xB.chatbot},initHeight:function(){var t,e=(0,o.I)().getTextHeight({text:"测试",fontSize:"var(--FONT-M)",lineHeight:this.topQALineHeight,enableCache:!0});if(this.topQAGetCalcHeight())return this.topQAGetCalcHeight()-(this.isShowTopQaStopBtn?e:0);var n=Math.floor(this.maxRowCount/(null!==(t=i.xB.fontRatio)&&void 0!==t?t:1));return e*n-(this.isShowTopQaStopBtn?e:0)},containerStyle:function(){return this.isScrollMode?{height:"".concat(this.initHeight,"px")}:{}},isShowTopQaStopBtn:function(){return!i.xB.chatbot}}}},747516:function(t,e,n){var i=n(798509),o=n(984928),r=n(176068),a=n(420629),s=n(728223),c=n(149470),l=n(574184),u=n(84762);function d(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function f(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={components:{ModelRedDot:l.Z},mixins:[i.jB,i.uW,i.Sx,c.ZP],props:{disableTime:{type:Boolean,default:!1}},computed:f(h({},(0,a.rn)({aiModelList:function(t){return t.chatbot.aiModelList}}),(0,a.Se)({redDotIdToShow:"chatbot/redDotIdToShow"})),{modelChooseName:function(){var t,e,n=null===(t=this.source.modelSwitch)||void 0===t?void 0:t.modelType;if(!n)return"";var i=null===(e=this.aiModelList.find(function(t){return t.modelType===n}))||void 0===e?void 0:e.title;return i?"".concat(this.isQuarkStyleBackCardStyle?"":"AI搜索 \xb7 ").concat(i):""},isQuarkStyleBackCardStyle:function(){var t;return i.xB.quarkStyle&&(this.typePos>1||!!(null===(t=i.xB.localAccExtParams.find(function(t){return"localAccInfo"===t.key}))||void 0===t?void 0:t.textValue))},isQuarkStyle:function(){return i.xB.quarkStyle},bottomEntryReportId:function(){return"%E6%B7%B1%E5%BA%A6%E6%80%9D%E8%80%83:aisearch"},bottomTips:function(){return i.xB.isTopQAOrChatbotShare&&"v2"!==i.xB.chatbotExtParams.shareStyle&&!this.disableTime&&this.source.bottomTitle||r.RS},modelSwitchReportId:function(){if(this.canNotSwitch)return"";var t,e=null===(t=this.source.modelSwitch)||void 0===t?void 0:t.reportId;if(!e)return"";if(this.redDotIdToShow){var n=e.split(":").length-1;return"".concat(e).concat(n>1?":":"::").concat(this.redDotIdToShow)}return e},canNotSwitch:function(){var t;return null===(t=this.source.modelSwitch)||void 0===t?void 0:t.canNotSwitch}}),mounted:function(){if(this.source.modelSwitch){var t=u.dk.RESULT;(i.xB.quarkStyle||i.xB.quarkStyleV2)&&(t=u.dk.QUARK_STYLE),this.chatbotModel_loadModel({modelListSaveKey:c.GD,modelGetType:t})}},methods:{onClickModelChoose:function(){var t;return(t=function(){var t,e,n;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(r){switch(r.label){case 0:if(t=this,this.canNotSwitch)return[2];return[4,i.Zr.handleToggleFullScreen()];case 1:return r.sent(),this.M_clickReport({clickContent:this.modelChooseName,actionType:o.At.CLICK_SHOW_DIALOG,reportId:this.modelSwitchReportId}),n=null===(e=this.aiModelList)||void 0===e?void 0:e.map(function(e){return f(h({},e),{actionType:t.source.modelSwitch.modelType===e.modelType?o.At.CLICK_SHOW_DIALOG:e.actionType})}),this.M_serviceSearchGo({pop:{type:41,triggerElement:this.$refs.modelChoose,spacingH:0,spacingV:10,source:this.source,list:n,modelChoose:{value:this.source.modelSwitch.value,modelType:this.source.modelSwitch.modelType},needSwitchDesc:!0,handler:function(e,n){var r;if((null===(r=t.source.modelSwitch)||void 0===r?void 0:r.modelType)===e.modelType)return i.Gc.$emit(i.U3.showToast,{action:s.g.pure,text:"已使用".concat(e.title),top:i.xB.quarkStyle||i.xB.quarkStyleV2?0:29}),!1;i.xB.quarkStyle||i.xB.quarkStyleV2?t.$emit("regenerate",e,{parentType:o.X$.MMSEARCH_TYPE_MIXER_SWITCH_AISEARCH,clickId:null==n?void 0:n.clickId,isFromSwitchModel:!0}):setTimeout(function(){t.$emit("model-switch",e,n)},300)}}}),[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){d(r,i,o,a,s,"next",t)}function s(t){d(r,i,o,a,s,"throw",t)}a(void 0)})}).apply(this)}}}},712425:function(t,e,n){var i,o,r=n(798509),a=n(115794),s=n(984928),c=n(149470),l=n(792578),u=n(420629),d=n(84762);function h(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}e.Z={components:{Feedback:l.Z},mixins:[r.jB,r.uW,r.Sx,a.Z,c.ZP],inject:{topQASearchIdForServer:{type:String,default:""}},props:{canShowButtonList:{type:Boolean,default:!0},canShare:{type:Boolean,default:!0},canRegenerate:{type:Boolean,default:!0},modelType:{type:Number,default:0},interactInfo:{type:Object,default:function(){return{}}}},data:function(){return{FeedbackType:s.nw}},computed:(i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},(0,u.rn)({aiModelList:function(t){return t.chatbot.aiModelList}})),o=(o={canShowQuarkCommunity:function(){var t;return!!this.interactInfo&&(null===(t=this.interactInfo.action_flag)||void 0===t?void 0:t.real_like_flag)>0},renderFriendColor:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"var(--RED)":"var(--FG-0)"},renderFriendIcon:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"filled-heart":"outlined-heart"},reportContentType:function(){return(r.Zr.safeJsonParse(this.source.uploadInfo)||{}).contentType||0},canShowRegenerate:function(){return!this.source.disableTopQARegenerate},modelSwitch:function(){return this.data.modelType&&this.data.modelValue?{modelType:this.data.modelType,modelValue:this.data.modelValue}:this.source.modelSwitch},modelChooseName:function(){var t,e,n=null===(t=this.modelSwitch)||void 0===t?void 0:t.modelType;if(!n)return"";var i=null===(e=this.aiModelList.find(function(t){return t.modelType===n}))||void 0===e?void 0:e.title;return i?i:""}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))}),i),created:function(){this.modelSwitch&&this.chatbotModel_loadModel({modelListSaveKey:c.GD,modelGetType:d.dk.QUARK_STYLE})},methods:{onTapQuarkReGenerate:function(){var t;return(t=function(){var t,e;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(n){switch(n.label){case 0:if(t=this,!this.modelSwitch)return e=this.M_clickReport({clickContent:"reanswer",actionType:s.At.AI_SEARCH,reportId:"reanswer:reanswer"}),this.$emit("regenerate",null,{clickId:e.clickId}),[2];return[4,r.Zr.handleToggleFullScreen()];case 1:return n.sent(),this.M_clickReport({clickContent:this.modelChooseName,actionType:s.At.CLICK_SHOW_DIALOG,reportId:"reanswer:reanswer"}),this.M_serviceSearchGo({pop:{type:41,source:this.source,list:this.aiModelList,modelChoose:{value:this.modelSwitch.value,modelType:this.modelSwitch.modelType},needSwitchDesc:!0,handler:function(e,n){t.$emit("regenerate",e,{parentType:s.X$.MMSEARCH_TYPE_MIXER_SWITCH_AISEARCH,clickId:null==n?void 0:n.clickId,isFromSwitchModel:!0})}}}),[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){h(r,i,o,a,s,"next",t)}function s(t){h(r,i,o,a,s,"throw",t)}a(void 0)})}).apply(this)}}}},190135:function(t,e,n){var i=n(798509),o=n(526194),r=n(849996);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}e.Z={components:{ChatbotMixedWording:o.Z,SubItems:r.Z},mixins:[i.jB,i.uW,i.Sx],props:{subItems:{type:Array,default:function(){return[]}},subItemsWording:{type:String,default:""},canShowLastWording:{type:Boolean,default:!1}},computed:{subItemsForShow:function(){return this.subItems.map(function(t){var e,n,i,o=a({},t);if(null===(i=t.itemInfo)||void 0===i?void 0:i.header){;o.itemInfo=(e=a({},t.itemInfo),n=(n={header:void 0},n),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e)}return o})}}}},664648:function(t,e,n){var i=n(798509),o=n(232516),r=n(372973),a=n(792592),s=n(728223),c=n(578248),l=n(869309),u=n(407778),d=n(411313);function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){f(r,i,o,a,s,"next",t)}function s(t){f(r,i,o,a,s,"throw",t)}a(void 0)})}}function m(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}e.Z={components:{ReuseHtml:o.Z},mixins:[],props:{html:{type:String},thinkHtml:{type:String},base64:{type:String},shareInfo:{type:Object},pageGlobal:{type:Object}},data:function(){return{canShow:!1,posterStyle:{},qrcodeImgBase64:""}},computed:{descStyle:function(){return i.xB.fontRatio>1?{paddingBottom:"6px"}:{}},canvasScale:function(){var t;return(null===(t=this.pageGlobal)||void 0===t?void 0:t.deviceModel)==="Xiaomi-2211133C"?window.devicePixelRatio||2:2*(window.devicePixelRatio||2)},oneLineHeight:function(){return 17*1.6},logoStyle:function(){var t=this.canvasScale;return{left:"".concat(6*t,"px"),top:"".concat(6*t,"px"),width:"".concat(24*t,"px"),height:"".concat(24*t,"px")}},isScaleMoreThanOne:function(){return 1>i.Zr.resetFontSize()},contentStyle:function(){var t=i.Zr.resetFontSize();return{"--markdown-dot-top":"".concat(this.oneLineHeight/2+2+(this.isScaleMoreThanOne?this.oneLineHeight*(1-t):0),"px"),"--unfold-mt":"12px","--unfold-inner-mt":"8px","--markdown-order-font-size":"".concat(17*t,"px"),"--markdown-order-transform":"scale(".concat(t,")"),"--markdown-order-left":"-".concat(this.oneLineHeight*(1-t),"px"),"--markdown-order-top":"-".concat(12*(1-t),"px")}}},mounted:function(){return p(function(){var t,e,n,o,r,c,l,u,h,f,p,v,y,g,b,_,S,I;return m(this,function(m){switch(m.label){case 0:if(t=this,i.Gc.$emit(i.U3.showToast,{action:s.g.loading,text:"加载中"}),this.t1=Date.now(),localStorage.getItem("aichat_hasLoad_font"))return[3,6];o=new FontFace("HYXuanSong","url(https://search.wxqcloud.qq.com/t/searchweb/cdn_libs/res/font-family/HYXuanSong45S.ttf)"),m.label=1;case 1:return m.trys.push([1,4,,5]),[4,o.load()];case 2:return m.sent(),document.fonts.add(o),[4,document.fonts.ready];case 3:return m.sent(),[3,5];case 4:return console.error("字体加载失败:",m.sent()),[3,5];case 5:localStorage.setItem("aichat_hasLoad_font","true"),m.label=6;case 6:return this.t2=Date.now(),c=(r=this.shareInfo||{}).shareId,u=void 0===(l=r.parentSearchID)?"":l,h="https://liteapp.weixin.qq.com/q/ZIUHR3?shareId=".concat(c||"","&isQRCode=1&psid=").concat(u,"&chatbot=").concat(i.xB.chatbot),[4,a.toCanvas(h,{width:144,margin:0})];case 7:return f=m.sent(),this.t3=Date.now(),p=f.toDataURL("image/png"),this.qrcodeImgBase64=p,v=this.$el.querySelectorAll(".underline-selection-poster"),[4,(0,d._v)(10)];case 8:return m.sent(),g=null!==(y=null===(n=this.$el.querySelector(".poster-underline-wrap"))||void 0===n?void 0:null===(e=n.getBoundingClientRect())||void 0===e?void 0:e.top)&&void 0!==y?y:0,[4,(0,d._v)(10)];case 9:return m.sent(),b=v[0].getBoundingClientRect().top,[4,(0,d._v)(10)];case 10:return m.sent(),_=v[v.length-1].getBoundingClientRect().bottom-b,I=_+6*(S=17*1.6),setTimeout(function(){t.canShow=!0,t.posterStyle={height:"".concat(I,"px"),width:"100%",top:"".concat(g-b+3*S,"px")},t.top=t.$el.querySelector(".bottom-wrap__left ").getBoundingClientRect().top-g,setTimeout(function(){t.t4=Date.now(),t.generateImage(top)},50)},50),[2]}})}).apply(this)},methods:{generateImage:function(t){return p(function(){var t,e,n,o,r,a,s,d,f,p,v,y,g;return m(this,function(m){switch(m.label){case 0:return t=this,o=this.canvasScale,r=document.getElementById("poster-underline"),[4,null===(e=window)||void 0===e?void 0:e.html2canvas(r,{scale:o})];case 1:var b,_;return b=(s=(a=m.sent()).toDataURL("image/png")).split(","),_=2,f=(d=function(t){if(Array.isArray(t))return t}(b)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(b,2)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}}(b,_)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],p=d[1],v=(0,u.F)("wxg_wxai_search-eb4e495e926ebeae-".concat(Date.now())),y={Label:"1",ContentProducer:"001191440101327598294H1M8MR",ProduceID:"search_".concat(Date.now()),ContentPropagator:"001191440101327598294H2M8MR",PropagateID:"search_".concat(Date.now()),ReservedCode1:v,ReservedCode2:v},g=l.u.addTextChunkToPng(p,"AIGC",y),s="".concat(f,",").concat(g),this.t5=Date.now(),c.ZP.openLiteApp({appId:"wxalite662c58496ffa1efd119b5eb4ea45a3ba",page:"pages/poster-creater/entry",isTransparent:!0,minVersion:"0.2.8",query:{bypassReportParams:null===(n=this.shareInfo)||void 0===n?void 0:n.clickReportOption,ratio:a.height/a.width},preInjectData:{base64Image:s}},function(){t.t6=Date.now(),console.warn("ai划线海报耗时：",t.t1,t.t2,t.t3,t.t4,t.t4-t.t1,t.t5-t.t1,t.t6-t.t1)}),i.Gc.$emit(i.U3.hideToast),i.Gc.$emit(i.U3.ON_CHAT_POSTER_SUCCESS,function(){t.posterHtmlInfo=null}),[2]}})}).apply(this)},getDescHeight:function(t,e){var n=(0,r.I)(this.$refs.markdownRef);return this.innerWidth?n.getTextHeight({text:t,fontSize:"var(--FONT-M)",lineHeight:1.6,html:!0,width:this.innerWidth}):0}}}},777548:function(t,e,n){var i=n(798509),o=n(984928),r=n(792578),a=n(115794),s=n(470948);e.Z={components:{Feedback:r.Z,MorePopOver:s.Z},mixins:[i.jB,i.uW,i.Sx,a.Z],inject:{topQASearchIdForReport:{type:String,default:""},topQASearchIdForServer:{type:String,default:""}},props:{canShowButtonList:{type:Boolean,default:!0},canShare:{type:Boolean,default:!0},canRegenerate:{type:Boolean,default:!0},modelType:{type:Number,default:0},hasTerminate:{type:Boolean,default:!1},isCompactBottom:{type:Boolean,default:!1},interactInfo:{type:Object,default:function(){return{}}},canShowGenerateTime:{type:Boolean,default:!0},isButtonAtBottomStyleV2:{type:Boolean,default:!1}},data:function(){return{FeedbackType:o.nw}},computed:{canShow:function(){return this.canShowButtonList||this.hasTerminate||this.source.generateTime},isQuarkStyle:function(){return i.xB.quarkStyle},iconSize:function(){return this.isQuarkStyle&&!this.isCompactBottom?24:20},reportContentType:function(){return(i.Zr.safeJsonParse(this.source.uploadInfo)||{}).contentType||0},isFromShare:function(){return i.xB.isTopQAOrChatbotShare},canShowRegenerate:function(){return!this.source.disableTopQARegenerate&&!this.isFromShare},canShowQuarkCommunity:function(){var t;return!!this.interactInfo&&(null===(t=this.interactInfo.action_flag)||void 0===t?void 0:t.real_like_flag)>0},morePopOverButtonList:function(){return[{title:"重答",iconUrl:"https://res.wx.qq.com/t/components/icons/base/refresh_regular.svg",type:"reRefresh",reportId:"reanswer:reanswer"}]},renderFriendIcon:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"filled-heart":"outlined-heart"},renderFriendColor:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"var(--RED)":"var(--FG-0)"}},methods:{onTapQuarkReGenerate:function(){var t=this.M_clickReport({clickContent:"reanswer",actionType:o.At.AI_SEARCH,reportId:"reanswer:reanswer"});this.$emit("regenerate",null,{clickId:t.clickId})},onTapMorePopOverItem:function(t){"reRefresh"===t.type&&this.onTapQuarkReGenerate()}}}},587019:function(t,e,n){var i=n(133804),o=n(383467),r=n(439508),a=n(647981);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}var c=function(t){var e,n;return"underline-span"===t.name||(null==t?!!void 0:null===(e=t.children)||void 0===e?!!void 0:!!e.length)&&c(null===(n=t.children)||void 0===n?void 0:n[0])};e.Z={components:{UnderlineSpan:i.Z,Highlight:a.Z},props:{html:{type:String,default:""}},methods:{onClickDom:function(t){var e=t.currentTarget;if(!!e)this.$emit("tap",t,e)},onTapComponent:function(){for(var t,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.$emit.apply(this,["tap:component"].concat(function(t){if(Array.isArray(t))return s(t)}(t=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}},render:function(t){var e=this.html;try{var n,i,a,s=(0,o.Qc)(e);n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},s),i={children:s.children},i=null!=i?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}),s=n;var l=function(e){if(r.bo.filter(function(t){return!["underline-span","highlight"].includes(t)}).includes(e.tagName)||"comment"===e.type)return;if("text"===e.type)return e.data;if("table"!==e.name){var n,i,o,a,s={attrs:e.attribs||{}};return("li"===e.name&&(s.attrs.class="".concat(null!==(i=s.attrs.class)&&void 0!==i?i:""," ").concat(c(e)?"is-underline-li":"")),"strong"===e.name)?(s.attrs.class="".concat(null!==(a=s.attrs.class)&&void 0!==a?a:""," strong"),t("span",s,null===(o=e.children)||void 0===o?void 0:o.map(l).filter(Boolean))):t(e.name,s,null===(n=e.children)||void 0===n?void 0:n.map(l).filter(Boolean))}},u=null===(a=s.children)||void 0===a?void 0:a.map(l);return t("div",{},u)}catch(n){return console.error("parse html error",n),t("div",{domProps:{innerHTML:e}},[])}}}},747039:function(t,e,n){var i=n(798509);e.Z={inject:["topQAAnimateCtx"],provide:function(){var t=this;return{topQAHasBeenAuto:function(){return t.hasBeenAuto},topQAAnimateDuration:function(e){return t.getAnimateDuration(e)}}},props:{isSyncCache:{type:Boolean,default:!1},isFinish:{type:Boolean,default:!1}},data:function(){return{hasBeenAuto:!1,forceAnimate:!1,latestHeight:0,isFreezeHeight:!1,duration:300}},methods:{getAnimateDuration:function(t){this.duration=t},onContainerResize:function(t){var e=t.height;if(this.latestHeight=e||this.latestHeight,!this.isFreezeHeight){if((i.xB.chatbot||this.hasBeenAuto)&&!this.forceAnimate){this.topQAAnimateCtx.setHeightToAuto();return}e&&this.topQAAnimateCtx.setHeightTo({height:e,animate:!0,duration:this.duration})}},setAutoHeight:function(){this.hasBeenAuto=!0,this.topQAAnimateCtx.setHeightToAuto()},freezeHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i.xB.chatbot)return this.topQAAnimateCtx.setHeightTo({height:this.latestHeight,min:t}),this.isFreezeHeight=!0,this.latestHeight},resumeAnimate:function(){this.hasBeenAuto=!1,this.forceAnimate=!0,this.topQAAnimateCtx.setHeightTo({height:this.latestHeight})},resumeHeight:function(){if(this.isFreezeHeight=!1,this.isSyncCache||i.xB.chatbot||this.hasBeenAuto||this.isFinish){this.setAutoHeight();return}this.onContainerResize({height:this.latestHeight})}}}},444132:function(t,e,n){var i=n(798509),o=n(728223),r=n(984928),a=n(792578),s=n(115794),c=n(234031),l=n(783466),u=n(253008),d=n(694768),h=n(619269),f=n(448188),p=n(420629),m=n(350342),v=n(142862),y=n(518793),g=n(151285);function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){b(t,e,n[e])})}return t}function S(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var I={AUTO:1,CLICK:0},w={LOADING:"loading",PLAYING:"playing",IDLE:"idle",ERROR:"error"};e.Z={components:{Feedback:a.Z,ChatUploadMediaPreview:d.Z,TopQaVoiceButton:m.Z},mixins:[i.jB,i.uW,i.Sx,s.Z,c.Z,h.Z],inject:{topQASearchIdForServer:{type:String,default:""}},props:{shareData:{type:Object,default:function(){return{}}},modelType:{type:Number,default:null},hideButton:{type:Boolean,default:!1},mainEventCenter:{type:Object,default:function(){return{}}}},data:function(){return{FeedbackType:r.nw,isAiVoicePlaying:!1,isAiVoiceLoading:![r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_CHAT,r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_MOMENT].includes(i.xB.scene),voicePopoverTimer:null,hasThinkAnimateFinish:!1,pendingSetTingAudioStateFn:null,setTingAudioStateStartTime:null,createTtsTaskStartTime:null,hasReportedSetTingAudioTiming:!1,hasReportedCreateTtsTiming:!1,isAutoPlayLoading:!0,voiceDefaultInfo:{activityIconUrl:"https://search.wxqcloud.qq.com/t/fed_upload/6c97daab0c42c8eb06196bbbb0adb476/earphone_on.svg",iconUrl:"https://res.wx.qq.com/t/components/icons/base/earphone_regular.svg",reportId:"voice_button:voice_button​:autoOn",loadingIconUrl:"https://search.wxqcloud.qq.com/t/fed_upload/6c97daab0c42c8eb06196bbbb0adb476/earphone_on.svg"}}},computed:S(_({},(0,p.Se)({experiment:"result/self/getExperiment"}),(0,p.rn)({searchId:function(t){return t.result.searchId}})),{isMatchTTSExperiment:function(){var t,e;if(!i.xB.isSupportTtsVoice)return!1;return!!(null===(e=this.source)||void 0===e?void 0:null===(t=e.voicePlaying)||void 0===t?void 0:t.ttsid)||i.xB.isSupportClientVoice},canShowAiVoice:function(){return[r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_CHAT,r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_MOMENT].includes(i.xB.scene)&&!i.xB.chatbot?this.isMatchTTSExperiment:!!this.hasThinkAnimateFinish&&(!this.isAutoPlayLoading||!this.isAiVoiceLoading)&&i.xB.type!==r.WI.TOP_QA&&this.isMatchTTSExperiment},shouldShowButtons:function(){return!this.chatbot&&!this.quarkStyle&&!this.isQuarkStyleV2&&!this.hideButton},voiceTtsid:function(){var t,e,n,o,a,s;return[r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_CHAT,r.ZP.scene.MMSEARCH_SCENE_TOPQA_FOR_MOMENT].includes(i.xB.scene)?(null===(a=this.source)||void 0===a?void 0:null===(o=a.voicePlaying)||void 0===o?void 0:o.ttsid)||(null===(s=this.data)||void 0===s?void 0:s.searchID)||this.searchId:(null===(e=this.source)||void 0===e?void 0:null===(t=e.voicePlaying)||void 0===t?void 0:t.ttsid)||(null===(n=this.source)||void 0===n?void 0:n.searchId)||this.searchId},titleToShow:function(){return this.source.query||this.source.title},chatbot:function(){return i.xB.chatbot},quarkStyle:function(){return i.xB.quarkStyle},isQuarkStyleV2:function(){return i.xB.quarkStyleV2||"v2"===i.xB.chatbotExtParams.shareStyle},maxLineCount:function(){return this.chatbot?25:3},uploadFileList:function(){var t;if(null===(t=this.source)||void 0===t?void 0:t.uploadInfo){var e,n=(0,u.dW)(this.source.uploadInfo)||{};return(null!==(e=null==n?void 0:n.uploadFiles)&&void 0!==e?e:[]).map(function(t){return S(_({},t),{fileUrl:t.url})})}return[]},reportContentType:function(){return(i.Zr.safeJsonParse(this.source.uploadInfo)||{}).contentType||0},isQuarkStyleBackCardStyle:function(){var t;return this.quarkStyle&&(this.typePos>1||!!(null===(t=i.xB.localAccExtParams.find(function(t){return"localAccInfo"===t.key}))||void 0===t?void 0:t.textValue))}}),created:function(){var t=this;i.xB.quarkStyle?this.observer=new IntersectionObserver(function(e){var n=e[0];n&&!t.isQuarkStyleBackCardStyle&&i.Gc.$emit(i.U3.quarkStyleNavigationBarShouldShowTitle,n.intersectionRatio<.1)},{threshold:[.1],root:this.Container_GetBodyNode()}):this.observer=null},mounted:function(){var t=this;this.$nextTick(function(){var e,n;(null===(n=t.$refs)||void 0===n?void 0:null===(e=n.titleRef)||void 0===e?void 0:e.$el)&&t.observer&&t.observer.observe(t.$refs.titleRef.$el)}),!this.isQuarkStyleBackCardStyle&&i.xB.quarkStyle&&i.Gc.$emit(i.U3.quarkStyleNavigationBarShouldShowTitle,!1),i.Gc.$emit(i.U3.TOP_ONE_QA_HEADER_STATUS,!0),setTimeout(function(){t.handleAutoPlayVoice()},300),i.FP.isSupportOnTingAudioStateChanged&&f.ZP.onTingAudioStateChanged(this.onAiVoiceStateChange),i.Gc.$on(i.U3.STOP_QA_VOICE,this.handleStopQaVoicePlay),i.Gc.$on(i.U3.TOP_QA_TYPING_END,this.handleTypingEnd),i.Gc.$on(i.U3.TOP_QA_TYPING_START,this.handleAnswerStart),i.Gc.$on(i.U3.QA_VOICE_BUTTON_CLICK,this.onClickVoice),i.Gc.$on(i.U3.QA_VOICE_FIXED_HEADER_EXPOSE,this.handleFixedHeaderExpose)},beforeDestroy:function(){i.Gc.$emit(i.U3.quarkStyleNavigationBarShouldShowTitle,!0),i.Gc.$emit(i.U3.TOP_ONE_QA_HEADER_STATUS,!1),this.clearVoicePopoverTimer(),i.Gc.$off(i.U3.STOP_QA_VOICE,this.handleStopQaVoicePlay),i.Gc.$off(i.U3.TOP_QA_TYPING_END,this.handleTypingEnd),i.Gc.$off(i.U3.TOP_QA_TYPING_START,this.handleAnswerStart),i.Gc.$off(i.U3.QA_VOICE_BUTTON_CLICK,this.onClickVoice),i.Gc.$off(i.U3.QA_VOICE_FIXED_HEADER_EXPOSE,this.handleFixedHeaderExpose),this.pendingSetTingAudioStateFn=null,this.observer&&(this.observer.unobserve(this.$el),this.observer.disconnect(),this.observer=null)},methods:{handleVoiceGuideManualReport:function(t,e){var n,o=y.Z.state.result;(0,v.Z)(S(_({},i.xB.getBase()),{boxInfo:(0,g.To)(this.data,this.typePos),docInfos:["".concat(this.item.docID,":").concat(this.pos)],businessType:this.data.real_type,resultSubType:this.data.subType,resultType:this.data.resultType,requestId:this.data.vueRid||o.doneRequestId||o.previousRid,showType:this.data.type,svrDocExtInfos:[this.item.report_extinfo_str||""],svrBoxExtInfo:this.data.report_box_extinfo_str||"",pageNumber:null!==(n=this.data.vuePage)&&void 0!==n?n:o.state.pageNumber,searchId:i.xB.searchId,parentSearchID:i.xB.parentSearchID,actionType:r.At.EXPOSE_ITEM,itemInfos:[t],itemPoses:[e]}))},handleFixedHeaderExpose:function(t){if(t){var e=t.reportId,n=t.itemPose;this.handleVoiceGuideManualReport(e,n)}},emitVoiceStateChange:function(t){var e={ttsid:this.voiceTtsid,status:t,isPlaying:this.isAiVoicePlaying,isLoading:this.isAiVoiceLoading,canShowAiVoice:this.canShowAiVoice,reportId:this.voiceDefaultInfo.reportId};i.Gc.$emit(i.U3.QA_VOICE_STATE_CHANGE,e)},checkAudioStatus:function(t,e,n){var o=i.xB.wechatVersion;if(i.xB.os.ios&&o>=402669606&&i.xB.os.ios&&o<402669856)switch(e){case w.LOADING:return t===r.o0.LOADING;case w.PLAYING:return t===r.o0.PLAYING;case w.IDLE:return t===r.o0.IDLE;case w.ERROR:return 12===t;default:return!1}else switch(e){case w.LOADING:return t===r.Oc.LOADING;case w.PLAYING:return t===r.Oc.PLAYING;case w.IDLE:return t===r.Oc.IDLE;case w.ERROR:return n===r.Oc.ERROR;default:return!1}},reportTimingCost:function(t,e){var n,i;l.h.getCommonCgiData({cgiName:"TopQAResultReport",data:(b(i={},"".concat(t),e),b(i,"is_hit_cache",(null===(n=this.mainEventCenter)||void 0===n?void 0:n.isCache)?1:0),i)})},handleStopQaVoicePlay:function(){this.isAiVoiceLoading=!1,this.isAiVoicePlaying=!1,this.isAutoPlayLoading=!1,this.pendingSetTingAudioStateFn=null,this.hasReportedSetTingAudioTiming=!1,this.hasReportedCreateTtsTiming=!1,this.setTingAudioStateStartTime=null,this.createTtsTaskStartTime=null,this.emitVoiceStateChange(w.IDLE)},handleTypingEnd:function(t){(null==t?void 0:t.content)==="think"&&(this.hasThinkAnimateFinish=!0,this.pendingSetTingAudioStateFn&&(this.pendingSetTingAudioStateFn(),this.pendingSetTingAudioStateFn=null))},handleAnswerStart:function(t){(null==t?void 0:t.content)==="answer"&&(this.hasThinkAnimateFinish=!0)},handleSetTingAudioState:function(t){this.hasThinkAnimateFinish?t():this.pendingSetTingAudioStateFn=t},onAiVoiceStateChange:function(t){if(!!t){if((null===(e=t.item)||void 0===e?void 0:e.srcId)===this.voiceTtsid){if(this.checkAudioStatus(t.event,w.ERROR,t.status)){this.isAiVoiceLoading=!1,this.isAiVoicePlaying=!1,this.isAutoPlayLoading=!1,this.pendingSetTingAudioStateFn=null,i.Gc.$emit(i.U3.VIDEO_CONTROLLER_STATE_UPDATE,!0),i.xB.setValue({aiVoiceId:""}),this.emitVoiceStateChange(w.ERROR);return}if(this.checkAudioStatus(t.status,w.LOADING))this.isAiVoiceLoading=!0,this.isAiVoicePlaying=!1,this.emitVoiceStateChange(w.LOADING);else if(this.checkAudioStatus(t.status,w.PLAYING)){this.isAiVoiceLoading=!1,this.isAiVoicePlaying=!0,i.Gc.$emit(i.U3.VIDEO_CONTROLLER_STATE_UPDATE,!1);var e,n=Date.now();if(this.setTingAudioStateStartTime&&!this.hasReportedSetTingAudioTiming){var o=n-this.setTingAudioStateStartTime;this.reportTimingCost("first_voice_data_time_ms",o),this.hasReportedSetTingAudioTiming=!0}if(this.createTtsTaskStartTime&&!this.hasReportedCreateTtsTiming){var r=n-this.createTtsTaskStartTime;this.reportTimingCost("voice_play_delay_ms",r),this.hasReportedCreateTtsTiming=!0}this.emitVoiceStateChange(w.PLAYING)}else this.checkAudioStatus(t.status,w.IDLE)&&(this.isAiVoiceLoading=!1,this.isAiVoicePlaying=!1,this.isAutoPlayLoading=!1,this.pendingSetTingAudioStateFn=null,this.hasReportedSetTingAudioTiming=!1,this.hasReportedCreateTtsTiming=!1,this.setTingAudioStateStartTime=null,this.createTtsTaskStartTime=null,i.Gc.$emit(i.U3.VIDEO_CONTROLLER_STATE_UPDATE,!0),i.xB.setValue({aiVoiceId:""}),this.emitVoiceStateChange(w.IDLE))}}},handleAutoPlayVoice:function(){var t=this;if(!this.isMatchTTSExperiment){this.isAutoPlayLoading=!1,this.isAiVoiceLoading=!1;return}if(i.xB.aiVoiceSwitch){this.isAiVoiceLoading=!0,this.isAutoPlayLoading=!0,this.handleSetTingAudioState(function(){t.autoPlayVoice()});return}if(i.xB.scene===r.RL.MMSEARCH_SCENE_TEACH_VOICE_DIRECT_SEARCH_V3){var e=1;i.xB.firstSearchSeachId!==i.xB.searchId?(e=1,i.xB.setValue({firstSearchSeachId:i.xB.searchId})):e=0,e?(this.isAiVoiceLoading=!0,this.isAutoPlayLoading=!0,this.handleSetTingAudioState(function(){t.autoPlayVoice()})):(this.isAutoPlayLoading=!1,this.isAiVoiceLoading=!1)}else this.isAutoPlayLoading=!1,this.isAiVoiceLoading=!1},autoPlayVoice:function(){var t=this,e=this.M_genClickId();this.M_clickReport({actionType:r.At.AUDIO_AUTO_PLAY,reportId:this.voiceDefaultInfo.reportId,clickId:e,cardExtInfo:{autoAction:I.AUTO}}),this.createTtsTaskStartTime=Date.now(),l.h.getCommonCgiData({cgiName:"CreateTtsTask",data:{ttsid:this.voiceTtsid}}).then(function(){t.setTingAudioStateStartTime=Date.now(),l.h.setTingAudioState({itemList:[{srcId:t.voiceTtsid,listenId:t.voiceTtsid}],clickId:e,scene:2e3,sourceType:3}),i.xB.setValue({aiVoiceId:t.voiceTtsid,aiVoiceSwitch:!0}),t.handleInitVoicePop()})},handleInitVoicePop:function(){var t=this;if(i.xB.scene===r.RL.MMSEARCH_SCENE_TEACH_VOICE_DIRECT_SEARCH_V3){var e="VOICE_AUTO_PLAY_GUIDE";i.su.get({key:e}).then(function(n){if(!0!==n)setTimeout(function(){i.su.set({key:e,value:!0}),t.$refs._voicePopHalfScreen.show(!0),t.startVoicePopoverTimer()},10)}).catch(function(){setTimeout(function(){i.su.set({key:e,value:!0}),t.$refs._voicePopHalfScreen.show(!0),t.startVoicePopoverTimer()},10)})}},startVoicePopoverTimer:function(){var t=this;this.clearVoicePopoverTimer(),this.voicePopoverTimer=setTimeout(function(){t.$refs._voicePopHalfScreen.hide(),t.voicePopoverTimer=null},3e3)},clearVoicePopoverTimer:function(){this.voicePopoverTimer&&(clearTimeout(this.voicePopoverTimer),this.voicePopoverTimer=null)},onClickVoice:function(t){var e=this,n=t.reportId;if(this.isAutoPlayLoading=!1,this.isAiVoicePlaying||this.isAiVoiceLoading)this.M_clickReport({actionType:r.At.AUDIO_PAUSE,reportId:n||this.voiceDefaultInfo.reportId,cardExtInfo:{autoAction:I.CLICK}}),this.pendingSetTingAudioStateFn=null,l.h.operateTingAudio({srcId:this.voiceTtsid,operationType:"stop",sourceType:3}),i.xB.setValue({aiVoiceId:"",aiVoiceSwitch:!1});else{var o=this.M_genClickId();this.M_clickReport({actionType:r.At.AUDIO_PLAY,reportId:n||this.voiceDefaultInfo.reportId,clickId:o,cardExtInfo:{autoAction:I.CLICK}}),this.createTtsTaskStartTime=Date.now(),this.isAiVoiceLoading=!0,l.h.getCommonCgiData({cgiName:"CreateTtsTask",data:{ttsid:this.voiceTtsid}}).then(function(){e.handleSetTingAudioState(function(){e.setTingAudioStateStartTime=Date.now(),l.h.setTingAudioState({itemList:[{srcId:e.voiceTtsid,listenId:e.voiceTtsid}],clickId:o,scene:2e3,sourceType:3})}),i.xB.setValue({aiVoiceId:e.voiceTtsid,aiVoiceSwitch:!0})})}},onClickShare:function(t){if(this.M_clickReport({clickContent:"分享答案",actionType:r.At.CLICK_SHOW_DIALOG,reportId:"%E5%88%86%E4%BA%ABbtn:button"}),!this.shareData.enable){i.Gc.$emit(i.U3.showToast,{action:o.g.pure,text:"回答生成完成后才能分享"});return}this.$emit("share",t,{target:"top-qa-header"})},onClickTitle:function(){this.quarkStyle&&(i.Gc.$emit(i.U3.quarkStyleSearchBarShouldFocus,{text:this.source.query||this.source.title}),i.xB.setValue({curRouteName:r.kO.RESULT}),this.M_clickReportFor26897({itemReportId:["1|64|".concat(encodeURIComponent("搜索框")),"1|1|".concat(encodeURIComponent(i.xB.query),"||||||aisearchtitle|")].join("$$")},0,{actionId:r.At.CLICK_INPUT,reportExtraInfo:this.reportExtraInfo}))},onClickPreview:function(t){l.h.imagePreview({urls:this.pictureList.map(function(t){return t.img_url}),current:t.img_url,enableBottomBar:!0})}}}},170181:function(t,e,n){var i=n(798509),o=n(119527),r=n(969925),a=n(752171);e.Z={components:{OneLineLoading:o.Z,TwoLineLoading:r.Z,ChatbotLoading:a.Z},mixins:[i.jB,i.uW,i.Sx],props:{loadingText:{type:String,default:""},line:{type:Number,default:1},isFinish:{type:Boolean,default:!1},loadingPos:{type:Number,default:1},chatBotStyle:{type:Boolean,default:!1},stateList:{type:Array,default:function(){return[]}},loadingHeightAnimateDuration:{type:Number,default:300}},computed:{isOneLineStyle:function(){return 1===this.line}}}},73781:function(t,e,n){var i=n(798509);e.Z={name:"TopQaVoiceButton",mixins:[i.jB,i.uW,i.Sx],props:{refName:{type:String,required:!0},isPlaying:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},reportId:{type:String,default:"voice_button:voice_button​:autoOn"}},computed:{dataReportId:function(){return this.M_itemReportId(this.reportId)}},methods:{handleClick:function(t){this.$emit("click",t)}}}},383659:function(t,e,n){var i,o,r=n(798509),a=n(91942),s=n(411795),c=n(434011),l=n(307886),u=n(984928),d=n(612303),h=n(691409),f=n(142862),p=n(19013),m=n(793299),v=n(176068),y=n(75195),g=n(178113),b=n(420629),_=n(439508),S=n(461788),I=n(372973),w=n(166656),x=n(834234),T=n(975110),C=n(20881),k=n(684266);function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function R(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}}e.Z={components:{MarkdownContent:a.Z,HeightAnimate:s.Z,CollapseContainer:c.Z,UniversalSource:l.Z,SubItemsWrap:T.Z,MoreTag:m.Z,ThinkContainer:y.Z,ThinkButton:g.Z,MixedChatbotSource:w.Z,MixedChatbotSubItems:x.Z},mixins:[r.jB,r.uW,r.Sx,d.Z,S.Z],inject:{selectionDataList:{default:function(){return[]}},onClickSelectionData:{default:function(){return function(){}}},topQAIsVisible:{default:function(){return function(){return!1}}},topQAInitHeight:{default:0},topQAFontSize:{default:"var(--FONT-M)"},topQALineHeight:{default:1.6},mixedBoxChatbotCtx:{default:function(){return null}},mixedBoxChatbotSubBoxIsLastBox:{default:function(){return function(){return!1}}},topQANewMoreTagStyle:{default:!1},topQARealTimeReport:{default:function(){return function(){}}}},props:{think:{type:String,default:""},answer:{type:String,default:""},expandHtml:{type:String,default:""},isSyncCache:{type:Boolean,default:!1},reference:{type:Object,default:function(){return null}},isFinish:{type:Boolean,default:!1},isAnswerFinish:{type:Boolean,default:!1},subItems:{type:Array,default:function(){return[]}},showCompleteThink:{type:Boolean,default:!1},boxesJson:{type:Object,default:function(){return{}}},statusFlag:{type:Number},getTypeWriter:{type:Function,default:function(){}},isSubItemsShowWhenFull:{type:Boolean,default:!1},isCalculateHeightMode:{type:Boolean,default:!1},subItemsWording:{type:String,default:""}},data:function(){return{hasClickCompleteThink:!1,unfoldMarginTop:0,unfoldInnerMarginTop:0,unfoldTitleMarginTop:0,subItemsHeight:0,forceHideSubItems:!1,reportDataCache:{answer:{reporter:(0,p.x)({reportLogId:31863,time:300,onlyReportLast:!0})},think:{reporter:(0,p.x)({reportLogId:31863,time:300,onlyReportLast:!0})}}}},computed:(i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},(0,b.Se)({onlyRemainTopQABox:"result/self/onlyRemainTopQABox"})),o=(o={isCompose:function(){return!this.mixedBoxChatbotCtx&&!r.xB.chatbot},subItemsPreRenderWidth:function(){return(0,C.po)()},needPrerenderSubItems:function(){var t;return!this.isChatbot&&(0,C.Ug)(this.source)&&(null===(t=this.subItems)||void 0===t?void 0:t.length)&&!this.mixedBoxChatbotCtx},isFinishStatus:function(){return!!this.isCalculateHeightMode||this.isFinish&&this.isAnswerFinish},answerMarkdownClassList:function(){var t=[];return this.isChatbot&&t.push("markdown--chatbot"),this.isQuarkStyle&&t.push("markdown--quark"),t},canShowClickThink:function(){return this.hasClickCompleteThink&&this.showCompleteThink&&this.isThinkAnimateFinish},disableUnfold:function(){return this.source.disableUnfold||this.onlyRemainTopQABox||this.isCalculateHeightMode||!!this.mixedBoxChatbotCtx},autoUnfold:function(){return this.source.autoUnfold},unfoldMtValue:function(){return r.xB.chatbot?16:12},unfoldInnerMtValue:function(){return r.xB.quarkStyle?4:8},unfoldTitleMtValue:function(){return r.xB.chatbot?32:12},isBigPMarginWhenInit:function(){return!0},totalStyle:function(){return this.isBigPMarginWhenInit?{"--unfold-mt":"".concat(this.unfoldMtValue,"px"),"--unfold-inner-mt":"".concat(this.unfoldInnerMtValue,"px"),"--unfold-title-mt":"".concat(this.unfoldTitleMtValue,"px")}:{}},answerStyle:function(){if(this.isBigPMarginWhenInit)return{};var t={"--unfold-mt":"".concat(this.unfoldMarginTop,"px")};return this.unfoldInnerMarginTop&&(t["--unfold-inner-mt"]="".concat(this.unfoldInnerMarginTop,"px")),this.unfoldTitleMarginTop&&(t["--unfold-title-mt"]="".concat(this.unfoldTitleMarginTop,"px")),t},maxRowCount:function(){return r.xB.chatbot?0:this.source.foldedRows||10},thinkButtonContent:function(){return this.isThinkAnimateFinish?"深度思考已完成":"分析已完成，深度思考中"},isThinkAnimateFinish:function(){return!!this.answer||this.isFinish},isChatbot:function(){return r.xB.chatbot},isQuarkStyle:function(){return r.xB.quarkStyle},hasUniversalSourceRightSlot:function(){return!!this.$slots["universal-source-right"]}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))}),i),watch:{isFinish:{handler:function(t){var e=this;t&&(setTimeout(function(){r.Gc.$emit(r.U3.REFRESH_REPLAY_PANEL)},400),setTimeout(function(){var t,n,i;(0,f.Z)(e.top1_rm_getExposeData({actionType:u.At.TOP_QA_ANSWER_EXPOSE_WHEN_FINISH,reportId:e.source.reportId,extInfo:JSON.stringify({height:(null===(n=e.$refs.answerRef)||void 0===n?void 0:null===(t=n.$el)||void 0===t?void 0:t.getBoundingClientRect().height)||0,lineHeight:(0,I.I)().getTextHeight({text:"测试",fontSize:e.topQAFontSize,lineHeight:e.topQALineHeight,enableCache:!0}),hasClickUnfold:(null===(i=e.$refs.collapseContainerRef)||void 0===i?void 0:i.hasClickUnfold)||!1})}))},0))},immediate:!0},isAnswerFinish:{handler:function(t){var e,n,i,o;if(t&&(null===(e=this.$refs.collapseContainerRef)||void 0===e?void 0:e.$el)&&!(null===(n=this.$refs.collapseContainerRef)||void 0===n?void 0:n.canShowSubItems)&&!(null===(i=this.$refs.collapseContainerRef)||void 0===i?void 0:i.hasClickUnfold)&&(0,C.Ug)(this.source)&&(null===(o=this.subItems)||void 0===o?void 0:o.length)&&!this.mixedBoxChatbotCtx){var r,a,s=(null===(a=this.$refs.collapseContainerRef)||void 0===a?void 0:null===(r=a.$el)||void 0===r?void 0:r.getBoundingClientRect().height)||0,c=this.$refs.collapseContainerRef.initHeight||0;if(s<c&&s+this.subItemsHeight>c){this.forceHideSubItems=!0,this.topQARealTimeReport({actionType:k.o.TOP_QA_DISCARD_SUB_ITEMS_BY_HEIGHT,extInfo:{height:s,initHeight:c,subItemsHeight:this.subItemsHeight}});return}}this.forceHideSubItems=!1}}},methods:{getVisibleAreaInfo:function(){var t,e,n,i,o=this,r=this.V_getVisibleAreaInfo(null===(n=this.$refs.thinkRef)||void 0===n?void 0:n.$el);var a=(null===(t=o.$refs.collapseContainerRef)||void 0===t?void 0:t.hasClickUnfold)?2:(null===(e=o.$refs.collapseContainerRef)||void 0===e?void 0:e.isCollapse)?1:0,s=this.V_getVisibleAreaInfo(null===(i=this.$refs.answerRef)||void 0===i?void 0:i.$el,a?this.$refs.collapseContainerRef.initHeight:void 0);return{thinkStartY:r.startY,thinkEndY:r.endY,answerStartY:s.startY,answerEndY:s.endY,isFold:a}},onClickAppendAsk:function(){var t,e,n=this.M_genClickId({searchId:this.topQASearchIdForReport});this.M_clickReport({clickContent:this.source.questionClosely.title,actionType:u.At.AI_SEARCH,reportId:this.source.questionClosely.reportId,clickId:n});var i=this.M_composeParentSid({t:u.X$.MMSEARCH_TYPE_MIXER_QUESTION_CLOSELY_JUMP_AISEARCH,s:this.topQASearchIdForReport,rid:this.data.vueRid,kv:{clickId:n}});this.M_serviceSearchGo({jumpInfo:{jumpType:u.sn.AI_SEARCH,scene:this.source.questionClosely.scene,chatbotExtParams:{historyReplayData:{conversationId:this.data.vueConversationId,parentSearchID:i,item:{searchId:this.topQASearchIdForServer,modelName:null===(t=this.data.vueChatbotInfo)||void 0===t?void 0:t.modelName,modelType:null===(e=this.data.vueChatbotInfo)||void 0===e?void 0:e.modelType}}},extParams:{chatbotSecond:1}}})},onClickThink:function(){var t=!this.showCompleteThink;this.$emit("show-complete-think:change",t),this.hasClickCompleteThink=!0,t||this.onContentDisappear({textTag:"think"})},onAnswerUnfold:function(){var t,e=this;this.$emit("tap:unfold"),this.$emit("speed-change",{fast:!1});var n=/<(ul|ol)/.test((null===(t=this.$refs.answerRef)||void 0===t?void 0:t.textToShow)||"")?8:12;r.xB.quarkStyle&&(n=this.unfoldMtValue),(0,h.jt)({newValueList:[n,this.unfoldInnerMtValue,this.unfoldTitleMtValue],oldValueList:[0,0,0],duration:100,handler:function(t){var n,i,o=(i=3,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(n,3)||R(n,i)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],s=o[1],c=o[2];e.unfoldMarginTop=a,r.xB.quarkStyle&&(e.unfoldInnerMarginTop=s,e.unfoldTitleMarginTop=c)}}),setTimeout(function(){var t;null===(t=e.$refs.answerRef)||void 0===t||t.checkContentExpose()},100)},onTapComponent:function(t){for(var e,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if("underline-span"===t){;this.onClickSelectionData.apply(this,function(t){if(Array.isArray(t))return A(t)}(e=i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||R(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},markdownToHtml:function(t,e){var n,i=this.$refs.answerRef||this.$refs.thinkRef;return null==i?void 0:null===(n=i.markdownToHtml)||void 0===n?void 0:n.call(i,t,e)},getIsDescFull:function(){var t;return null===(t=this.$refs.collapseContainerRef)||void 0===t?void 0:t.isCollapse},onCollapseChange:function(t){var e=this;if(this.$nextTick(function(){var t;null===(t=e.$refs.answerRef)||void 0===t||t.checkContentExpose()}),t){var n=this.$refs.collapseContainerRef;n&&!n.hasClickUnfold&&this.$emit("speed-change",{fast:!0})}},cacheVisible:function(t,e){this.$set(this.reportDataCache[t],"visible",e)},getIsVisible:function(t){var e,n;return null!==(n=null===(e=this.$refs["".concat(t,"Ref")])||void 0===e?void 0:e.isVisible)&&void 0!==n&&n},onContentDisappear:function(t){var e=t.textTag;if(!this.reportDataCache[e].hasReportLeave)(0,f.Z)(this.top1_rm_getExposeData({actionType:u.At.TOP_ONE_QA_FIRST_INVISIBLE,reportId:this.source.reportId,extInfo:JSON.stringify({type:"think"===e?"think":"ans"})}),{reportLogId:31863}),this.$set(this.reportDataCache[e],"hasReportLeave",!0)},onContentExpose:function(t){var e,n,i,o,a,s,c,l,d=this,h=t.height,p=t.html,m=t.textTag,y=t.totalHeight;if(this.topQAIsVisible&&!this.topQAIsVisible()){console.error("onContentExpose box invisible",this.topQAIsVisible());return}if(!this.reportDataCache[m].hasReportFirstChar&&("answer"===m&&(this.answer||this.expandHtml)||"think"===m&&this.think)&&((0,f.Z)(this.top1_rm_getExposeData({actionType:u.At.TOP_ONE_QA_ANSWER_FIRST_CHAR_EXPOSE,reportId:this.source.reportId,extInfo:JSON.stringify({is_visible:null!==(s=this.reportDataCache[m].visible)&&void 0!==s?s:this.getIsVisible(m),type:"think"===m?"think":"ans"})}),{reportLogId:31863}),this.$set(this.reportDataCache[m],"hasReportFirstChar",!0)),!(null===(e=this.$refs.collapseContainerRef)||void 0===e?void 0:e.hasCollapseCalcInit)&&"answer"===m)return;var g=this.reportDataCache[m].lastReportData||{},b="answer"===m&&(null===(n=this.$refs.collapseContainerRef)||void 0===n?void 0:n.isCollapse)&&!(null===(i=this.$refs.collapseContainerRef)||void 0===i?void 0:i.hasClickUnfold)&&!this.disableUnfold;if(b&&g.isFold)return;var S=b?this.$refs.collapseContainerRef.initHeight:Math.max(g.exposeHeight||0,h),I="think"===m?this.isThinkAnimateFinish:(!b||!!r.xB.chatbot)&&this.isAnswerFinish;if(g.exposeHeight!==S||g.html!==p||g.isFinish!==I){this.$set(this.reportDataCache[m],"lastReportData",{exposeHeight:S,isFold:b,html:p,isFinish:I});for(var w=Array.from((p||"").replace(_.AI,"")),x=[],T=0;T<w.length;){var C=w.slice(T,T+300).join("");x.push(C),T+=300}var k=Date.now(),A=!!S&&(2>=Math.abs(S-y)||S>=y),R=null!==(c=null===(o=this.getTypeWriter(m))||void 0===o?void 0:o.getTypeTime())&&void 0!==c?c:0,O=null!==(l=null===(a=this.getTypeWriter(m))||void 0===a?void 0:a.getTypingLength())&&void 0!==l?l:0;this.reportDataCache[m].reporter.report(x.map(function(t,e){return d.top1_rm_getExposeData({actionTimeStamp:k,actionType:"think"===m?u.At.QA_THINK_EXPOSE:u.At.QA_EXPOSE,extInfo:JSON.stringify({isFold:!r.xB.chatbot&&b,html:t,isFinish:I,isFullExp:A,exposeHeight:S,totalHeight:y,pageNum:e+1,totalPage:x.length,statusFlag:d.statusFlag||v.dA.StatusFlagSuccess,length:"think"===m?Array.from(d.think).length:Array.from(d.answer).length,typewriterTime:R,typewriterLength:O}),reportId:d.source.reportId})})),I&&A&&(0,f.Z)(this.top1_rm_getExposeData({actionType:"think"===m?u.At.TOP_QA_THINK_FULL_EXPOSE:u.At.TOP_QA_ANSWER_FULL_EXPOSE,reportId:this.source.reportId}),{reportLogId:31863})}}}}},662142:function(t,e,n){var i=n(798509),o=n(592992),r=n(737133),a=n(372973),s=n(912139),c=n(757537),l=n(984928),u=n(142862),d=n(849996);function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}e.Z={components:{videoCard:o.Z,UiScroll:r.Z,UiIconLoading:s.Z,MarkdownText:c.Z,SubItems:d.Z},mixins:[i.jB,i.uW,i.Sx],props:{videoSource:{type:Object,default:function(){return{}}},stepItems:{type:Array,default:function(){return[]}},playRange:{type:Object,default:function(){return{}}},isFinish:{type:Boolean,default:!1},duration:{type:Number,default:0},markdownText:{type:String,default:""},isTypewriterFinish:{type:Boolean,default:!1},hasText:{type:Boolean,default:!1},isSyncCache:{type:Boolean,default:!1},query:{type:String,default:""},subItems:{type:Array,default:function(){return[]}}},data:function(){return{canScroll:!0,currentIndex:0,currentTime:0,isInAutoScroll:!1,videoReportId:"".concat(this.videoSource.docID,":feed:").concat(i.Zr.getRandom(6)),hasReportPlayEnd:!1}},computed:{showItems:function(){var t,e=this.stepItems||[];if(this.isFinish)return e;return((function(t){if(Array.isArray(t))return h(t)})(t=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{isLoading:!0}])},progressStyle:function(){var t=Math.max(this.currentTime-1e3*this.startTime,0),e=(this.endTime||this.duration)-this.startTime;return{width:"".concat(Math.min(t/(1e3*e)*100,100),"%")}},startTime:function(){var t,e,n=(this.stepItems||[])[0];return(null!==(e=null==n?void 0:n.startTime)&&void 0!==e?e:null===(t=this.playRange)||void 0===t?void 0:t.startTime)||0},endTime:function(){var t;return(null===(t=this.playRange)||void 0===t?void 0:t.endTime)||0},playEndReportData:function(){return{isFinish:this.isFinish,currentIndex:this.currentIndex}}},watch:{playEndReportData:{handler:function(){this.isFinish&&this.currentIndex===this.stepItems.length-1&&this.reportPlayEnd()},deep:!0,immediate:!0}},methods:{getItemWidth:function(t){if(!t.title)return 24;var e=(0,a.I)(),n=(null===(d=/^[0-9. ]+/.exec(t.title))||void 0===d?void 0:null===(u=d[0])||void 0===u?void 0:u.length)||0,i=0,o=0,r=Array.from(t.title.slice(n)),s=!0,c=!1,l=void 0;try{for(var u,d,h,f=r[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var p=h.value;if(/[！@#¥%$^…&*（）\-+=/？。.，；：\\～【】《》 ]/.test(p)?o+=.5:/[a-zA-Z0-9]/.test(p)?o+=.5:o+=1,i+=1,o>=5)break}}catch(t){c=!0,l=t}finally{try{!s&&null!=f.return&&f.return()}finally{if(c)throw l}}var m=t.title.slice(0,n)+r.slice(0,i).join("");return e.getTextWidth({text:m,fontSize:"var(--FONT-M)"})+24},onClickItem:function(t,e){var n;this.M_clickReport({actionType:l.At.CLICK_CHOOSE,reportId:this.getItemReportId(e)}),this.currentIndex=e,this.scrollTo(e),null===(n=this.$refs.videoPlayerRef)||void 0===n||n.seek(t.startTime)},scrollTo:function(t){var e;null===(e=this.$refs.scrollRef)||void 0===e||e.scrollTo(t)},onCurrentTimeUpdate:function(t){var e=this.stepItems||[],n=this.currentIndex;this.checkPlayPosition(t),e.forEach(function(e,i){t>=1e3*e.startTime&&(n=i)}),n!==this.currentIndex&&(this.currentIndex=n,this.canScroll&&(this.isInAutoScroll=!0,this.scrollTo(n))),this.currentTime=t},onHandleVideoEvent:function(t){"loadedMetaData"===t&&this.checkPlayPosition(this.currentTime)},checkPlayPosition:function(t){var e,n,i=this.startTime,o=this.endTime;i&&t<1e3*i&&(null===(e=this.$refs.videoPlayerRef)||void 0===e||e.seek(i)),o&&t>1e3*o&&(null===(n=this.$refs.videoPlayerRef)||void 0===n||n.seek(i),this.reportPlayEnd())},onTapVideoCard:function(){var t=this.M_clickReport({actionType:l.At.VIDEO_ACC_FEED,reportId:this.videoReportId}),e={currentTime:this.currentTime,videoInfo:this.videoSource,title:this.query,stepItems:this.stepItems,playRange:this.playRange,reportOption:t};this.M_serviceSearchGo({jumpInfo:{jumpType:l.sn.LITE_APP,query:{json:e},appId:"wxalite662c58496ffa1efd119b5eb4ea45a3ba",page:"pages/video-anchor/video-anchor"}})},onScroll:function(){var t=this;if(!this.isInAutoScroll)this.canScroll=!1,this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(function(){t.canScroll=!0},3e3),this.scrollRptTimer&&clearTimeout(this.scrollRptTimer),this.scrollTimer=setTimeout(function(){t.M_clickReport({actionType:l.At.HOR_TOUCHMOVE,ban12721Report:!0,banAdReport:!0,reportId:t.getItemReportId(t.currentIndex)})},300)},onScrollEnd:function(){if(this.isInAutoScroll){this.isInAutoScroll=!1;return}},onSpeedChange:function(t){this.$emit("speed-change",t)},getItemReportId:function(t){return!this.indexRandomMap&&(this.indexRandomMap=new Map),!this.indexRandomMap.has(t)&&this.indexRandomMap.set(t,i.Zr.getRandom(6)),"".concat(encodeURIComponent(this.showItems[t].title),":filter_option:").concat(this.indexRandomMap.get(t))},reportPlayEnd:function(){if(!this.hasReportPlayEnd)this.hasReportPlayEnd=!0,(0,u.Z)(this.M_getCommonReportInfo({actionType:l.At.VIDEO_AUTO_PLAY_END,itemInfos:[this.videoReportId],itemPoses:["0:".concat(this.M_getItemType(this.videoReportId))]}).reportOption)}}}},116225:function(t,e,n){var i=n(798509),o=n(748750),r=n(984928);e.Z={mixins:[i.jB,i.uW,i.Sx],props:{reference:{type:Object,default:function(){return{}}}},computed:{referenceList:function(){var t,e;return(null===(t=this.reference)||void 0===t?void 0:t.type)===4?[this.reference]:(null===(e=this.reference)||void 0===e?void 0:e.type)===5&&this.reference.list||[]}},methods:{onTapReference:function(){this.M_serviceSearchGo({pop:{type:o.f.popChatbotMixedBoxReference,popTitle:"参考资料",referenceList:this.referenceList}}),this.M_clickReport({clickContent:"".concat(this.referenceList.length),actionType:r.At.CLICK_SHOW_DIALOG,reportId:this.M_getReportId(!0)})}}}},285069:function(t,e,n){var i=n(798509),o=n(538944),r=n(852193);e.Z={components:{SingleSource:o.Z,MultipleSource:r.Z},mixins:[i.jB,i.uW,i.Sx],props:{reference:{type:Object,default:function(){return{}}}}}},448633:function(t,e,n){var i=n(798509),o=n(849996);e.Z={components:{SubItems:o.Z},mixins:[i.jB,i.uW,i.Sx],props:{subItems:{type:Array,default:function(){return[]}}},computed:{isChatbot:function(){return i.xB.chatbot}}}},621115:function(t,e,n){var i,o=n(798509),r=n(578248),a=n(253008),s=n(309131),c=n(62350),l=n(792578),u=n(36278),d=n(683755),h=n(494937),f=n(420629),p=n(984537),m=n(116746),v=n(984928),y=n(142862),g=n(728223),b=n(74614),_=n(307886),S=n(684266),I=n(736312),w=n(735055),x=n(470948),T=n(851061),C=n(743363),k=n(214351),A=n(977768),R=n(734758),O=n(176068),P=n(921554),E=n(271323),B=n(84762),Z=n(659124),F=n(34446),L=n(163433),D=n(234031),M=n(521125),H=n(779716),j=n(659274),N=n(144007),q=n(372973),$=n(706786),U=n(513878),Q=n(439502),G=n(844219),V=n(370058),z=n(321773),W=n(20881),K=n(968168),J=n(446916),Y=n(16726);function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function tt(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function te(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){tt(r,i,o,a,s,"next",t)}function s(t){tt(r,i,o,a,s,"throw",t)}a(void 0)})}}function tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ti(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){tn(t,e,n[e])})}return t}function to(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function tr(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var ta=(tn(i={},v.vO.ios,402667553),tn(i,v.vO.android,671103032),tn(i,v.vO.unifiedWindows,4065593088),tn(i,v.vO.unifiedMac,4066641664),tn(i,v.vO.unifiedOhos,4071884544),i),ts=new m.J({unknown:0,TextAnswer:1,VideoAnswer:2,3:"VideoAnswer"});e.Z={components:{Community:b.Z,HeightAnimateProvider:u.Z,TopQaHeader:s.Z,TopQaLoading:c.Z,VideoAnswer:h.Z,TextAnswer:d.Z,Feedback:l.Z,UniversalSource:_.Z,MorePopOver:x.Z,UnderlineSelection:T.Z,PosterUnderline:C.Z,TopQaBottom:R.Z,ChatbotBottom:P.Z,QuarkBottom:j.Z,FriendListOut:$.Z,FriendListItem:U.Z,MixedChatbotBottom:J.Z,StopAnswerButton:z.M},mixins:[o.jB,o.uW,o.Sx,A.Z,E.Z,D.Z,Q.Z,G.Z],inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}},mixedBoxChatbotCtx:{default:function(){return null}},mixedBoxChatbotGetContentMaxHeight:{default:function(){return function(){return 0}}}},provide:function(){var t=this,e=this;return{loadingLine:this.loadingLine,topQARealTimeReport:this.topQARealTimeReport,topQASearchIdForReport:this.topQASearchIdForReport,topQASearchIdForServer:this.topQASearchIdForServer,topQALineHeight:this.totalLineHeight,topQAFontSize:this.totalFontSize,topQAIsVisible:function(){return t.v_isVisible},get topQAInitHeight(){return e.topQAInitHeight},get topQAInitContentHeight(){return e.topQAInitContentHeight},topQARootElement:function(){return e.$refs.containerRef},topQAHideSearchLinkMagnifying:this.hideSearchLinkMagnifying,topQANewMoreTagStyle:this.newMoreTagStyle}},data:function(){return{dispose:null,canExpand:!0,rspReportCache:{},initTime:Date.now(),hasDestroy:!1,debugInfoText:"",debugSource:{},answerType:O.oK.unknown,isBoxVisible:!0,initResponse:null,cgiStaticInfo:{},staticInfo:{},cgiStaticInfoHandleTimer:null,loadingTimer:null,loadingTextIdx:-1,isLoading:!0,hasShowHardcodeText:!1,isFinish:!1,isAnswerFinish:!1,hasRequestShare:!1,canShare:!0,disableInteract:!1,canShowButtonList:!0,modelType:null,hasUpdateToStoreAfterFirstToken:!1,hasEmitStart:!1,hasReportInVisible:!1,posterHtmlInfo:null,isSupportAiForward:!1,hasTerminate:!1,loadingStateList:[],mainEventCenter:this.createNewMainEventCenter(),resultFirstRequestId:"",debounceReport34426Map:{},allowDeepResearch:!1,statusFlag:0,isHideStopAnswerBtn:!1,pageGlobal:{},visibleAreaInfo:{},refreshVisibleAreaInfoTimer:null,StatusFlag:O.dA,isCalculateHeightMode:(0,W.vq)(this.source)&&!this.mixedBoxChatbotCtx,totalHeightMeasure:0,showDeepResearchTeachPop:!1,canShowStopBtn:!1,hasReportFirstToken:!1}},computed:ti({visibleReportActionValue:function(){var t,e,n,i,o=(0,q.I)().getTextHeight({text:"测试",fontSize:this.totalFontSize,lineHeight:this.totalLineHeight,enableCache:!0});return encodeURIComponent(JSON.stringify({vs_height:"".concat(Math.floor(null!==(t=this.visibleAreaInfo.thinkStartY)&&void 0!==t?t:0),"_").concat(Math.floor(null!==(e=this.visibleAreaInfo.thinkEndY)&&void 0!==e?e:0),"_").concat(Math.floor(o),"_").concat(Math.floor(null!==(n=this.visibleAreaInfo.answerStartY)&&void 0!==n?n:0),"_").concat(Math.floor(null!==(i=this.visibleAreaInfo.answerEndY)&&void 0!==i?i:0),"_").concat(Math.floor(o)),isFold:this.visibleAreaInfo.isFold}))},canFetchResearchEntry:function(){var t,e;return this.isChatBot&&1===this.typePos&&1===this.resultObj.data.length&&!((null===(t=this.source.syncResp)||void 0===t?void 0:t.isCache)&&!(null===(e=this.source.syncResp)||void 0===e?void 0:e.continueFlag))},maybeCanShowResearchEntry:function(){return this.isAnswerFinish&&this.canFetchResearchEntry},canShowDeepResearchEntry:function(){return this.maybeCanShowResearchEntry&&this.allowDeepResearch},topQAInitHeight:function(){var t,e,n=this.topQAInitContentHeight;if(!n)return n;var i=(null===(t=this.source.modelSwitch)||void 0===t?void 0:t.modelType)||(null===(e=this.data.vueChatbotInfo)||void 0===e?void 0:e.modelType);return n+("fast"!==i&&i?this.topQABeforeHeight:0)},topQABeforeHeight:function(){return(0,q.I)().getTextHeight({text:"深度思考中",fontSize:"var(--FONT-M)",enableCache:!0})+8},topQAInitContentHeight:function(){var t=this,e=(null===(r=this.source.modelSwitch)||void 0===r?void 0:r.modelType)||(null===(a=this.data.vueChatbotInfo)||void 0===a?void 0:a.modelType),n=!("fast"===e||!e);if(this.mixedBoxChatbotGetContentMaxHeight())return n?this.mixedBoxChatbotGetContentMaxHeight()-this.topQABeforeHeight:this.mixedBoxChatbotGetContentMaxHeight();var i=function(){var e,n,i=(0,W.po)();return((null===(n=t.source)||void 0===n?void 0:null===(e=n.voicePlaying)||void 0===e?void 0:e.ttsid)&&o.xB.isSupportTtsVoice||o.xB.isSupportClientVoice)&&(i-=4+24*Math.min(1.4,o.xB.fontRatio)),(0,q.I)().getTextHeight({text:t.source.query||t.source.title,fontSize:"var(--FONT-L)",lineHeight:t.totalLineHeight,width:i,enableCache:!0})};if(!this.isChatBot){if(this.isCalculateHeightMode)return 1;if(this.onlyRemainTopQABox){var r,a,s,c=i(),l=null===(s=this.Container_GetHeaderNode())||void 0===s?void 0:s.getBoundingClientRect().height;return o.xB.quarkStyleV2&&l?window.innerHeight-l-c-240:c?.6*window.screen.height-c:.4*window.screen.height}if(!o.xB.quarkStyle&&!n&&!(0,W.Ug)(this.source)){var u,d=Math.floor((this.source.foldedRows||10)/(null!==(u=o.xB.fontRatio)&&void 0!==u?u:1));return(0,q.I)().getTextHeight({text:"测试",fontSize:this.totalFontSize,lineHeight:this.totalLineHeight,enableCache:!0})*d}var h=0;if((0,W.Ug)(this.source)){var f,p=this.Container_GetHeaderHeight()||0,m=(null===(f=document.querySelector(".unit"))||void 0===f?void 0:f.getBoundingClientRect().height)||0,v=Math.min(64*o.xB.fontRatio,70.4)+o.Zr.getSimilarFontHeight(14,1.4)+6+28;h=window.innerHeight-p-m-i()-2*v/3-140}else{var y=(0,q.I)().getTextHeight({text:"测试",fontSize:this.totalFontSize,lineHeight:this.totalLineHeight,enableCache:!0}),g=Math.floor((window.screen.height*(n?.5:.42)-i())/y);h=y*g}return(0,W.vq)(this.source)&&this.totalHeightMeasure&&this.totalHeightMeasure<h?this.totalHeightMeasure:(0,W.Ug)(this.source)&&!n?h+this.topQABeforeHeight:h}return 0},totalStyle:function(){return{"--top-qa-line-height":this.totalLineHeight}},totalFontSize:function(){return o.xB.chatbot||this.mixedBoxChatbotCtx||o.xB.quarkStyle?"var(--FONT-L)":"var(--FONT-M)"},totalLineHeight:function(){return this.mixedBoxChatbotCtx?1.7:o.xB.quarkStyle?1.8:1.6},bottomEntryReportId:function(){return"%E6%B7%B1%E5%BA%A6%E6%80%9D%E8%80%83:aisearch"},queryToShare:function(){var t=(this.data.vueQuery||o.xB.query).replace(/\n/g," ").replace(/\s+/g," ");return(t.startsWith("#")||t.startsWith("＃"))&&+o.xB.queryString.fromTagSearch?t.slice(1):t},snapshotSearchId:function(){var t;return(null===(t=this.data.vueChatbotInfo)||void 0===t?void 0:t.interactSearchId)||this.data.vueSearchId||o.xB.searchId},canShowCommunity:function(){return!!(0,a.dW)(this.source.interactInfo)&&this.isChatBot&&!1},canShowBottom:function(){if(this.mixedBoxChatbotCtx)return!1;if(o.xB.isAiSummary&&this.source.disableUnfold||this.onlyRemainTopQABox&&o.xB.quarkStyle)return!!this.isAnswerFinish||!1;return!o.xB.chatbot},isChatBot:function(){return!!o.xB.chatbot},isQuarkStyle:function(){return o.xB.quarkStyle},isQuarkStyleV2:function(){return o.xB.quarkStyleV2||"v2"===o.xB.chatbotExtParams.shareStyle},isChatbotLoadingStyle:function(){return this.isChatBot||!!this.topQAInitHeight},isSnapshot:function(){return this.isAICardType},bottomTips:function(){return o.xB.isTopQAOrChatbotShare&&this.source.bottomTitle||O.RS},shareData:function(){var t=ta[o.xB.deviceType],e=t&&o.xB.wechatVersion>=t,n=[O.oK.VideoStepAnswer,O.oK.VideoShortAnswer].includes(this.answerType);return{enable:!!this.isAnswerFinish,show:!!(this.canShare&&this.source.shareKey&&e&&!n)}},loadingLine:function(){return 1===this.getExperimentByKey("mmsearch_topqa_loading_style")?2:1},hideSearchLinkMagnifying:function(){return!!this.getExperimentByKey("search_link_hide_magnifying")},newMoreTagStyle:function(){return!!this.getExperimentByKey("mmsearch_qamixer_typingstyle")||2===this.getExperimentByKey("mmsearch_qamixer_enhanceperception")},isButtonAtBottomStyleV2:function(){return!o.xB.chatbot&&!o.xB.isCircleToSearch},loadingHeightAnimateDuration:function(){return 100},answerComponent:function(){return ts[this.answerType]},topQASearchIdForReport:function(){return this.data.vueSearchId||o.xB.searchId},topQASearchIdForServer:function(){var t,e;return(null===(e=this.source.cgi)||void 0===e?void 0:null===(t=e.params)||void 0===t?void 0:t.searchId)||this.data.searchID||this.data.vueSearchId||o.xB.searchId},isLoadingTextOutOfRange:function(){var t,e;return(null===(e=this.staticInfo)||void 0===e?!!void 0:null===(t=e.infos)||void 0===t?!!void 0:!!t.length)&&this.loadingTextIdx>=this.staticInfo.infos.length},loadingText:function(){if(!(null===(t=this.staticInfo.infos)||void 0===t?void 0:t.length)||this.loadingTextIdx<0)return 1!==this.loadingLine||this.isChatbotLoadingStyle?void 0:"搜索信息";if(this.isLoadingTextOutOfRange)return"整理答案";var t,e=this.staticInfo.infos[this.loadingTextIdx];return this.isChatbotLoadingStyle?e.docTitle:e.title},isQuarkStyleBackCardStyle:function(){var t;return o.xB.quarkStyle&&(this.typePos>1||!!(null===(t=o.xB.localAccExtParams.find(function(t){return"localAccInfo"===t.key}))||void 0===t?void 0:t.textValue))},allowLoadStopBtnComponent:function(){return!this.isHideStopAnswerBtn&&!o.xB.chatbot&&!this.isAnswerFinish&&!(0,W.Mh)(this.source)&&!this.mixedBoxChatbotCtx}},(0,f.rn)({startRequestTime:function(t){var e=o.xB.queryString.pRequestId,n=t.result.searchStartTimeInfo.startTimestamp;if(e&&/^\d+$/.test(e)){var i=Number(e);if(n&&i>n-5e3)return i}return n},receiveTimestamp:function(t){var e=t.result.searchEndTimeInfo;return e.searchId===this.topQASearchIdForReport?e.endTimestamp:0},isOpeningHalfScreenSearch:function(t){return t.result.isOpeningHalfScreenSearch}}),(0,f.Se)({modelChoose:"chatbot/modelChoose",onlyRemainTopQABox:"result/self/onlyRemainTopQABox"})),watch:{allowLoadStopBtnComponent:{handler:function(t){var e=this;t?setTimeout(function(){e.canShowStopBtn=!0},100):this.canShowStopBtn=!1},immediate:!0}},created:function(){var t,e,n,i=this;(0,I.i9)({apiName:"getPageGlobal"}).then(function(t){t.success&&(i.pageGlobal=t.result,(0,Y.U)("pageGlobal",i.pageGlobal))});var r=this.source||{},a=r.cgi,s=r.syncResp;this.mainEventCenter.getResponse()&&this.handleResponse(this.mainEventCenter.getResponse()),s&&(this.topQARealTimeReport({actionType:S.o.TOP_QA_HANDLE_SYNC_RESP,extInfo:{continueFlag:s.continueFlag}}),this.mainEventCenter.handleResponse(s,K.M.Sync));var c=Date.now(),l=[{requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.ReceiveSearchResultToCompCreated,stepType:M.t9.End,actionTimestampMs:c},{requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.CompCreatedToGetFirstToken,stepType:M.t9.Start,actionTimestampMs:c}],u=(null===(t=this.data.vueChatbotInfo)||void 0===t?void 0:t.receiveTimestamp)||this.receiveTimestamp;if(u&&(l.push({requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.SearchStartToReceiveSearchResult,stepType:M.t9.End,actionTimestampMs:u}),l.push({requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.ReceiveSearchResultToCompCreated,stepType:M.t9.Start,actionTimestampMs:u})),(0,M.ZP)(l),this.typePos!==(null===(e=this.resultObj.data)||void 0===e?void 0:e.length)&&o.xB.chatbot&&!this.isFinish){this.$nextTick(function(){i.onTerminate()});return}a&&(this.updateDataToStore({resultKey:null===(n=a.params)||void 0===n?void 0:n.resultKey}),this.mainEventCenter.start(a),this.startLongPollingStatic(a),this.emitStart())},mounted:function(){var t,e=this;this.resultFirstRequestId=this.$store.state.result.requestId||this.$store.state.result.previousRid||this.$store.state.result.doneRequestId,this.initTime=Date.now();var n=(t=0,function(){return t?t:t=(e.Container_GetHeaderHeight()||0)+(o.xB.quarkStyleV2?o.Zr.unitHeightRef().value:0)}),i=function(){var t,i=null===(t=e.$refs.containerRef)||void 0===t?void 0:t.getBoundingClientRect();if(!!i){var r=i.bottom-(o.xB.quarkStyle||o.xB.quarkStyleV2?n():o.Zr.unitHeightRef().value)>0;(!e.canExpand||e.isLoading)&&!e.topQAInitHeight&&(e.canExpand=r),r!==e.isBoxVisible&&(0,Y.U)("isBoxVisible",r),e.isBoxVisible=r}};window.addEventListener("scroll",i,!1),o.Gc.$on(o.U3.CONTAINER_BODY_SCROLL,i),window.addEventListener("resize",i,!1);var r=function(t){var n=t.shareKey,i=function(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++){if(n=r[i],!(e.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}}return o}(t,["shareKey"]);e.source.shareKey===n&&e.showMore(i)},a=function(){e.posterHtmlInfo=null};o.Gc.$on(o.U3.ON_CHATBOT_SHOW_MORE,r),o.Gc.$on(o.U3.ON_CHAT_POSTER_SUCCESS,a),o.Gc.$on(o.U3.TOP_QA_TERMINATE,this.onTerminate),this.dispose=function(){window.removeEventListener("scroll",i,!1),window.removeEventListener("resize",i,!1),o.Gc.$off(o.U3.ON_CHATBOT_SHOW_MORE,r),o.Gc.$off(o.U3.ON_CHAT_POSTER_SUCCESS,a),o.Gc.$off(o.U3.TOP_QA_TERMINATE,e.onTerminate),o.Gc.$off(o.U3.CONTAINER_BODY_SCROLL,i)},this.loadNextLoadingText(),(this.isChatBot||this.source.enableFingerSearch&&o.FP.isSupportTopQAFingerSearch)&&(0,k.P)().then(function(){e.isSupportAiForward=!0}),this.v_startWatchVisible(this.$el,function(t){var n,i,r,a;!t&&!e.hasReportInVisible&&((0,y.Z)(e.M_getCommonReportInfo({actionType:v.At.TOP_ONE_QA_FIRST_INVISIBLE,itemInfos:[e.source.reportId],itemPoses:["0:".concat(e.M_getItemType(e.source.reportId))],extInfo:JSON.stringify({type:"box"})}).reportOption,{reportLogId:31863}),e.hasReportInVisible=!0),t?null===(i=e.$refs.underlineSelectionRef)||void 0===i||i.onShow():null===(n=e.$refs.underlineSelectionRef)||void 0===n||n.onHide(),!o.xB.chatbot&&!e.isOpeningHalfScreenSearch&&!e.mixedBoxChatbotCtx&&(null===(a=e.$refs.answerRef)||void 0===a||null===(r=a.onSpeedChange)||void 0===r||r.call(a,{fast:!t,includeThink:!0})),e.topQARealTimeReport({actionType:S.o.TOP_QA_INTERSECTING_CHANGE,extInfo:{isVisible:t}})}),this.$nextTick(function(){e.refreshVisibleAreaInfo()}),this.refreshVisibleAreaInfoTimer=setInterval(function(){e.refreshVisibleAreaInfo()},1e3),this.isCalculateHeightMode&&this.$nextTick(function(){e.$nextTick(function(){var t,n,i=null===(t=e.$refs.heightAnimateProviderRef)||void 0===t?void 0:t.$el;(null==i?void 0:null===(n=i.children)||void 0===n?void 0:n.length)&&(i=i.children[0]);var o=null==i?void 0:i.getBoundingClientRect().height;e.totalHeightMeasure=o,e.isCalculateHeightMode=!1,e.answerKey="".concat(Math.random())})})},beforeDestroy:function(){var t;this.refreshVisibleAreaInfoTimer&&clearInterval(this.refreshVisibleAreaInfoTimer),this.hasDestroy=!0,null===(t=this.dispose)||void 0===t||t.call(this),(0,Y.U)("destroyed",this.docReportId);p.Z.topQABoxData.stop_infer&&this.topQASearchIdForServer!==p.Z.topQAReportedSearchId&&(r.ZP.getCommonCgiData({cgiName:"TopQAResultReport",data:ti({},p.Z.topQABoxData)}),p.Z.topQABoxData={}),this.mainEventCenter.destroy()},methods:{refreshVisibleAreaInfo:function(){var t,e;if(!!this.$refs.answerRef)this.visibleAreaInfo=(null===(e=this.$refs.answerRef)||void 0===e?void 0:null===(t=e.getVisibleAreaInfo)||void 0===t?void 0:t.call(e))||{}},getExperimentByKey:function(t){var e;return Number(null===(e=(this.source.experiment||[]).find(function(e){return e.key===t}))||void 0===e?void 0:e.value)},onForward:function(t){t.posterData;var e=t.selectionData,n=t.clickReportOption,i=void 0===n?{}:n;return te(function(){var t,n,r,a,s,c;return tr(this,function(l){switch(l.label){case 0:if(!this.isAnswerFinish)return o.Gc.$emit(o.U3.showToast,{action:g.g.pure,text:"回答生成完成后才能转发"}),[2];return[4,this.postUnderlineShare(e)];case 1:return r=l.sent(),s=(a=(null===(n=this.$refs.answerRef)||void 0===n?void 0:null===(t=n.getAllHtml)||void 0===t?void 0:t.call(n,{selectionDataList:[e]}))||{}).thinkHtml,c=a.answerHtml,this.answerHtml=c,this.posterHtmlInfo={thinkHtml:s,answerHtml:c,shareInfo:{shareId:r,query:this.queryToShare,clickReportOption:i,parentSearchID:this.M_composeParentSid({t:v.X$.MMSEARCH_TYPE_AISEARCH_SINGLE_QUESTION,s:this.topQASearchIdForReport})}},[2]}})}).apply(this)},onFavorites:function(t){var e=t.selectionData,n=this.queryToShare;this.requestToSvrToSaveData();var i="aikey_".concat(n,"-").concat(Math.random()),o=this.getShareParams("favoriteAction",{title:"AI搜索 - ".concat(n),scene:v.RL.MMSEARCH_SCENE_AI_SEARCH_FAVOR_JUMP,parentType:v.X$.MMSEARCH_TYPE_TOPQA_FOR_MOMENT});o.query=to(ti({},o.query),{desc:void 0,key:i,excerptList:[{excerptKey:i,text:e.text,url:"pages/auto-jumping/auto-jumping"}]}),r.ZP.openLiteApp(ti({},o))},postUnderlineShare:function(t){return te(function(){return tr(this,function(e){switch(e.label){case 0:if(!t)return[2,""];return[4,(0,w.s1)({shareSearchIds:[this.topQASearchIdForServer],conversationId:this.data.vueConversationId,underscoreJson:JSON.stringify(to(ti({},t),{greenText:o.xB.chatbotExtParams.greenText,noGreen:!0}))})];case 1:return[2,e.sent().shareId]}})}).apply(this)},requestToSvrToSaveData:function(){if(!this.hasRequestShare)this.hasRequestShare=!0,r.ZP.getCommonCgiData({cgiName:"TopQAShareAction",data:{shareKey:this.source.shareKey}})},emitStart:function(){if(!this.hasEmitStart)o.Gc.$emit(o.U3.TOP_QA_START,{searchId:this.topQASearchIdForReport}),this.hasEmitStart=!0},topQARealTimeReport:function(t){var e=this,n=function(t,n){var i=[];t.forEach(function(t){var r={};if(n){var a,s=e.debounceReport34426Map[t.actionType];(null==s?void 0:null===(a=s.extInfoList)||void 0===a?void 0:a.length)&&n&&(s.extInfoList.every(function(t){return"string"==typeof t.extInfo})?r.extInfo=s.extInfoList.map(function(t){return t.extInfo}).join(";"):r.extInfo={extInfoList:s.extInfoList},s.extInfoList=[])}i.push(ti({searchId:e.data.vueSearchId||o.xB.searchId,query:e.data.vueQuery||o.xB.query,tag:"topQA"},t,r))}),(0,S.Z)(i)},i=Array.isArray(t)?t:[t],r=[];i.forEach(function(i){if(i.aggregation){var o=(!e.debounceReport34426Map[t.actionType]&&(e.debounceReport34426Map[t.actionType]={extInfoList:[]}),e.debounceReport34426Map[t.actionType]);o.extInfoList.push({extInfo:t.extInfo,actionTimeStamp:Date.now()}),!o.timer&&(o.timer=setTimeout(function(){o.timer=void 0,n([i],!0)},1e3))}else r.push(i)}),n(r)},onUpdateCanShowButtonList:function(t){this.canShowButtonList=t},onClickCopy:function(){this.M_clickReport({clickContent:"复制答案",actionType:v.At.CLICK_COPY,reportId:"%E5%A4%8D%E5%88%B6btn:copy"});var t,e,n=null===(e=this.$refs.answerRef)||void 0===e?void 0:null===(t=e.getCopyDesc)||void 0===t?void 0:t.call(e);n&&o.Zr.copyText(n,!0).then(function(){o.Gc.$emit(o.U3.showToast,{action:g.g.pure,text:"已复制回答"})})},onUpdateCanShare:function(t){this.canShare=t},onUpdateCanInteract:function(t){this.disableInteract=!t},onAnswerFinish:function(){this.isAnswerFinish=!0},onUpdateIsLoading:function(t){this.isLoading=t},startLongPollingStatic:function(t){return te(function(){var e,n,i,a,s,c;return tr(this,function(l){switch(l.label){case 0:if(e=this,this.hasDestroy||this.isAnswerFinish||!this.isLoading)return[2];return this.topQARealTimeReport({actionType:S.o.TOP_QA_POLLING_STATIC_START}),[4,r.ZP.getCommonCgiData({cgiName:t.name,data:{searchId:(null===(n=t.params)||void 0===n?void 0:n.searchId)||o.xB.searchId,getScrollBar:1}})];case 1:c=l.sent(),this.topQARealTimeReport({actionType:S.o.TOP_QA_POLLING_STATIC_RESULT,extInfo:{length:(null===(i=c.infos)||void 0===i?void 0:i.length)||0,stageListLength:(null===(a=c.stageList)||void 0===a?void 0:a.length)||0,ragState:c.ragState}});if(null===(s=c.infos)||void 0===s?void 0:s.length)return this.cgiStaticInfo=ti({interval:c.loadingInterval},c),this.handleCgiStaticInfo(),[2];return this.handleCgiStaticInfo(),setTimeout(function(){e.startLongPollingStatic(t)},c.interval||c.loadingInterval||50),[2]}})}).apply(this)},handleCgiStaticInfo:function(){var t,e,n,i,o,r,a=this;if(!this.cgiStaticInfoHandleTimer){if(!this.isChatbotLoadingStyle){this.staticInfo=this.cgiStaticInfo,(null===(o=this.staticInfo.infos)||void 0===o?void 0:o.length)&&this.loadNextLoadingText();return}((null===(t=this.cgiStaticInfo.stageList)||void 0===t?void 0:t.length)||0)-this.loadingStateList.length>0?this.loadingStateList=this.cgiStaticInfo.stageList.slice(0,this.loadingStateList.length+1):(this.staticInfo=this.cgiStaticInfo,(null===(r=this.staticInfo.infos)||void 0===r?void 0:r.length)&&this.loadNextLoadingText()),(((null===(e=this.cgiStaticInfo.infos)||void 0===e?void 0:e.length)||0)!==((null===(n=this.staticInfo.infos)||void 0===n?void 0:n.length)||0)||(this.loadingStateList.length||0)!==((null===(i=this.cgiStaticInfo.stageList)||void 0===i?void 0:i.length)||0))&&(this.cgiStaticInfoHandleTimer=setTimeout(function(){a.cgiStaticInfoHandleTimer=null,a.handleCgiStaticInfo()},500))}},loadNextLoadingText:function(){var t,e=this;if(this.loadingTimer||this.data.isFake)return;if(this.loadingTextIdx<0){var n=this.hasShowHardcodeText?0:1e3;this.loadingTimer=setTimeout(function(){var t;if(e.loadingTimer=null,e.isChatbotLoadingStyle?-1===e.loadingTextIdx&&(e.hasShowHardcodeText=!0):e.hasShowHardcodeText=!0,-1!==e.loadingTextIdx||!!(null===(t=e.staticInfo.infos)||void 0===t?void 0:t.length))e.loadingTextIdx=e.loadingTextIdx+1,(0,Y.U)("loadingTextIdx one state",e.loadingTextIdx),e.loadNextLoadingText()},n);return}if(!!(null===(t=this.staticInfo.infos)||void 0===t?void 0:t.length)&&!!this.isLoading&&!(this.loadingTextIdx>=this.staticInfo.infos.length))this.loadingTimer=setTimeout(function(){e.loadingTimer=null,e.loadingTextIdx=e.loadingTextIdx+1,(0,Y.U)("loadingTextIdx two state",e.loadingTextIdx),e.loadNextLoadingText()},300)},commonHandleResponse:function(t){var e,n=this;if(!!t){this.isFinish=this.isFinish||!t.continueFlag;var i="number"==typeof t.modelName||Number.isInteger(Number(t.modelName));this.modelType=(i?Number(t.modelName):this.modelType)||0;var a=t.statusFlag===O.dA.StatusFlagStopAnswer;this.statusFlag=t.statusFlag,t.statusFlag&&!a&&(this.canShare=!1,o.Gc.$emit(o.U3.SET_GLOBAL_CAN_SHARE_STATUS,!1)),t.statusFlag&&[O.dA.StatusFlagModelReject,O.dA.StatusFlagSpamCheck,O.dA.StatusFlagBusy,O.dA.StatusFlagNoResult,O.dA.StatusFlagUndefine].includes(t.statusFlag)&&o.Gc.$emit(o.U3.STOP_QA_VOICE),this.isFinish?this.topQARealTimeReport({actionType:S.o.TOP_QA_FINISH}):this.emitStart();if(t.notAllowQuestionClosely&&this.$store.dispatch("chatbot/setIsRelaunch",!0),this.updateDataToStore(t),this.isFinish&&!t.disableDeepResearch&&!t.statusFlag&&this.canFetchResearchEntry&&r.ZP.getCommonCgiData({cgiName:"AllowDeepResearch",data:{IsHomePage:1,Keyword:this.queryToShare||"empty",Offset:0,CliVersion:80213349,Scene:o.xB.scene,SceneActionType:1,SearchID:this.topQASearchIdForServer,SessionID:o.xB.sessionId}}).then(function(t){var e;n.allowDeepResearch=null===(e=t.data)||void 0===e?void 0:e.allow,n.handleDeepResearchTeachPop(n.allowDeepResearch),n.topQARealTimeReport({actionType:S.o.TOP_QA_ALLOW_DEEP_RESEARCH,extInfo:{data:t.data}})}),(null===(e=t.answer)||void 0===e?void 0:e.text)&&!this.hasReportFirstToken){this.hasReportFirstToken=!0;var s=Date.now();(0,M.ZP)([{requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.CompCreatedToGetFirstToken,stepType:M.t9.End,actionTimestampMs:s},{requestId:this.M_getCommonReportInfo().reportOption.requestId,searchId:this.topQASearchIdForReport,stepName:M.Gg.GetFirstTokenToFirstTokenExpose,stepType:M.t9.Start,actionTimestampMs:s}])}}},handleResponse:function(t){var e,n,i=this;if(!!t&&!this.hasTerminate){if(this.answerType){this.commonHandleResponse(t);return}if(this.answerType=t.answerType?t.answerType:i.answerType?i.answerType:(null===(e=t.answer)||void 0===e?void 0:e.text)||(null===(n=t.answer)||void 0===n?void 0:n.think)||!t.continueFlag?O.oK.TextAnswer:O.oK.unknown,this.answerType){var o=this.isChatbotLoadingStyle&&this.answerType===O.oK.TextAnswer,r=this.loadingStateList.length>0||this.loadingTextIdx>-1;o?(this.isLoading=!1,r&&this.loadingHeightAnimateDuration?setTimeout(function(){i.initResponse=t},this.loadingHeightAnimateDuration):this.initResponse=t):this.initResponse=t}else!t.continueFlag&&(this.answerType=O.oK.TextAnswer);this.commonHandleResponse(t)}},updateDataToStore:function(t){if(this.isFinish)p.Z.topQABoxData={};else{var e,n,i,o,r,a=(null===(e=p.Z.topQABoxData)||void 0===e?void 0:e.search_id)===this.topQASearchIdForServer,s=(null===(i=t.answer)||void 0===i?void 0:null===(n=i.text)||void 0===n?void 0:n.length)||(null===(r=t.answer)||void 0===r?void 0:null===(o=r.think)||void 0===o?void 0:o.length)||t.answerType;(!a||s&&!this.hasUpdateToStoreAfterFirstToken)&&(this.hasUpdateToStoreAfterFirstToken=!0,p.Z.topQABoxData={search_id:this.topQASearchIdForServer,resultKey:t.resultKey||this.mainEventCenter.resultKey,stop_infer:1,is_hit_cache:this.mainEventCenter.isCache?1:0}),s&&(this.hasUpdateToStoreAfterFirstToken=!0)}},reportRsp:function(t,e){var n=this,i=ti({},t);if(Object.keys(i).forEach(function(t){n.rspReportCache[t]&&(i[t]=!1),n.rspReportCache[t]=i[t]||n.rspReportCache[t]}),!Object.values(i).filter(Boolean).length)return{};if(i.get_answer&&this.initTime){var o=Date.now()-this.initTime,a=Date.now()-this.startRequestTime;i.expose_answer_interval_ms=o,a>o&&this.startRequestTime&&(i.trigger_search_to_expose_answer_interval_ms=a),this.initTime=0}return r.ZP.getCommonCgiData({cgiName:"TopQAResultReport",data:to(ti({},i),{search_id:this.topQASearchIdForServer,resultKey:this.mainEventCenter.resultKey,is_hit_cache:this.mainEventCenter.isCache?1:0})}),i},onDegenerate:function(t){this.answerType=O.oK.TextAnswer,this.initResponse=t},onClickBottomShare:function(t,e){this.M_clickReport({clickContent:"分享答案",actionType:v.At.CLICK_SHOW_DIALOG,reportId:"%E5%88%86%E4%BA%ABbtn:button"}),this.onClickShare(t,e)},getShareParams:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.queryToShare,i=this.topQASearchIdForReport,r="0.1.0",s=[];!e.shareId&&s.push({key:"topQAShareKey",textValue:(null==e?void 0:e.shareKey)||this.source.shareKey||""});var c=null===(u=e.title)||void 0===u?void 0:u.slice(0,500),l={};if(this.source.uploadInfo){var u,d,h,f,p=(null===(f=(0,a.dW)(this.source.uploadInfo))||void 0===f?void 0:f.uploadFiles)||[];p.length&&(l=(0,H.k)(p))}var m={appId:"wxalite662c58496ffa1efd119b5eb4ea45a3ba",page:"pages/auto-jumping/auto-jumping",isTransparent:!0,minVersion:r,query:{type:t,title:c,thumbUrl:"https://search.wxqcloud.qq.com/t/fed_upload/5e444d4588aaa32d6a993061ca21a764/s1s_white_logo.png",desc:null===(h=this.$refs.answerRef)||void 0===h?void 0:null===(d=h.getShareDesc)||void 0===d?void 0:d.call(h),reportCommonCgiListAfterShare:e.reportCommonCgiListAfterShare,minVersion:r,versionCtrl:ta,isTransparent:!0,srcId:e.srcId,bypassReportParams:null==e?void 0:e.bypassReportParams,postConversationsShareReqParams:null==e?void 0:e.postConversationsShareReqParams,disableShareToast:null==e?void 0:e.disableShareToast,startWebSearchParams:{query:n,scene:e.scene,type:v.WI.TOP_QA,extParams:encodeURIComponent(JSON.stringify({shareFromChatbot:o.xB.chatbot,chatbotSecond:o.xB.chatbot,parentSearchID:this.M_composeParentSid({isFromOpenSearchWebview:!0,t:e.parentType,s:i,kv:ti({search_id:this.snapshotSearchId,shareType:null==e?void 0:e.shareType},l)}),crossExtReqParams:s,chatbotExtParams:{conversationId:null==e?void 0:e.conversationId,shareId:null==e?void 0:e.shareId,shareStyle:o.xB.quarkStyleV2||"v2"===o.xB.chatbotExtParams.shareStyle?"v2":o.xB.quarkStyle||"v1"===o.xB.chatbotExtParams.shareStyle?"v1":void 0}})),extReqParams:[{key:"parentSearchId",textValue:this.M_composeParentSid({t:e.parentType,s:i,kv:{shareType:null==e?void 0:e.shareType}})}],customNavBarParams:{nativeConfig:{title:O.RS},hideSearchBar:!0}},enableItemList:e.enableItemList,extraItemList:e.extraItemList}};return!e.shareId&&m.query.startWebSearchParams.extReqParams.push({key:"topQAShareKey",textValue:(null==e?void 0:e.shareKey)||this.source.shareKey||""}),m},onClickShare:function(t,e){var n,i,a=this,s=this.queryToShare,c=this.data.vueSearchId||o.xB.searchId,l=function(t){var e=a.M_genClickId({searchId:c,timestamp:Date.now()}),n=to(ti({},t),{clickId:e,extInfo:JSON.stringify(to(ti({},o.Zr.safeJsonParse(t.extInfo)||{}),{clickId:e})),actionType:v.At.CONFIRM_CHANGE_CODE});return[{cgiName:"MMDataReport",data:{item_list:[(0,y.Z)(n,{dep:!0})],clientversion:o.xB.wechatVersion||0,device:o.xB.deviceType}}]},u=this,d=this;this.M_serviceSearchGo({pop:{type:39,triggerElement:null==t?void 0:t.target,position:(null==e?void 0:e.target)==="top-qa-header"?"":"center top",sheet:[{title:"转发给朋友",reportId:"forward:forward:".concat(o.Zr.getRandom()),actionType:v.At.CLICK_SHOW_DIALOG,handler:(n=te(function(t){var n;return tr(this,function(i){return u.requestToSvrToSaveData(),null==e||null===(n=e.validateForward)||void 0===n||n.call(e),setTimeout(function(){r.ZP.openLiteApp(u.getShareParams("sendAppMessage",{title:s,scene:u.isChatBot?v.RL.MMSEARCH_SCENE_AI_SEARCH_CHAT_JUMP:v.RL.MMSEARCH_SCENE_TOPQA_FOR_CHAT,parentType:u.isChatBot?v.X$.MMSEARCH_TYPE_AISEARCH_SINGLE_QUESTION:v.X$.MMSEARCH_TYPE_TOPQA_FOR_CHAT,reportCommonCgiListAfterShare:l(t),srcId:"wxf6e012cbbca759dc",shareType:"message"}))},350),[2]})}),function(t){return n.apply(this,arguments)})},{title:"分享到朋友圈",reportId:"snsshare:snsshare:".concat(o.Zr.getRandom()),actionType:v.At.CLICK_SHOW_DIALOG,handler:(i=te(function(t){var n;return tr(this,function(i){return d.requestToSvrToSaveData(),null==e||null===(n=e.validateForward)||void 0===n||n.call(e),setTimeout(function(){r.ZP.openLiteApp(d.getShareParams("shareTimeline",{title:"AI搜索 - ".concat(s),scene:d.isChatBot?v.RL.MMSEARCH_SCENE_AI_SEARCH_MOMENT_JUMP:v.RL.MMSEARCH_SCENE_TOPQA_FOR_MOMENT,parentType:d.isChatBot?v.X$.MMSEARCH_TYPE_AISEARCH_SINGLE_QUESTION:v.X$.MMSEARCH_TYPE_TOPQA_FOR_MOMENT,reportCommonCgiListAfterShare:l(t),shareType:"message"}))},350),[2]})}),function(t){return i.apply(this,arguments)})}]}})},showMore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.shareSearchIds,n=void 0===e?[]:e,i=t.bypassReportParams,a=void 0===i?{}:i,s=t.disableShareToast;return te(function(){var t,e,i,c,l,u,d;return tr(this,function(h){switch(h.label){case 0:if(t=this,!n.length)return[2];return e=(0,w.eG)({shareSearchIds:n,conversationId:this.data.vueConversationId}),i=[],c=[],[4,this.isMinimizeTaskEnabled()];case 1:if(!(null==(l=h.sent())?void 0:l.enabled))return[3,3];return 1==l.multiContentSwitch&&c.push("multicontent"),u=i.push,[4,this.isTaskMinimized(N.I3.Star)];case 2:u.apply(i,[h.sent()?"cancelstar":"star"]),h.label=3;case 3:return d=this.queryToShare,r.ZP.openLiteApp(this.getShareParams("showShareSheet",{title:d,scene:v.RL.MMSEARCH_SCENE_TOPQA_FOR_CHAT,parentType:1===n.length?v.X$.MMSEARCH_TYPE_AISEARCH_SINGLE_QUESTION:v.X$.MMSEARCH_TYPE_AISEARCH_MULTI_QUESTION,postConversationsShareReqParams:e,conversationId:this.data.vueConversationId,bypassReportParams:a,srcId:"wxf6e012cbbca759dc",shareType:"message",enableItemList:i,extraItemList:c,disableShareToast:s})),setTimeout(function(){(0,I.R0)("handlePicStore","").then(function(e){console.error("handlePicStore res",e),(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handlePicStore"?o.Gc.$emit(o.U3.ON_CHATBOT_TAKE_SCREENSHOT,!0):(null==e?void 0:e.ret)===0&&(null==e?void 0:e.name)=="handleMinimize"&&("multicontent"==e.type?t.addMinimizeTask(N.I3.Float):"star"==e.type?t.addMinimizeTask(N.I3.Star):"cancelstar"==e.type&&t.removeMinimizeTask(N.I3.Star))})},400),[2]}})}).apply(this)},addMinimizeTask:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.xB.chatbotSecond&&r.ZP.addMinimizeTask(this.getUnifiedMinimizeTaskData(t))},removeMinimizeTask:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;o.xB.chatbotSecond&&r.ZP.removeMinimizeTask(this.getUnifiedMinimizeTaskData(t))},prepareMinimizeTask:function(){o.xB.chatbotSecond&&r.ZP.prepareMinimizeTask(this.getUnifiedMinimizeTaskData(0,!0))},isTaskMinimized:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.I3.Star;return te(function(){var e;return tr(this,function(n){switch(n.label){case 0:return[4,r.ZP.isTaskMinimized(this.getUnifiedMinimizeTaskData(t))];case 1:return[2,(null==(e=n.sent())?void 0:e.data)==1]}})}).apply(this)},isMinimizeTaskEnabled:function(){return te(function(){return tr(this,function(t){switch(t.label){case 0:if(!this.getUnifiedMinimizeTaskData(N.I3.Star).bizKey)return[2,{enabled:!1}];return[4,r.ZP.isMinimizeTaskEnabled()];case 1:return[2,t.sent()]}})}).apply(this)},getUnifiedMinimizeTaskData:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=o.xB.query||this.source.query||this.source.title,a=o.xB.minimizeTaskExtParams.key||o.xB.uniqueId,s="".concat(a,"_").concat(t),c={},l={query:o.xB.query,key:a},u=!1,d=o.xB.crossExtReqParams||[];return(null===(e=o.xB.chatbotExtParams)||void 0===e?void 0:e.shareId)?c=o.xB.chatbotExtParams:(null===(n=o.xB.chatbotExtParams)||void 0===n?void 0:n.searchId)?c=to(ti({},o.xB.chatbotExtParams),{snapshotSearchID:void 0,useSnapshotPrefetchData:void 0}):o.xB.conversationId?c={historyReplayData:{conversationId:o.xB.conversationId,parentSearchID:o.xB.parentSearchID,item:{searchId:o.xB.searchId,query:this.data.vueQuery||this.source.query||this.source.title||o.xB.query}}}:this.source.shareKey&&(d.push({key:"topQAShareKey",textValue:this.source.shareKey}),u=!0),o.xB.shareFromChatbot&&(u=!0),{viewX:0,viewY:i?0:window.pageYOffset,viewWidth:window.innerWidth,viewHeight:window.innerHeight,coverImgSnapshot:!0,createTime:Date.now(),bizName:"search",bizKey:s,stateType:t,title:r,displaySourceName:"AI搜索",iconUrl:"https://search.wxqcloud.qq.com/t/fed_upload/0423d4a35074f6c39045aaa860f737bd/s1s_white.png",scene:o.xB.scene,type:o.xB.type,isHomePage:1==o.xB.isHomePage,query:o.xB.query||this.data.vueQuery,extParams:JSON.stringify({minimizeBizKey:s,sessionId:o.xB.sessionId,parentSearchID:o.xB.parentSearchID,chatbot:o.xB.chatbot,chatbotSecond:o.xB.chatbot,chatbotExtParams:c,crossExtReqParams:d,minimizeTaskExtParams:l,hideSearchBar:!0,hideNavBar:!0,shareFromChatbot:u}),navBarParams:JSON.stringify({hideSearchBar:!0,hideNavBar:!0,title:"AI搜索"})}},onClickTipsMore:function(t){return te(function(){var e,n,i,r,a,s,c,l,u;return tr(this,function(d){switch(d.label){case 0:return e=this,i=this.M_genClickId({searchId:this.topQASearchIdForReport}),r=this.M_clickReport({clickContent:t.title,actionType:v.At.AI_SEARCH,reportId:this.bottomEntryReportId,clickId:i}).requestId,a=null==t?void 0:null===(n=t.chatbotExtParams)||void 0===n?void 0:n.modelType,[4,o.su.get({key:B.jq})];case 1:var h;return l=(c=(null==(s=d.sent())?void 0:s.modelType)||(0,Z.Q)(null==s?void 0:s.value))===B.BY.R1?c:a,u=((h=o.xB.query||e.source.query||e.source.title).startsWith("#")||h.startsWith("＃"))&&+o.xB.queryString.fromTagSearch?h.slice(1):h,this.M_serviceSearchGo({jumpInfo:{jumpType:v.sn.AI_SEARCH,scene:v.RL.MMSEARCH_SCENE_AI_SEARCH_FROM_TOPQABOX_BOTTOM,parentSearchID:this.M_composeParentSid({t:v.X$.MMSEARCH_TYPE_TOPQABOX_BOTTON,s:this.topQASearchIdForReport,rid:r,kv:{clickId:i}}),query:u,modelType:l,chatbotExtParams:null==t?void 0:t.chatbotExtParams}}),[2]}})}).apply(this)},handleModelSwitch:function(t,e){return te(function(){var n,i,r,s;return tr(this,function(c){var l;return n=this,r=((l=o.xB.query||n.source.query||n.source.title).startsWith("#")||l.startsWith("＃"))&&+o.xB.queryString.fromTagSearch?l.slice(1):l,s=(null===(i=(0,a.dW)(this.source.uploadInfo))||void 0===i?void 0:i.uploadFiles)||[],this.M_serviceSearchGo({jumpInfo:{jumpType:v.sn.AI_SEARCH,scene:v.RL.MMSEARCH_SCENE_AI_SEARCH_S1S_TOPQA_BOX_JUMP,parentSearchID:this.M_composeParentSid({t:v.X$.MMSEARCH_TYPE_MIXER_QUESTION_CLOSELY_JUMP_AISEARCH,s:this.topQASearchIdForReport,rid:null==e?void 0:e.requestId,kv:{clickId:null==e?void 0:e.clickId}}),query:r,modelType:t.modelType,chatbotExtParams:s.length?{uploadFileList:s}:void 0}}),[2]})}).apply(this)},onTerminate:function(){var t,e,n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.bypassReportParams,a=void 0===o?null:o;if(this.source.cgi&&!this.isAnswerFinish){var s,c,l,u,d=null===(c=this.source.cgi)||void 0===c?void 0:null===(s=c.params)||void 0===s?void 0:s.searchId,h=this.mainEventCenter.resultKey;if(this.$refs.answerRef)null===(l=(u=this.$refs.answerRef).onTerminate)||void 0===l||l.call(u);else{var f={resultKey:h,statusFlag:O.dA.StatusFlagStopAnswer};this.mainEventCenter.handleResponse(f,K.M.StopAnswer),this.handleResponse(f)}this.hasTerminate=!0,this.mainEventCenter.finish(),a&&(0,y.Z)(to(ti({},a),{actionType:v.At.STOP_AI_ANSWER})),d&&h&&setTimeout(function(){var t,e,i,o,a;console.warn("terminateLength: ",null===(t=n.$refs.answerRef)||void 0===t?void 0:t.getTypewriterLength()),r.ZP.getCommonCgiData({cgiName:"TopQAResult",data:{searchId:null===(i=n.source.cgi)||void 0===i?void 0:null===(e=i.params)||void 0===e?void 0:e.searchId,resultKey:n.mainEventCenter.resultKey,stopAnswer:1,stopPos:null!==(a=null===(o=n.$refs.answerRef)||void 0===o?void 0:o.getTypewriterLength())&&void 0!==a?a:0,h5Version:80213349}}).then(function(t){console.info("onTerminate res:",t)})},10)}else!this.isAnswerFinish&&this.$refs.answerRef&&(null===(t=(e=this.$refs.answerRef).onTerminate)||void 0===t||t.call(e))},updateDeepThinkFlag:function(t){return te(function(){var e,n,i,r,a,s,c,l;return tr(this,function(u){switch(u.label){case 0:return i="history0",r=this.resultFirstRequestId,[4,o.su.get({key:"history0"})];case 1:if(!(a=u.sent())||!a.length||!(s=a.find(function(t){return t.requestId===r})))return[2];return(c=null==s?void 0:null===(e=s.extReqParams)||void 0===e?void 0:e.find(function(t){return"globalSearchDeepThink"===t.key}))&&(c.uintValue=t?1:0),(l=null==s?void 0:null===(n=s.checkboxes)||void 0===n?void 0:n.find(function(t){return"globalSearchDeepThink"===t.key}))&&(l.selected=t?1:0),o.su.set({key:i,value:a}),[2]}})}).apply(this)},regenerateWithModel:function(t,e){return te(function(){var n,i,r,s,c,l,u,d,h,f,p,m,y,g,b,_,S,I,w,x,T,C,k;return tr(this,function(A){switch(A.label){case 0:var R;return n=this,d=(null==t?void 0:t.value)||(null===(i=this.data.vueChatbotInfo)||void 0===i?void 0:i.modelValue)||(null===(r=this.source.modelSwitch)||void 0===r?void 0:r.value),h=(null==t?void 0:t.modelType)||(null===(s=this.data.vueChatbotInfo)||void 0===s?void 0:s.modelType)||(null===(c=this.source.modelSwitch)||void 0===c?void 0:c.modelType),f=(null==e?void 0:e.parentType)||v.X$.MMSEARCH_TYPE_AISEARCH_REANSWER,p={},this.source.uploadInfo&&(y=(null===(m=(0,a.dW)(this.source.uploadInfo))||void 0===m?void 0:m.uploadFiles)||[]).length>0&&(p=(0,H.k)(y)),o.xB.quarkStyleSearchBarCheckboxOptions.length>0&&o.xB.quarkStyleSearchBarCheckboxOptions.forEach(function(t){"globalSearchDeepThink"===t.key&&(t.selected=h!==B.BY.Fast,n.updateDeepThinkFlag(t.selected),o.Gc.$emit(o.U3.TOP_QA_REGENERATE,{requestId:n.resultFirstRequestId,selected:t.selected,query:o.xB.query}))}),g=o.Zr.generateGuuId(),b=this.M_composeParentSid({t:f,s:this.topQASearchIdForReport,kv:ti({isFirst:1,modelName:d,clickId:null==e?void 0:e.clickId},p)}),_=[{key:"aiSearchMultiConversationTurnNum",uintValue:2},{key:"aiResearchOriSid",textValue:this.topQASearchIdForServer},{key:"aiSearchConversationId",textValue:o.xB.conversationId},{key:"selectedModelName",textValue:d}].concat(function(t){if(Array.isArray(t))return X(t)}(R=(null==e?void 0:e.extReqParams)||[])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(R)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(t,e)}}(R)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.source.uploadInfo&&_.push({key:"aiSearchUploadInfo",textValue:this.source.uploadInfo}),o.xB.firstSearchQueryMap.get(o.xB.sessionId)&&_.push({key:"firstSearchQuery",textValue:o.xB.firstSearchQueryMap.get(o.xB.sessionId)}),(null===(l=o.xB.thirdExtParam)||void 0===l?void 0:l.mp_bizuin_msgid_msgidx)&&_.push({key:"mpBizuinMsgidMsgidx",textValue:o.xB.thirdExtParam.mp_bizuin_msgid_msgidx}),[4,(0,F.Z)({type:v.WI.TOP_QA,requestId:g,query:this.data.vueQuery||o.xB.query,page:"result",parentType:f,parentSearchID:b,extReqParams:_,isFromSwitchModel:!0})];case 1:if(S=A.sent(),I=o.Zr.safeJsonParse(S.json),(0,L.f)(I,{requestId:g,conversationId:o.xB.conversationId,isAttentive:!0,modelValue:d,modelType:h,parentSearchID:b,reqType:v.WI.TOP_QA,isRegenerate:!0}),o.Gc.$emit(o.U3.STOP_QA_VOICE),w=null===(u=I.data)||void 0===u?void 0:u.find(function(t){return t.real_type===n.data.real_type&&t.subType===n.data.subType}),(null==I?void 0:I.searchID)&&this.$store.commit({type:"result/updateSearchId",searchID:I.searchID}),w&&(this.data.__vueKey&&(w.__vueKey=w.vueKey),(null===(T=w.items)||void 0===T?void 0:null===(x=T[0])||void 0===x?void 0:x.itemInfo)&&(w.items[0].itemInfo.disableUnfold=this.source.disableUnfold),this.$store.dispatch({type:"result/self/replaceBox",vueKey:null===(k=this.baseCtx)||void 0===k?void 0:null===(C=k.data)||void 0===C?void 0:C.vueKey,target:w})),this.mixedBoxChatbotCtx)return this.mixedBoxChatbotCtx.scrollByVueKey(this.data.vueKey),[2];return this.$nextTick(function(){var t=document.querySelector(".block-reset-style-16777248-37-0");if(t){var e=n.Container_GetBodyNode()||window,i=function(){if(2!==n.typePos)return!1;var t,e=null===(t=n.resultObj.data)||void 0===t?void 0:t[0];return!!e&&(16777218===e.real_type&&53===e.subType||2048===e.real_type&&11===e.subType)}();e.scrollTo({top:1===n.typePos||i?0:t.offsetTop,behavior:"smooth"})}}),[2]}})}).apply(this)},createNewMainEventCenter:function(){var t=this,e=this.M_getCommonReportInfo().reportOption.requestId,n=V.h.getAndDelete(e,{newSearchId:this.data.vueSearchId||o.xB.searchId,onReport:function(e){t.topQARealTimeReport(e)},onReport34899:function(n){var i=Array.isArray(n)?n:[n];(0,M.ZP)(i.map(function(n){return{requestId:e,searchId:t.topQASearchIdForReport,stepName:n.stepName,stepType:n.stepType,actionTimestampMs:n.actionTimestampMs,expand:n.expand?encodeURIComponent(JSON.stringify(n.expand)):void 0}}))}});return n.on("onData",function(e){t.handleResponse(e)}),n.on("onError",function(e){t.handleResponse({timeout:!0}),n.destroy(),console.error("block long polling error",e),o.yG.reportEventTrack({actionType:40,searchId:t.topQASearchIdForReport}),(0,Y.U)("polling error",e),t.topQARealTimeReport({actionType:S.o.TOP_QA_POLLING_ERROR,extInfo:{error:e}})}),n},handleHideStopAnswerBtn:function(){this.isHideStopAnswerBtn=!0},handleDeepResearchTeachPop:function(t){return te(function(){var e;return tr(this,function(n){switch(n.label){case 0:return[4,o.su.get({key:B.bP})];case 1:return e=!!n.sent(),t&&!e&&(this.showDeepResearchTeachPop=!0),[2]}})}).apply(this)}}}},896082:function(t,e,n){var i,o,r=n(720144),a=n(798509),s=n(783466),c=n(984928),l=n(293905),u=n(861887),d=n(253008),h=n(748750),f=n(467094),p=n(420629),m=n(674861);function v(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function y(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){v(r,i,o,a,s,"next",t)}function s(t){v(r,i,o,a,s,"throw",t)}a(void 0)})}}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function b(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}e.Z=r.default.extend({name:"CommentInputBar",components:{StickerPanel:m.Z},directives:{textareaAutosize:l.b},mixins:[a.jB,a.uW,a.Sx],props:{options:{type:Object,required:!0}},data:function(){return{isShow:!1,safeBottomHeight:0,identityList:[],selectedIdentityKey:null,isFocused:!1,focusState:0,content:{type:0,text:""},nextSelectionPosition:-1,isStickerPanelOpened:!1,textareaScrollTop:0,shouldKeepMask:!1,maskEnterDur:200}},computed:(i=g({},(0,p.rn)({keyboardHeight:function(t){return t.result.keyboardHeight}})),o=(o={currentIdentity:function(){var t=this;return this.identityList.find(function(e){return e.key===t.selectedIdentityKey})||{}},avatar:function(){var t;return(null===(t=this.currentIdentity)||void 0===t?void 0:t.avatar)||""},avatarVariant:function(){var t;return(null===(t=this.currentIdentity)||void 0===t?void 0:t.avatarStyle)||"round"},nickname:function(){var t;return(0,d.F4)((0,f.Z)((null===(t=this.currentIdentity)||void 0===t?void 0:t.nickname)||"")).trim()},replyToNickname:function(){return(0,d.F4)((0,f.Z)(this.options.replyToNickname||"")).trim()},placeholder:function(){return"".concat("reply"===this.options.actionType?"".concat(this.nickname," 回复 ").concat(this.replyToNickname).trim():"".concat(this.nickname," 发表评论"),":")},buttonTitle:function(){return"reply"===this.options.actionType?"回复":"发送"},barStyle:function(){var t;return t=this.isStickerPanelOpened?330:this.focusState>=2&&this.isFocused?this.keyboardHeight:0,{transform:"translateY(".concat(-Math.max(this.safeBottomHeight,t),"px)")}},isSubmitDisabled:function(){return!this.validateContent()},textareaFloating:function(){return this.focusState>=1&&this.focusState<4}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))}),i),watch:{isShow:{handler:function(t){var e,n;t?null===(e=this.$refs.maskRef)||void 0===e||e.show():null===(n=this.$refs.maskRef)||void 0===n||n.hide()},immediate:!0},"content.text":function(){this.nextSelectionPosition=-1}},created:function(){s.N.onWebviewResume(this.onResume),a.Gc.$on(a.U3.dialogHide,this.onIdentityDialogHide),this.init(this.options)},destroyed:function(){s.N.offWebviewResume(this.onResume),a.Gc.$off(a.U3.dialogHide,this.onIdentityDialogHide)},mounted:function(){var t=this;this.isShow=!0,this.safeBottomHeight=parseFloat(getComputedStyle(document.body).getPropertyValue("--SAFE-BOTTOM"))||0,this.$nextTick(function(){t.focus()})},methods:{init:function(t){this.identityList=t.identityList||[],this.selectedIdentityKey=null!==(o=null!==(i=null===(e=this.identityList.find(function(t){return t.isDefault}))||void 0===e?void 0:e.key)&&void 0!==i?i:null===(n=this.identityList[0])||void 0===n?void 0:n.key)&&void 0!==o?o:null;var e,n,i,o,r=this.options.initialContent||{};this.content=g({},this.content,r.content)},onIdentityDialogHide:function(t){(null==t?void 0:t.popType)===h.f.popIdentityList&&a.xB.curRouteName===c.kO.CHATBOT&&this.focus()},onResume:function(){var t;if(null===(t=this.$refs.textareaRef)||void 0===t||t.blur(),this.shouldKeepMask){this.shouldKeepMask=!1;var e=this;y(function(){var t;return b(this,function(n){switch(n.label){case 0:return e.maskEnterDur=1,[4,e.$nextTick()];case 1:return n.sent(),null===(t=e.$refs.maskRef)||void 0===t||t.show(),[4,e.$nextTick()];case 2:return n.sent(),e.maskEnterDur=200,[2]}})})()}},focus:function(){return y(function(){var t,e,n;return b(this,function(i){switch(i.label){case 0:if(this.focusState>0)return[2];this.focusState=1,e=!0,i.label=1;case 1:if(!e)return[3,10];switch(this.focusState){case 1:return[3,2];case 2:return[3,5];case 3:return[3,7]}return[3,8];case 2:return this.focusState=2,n=this.$refs.textareaRef.scrollTop,[4,this.$nextTick()];case 3:return i.sent(),n&&(this.$refs.fakeTextareaRef.scrollTop=n),this.$refs.textareaRef.focus({preventScroll:!0}),[4,new Promise(function(t){return setTimeout(t,50)})];case 4:case 6:return i.sent(),[3,9];case 5:return this.focusState=3,[4,new Promise(function(t){return setTimeout(t,350)})];case 7:return this.focusState=4,[3,9];case 8:e=!1,i.label=9;case 9:return[3,1];case 10:return null===(t=this.$refs.textareaRef)||void 0===t||t.dispatchEvent(new Event("appUpdateTextareaHeight")),[2]}})}).apply(this)},onFocus:function(){if(this.isFocused=!0,this.hideStickerPanel(),this.nextSelectionPosition>=0){var t;null===(t=this.$refs.textareaRef)||void 0===t||t.setSelectionRange(this.nextSelectionPosition,this.nextSelectionPosition),this.nextSelectionPosition=-1}},onBlur:function(){this.focusState=0,this.isFocused=!1},onScroll:function(t){this.textareaScrollTop=t.target.scrollTop||0},validateContent:function(){return!((0,u.Vr)(this.content.text||"")>this.options.maxLength)&&(!!this.content.type||(0,u.kQ)(this.content.text||"",.5))},sendResult:function(t){this.isShow=!1,this.$emit("result",t)},onClickTextBox:function(){this.focus()},onChangeAvatar:function(){var t=this;this.M_serviceSearchGo({pop:{type:h.f.popIdentityList,header:{close:!1,closeArrow:!0},hideMask:!0,popTitle:"选择身份",identityList:this.identityList,selectedIdentityKey:this.selectedIdentityKey,onChange:function(e){var n,i;t.selectedIdentityKey=e.key,null===(n=(i=t.options).onChangeIdentity)||void 0===n||n.call(i,{selectedIdentityKey:e.key})}}})},onClickSticker:function(t){var e,n=this,i=this.$refs.textareaRef;if(!!i){var o=i.selectionStart,r=void 0===o?-1:o,a=i.selectionEnd,s=void 0===a?-1:a,c=i.value,l=void 0===c?"":c;this.nextSelectionPosition>=0&&(r=this.nextSelectionPosition,s=this.nextSelectionPosition),r>=0&&s>=0?(l=l.slice(0,r)+t+l.slice(s),e=r+t.length):(l+=t,e=l.length+t.length),this.$set(this.content,"text",l),this.$nextTick(function(){n.nextSelectionPosition=e,i.dispatchEvent(new Event("appUpdateTextareaHeight"))})}},onClickBackspace:function(){var t=this,e=this.$refs.textareaRef;if(!!e){var n=e.selectionStart,i=void 0===n?-1:n,o=e.selectionEnd,r=void 0===o?-1:o,a=e.value;this.nextSelectionPosition>=0&&(i=this.nextSelectionPosition,r=this.nextSelectionPosition);var s=(0,u._r)(a,i,r),c=s.value,l=s.pos;a!==c&&(this.$set(this.content,"text",c),this.$nextTick(function(){t.nextSelectionPosition=l,e.dispatchEvent(new Event("appUpdateTextareaHeight"))}))}},onTapMask:function(){if(!this.shouldKeepMask)this.sendResult({action:"cancel",content:this.content,isAtAi:!1,selectedIdentityKey:this.selectedIdentityKey||""})},onClickSubmit:function(){if(!!this.validateContent())this.sendResult({action:"send",content:this.content,isAtAi:!1,selectedIdentityKey:this.selectedIdentityKey||""})},showStickerPanel:function(){var t;if(!this.isStickerPanelOpened)this.isStickerPanelOpened=!0,null===(t=this.$refs.textareaRef)||void 0===t||t.blur()},hideStickerPanel:function(){if(!!this.isStickerPanelOpened)this.isStickerPanelOpened=!1,this.focus()},onToggleStickerPanel:function(){this.isStickerPanelOpened?this.hideStickerPanel():this.showStickerPanel()}}})},305648:function(t,e,n){var i=n(720144),o=n(41519);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s={send:"发送",search:"搜索",next:"下一个",go:"前往",done:"完成"},c=a(o.EmojiPanelData).concat(a(Array.from({length:o.EmojiPanelData.length}).fill(null)));e.Z=i.default.extend({name:"StickerPanel",props:{showConfirm:{type:Boolean,default:!1},actionDisabled:{type:Boolean,default:!1},confirmType:{type:String,default:"done"}},data:function(){return{stickerList:c,scaleFactor:1}},computed:{confirmText:function(){return s[this.confirmType]||""}},mounted:function(){},methods:{resetFontSize:function(){var t=document.createElement("div");t.style.fontSize="16px",document.body.appendChild(t);var e=parseInt(window.getComputedStyle(t,null).getPropertyValue("font-size"));document.body.removeChild(t),this.scaleFactor=16/e}}})},744443:function(t,e,n){var i=n(798509);e.Z={name:"ChatbotBottomBackground",props:{isAtBottom:{type:Boolean,default:!1}},data:function(){return{canShowBg:!1,canShowBgWhenNotSticky:!0,opacity:1}},computed:{style:function(){return{opacity:this.opacity}}},created:function(){i.Gc.$on(i.U3.TAB_STICKY_CHANGE,this.handleStickyChange),i.Gc.$on(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,this.handleShowBg),i.Gc.$on(i.U3.CHATBOT_BOTTOM_BACKGROUND_OPACITY,this.handleOpacityChange)},beforeDestroy:function(){i.Gc.$off(i.U3.TAB_STICKY_CHANGE,this.handleStickyChange),i.Gc.$off(i.U3.SHOW_CHATBOT_BOTTOM_BACKGROUND,this.handleShowBg),i.Gc.$off(i.U3.CHATBOT_BOTTOM_BACKGROUND_OPACITY,this.handleOpacityChange)},methods:{handleStickyChange:function(t,e){2===t.id&&(this.canShowBgWhenNotSticky=!e)},handleShowBg:function(t){console.error("handleShowBg",t),this.canShowBg=t},handleOpacityChange:function(t){this.opacity=t}}}},663813:function(t,e,n){var i=n(152750),o=n(984928);e.Z={mixins:[i.Qe],props:{d:{type:Object,default:function(){return{}}},reqBusinessType:{type:Number,default:o.WI.DEEP_RESEARCH}},computed:{DRR_boxData:function(){return{d:this.d,reqBusinessType:this.reqBusinessType}}}}},522613:function(t,e,n){var i,o,r=n(798509),a=n(420629),s=n(984928),c=n(792578),l=n(152750);e.Z={components:{Feedback:c.Z},mixins:[r.uW,r.jB,r.Sx,l.Qe,l.lq,l.Ao,l.kP,l.fE],data:function(){return{FeedbackType:s.nw}},computed:(i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({DRR_stepReportId:function(){return this.DRR_generateStepReportId({stepId:0})},DRR_taskReportId:function(){return"feedback"},DRR_agentReportId:function(){return"feedback"},DRR_boxData:function(){return{d:this.lastBox,reqBusinessType:s.WI.DEEP_RESEARCH}}},(0,a.rn)({resultObj:function(t){return t.result.self.resultObj}})),o=(o={lastBox:function(){var t;return null===(t=this.resultObj.data)||void 0===t?void 0:t[this.resultObj.data.length-1]},modelType:function(){var t,e,n,i=null===(n=this.lastBox)||void 0===n?void 0:null===(e=n.itemInfo)||void 0===e?void 0:null===(t=e.modelInfo)||void 0===t?void 0:t.modelName;return i?Number(i):0},searchId:function(){var t,e;return null===(e=this.lastBox)||void 0===e?void 0:null===(t=e.itemInfo)||void 0===t?void 0:t.oriSid},feedbackData:function(){var t;return null===(t=this.lastBox)||void 0===t?void 0:t.feedbackData},buttonList:function(){var t=this;return[{title:"反馈问题",isFeedBack:!0},{title:"用户协议",onClick:function(){t.DRR_clickReport({docInfo:t.DRR_generateDocReportId({docId:"user_agreement",docType:"user_agreement",docPos:0}),actionType:s.At.H5}),t.M_serviceSearchGo({jumpInfo:{jumpType:s.sn.H5,jumpUrl:"https://search.weixin.qq.com/cgi-bin/newsearchweb/userclientjump?path=page/search/dr_protocol"}})}}]}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(o)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(o,t))}),i)}},305043:function(t,e,n){n.d(e,{D1:function(){return l},ew:function(){return s},qC:function(){return c}});var i=n(798509),o=n(116746),r=n(52005),a=n(726524),s=new o.J({Normal:0,DeepResearch:1,DeepResearchError:2,DeepResearchFinish:3,DeepResearchRunningButCantStop:4});function c(t){if(t>0){var e=i.Zr.getSimilarFontHeight(15,1.6);return[s.DeepResearchFinish,s.DeepResearchRunningButCantStop].includes(t)?i.Zr.getSafeBottomHeight()+8+i.Zr.getSimilarFontHeight(14,1.6)+e+20:i.Zr.getSafeBottomHeight()+8+i.Zr.getSimilarFontHeight(14,1.6)+e+20+24}return 80+i.Zr.getSimilarFontHeight(15,1.6)}function l(t){return[s.DeepResearch,s.DeepResearchError,s.DeepResearchFinish,s.DeepResearchRunningButCantStop].includes(t)?{height:"calc(".concat(c(t),"px - var(--SAFE-BOTTOM, 0px))")}:{}}e.ZP={components:{DeepResearchPageBottom:r.Z,ChatbotBottomBackground:a.Z},props:{stopBtnStyle:{type:Number,default:s.Normal},stopText:{type:String,default:""}},data:function(){return{isAtBottom:!1}},computed:{showTitle:function(){return this.stopBtnStyle===s.DeepResearchError?this.stopText||"已停止回答":"停止回答"},style:function(){return{height:"".concat(c(this.stopBtnStyle),"px")}},canShowDeepResearchPageBottom:function(){return[s.DeepResearchError,s.DeepResearchFinish].includes(this.stopBtnStyle)},stopBtnHeightHolderHeight:function(){return l(this.stopBtnStyle)}},created:function(){this.checkIsAtBottom(),window.addEventListener("scroll",this.checkIsAtBottom,!1)},beforeDestroy:function(){window.removeEventListener("scroll",this.checkIsAtBottom,!1)},methods:{checkIsAtBottom:function(){var t=window.scrollY,e=window.innerHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;this.isAtBottom=t+e>=n}}}},275834:function(t,e,n){var i=n(120124),o=n(984928),r=n(798509),a=n(735055),s=n(684266),c=n(152750);function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}e.Z={mixins:[r.uW,c.Qe],data:function(){return{debounceReport34426Map:{}}},provide:function(){return{DR_realTimeReport:this.DR_realTimeReport,drSearchIdForReport:this.drSearchIdForReport,drSearchIdForServer:this.drSearchIdForServer}},computed:{DRR_boxData:function(){return{d:this.d,reqBusinessType:o.WI.DEEP_RESEARCH}},commonProps:function(){return{data:this.d,pos:this.pos,typePos:this.typePos}},itemInfo:function(){return this.d.itemInfo},drSearchIdForReport:function(){return this.d.vueSearchId||r.xB.searchId},drSearchIdForServer:function(){var t;return(null===(t=this.itemInfo)||void 0===t?void 0:t.oriSid)||this.d.searchID||this.drSearchIdForReport}},methods:{DR_openShareSheet:function(t){var e,n,s,c=t.title,u=t.desc,d=t.shareType,h=function(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++){if(n=r[i],!(e.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}}return o}(t,["title","desc","shareType"]),f=null===(s=this.itemInfo.cgiParams)||void 0===s?void 0:s.taskKeyDetail,p=this.itemInfo.oriSid;(0,i.G)((e=l({title:(c||this.d.itemInfo.userQuery||"").replace(/\n/g," ").trim(),desc:u,srcId:"wxf6e012cbbca759dc",postConversationsShareReqParams:f?(0,a.Ep)({taskKeyDetail:f}):void 0,thumbUrl:d===a.HE.Report?"https://search.wxqcloud.qq.com/t/fed_upload/9fca44b11edf47b929b3b16e2c0fa2d6/report_share.png":void 0},h),n=(n={startWebSearchParams:{query:this.d.itemInfo.userQuery,type:o.WI.DEEP_RESEARCH,extParams:encodeURIComponent(JSON.stringify({shareFromChatbot:r.xB.chatbot,chatbotSecond:r.xB.chatbot,chatbotExtParams:{shareId:p?"share_".concat(p):void 0,deepResearchShareType:d},parentSearchID:this.M_composeParentSid({isFromOpenSearchWebview:!0,t:o.X$.MMSEARCH_TYPE_AISEARCH_SINGLE_QUESTION,did:this.drSearchIdForServer,rid:this.d.vueRid,s:this.drSearchIdForReport})})),customNavBarParams:{nativeConfig:{title:"AI搜索"},hideSearchBar:!0,hideNavBar:!0}}},n),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e))},DR_realTimeReport:function(t){var e=this,n=function(n){var i,o=e.debounceReport34426Map[t.actionType],r={};(null==o?void 0:null===(i=o.extInfoList)||void 0===i?void 0:i.length)&&n&&(o.extInfoList.every(function(t){return"string"==typeof t.extInfo})?r.extInfo=o.extInfoList.map(function(t){return t.extInfo}).join(";"):r.extInfo={extInfoList:o.extInfoList},o.extInfoList=[]),(0,s.Z)(l({searchId:e.drSearchIdForReport,query:e.itemInfo.userQuery,tag:e.drSearchIdForServer},t,r))};if(t.aggregation){var i=(!e.debounceReport34426Map[t.actionType]&&(e.debounceReport34426Map[t.actionType]={extInfoList:[]}),e.debounceReport34426Map[t.actionType]);i.extInfoList.push({extInfo:t.extInfo,actionTimeStamp:Date.now()}),!i.timer&&(i.timer=setTimeout(function(){i.timer=void 0,n(!0)},1e3));return}n()}}}},744314:function(t,e,n){var i=n(691409);e.Z={data:function(){return{Scroll_isUserHasScroll:!1,Scroll_touchStartEvent:null,Scroll_isTouchMove:!1,Scroll_hasScrollToBottom:!1}},computed:{Scroll_canAutoScrollToBottom:function(){return!!this.Scroll_hasScrollToBottom||!this.Scroll_isUserHasScroll}},mounted:function(){window.addEventListener("scroll",this.Scroll_handleScroll),window.addEventListener("touchstart",this.Scroll_handleTouchStart),window.addEventListener("touchend",this.Scroll_handleTouchEnd),window.addEventListener("wheel",this.Scroll_handleWheel)},beforeDestroy:function(){window.removeEventListener("scroll",this.Scroll_handleScroll),window.removeEventListener("touchstart",this.Scroll_handleTouchStart),window.removeEventListener("touchend",this.Scroll_handleTouchEnd),window.removeEventListener("wheel",this.Scroll_handleWheel)},methods:{Scroll_handleWheel:function(){this.Scroll_isUserHasScroll=!0},Scroll_handleTouchStart:function(t){this.Scroll_isTouchMove=!1,this.Scroll_touchStartEvent=t},Scroll_handleTouchEnd:function(t){var e,n,i,o;this.Scroll_touchStartEvent&&Math.abs((null==t?void 0:null===(n=t.changedTouches)||void 0===n?void 0:null===(e=n[0])||void 0===e?void 0:e.pageY)-(null===(o=this.Scroll_touchStartEvent.changedTouches)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.pageY))>10&&(this.Scroll_isTouchMove=!0),this.Scroll_touchStartEvent=null},Scroll_handleScroll:function(){this.Scroll_isTouchMove&&(this.Scroll_isUserHasScroll=!0,this.Scroll_isTouchMove=!1),this.Scroll_hasScrollToBottom=window.scrollY+window.innerHeight>=document.documentElement.scrollHeight},Scroll_resetUserHasScroll:function(){this.Scroll_isUserHasScroll=!1},Scroll_scrollToBottom:function(t){if(!!this.Scroll_canAutoScrollToBottom||!!(null==t?void 0:t.ignoreUserScroll)||!!(null==t?void 0:t.resetUserScroll))(null==t?void 0:t.resetUserScroll)&&(this.Scroll_isUserHasScroll=!1),(null==t?void 0:t.needAnimate)?(0,i.Bo)(300):(0,i.Bo)()}}}},20881:function(t,e,n){n.d(e,{Mh:function(){return r},Ug:function(){return s},po:function(){return c},vq:function(){return a}});var i=n(798509),o=n(984928);function r(t){var e,n=t.syncResp;return!!n&&!!n.isCache&&!!(null===(e=n.answer)||void 0===e?void 0:e.answerFinish)}function a(t){return!!(s(t)&&r(t))}function s(t){var e=i.Zr.discomposeParentSearchID(i.xB.stableField.parentSearchID),n=e.t,r=e.kv;return!i.xB.chatbot&&!!(t.enhancePerception||(null==r?void 0:r.isFollowUpQuestion))&&![o.X$.GUESS_SEARCH_HISTORY,o.X$.SWITCH_TAB,o.X$.TURN_BACK].includes(n)}function c(){return i.Zr.getPageWidth()-32-16}e.ZP={mixins:[i.jB,i.uW,i.Sx],props:{isLoading:Boolean,isBoxVisible:Boolean,mainEventCenter:Object,initResponse:Object,doReportRsp:Function,answerType:Number},computed:{isSyncCache:function(){return r(this.source)}}}},630755:function(t,e,n){n.d(e,{M:function(){return g}});var i=n(720144),o=n(420629),r=n(636196),a=n(342622),s=n(798509),c=n(728223),l=n(444542),u=n(748750);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){h(r,i,o,a,s,"next",t)}function s(t){h(r,i,o,a,s,"throw",t)}a(void 0)})}}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function m(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function v(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var g=i.default.extend({data:function(){return{topLevelComments:[],topLevelPageInfo:{page_ctx:"",has_more:0,more_count:0},commentLoading:{top:!1,second:{}},deletingComment:!1,sendingComment:!1,commentDrafts:{},commentTypewriterMap:new Map}},computed:m(p({},(0,o.rn)({identityList:function(t){return t.aiSearchCommunity.identityList}})),{selectedUser:function(){return this.identityList.find(function(t){return t.selected})||this.identityList[0]},hasAtAiEntry:function(){var t,e,n,i;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.at_ai_flag)>0&&!!(null===(i=this.interactInfo)||void 0===i?void 0:null===(n=i.at_ai_user_attr_info)||void 0===n?void 0:n.nickname)},hasDebugEntry:function(){var t,e;return(null===(e=this.interactInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.debug_flag)>0}}),mounted:function(){setTimeout(function(){(0,l.i2)()})},methods:{updateCommentCountAfterLoad:function(){if(!this.topLevelPageInfo.has_more){var t,e=0;this.topLevelComments.forEach(function(t){e+=1,"number"==typeof t.second_comment_count&&t.second_comment_count>0&&(e+=t.second_comment_count)}),(null===(t=this.interactInfo)||void 0===t?void 0:t.comment_count)!==e&&(console.warn("updateCommentCountAfterLoad: ",e),this.$set(this.interactInfo,"comment_count",e))}},updateCommentCountAfterChange:function(t){var e,n=Math.max(0,((null===(e=this.interactInfo)||void 0===e?void 0:e.comment_count)||0)+t);console.warn("updateCommentCountAfterChange: ",n),this.$set(this.interactInfo,"comment_count",n)},findCommentById:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.topLevelComments,i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c,l,u=a.value;if(u.comment_id===t)return u;if(e&&(null===(l=u.second_comment_list_info)||void 0===l?void 0:null===(c=l.comment_list)||void 0===c?void 0:c.length)){var d=this.findCommentById(t,!1,u.second_comment_list_info.comment_list);if(d)return d}}}catch(t){o=!0,r=t}finally{try{!i&&null!=s.return&&s.return()}finally{if(o)throw r}}return null},insertTopLevelComment:function(t){for(var e,n,i=arguments.length,o=Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];var a=new Set(this.topLevelComments.map(function(t){return t.comment_id})),s=o.filter(function(t){return!a.has(t.comment_id)}).map(function(t){var e,n,i,o;return(null===(e=t.second_comment_list_info)||void 0===e?void 0:e.more_count)||(null===(i=t.second_comment_list_info)||void 0===i?void 0:null===(n=i.comment_list)||void 0===n?void 0:n.length)||!t.second_comment_count?(null===(o=t.second_comment_list_info)||void 0===o?void 0:o.more_count)?m(p({},t),{second_comment_list_info:m(p({},t.second_comment_list_info),{has_more:!0})}):t:m(p({},t),{second_comment_list_info:{more_count:t.second_comment_count,has_more:!0}})});"start"===t?(e=this.topLevelComments).unshift.apply(e,v(s)):"end"===t&&(n=this.topLevelComments).push.apply(n,v(s))},handleDebugComment:function(t){return f(function(){var e,n,i;return y(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),s.Gc.$emit(s.U3.showToast,{action:c.g.loading,text:""}),[4,r.z7.getCommentDebugInfo({search_id:this.snapshotSearchId,comment_id:t})];case 1:return(n=null===(e=i.sent().json)||void 0===e?void 0:e.debug_info)?(s.Gc.$emit(s.U3.hideToast),this.M_serviceSearchGo({pop:{type:u.f.popDebugInfo,header:{close:!1,closeArrow:!0},popTitle:"「DEBUG」",popDesc:t,debugInfo:n}})):s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"暂无debug信息"}),[3,3];case 2:return i.sent(),s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"暂无debug信息"}),[3,3];case 3:return[2]}})}).apply(this)},insertSecondLevelComment:function(t,e){for(var n,i,o=arguments.length,r=Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];var s=this.findCommentById(t);if(!!s){var c=new Set((null===(i=s.second_comment_list_info)||void 0===i?void 0:null===(n=i.comment_list)||void 0===n?void 0:n.map(function(t){return t.comment_id}))||[]),l=r.filter(function(t){return!c.has(t.comment_id)});!s.second_comment_list_info&&this.$set(s,"second_comment_list_info",{comment_list:[],page_ctx:"",more_count:0,page_mode:0}),!s.second_comment_list_info.comment_list&&this.$set(s.second_comment_list_info,"comment_list",[]);var u=s.second_comment_list_info.comment_list,d=!0;"start"===e?u.unshift.apply(u,v(l)):"end"===e?u.push.apply(u,v(l)):"reply"===e?l.forEach(function(t){var e=u.findIndex(function(e){return e.comment_id===t.reply_to_comment_id});e>-1?u.splice(e+1,0,t):u.push(t)}):d=!1,d&&(s.second_comment_count=(s.second_comment_count||0)+l.length)}},deleteComment:function(t){var e=function(e){var n=e.findIndex(function(e){return e.comment_id===t});return!!(n>-1)&&(r=e[n],e.splice(n,1),!0)};if(e(this.topLevelComments)){this.updateCommentCountAfterChange(-1-(r.second_comment_count||0));return}var n=!0,i=!1,o=void 0;try{for(var r,a,s=this.topLevelComments[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c,l=a.value;if((null===(c=l.second_comment_list_info)||void 0===c?void 0:c.comment_list)&&e(l.second_comment_list_info.comment_list)){l.second_comment_count=Math.max((l.second_comment_count||0)-1,0),this.updateCommentCountAfterChange(-1);return}}}catch(t){i=!0,o=t}finally{try{!n&&null!=s.return&&s.return()}finally{if(i)throw o}}},initInitialComments:function(t){t&&(this.insertTopLevelComment.apply(this,["end"].concat(v(t.comment_list||[]))),this.topLevelPageInfo={page_ctx:t.page_ctx||"",has_more:t.more_count>0?1:0,more_count:t.more_count||0},this.updateCommentCountAfterLoad())},loadTopComments:function(){return f(function(){var t,e;return y(this,function(n){switch(n.label){case 0:if(this.commentLoading.top||!this.topLevelPageInfo.has_more)return[2];this.commentLoading.top=!0,n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,r.z7.getTopQACommentByPage({search_id:this.snapshotSearchId,page_ctx:this.topLevelPageInfo.page_ctx,root_comment_id:""})];case 2:return t=n.sent(),this.insertTopLevelComment.apply(this,["end"].concat(v(t.json.comment_list||[]))),this.topLevelPageInfo={page_ctx:t.json.page_ctx,has_more:t.json.has_more,more_count:0},this.updateCommentCountAfterLoad(),[3,5];case 3:throw e=n.sent(),s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"网络繁忙, 请稍后再试"}),e;case 4:return this.commentLoading.top=!1,[7];case 5:return[2]}})}).apply(this)},loadSecondComments:function(t){return f(function(){var e,n,i,o,a;return y(this,function(l){switch(l.label){case 0:if(this.commentLoading.second[t]||!(e=this.findCommentById(t)))return[2];this.$set(this.commentLoading.second,t,!0),n=e.second_comment_list_info||{},l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,r.z7.getTopQACommentByPage({search_id:this.snapshotSearchId,page_ctx:n.page_ctx,root_comment_id:t})];case 2:return o=l.sent(),!e.second_comment_list_info&&this.$set(e,"second_comment_list_info",{comment_list:[],page_ctx:"",more_count:0,page_mode:0}),!(null===(i=e.second_comment_list_info)||void 0===i?void 0:i.comment_list)&&this.$set(e.second_comment_list_info,"comment_list",[]),this.insertSecondLevelComment.apply(this,[t,"end"].concat(v(o.json.comment_list||[]))),e.second_comment_list_info.page_ctx=o.json.page_ctx,e.second_comment_list_info.more_count=0,e.second_comment_list_info.has_more=o.json.has_more,[3,5];case 3:throw a=l.sent(),s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"网络繁忙, 请稍后再试"}),a;case 4:return this.$delete(this.commentLoading.second,t),[7];case 5:return[2]}})}).apply(this)},handlePublishComment:function(t){var e=t.content,n=t.rootCommentId,i=t.replyToCommentId,o=t.isAtAi,a=t.editMode;return f(function(){var t,l,u,d,h,f,p,m,v,g,b,_;return y(this,function(y){switch(y.label){case 0:if(this.sendingComment)return[2];this.sendingComment=!0,s.Gc.$emit(s.U3.showToast,{action:c.g.loading,text:"正在发送"}),t=null,l=!1,y.label=1;case 1:return y.trys.push([1,3,4,5]),[4,r.z7.releaseTopQAComment({search_id:this.snapshotSearchId,content:e,root_comment_id:n,reply_to_comment_id:i,encrypt_account:this.selectedUser.encrypt_account,need_ai_reply:o,is_at_ai:o,edit_mode:a})];case 2:return d=(u=y.sent()).json.comment,h=u.json.ai_comment,d&&(n?this.insertSecondLevelComment(n,"end",d):(d.second_comment_count=0,this.insertTopLevelComment("start",d)),this.updateCommentCountAfterChange(1),t=d.comment_id),(null==h?void 0:h.root_comment_id)&&(this.insertSecondLevelComment(h.root_comment_id,"reply",h),this.updateCommentCountAfterChange(1),t=h.comment_id,l=!0),s.Gc.$emit(s.U3.showToast,{action:c.g.done,text:"已发送"}),[3,5];case 3:throw console.error("Failed to send comment",f=y.sent()),s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"评论未发送, 请稍后再试"}),f;case 4:return this.sendingComment=!1,[7];case 5:if(!t)return[3,7];return[4,this.$nextTick()];case 6:y.sent(),m=null===(p=this.$el)||void 0===p?void 0:p.querySelector('.js--top-one-qa-comment-list-item[data-comment-id="'.concat(t,'"]')),v=document.querySelector(".js--append-chat"),g=window.innerHeight-Math.max(parseFloat(getComputedStyle(document.body).getPropertyValue("--SAFE-BOTTOM"))||0,(null==v?void 0:v.offsetHeight)||0)-20,m&&(b=m.getBoundingClientRect(),(_=l?b.top+178:b.bottom)>g&&window.scrollBy({top:_-g,behavior:"smooth"})),y.label=7;case 7:return[2]}})}).apply(this)},getTopQACommentById:function(t){return f(function(){var e,n,i,o,s,c,l;return y(this,function(l){switch(l.label){case 0:e=this,l.label=1;case 1:return l.trys.push([1,3,,4]),console.log("polling commentId: ",t),[4,r.z7.getTopQACommentById({search_id:this.snapshotSearchId,comment_id:t})];case 2:if(o=null==(i=l.sent().json.comment)?void 0:null===(n=i.ai_control_info)||void 0===n?void 0:n.can_polling,s=null==i?void 0:i.comment_id){if(c=this.findCommentById(t,!0)){if(o)return!this.commentTypewriterMap.has(s)&&this.commentTypewriterMap.set(s,new a.r(function(t){e.$set(c.content,"text",t)})),this.commentTypewriterMap.get(s).handleNewDescAnimate({newText:i.content.text,oldText:c.content.text,duration:30,isCache:!1,needDefaultContent:!1}),[2,!1];this.commentTypewriterMap.has(s)&&(this.commentTypewriterMap.get(s).terminate(),this.commentTypewriterMap.delete(s)),Object.keys(i).forEach(function(t){e.$set(c,t,i[t])}),this.$set(c,"ai_control_info",m(p({},c.ai_control_info),{can_polling:!1}))}return[2,!0]}return[2,!1];case 3:return l.sent(),[2,!1];case 4:return[2]}})}).apply(this)},chooseTopQAIdentity:function(){return f(function(){var t;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.z7.chooseTopQAIdentity({encrypt_account:this.selectedUser.encrypt_account})];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}})}).apply(this)},showCommentInput:function(t,e){return f(function(){var n,i,o,r,a,u,d,h,f,v,g,b,_,S,I,w,x,T,C,k;return y(this,function(y){switch(y.label){case 0:if(n=this,this.sendingComment)return[2];return f=[t,e].filter(function(t){return!!t}).join("_"),v="",g=!1,t&&((b=this.findCommentById(t))&&e&&(_=this.findCommentById(e,!1,(null==b?void 0:null===(S=b.second_comment_list_info)||void 0===S?void 0:S.comment_list)||[])),(b||_)&&(v=(_||b).nickname||"",g=(_||b).is_ai_reply||!1)),[4,this.$store.dispatch("aiSearchCommunity/getIdentityList")];case 1:if(y.sent(),!this.selectedUser)return s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"网络繁忙, 请稍后再试"}),[2];return I=(null===(o=this.interactInfo)||void 0===o?void 0:null===(i=o.at_ai_user_attr_info)||void 0===i?void 0:i.nickname)||"",w=(null===(a=this.interactInfo)||void 0===a?void 0:null===(r=a.at_ai_user_attr_info)||void 0===r?void 0:r.head_img_url)||"",x=(null===(u=this.commentDrafts[f])||void 0===u?void 0:u.reportId)||this.M_genItemInfo("input","input"),[4,(0,l.LO)({identityList:this.identityList.map(function(t){return{key:t.encrypt_account||"",nickname:t.nickname||"",avatar:t.head_img_url||"",avatarStyle:t.identity_type>0?"round":"square",typeName:t.identity_text,typeIcon:1===t.identity_type?"https://search.wxqcloud.qq.com/t/fed_upload/bd79be6b589719cb62539e57adb2a5ac/channels_medium_colorful.svg":"",isDefault:t.selected,publicIdentityType:t.identity_type}}),atAiEntry:this.hasAtAiEntry?{nickname:I,avatar:w,avatarStyle:"square",shouldShowTutorial:!0}:void 0,replyToNickname:v,isReplyToAi:g,maxLength:200,maxPicCount:9,actionType:t?"reply":"send",initialContent:this.commentDrafts[f],onChangeIdentity:function(t){var e,i=t.selectedIdentityKey;n.$store.commit({type:"aiSearchCommunity/setIdentityList",identityList:n.identityList.map(function(t){return m(p({},t),{selected:t.encrypt_account===i})})}),(null===(e=n.selectedUser)||void 0===e?void 0:e.encrypt_account)&&n.chooseTopQAIdentity({encrypt_account:n.selectedUser.encrypt_account})}},{onInputBarHeight:function(i){var o,r,a,s,c=e||t||"",l=12;if(c?o=null===(r=n.$el)||void 0===r?void 0:r.querySelector('.js--top-one-qa-comment-list-item[data-comment-id="'.concat(c,'"]')):(o=null===(a=n.$el)||void 0===a?void 0:a.querySelector(".js--top-one-qa-write-comment-bar"))?l=20:o=null===(s=n.$el)||void 0===s?void 0:s.querySelector(".js--top-one-qa-interaction-bar"),o){var u=o.getBoundingClientRect().bottom+l,d=window.innerHeight-i;window.scrollBy({top:u-d,behavior:"smooth"})}}})];case 2:if(T=y.sent(),this.commentDrafts[f]=m(p({},T),{reportId:x}),this.$store.commit({type:"aiSearchCommunity/setIdentityList",identityList:this.identityList.map(function(t){return m(p({},t),{selected:t.encrypt_account===T.selectedIdentityKey})})}),(null===(d=this.selectedUser)||void 0===d?void 0:d.encrypt_account)&&this.chooseTopQAIdentity({encrypt_account:this.selectedUser.encrypt_account}),(null===(h=T.reportItems)||void 0===h?void 0:h.length)&&T.reportItems.forEach(function(t){n.M_clickReport({clickContent:"",actionTimeStamp:t.timestamp,actionType:t.actionType,reportId:"input:input"===t.itemInfo?x:t.itemInfo,cardExtInfo:t.extInfo||{}})}),"send"!==T.action)return[3,4];return[4,this.handlePublishComment({content:T.content,rootCommentId:t,replyToCommentId:e,isAtAi:T.isAtAi||!1,editMode:T.editMode||0})];case 3:y.sent(),this.M_clickReport({clickContent:"",actionType:s.At.CONFIRM_CHANGE_CODE,reportId:x,cardExtInfo:{public_identity_type:T.publicIdentityType,at_ai_count:(null===(k=T.content)||void 0===k?void 0:null===(C=k.richtext)||void 0===C?void 0:C.filter(function(t){return 3===t.type}).length)||0}}),this.$delete(this.commentDrafts,f),y.label=4;case 4:return[2]}})}).apply(this)},findAiReplyComment:function(t){var e=!0,n=!1,i=void 0;try{for(var o,r=this.topLevelComments[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var a=o.value;if(null===(u=a.second_comment_list_info)||void 0===u?void 0:u.comment_list){var s=!0,c=!1,l=void 0;try{for(var u,d,h=a.second_comment_list_info.comment_list[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var f=d.value;if(f.is_ai_reply&&f.reply_to_comment_id===t)return f}}catch(t){c=!0,l=t}finally{try{!s&&null!=h.return&&h.return()}finally{if(c)throw l}}}}}catch(t){n=!0,i=t}finally{try{!e&&null!=r.return&&r.return()}finally{if(n)throw i}}return null},handleDeleteComment:function(t){return f(function(){var e,n,i;return y(this,function(o){switch(o.label){case 0:if(this.deletingComment)return[2];this.deletingComment=!0,s.Gc.$emit(s.U3.showToast,{action:c.g.loading,text:"正在删除"}),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,r.z7.deleteTopQAComment({search_id:this.snapshotSearchId,comment_id:t})];case 2:return o.sent(),this.deleteComment(t),(null==(n=this.findAiReplyComment(t))?void 0:null===(e=n.ai_control_info)||void 0===e?void 0:e.can_polling)&&this.deleteComment(n.comment_id),s.Gc.$emit(s.U3.showToast,{action:c.g.done,text:"已删除"}),[3,5];case 3:throw i=o.sent(),s.Gc.$emit(s.U3.showToast,{action:c.g.pure,text:"评论未删除, 请稍后再试"}),i;case 4:return this.deletingComment=!1,[7];case 5:return[2]}})}).apply(this)},toggleLike:function(t){return f(function(){var e,n,i,o;return y(this,function(o){switch(o.label){case 0:if(!(n=this.findCommentById(t,!0))||!(null===(e=n.action_flag)||void 0===e?void 0:e.like_flag))return[2];i={liked:2===n.action_flag.like_flag,count:n.like_count},n.action_flag.like_flag=i.liked?1:2,n.like_count=Math.max(0,n.like_count+(i.liked?-1:1)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r.z7.topQAInteract({interact_type:i.liked?3:2,search_id:this.snapshotSearchId,comment_id:t})];case 2:return o.sent(),[3,4];case 3:return o.sent(),n.action_flag.like_flag=i.liked?2:1,n.like_count=i.count,[3,4];case 4:return[2]}})}).apply(this)}}})},301638:function(t,e,n){var i=n(720144);e.Z=i.default.extend({name:"CommentRichtext",functional:!0,props:{items:{type:Array,default:function(){return[]}}},render:function(t,e){var n=e.props,i=e.scopedSlots;return t("span",n.items.map(function(e){if("string"==typeof e&&e)return t("span",{domProps:{innerHTML:e}});if("object"==typeof e&&e){var n;return(null===(n=i.default)||void 0===n?void 0:n.call(i,e))||null}return null}))}})},142662:function(t,e,n){n.d(e,{e:function(){return i}});var i=new(n(116746)).J({FORWARD:1,LIKE_COMMENT:2,UNDO_LIKE_COMMENT:3,UNDO_REAL_LIKE:4,FRIEND_REAL_LIKE:5,LIKE:6,UNDO_LIKE:7})},938798:function(t,e,n){n.d(e,{Z:function(){return i}});function i(t){var e,n,i,o=t.item,r=t.likeFlag,a=t.privateUserInfo,s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},o);return!s.real_like_info&&(s.real_like_info={}),!s.real_like_info.list&&(s.real_like_info.list=[]),!s.real_like_info.total_count&&(s.real_like_info.total_count=0),(!s.real_like_count||"number"!=typeof s.real_like_count)&&(s.real_like_count=0),!s.action_flag&&(s.action_flag={}),s.action_flag.real_like_flag=r,a?1===r?(s.real_like_count=Math.max(0,s.real_like_count-1),s.real_like_info.total_count=Math.max(0,s.real_like_info.total_count-1),(null===(n=s.real_like_info)||void 0===n?void 0:null===(e=n.list)||void 0===e?void 0:e.length)&&a.encrypt_user_name&&(s.real_like_info.list=s.real_like_info.list.filter(function(t){return t.username!==(null==a?void 0:a.encrypt_user_name)}))):2===r&&(s.real_like_count+=1,s.real_like_info.total_count+=1,-1===s.real_like_info.list.findIndex(function(t){return t.username===a.encrypt_user_name})&&s.real_like_info.list.push({nickname:a.nickname,username:a.encrypt_user_name,head_img_url:(null===(i=a.head_img_url)||void 0===i?void 0:i.includes("http"))?a.head_img_url:"https://bs.qpic.cn/mmux/0nn3FBrD9a3ich3LAUaQ2lSVp878cQjIOe9V2D2jLWv3icIIaKC5JyIfcQUpByUrv77S66UDwTDWA/0"})):1===r?(s.real_like_count=Math.max(0,s.real_like_count-1),s.real_like_info.total_count=Math.max(0,s.real_like_info.total_count-1)):2===r&&(s.real_like_count+=1,s.real_like_info.total_count+=1),s}},439502:function(t,e,n){var i=n(798509),o=n(938798),r=n(142662),a=n(636196),s=n(984928);function c(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){c(r,i,o,a,s,"next",t)}function s(t){c(r,i,o,a,s,"throw",t)}a(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function d(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}e.Z={mixins:[i.uW,i.jB,i.Sx],data:function(){return{friend_innerInteractInfo:null,friend_friendLikeLoading:!1,friend_hasAgreeInteractGuide:!0}},computed:{friend_interactInfo:function(){if(!i.xB.chatbot&&!this.disableInteract)return i.Zr.safeJsonParse(this.source.interactInfo)},friend_canShowFriendList:function(){var t,e;return!!(null===(e=this.friend_friendLikeInfo)||void 0===e?void 0:null===(t=e.list)||void 0===t?void 0:t.length)},friend_canShowQuarkCommunity:function(){var t;return!!this.friend_innerInteractInfo&&(null===(t=this.friend_innerInteractInfo.action_flag)||void 0===t?void 0:t.real_like_flag)>0},friend_friendLikeInfo:function(){var t;return null===(t=this.friend_innerInteractInfo)||void 0===t?void 0:t.real_like_info},friend_userAttrInfo:function(){var t;return null===(t=this.friend_innerInteractInfo)||void 0===t?void 0:t.user_attr_info},friend_renderFriendIcon:function(){var t,e;return(null===(e=this.friend_innerInteractInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"filled-heart":"outlined-heart"},friend_renderFriendColor:function(){var t,e;return(null===(e=this.friend_innerInteractInfo)||void 0===e?void 0:null===(t=e.action_flag)||void 0===t?void 0:t.real_like_flag)===2?"var(--RED)":"var(--FG-0)"}},mounted:function(){var t=this;i.su.get({key:"top-qa-quark-interact-guide"}).then(function(e){t.friend_hasAgreeInteractGuide=!!(null==e?void 0:e.hasAgreeInteractGuide)})},methods:{friend_doInteract:function(t){return l(function(){var e,n,o;return d(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n={interact_type:t,search_id:(null===(e=this.friend_innerInteractInfo)||void 0===e?void 0:e.docid)||this.topQASearchIdForServer,snapshot_query:i.xB.query},[4,a.z7.topQAInteract(n)];case 1:return o.sent(),[2,!0];case 2:return o.sent(),[2,!1];case 3:return[2]}})}).apply(this)},friend_doInteractLike:function(){return l(function(){var t,e;return d(this,function(n){switch(n.label){case 0:if(!this.friend_innerInteractInfo||this.friend_friendLikeLoading)return[2];return this.friend_friendLikeLoading=!0,t=2===this.friend_innerInteractInfo.action_flag.real_like_flag,e=(0,o.Z)({item:this.friend_innerInteractInfo,likeFlag:t?1:2,privateUserInfo:this.friend_userAttrInfo}),this.friend_innerInteractInfo=u({},this.friend_innerInteractInfo,e),[4,this.friend_doInteract(t?r.e.UNDO_REAL_LIKE:r.e.FRIEND_REAL_LIKE)];case 1:return!n.sent()&&(e=(0,o.Z)({item:this.friend_innerInteractInfo,likeFlag:t?2:1,privateUserInfo:this.friend_userAttrInfo}),this.friend_innerInteractInfo=u({},this.friend_innerInteractInfo,e)),this.friend_friendLikeLoading=!1,[2]}})}).apply(this)},friend_onTapLike:function(){return l(function(){var t,e;return d(this,function(t){return!this.friend_innerInteractInfo||this.friend_friendLikeLoading?[2]:(e=2===this.friend_innerInteractInfo.action_flag.real_like_flag,this.M_clickReport({clickContent:"real_like",actionType:e?s.At.CLICK_UNDO_REAL_LIKE:s.At.CLICK_REAL_LIKE,reportId:"real_like:real_like"}),e||this.friend_hasAgreeInteractGuide,this.friend_doInteractLike(),[2])})}).apply(this)}},watch:{friend_interactInfo:{handler:function(t){this.friend_innerInteractInfo=t},immediate:!0}}}},612303:function(t,e,n){var i=n(798509),o=n(234031),r=n(16726);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function c(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}e.Z={mixins:[i.jB,o.Z],data:function(){return{_dispose:null,_listenEl:null}},beforeDestroy:function(){var t;this._listenEl=null,null===(t=this._dispose)||void 0===t||t.call(this)},inject:{mixedBoxChatbotMultiCollapseCtx:{default:function(){return null}}},methods:{top1_rm_getExposeData:function(t){var e,n,o,r,l,u,d,h,f=this.M_safeGetServiceItemCtx(),p=Object.assign({boxID:"",resultType:0,real_type:0,type:0,subType:0},f.data||{}),m=this.docReportId,v=this.boxReportId,y={};if(m){var g,b,_=(g=m.split(":"),b=2,function(t){if(Array.isArray(t))return t}(g)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(g,2)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}}(g,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=_[0],I=_[1];y.docID=S,y.docPos=I}var w=Object.assign({title:"",jumpUrl:"",docID:""},f.item||{},y),x=c(s({},i.xB.getBase()),{query:f.data.vueQuery||i.xB.stableField.query||i.xB.query||"",reqBusinessType:null!==(o=null!==(n=p.vueReqBusinessType)&&void 0!==n?n:i.xB.stableField.type)&&void 0!==o?o:i.xB.type,reqbusinesstype:null!==(l=null!==(r=p.vueReqBusinessType)&&void 0!==r?r:i.xB.stableField.type)&&void 0!==l?l:i.xB.type,pageNo:null!==(u=w.vuePage)&&void 0!==u?u:p.vuePage,pageNumber:null!==(h=null!==(d=w.vuePage)&&void 0!==d?d:p.vuePage)&&void 0!==h?h:this.$store.state.result.state.pageNumber,recommendId:this.$store.getters.getRecommendId,businessType:p.real_type||p.type,resultSubType:p.subType,suggestionId:this.$store.getters["sug/getSugId"],title:w.title,jumpUrl:w.jumpUrl||"",docId:w.docID||"",boxId:p.boxID,pos:y.docPos||f.pos||0,docPos:y.docPos||f.pos||0,typePos:f.typePos||0,sceneActionType:i.xB.sceneActionType,resultType:p.resultType,showType:p.type,requestId:f.item.vueRid||f.data.vueRid||this.$store.state.result.previousRid||(null===(e=this.$store.state.result.fixedPreRenderInfo)||void 0===e?void 0:e.requestId),searchId:f.data.vueSearchId||i.xB.getBase().searchId,conversationId:f.data.vueConversationId||i.xB.conversationId,parentSearchID:f.data.vueParentSearchID||i.xB.fixedParentSearchID,timestamp:+new Date,h5version:i.xB.version,netType:i.xB.netType,expand:w.expand||"",docCookie:w.docCookie||"",DocExpand:w.DocExpand||"",extBackComm:p.extBackComm||{},searchAdExtraData:p.searchAdExtraData||{},report_extinfo_str:w.report_extinfo_str||"",report_box_extinfo_str:p.report_box_extinfo_str||"",boxRowIndex:p.boxRowIndex}),T=t.reportId,C=function(t,e){if(null==t)return{};var n,i,o=function(t,e){if(null==t)return{};var n,i,o={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++){if(n=r[i],!(e.indexOf(n)>=0))Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}}return o}(t,["reportId"]),k=this.M_getItemType(T),A=this.M_itemReportIdMap[T]||"".concat(k?"0:".concat(k):"");return c(s({},x,C),{boxInfo:v,docInfos:[m],itemInfos:[T],itemPoses:[A],svrDocExtInfos:[x.report_extinfo_str],svrBoxExtInfo:x.report_box_extinfo_str})},top1_rm_startListenVisibleArea:function(t,e){var n,o=this;null===(n=this._dispose)||void 0===n||n.call(this),this._listenEl=t;var r=function(){var t=o.top1_rm_getVisibleHeight();t>0&&e(t)};this.Container_GetBodyNode()?i.Gc.$on(i.U3.CONTAINER_BODY_SCROLL,r):window.addEventListener("scroll",r,!1),i.Gc.$on(i.U3.MIXED_CHATBOT_VISIBLE_HEIGHT_CHANGE,r),window.addEventListener("resize",r,!1),this._dispose=function(){o.Container_GetBodyNode()?i.Gc.$off(i.U3.CONTAINER_BODY_SCROLL,r):window.removeEventListener("scroll",r,!1),i.Gc.$off(i.U3.MIXED_CHATBOT_VISIBLE_HEIGHT_CHANGE,r),window.removeEventListener("resize",r,!1)}},top1_rm_getVisibleHeight:function(){var t,e,n=this._listenEl;if(!n)return 0;var o=n.getBoundingClientRect(),a=o.bottom<this.Container_GetHeaderHeight()+i.Zr.unitHeightRef().value||o.top>window.innerHeight;if(!a&&this.mixedBoxChatbotMultiCollapseCtx&&!this.mixedBoxChatbotMultiCollapseCtx.isVisible(n)&&((0,r.U)("getVisibleHeight invisible"),a=!0),a)return 0;var s=null===(e=this.mixedBoxChatbotMultiCollapseCtx)||void 0===e?void 0:null===(t=e.getReportContainerRef)||void 0===t?void 0:t.call(e),c=o.bottom;if(s){var l=s.getBoundingClientRect().bottom;o.bottom>l&&(c=l)}return c<window.innerHeight?c-o.top:Math.max(0,Math.min(window.innerHeight,c)-o.top)}}}},19013:function(t,e,n){n.d(e,{x:function(){return o}});var i=n(142862);function o(t){var e=t.reportLogId,n=t.time,o=t.onlyReportLast,r=t.maxCountPerRequest,a=void 0===r?30:r;if(!n)throw Error("aggregationReport: time is required");var s=[],c=null,l=!1,u=function(t){var n=Array.isArray(t)?t:[t];if(a){for(var o=[],r=0;r<n.length;)o.push(n.slice(r,r+a)),r+=a;o.forEach(function(t){(0,i.v)(t.map(function(t){return(0,i.Z)(t,{reportLogId:e,dep:!0})}))})}else(0,i.v)(n.map(function(t){return(0,i.Z)(t,{reportLogId:e,dep:!0})}))},d=function(){if(o){var t=s.slice(-1);t.length&&u(t[0].logObj)}else u(s.map(function(t){var e=t.logObj;return Array.isArray(e)?e:[e]}).flat());s=[]},h=function(){if(!!s.length){if(!l){d(),l=!0;return}!c&&(c=setTimeout(function(){d(),c=null},n))}};return{report:function(t){s.push({logObj:t}),h()}}}},977768:function(t,e,n){var i=n(798509),o=n(448188),r=n(420629),a=n(234031),s=n(16726);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}e.Z={mixins:[a.Z],inject:{mixedBoxChatbotMultiCollapseCtx:{default:function(){return null}}},data:function(){return{v_dispose:null,v_isVisible:!1,v_isIntersecting:!0,v_isPageLeave:!1,v_listener:null,v_checkElementVisible:function(){}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},(0,r.rn)({isOpeningHalfScreenSearch:function(t){return t.result.isOpeningHalfScreenSearch}})),watch:{isOpeningHalfScreenSearch:{handler:function(){this.v_checkVisible()}}},beforeDestroy:function(){var t;null===(t=this.v_dispose)||void 0===t||t.call(this),this.v_dispose=null},methods:{v_startWatchVisible:function(t,e){var n,r=this;null===(n=this.v_dispose)||void 0===n||n.call(this),this.v_listener=e,this.v_checkElementVisible=function(){return!r.mixedBoxChatbotMultiCollapseCtx||r.mixedBoxChatbotMultiCollapseCtx.isVisible(t)},this.v_checkVisible();var a=new IntersectionObserver(function(t){var e,n,i=(n=1,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(e,1)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=void 0!==i.isIntersecting?i.isIntersecting:i.intersectionRatio>0;r.v_isIntersecting=o,r.v_checkVisible()},{threshold:0,rootMargin:"-".concat(i.xB.chatbot?0:i.Zr.unitHeightRef().value+this.Container_GetHeaderHeight(),"px 0px 0px 0px")});a.observe(t);var s=function(t){r.v_isPageLeave=!t,r.v_checkVisible()},l=function(){r.v_checkVisible()};i.Gc.$on(o.lb.onVisibilityChange,s),i.Gc.$on(i.U3.MIXED_CHATBOT_VISIBLE_HEIGHT_CHANGE,l),this.v_dispose=function(){a.disconnect(),r.v_checkElementVisible=null,i.Gc.$off(o.lb.onVisibilityChange,s),i.Gc.$off(i.U3.MIXED_CHATBOT_VISIBLE_HEIGHT_CHANGE,l)}},v_checkVisible:function(){var t,e,n,i=null===(e=null===(t=this.v_checkElementVisible)||void 0===t?void 0:t.call(this))||void 0===e||e,o=this.v_isIntersecting&&!this.v_isPageLeave&&!this.isOpeningHalfScreenSearch&&i;(0,s.U)("checkVisible",{isVisible:o,v_isIntersecting:this.v_isIntersecting,v_isPageLeave:this.v_isPageLeave,isOpeningHalfScreenSearch:this.isOpeningHalfScreenSearch,elementVisible:i});var r=o!==this.v_isVisible;this.v_isVisible=o,r&&(null===(n=this.v_listener)||void 0===n||n.call(this,o))}}}},844219:function(t,e,n){n(462474),e.Z={data:function(){return{answerKey:void 0}}}},293905:function(t,e,n){n.d(e,{b:function(){return o}});var i=n(720144),o={bind:function(t){var e=1,n=function(){t.style.height="1px",e=t.scrollHeight,t.style.height="".concat(Math.ceil(e),"px")},o=function(){setTimeout(function(){return i.default.nextTick(n)},0)};t.addEventListener("change",n),t.addEventListener("cut",o),t.addEventListener("paste",o),t.addEventListener("drop",o),t.addEventListener("input",n),t.addEventListener("appUpdateTextareaHeight",o),n()}}},444542:function(t,e,n){n.d(e,{LO:function(){return I},cS:function(){return m},i2:function(){return _}});var i,o=n(720144),r=n(798509),a=n(266289),s=n(518793),c=n(392469),l=n(136947);function u(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}function h(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var f={maxLength:200,maxPicCount:0,actionType:"send"},p=o.default.extend(a.Z),m=o.default.observable({show:!1}),v=null,y=null,g="midwayPage.commentInputV2",b="midwayPage.stateCallback";function _(){return i||(i=new Promise(function(t){console.info("prepareCommentInputBar"),(0,c.BB)([g,b]).then(function(e){console.info("prepareCommentInputBar checkLiteAppFeatures res",e),!e&&r.yG.reportJsCore({stack:"[comment-input-bar] prepareCommentInputBar: fail to check features"}),t(e)})}))}var S=!1;function I(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(S)throw Promise.reject(Error("comment input bar is busy"));return new Promise((n=(e=function(e,n){var o,a;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(u){return S=!0,m.show=!0,o=d({},f,t),a=i.onInputBarHeight,null==y||y(),_().then(function(t){if(null==t?void 0:t.features[g])(0,c.qL)(o,{stateCallback:(null==t?void 0:t.features[b])||!1,onInputBarHeight:a}).then(function(t){(null==t?void 0:t.data)?e(h(d({},t.data),{source:"liteapp"})):n(Error("no data received from liteapp midway page"))}).catch(function(t){r.yG.reportJsCore({stack:"[comment-input-bar] comment input bar error: ".concat((0,l.Z)(t))}),n(t)});else{(v=new p({store:s.Z,propsData:{options:o}})).$on("result",function(t){console.info("showCommentInputBar result",t),e(h(d({},t),{source:"web"}))});var i=v.$mount().$el;y=function(){document.body.removeChild(i),v.$destroy(),v=null,y=null,n(Error("comment input bar has been destroyed"))},document.body.appendChild(i),r.yG.reportJsCore({stack:"[comment-input-bar] comment input bar use h5"})}}),[2]})},function(){var t=this,n=arguments;return new Promise(function(i,o){var r=e.apply(t,n);function a(t){u(r,i,o,a,s,"next",t)}function s(t){u(r,i,o,a,s,"throw",t)}a(void 0)})}),function(t,e){return n.apply(this,arguments)})).finally(function(){setTimeout(function(){(0,c.aT)()},300),S=!1,m.show=!1})}},392469:function(t,e,n){n.d(e,{BB:function(){return _},aT:function(){return y},qL:function(){return C}});var i=n(984928),o=n(798509),r=n(448188),a=n(523544),s=n(735146);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){l(r,i,o,a,s,"next",t)}function s(t){l(r,i,o,a,s,"throw",t)}a(void 0)})}}function d(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var h="__midwayStepData",f=(0,s.Z)("[comment-input-bar] [liteapp-connect]"),p=function(t){if(!t)return!1;var e=t||{},n=e.retCode,i=e.err_code,o=e.err_msg;return(0===n||0===i||/[:：]\s*(?:ok|success)/.test(o))&&!/[:：]\s*fail/.test(o)},m=function(t,e){return new Promise(function(n){return setTimeout(function(){return n(e)},t)})},v=null;function y(){return!v&&(v=o.FP.isSupportFullCallLiteAppConnectEvent?o.hi.callLiteAppConnectEvent({method:"ensureLiteAppStoreAlive",appId:i.tv.W1W_LITE_APPID}):new Promise(function(t){o.hi.preloadLiteApp({appId:i.tv.W1W_LITE_APPID,page:"pages/midway-step/entry"},function(e){t(e)})})).finally(function(){v=null}),v}var g=null;function b(){return!g&&(g=u(function(){var t,e;return d(this,function(n){switch(n.label){case 0:return[2,!1];case 1:n.sent(),t=0,n.label=2;case 2:if(!(t<3))return[3,7];if(!(t>0))return[3,4];return[4,(0,a.Z)(300)];case 3:n.sent(),n.label=4;case 4:return[4,o.hi.callLiteAppConnectEvent({method:"checkLiteAppStoreAlive",appId:i.tv.W1W_LITE_APPID})];case 5:if(e=n.sent(),f("checkLiteAppStoreAlive res (retry=".concat(t,")"),e),p(e))return[2,!0];o.yG.reportJsCore({stack:"[comment-input-bar] initLiteAppConnect: checkLiteAppStoreAlive failed after preloadLiteApp (retry=".concat(t,")")}),n.label=6;case 6:return t++,[3,2];case 7:return[2,!1]}})})()).finally(function(){g=null}),g}function _(t){return S.apply(this,arguments)}function S(){return(S=u(function(t){var e,n;return d(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,Promise.race([b(),m(5e3,!1)])];case 1:if(!r.sent())return[2,null];return[4,o.hi.dispatchLiteAppAction({actionName:"".concat(h,"/canIUse"),data:{features:t},option:{type:"other",appId:i.tv.W1W_LITE_APPID}})];case 2:if(f("dispatch checkLiteAppFeatures res",n=r.sent()),(null==n?void 0:null===(e=n.result)||void 0===e?void 0:e.version)&&"object"==typeof n.result.features&&n.result.features)return[2,n.result];return[2,null];case 3:return f("checkLiteAppFeatures error",r.sent()),[2,null];case 4:return[2]}})})).apply(this,arguments)}function I(t){return w.apply(this,arguments)}function w(){return(w=u(function(t){return d(this,function(e){var n;return[2,new Promise((n=u(function(e){var n,r;return d(this,function(a){switch(a.label){case 0:n=!0,a.label=1;case 1:if(!n)return[3,3];return n=!1,[4,o.hi.dispatchLiteAppAction({actionName:"".concat(h,"/waitResult"),data:{key:t},option:{type:"other",appId:i.tv.W1W_LITE_APPID}})];case 2:return p(r=a.sent())&&(null==r?void 0:r.result)?r.result.continue?n=!0:(o.hi.dispatchLiteAppAction({actionName:"".concat(h,"/setClosed"),data:{key:t},option:{type:"other",appId:i.tv.W1W_LITE_APPID}}).then(function(t){f("dispatch setClosed success",t)}).catch(function(t){f("dispatch setClosed error",t)}),e(r.result)):e(null),[3,1];case 3:return[2]}})}),function(t){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function x(t,e){return T.apply(this,arguments)}function T(){return(T=u(function(t,e){var n,a,s;return d(this,function(l){var m;return n="".concat(h,"/syncData"),a=0,[2,new Promise((m=u(function(l){var u;return d(this,function(d){switch(d.label){case 0:return s=function(r){var s=r||{},u=s.source,d=s.changes;if(f("onLiteAppSetData(appId=".concat(null==u?void 0:u.appId,") event"),r),(null==u?void 0:u.appId)===i.tv.W1W_LITE_APPID)(void 0===d?[]:d).forEach(function(r){Object.entries(r).forEach(function(r){var s,u,d,p=(u=2,function(t){if(Array.isArray(t))return t}(s=r)||function(t,e){var n,i,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(n=o.next()).done)&&(r.push(n.value),!e||r.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{!a&&null!=o.return&&o.return()}finally{if(s)throw i}}return r}}(s,2)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(s,u)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],v=p[1];if(m!==n||!(null==v?void 0:v.version)||v.version<=a)return;a=v.version;var y=null===(d=v.lastResult)||void 0===d?void 0:d.key;if(!y||y!==t||!v.lastResult.data)return;if(v.lastResult.data.partialData&&e(v.lastResult.data.partialData),!v.lastResult.data.continue)o.hi.dispatchLiteAppAction({actionName:"".concat(h,"/setClosed"),data:{key:t},option:{type:"other",appId:i.tv.W1W_LITE_APPID}}).then(function(t){f("dispatch setClosed success",t)}).catch(function(t){f("dispatch setClosed error",t)}),l(v.lastResult.data)})})},r.ZP.onLiteAppSetData(s),[4,o.hi.callLiteAppConnectEvent({method:"subscribeLiteAppStore",config:[n],option:{type:"other",appId:i.tv.W1W_LITE_APPID}})];case 1:return f("subscribeLiteAppStore res",u=d.sent()),!p(u)&&l(null),[2]}})}),function(t){return m.apply(this,arguments)})).finally(function(){o.hi.callLiteAppConnectEvent({method:"unsubscribeLiteAppStore",config:[n],option:{type:"other",appId:i.tv.W1W_LITE_APPID}}),s&&r.ZP.offLiteAppSetData(s),s=void 0})]})})).apply(this,arguments)}function C(t){return k.apply(this,arguments)}function k(){return(k=u(function(t){var e,n,r,a,s,c,l,u,h,f=arguments;return d(this,function(d){switch(d.label){case 0:return e=f.length>1&&void 0!==f[1]?f[1]:{},[4,Promise.race([b(),m(1e3,!1)])];case 1:if(!d.sent())throw Error("comment input failed to init liteapp connection");if(r=void 0!==(n=e.stateCallback)&&n,a=e.onInputBarHeight,s=!1,c=function(t){!s&&t.inputBarHeight&&(s=!0,null==a||a(t.inputBarHeight))},l=Math.floor(0xcfd41b90fffff*Math.random()).toString(36),u=function(){return new Promise(function(e){o.hi.openLiteApp({appId:i.tv.W1W_LITE_APPID,page:"pages/midway-step/entry",query:{type:5,callbackKey:l,waitClosing:1,sendPartialData:1,options:JSON.stringify(t)},isTransparent:!0},function(t){return e(t)})})},!o.FP.isSupportFullCallLiteAppConnectEvent)return[3,4];return[4,u()];case 2:return d.sent(),[4,m(300)];case 3:return d.sent(),[2,r?x(l,c):I(l)];case 4:return h=r?x(l,c):I(l),u(),[2,h]}})})).apply(this,arguments)}},861887:function(t,e,n){n.d(e,{Vr:function(){return d},_r:function(){return f},kQ:function(){return u}});var i,o,r,a=n(41519),s=n(630323),c=n.n(s),l=/^[\s\u0000-\u001F\uFFF0-\uFFF8\u007F\u115F\u1160\u3164\uFFA0\uFFFC]+$/;function u(t,e){var n=0,i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;if(!l.test(c)){if((n+=128>c.codePointAt(0)?.5:1)>=e)return!0}}}catch(t){o=!0,r=t}finally{try{!i&&null!=s.return&&s.return()}finally{if(o)throw r}}return!1}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Math.ceil(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=0,n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var s=r.value;e+=128>s.codePointAt(0)?.5:1}}catch(t){i=!0,o=t}finally{try{!n&&null!=a.return&&a.return()}finally{if(i)throw o}}return e}(t))}var h=function(t){var e=(!r&&(r=new(c())),r),n=t.match(o||(o=RegExp("(".concat(i||(i=a.EmojiPanelData.map(function(t){return t.cn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}).join("|")),")$"),"ig"))),s=null==n?void 0:n[0];return s?t.slice(0,t.length-s.length):e.splitGraphemes(t).slice(0,-1).join("")},f=function(t,e,n){var i,o=t;if(e>=0&&n>=0&&n>e)o=o.slice(0,e)+o.slice(n),i=e;else if(e>=0&&n>=0){var r=h(o.slice(0,e));o=r+o.slice(n),i=r.length}else i=(o=h(o)).length;return{value:o,pos:i}}},461788:function(t,e,n){var i=n(234031);e.Z={mixins:[i.Z],inject:{getCustomNavBarHeight:{default:function(){return function(){return 0}}},mixedBoxChatbotMultiCollapseCtx:{default:function(){return null}}},methods:{V_getVisibleAreaInfo:function(t,e){if(!t)return{startY:0,endY:0};var n,i,o,r,a,s,c,l=t.getBoundingClientRect(),u=(null===(n=this.getCustomNavBarHeight)||void 0===n?void 0:n.call(this))||(null===(i=this.Container_GetHeaderHeight)||void 0===i?void 0:i.call(this))||0,d=Math.min(window.innerHeight,l.bottom,null!==(c=null===(s=this.mixedBoxChatbotMultiCollapseCtx)||void 0===s?void 0:null===(a=s.getReportContainerRef)||void 0===a?void 0:null===(r=a.call(s))||void 0===r?void 0:null===(o=r.getBoundingClientRect())||void 0===o?void 0:o.bottom)&&void 0!==c?c:window.innerHeight),h=d-(l.top<u?u:l.top),f=l.top<u?u-l.top:0,p=d-l.top;return(e&&h>e&&(p=f+e),f>p)?{startY:0,endY:0}:{startY:f,endY:p}}}}},593434:function(t,e,n){var i=n(798509),o=n(144007);function r(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)})}}function s(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}n(728223),e.Z={methods:{isMinimizeTaskEnabled:function(){return a(function(){var t;return s(this,function(e){switch(e.label){case 0:if(!(null===(t=this.getUnifiedMinimizeTaskData(o.I3.Star))||void 0===t?void 0:t.bizKey))return[2,{enabled:!1}];return[4,i.hi.isMinimizeTaskEnabled()];case 1:return[2,e.sent()]}})}).apply(this)},updateMinimizeTaskDataIfMinimized:function(){return a(function(){var t,e,n,r,a,c,l,u,d;return s(this,function(s){switch(s.label){case 0:var h;t=(null===(h=i.xB.minimizeTaskExtParams)||void 0===h?void 0:h.stateType)===o.I3.Float?[o.I3.Star,o.I3.Float]:[o.I3.Float,o.I3.Star],e=!0,n=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),a=t[Symbol.iterator](),s.label=2;case 2:if(e=(c=a.next()).done)return[3,6];return l=c.value,[4,this.isTaskMinimized(l)];case 3:if(!s.sent())return[3,5];if(!(u=this.getUnifiedMinimizeTaskData(l)))return[2];return u.animated=!1,u.needUpdateSnapshot=!0,[4,i.hi.addMinimizeTask(u)];case 4:s.sent(),s.label=5;case 5:return e=!0,[3,2];case 6:return[3,9];case 7:return d=s.sent(),n=!0,r=d,[3,9];case 8:try{!e&&null!=a.return&&a.return()}finally{if(n)throw r}return[7];case 9:return[2]}})}).apply(this)},isTaskMinimized:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.I3.Star;return a(function(){var e,n;return s(this,function(o){switch(o.label){case 0:if(!(e=this.getUnifiedMinimizeTaskData(t)))return[2,!1];return[4,i.hi.isTaskMinimized(e)];case 1:return[2,(null==(n=o.sent())?void 0:n.data)==1]}})}).apply(this)},addMinimizeTask:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getUnifiedMinimizeTaskData(t);if(!!e)i.hi.addMinimizeTask(e)},removeMinimizeTask:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getUnifiedMinimizeTaskData(t);if(!!e)i.hi.removeMinimizeTask(e)},getUnifiedMinimizeTaskData:function(t){var e=this.E_getMinimizeTaskCustomData(t);if(!!e){if(!e.bizKey){var n=i.xB.minimizeTaskExtParams.key||i.xB.uniqueId;e.bizKey="".concat(n,"_").concat(t),!e.minimizeTaskExtParams&&(e.minimizeTaskExtParams={}),!e.minimizeTaskExtParams.key&&(e.minimizeTaskExtParams.key=n),!e.minimizeTaskExtParams.stateType&&(e.minimizeTaskExtParams.stateType=t)}var o=e.chatbotExtParams,r=e.crossExtReqParams,a=e.minimizeTaskExtParams;return{viewX:0,viewY:window.pageYOffset,viewWidth:window.innerWidth,viewHeight:window.innerHeight,coverImgSnapshot:!0,createTime:Date.now(),bizName:"search",bizKey:e.bizKey,stateType:t,title:e.title,displaySourceName:"AI搜索",iconUrl:"https://search.wxqcloud.qq.com/t/fed_upload/0423d4a35074f6c39045aaa860f737bd/s1s_white.png",scene:i.xB.scene,type:i.xB.type,isHomePage:1==i.xB.isHomePage,query:i.xB.query,extParams:JSON.stringify({minimizeBizKey:e.bizKey,sessionId:i.xB.sessionId,parentSearchID:i.xB.parentSearchID,chatbot:i.xB.chatbot,chatbotSecond:i.xB.chatbot,chatbotExtParams:void 0===o?{}:o,crossExtReqParams:void 0===r?[]:r,minimizeTaskExtParams:void 0===a?{}:a,hideSearchBar:!0,hideNavBar:!0}),navBarParams:JSON.stringify({hideSearchBar:!0,hideNavBar:!0,title:"AI搜索"})}}},E_getMinimizeTaskCustomData:function(t){return{title:"",chatbotExtParams:{}}}}}},891854:function(t,e,n){n.d(e,{x:function(){return i.Z}});var i=n(514783)},468845:function(t,e,n){n.d(e,{$h:function(){return a},HE:function(){return r},oN:function(){return s}}),(i=r||(r={}))[i.NotStart=0]="NotStart",i[i.Running=1]="Running",i[i.Finish=2]="Finish",i[i.Terminate=3]="Terminate",(o=a||(a={}))[o.Plan=1]="Plan",o[o.Step=2]="Step",o[o.Report=3]="Report",o[o.SingleReport=99]="SingleReport";var i,o,r,a,s=10},947808:function(t,e,n){n.d(e,{E:function(){return y}});var i=n(226729),o=n.n(i),r=n(578248),a=n(770719),s=n(976926),c=n(569125),l=n(700816),u=n(798509);function d(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(b,t);var e,n,i,o,y,g=(e=b,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,i,o,r=m(e);return o=n?Reflect.construct(r,arguments,m(this).constructor):r.apply(this,arguments),t=this,(i=o)&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(i)||"function"==typeof i)?i:d(t)});function b(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,b),p(d(e=g.call(this)),"itemInfo",void 0),p(d(e),"serverSentEventsConnect",void 0),p(d(e),"isFinish",void 0),p(d(e),"responseMerger",void 0),p(d(e),"singlePolling",void 0),p(d(e),"req",void 0),p(d(e),"needEmitNetworkError",void 0),e.itemInfo=t,e.isFinish=!1,e.responseMerger=new c.e,e.needEmitNetworkError=!0,e}return i=b,o=[{key:"finish",value:function(){var t,e;this.isFinish=!0,this.removeAllListeners(),null===(t=this.serverSentEventsConnect)||void 0===t||t.destroy(),null===(e=this.singlePolling)||void 0===e||e.finish()}},{key:"handleResponse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.tw.Total;this.responseMerger.merge(t,n);var i=this.responseMerger.getLatestResponse();if(!!i){this.needEmitNetworkError=!0,this.emit("onData",i,e);var o=t.jobState&&t.jobState>a.Zy.Running;o&&!this.isFinish&&this.emit("onFinish",i),this.isFinish=o||this.isFinish}}},{key:"start",value:function(t,e){var n=this;if(this.req=t,e){var i=new s.R(t);this.serverSentEventsConnect=i,i.on("onData",function(t){var e;null===(e=n.singlePolling)||void 0===e||e.pause(),n.handleSSEResponse(t)}),i.on("onEnd",function(){n.emit("onSSEClose"),!n.isFinish&&n.initSinglePollingAndStart()}),i.on("onError",function(t){n.emit("onError",t),n.initSinglePollingAndStart()}),i.on("onOpen",function(){n.emit("onSSEOpen")})}else this.initSinglePollingAndStart()}},{key:"handleSSEResponse",value:function(t){if(t.eventType!==a.tw.Heartbeat)t.data&&this.handleResponse(t.data,void 0,t.eventType)}},{key:"initSinglePollingAndStart",value:function(){var t,e=this;if(this.singlePolling){this.singlePolling.start();return}this.emit("onSwitchToSinglePolling");var n=this;this.singlePolling=new l.m({request:(t=function(){var t,e,i,o,a;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(a){switch(a.label){case 0:if(!(null===(t=n.req)||void 0===t?void 0:t.taskKeyDetail))return[2,void 0];e=setTimeout(function(){n.needEmitNetworkError&&n.emit("onNetworkError"),n.needEmitNetworkError=!1},1e4),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.ZP.getCommonCgiData({cgiName:"GetDeepResearch",data:{task_key_detail:n.req.taskKeyDetail,rpc_context:{session_id:u.xB.sessionId,search_id:null===(i=n.itemInfo)||void 0===i?void 0:i.oriSid}}},{reload:3})];case 2:return o=a.sent(),clearTimeout(e),[2,o];case 3:return a.sent(),clearTimeout(e),n.emit("onNetworkError"),[2,{}];case 4:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){h(r,i,o,a,s,"next",t)}function s(t){h(r,i,o,a,s,"throw",t)}a(void 0)})}),onHandleResponse:function(t){var n,i;return t.data&&e.handleResponse(t.data),{interval:100,continueFlag:(null===(n=t.data)||void 0===n?void 0:n.jobState)===a.Zy.Running||!(null===(i=t.data)||void 0===i?void 0:i.jobState)}}}),this.singlePolling.start()}}],f(i.prototype,o),b}(o())},976926:function(t,e,n){n.d(e,{R:function(){return s}});var i=n(183984),o=n(798509);function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t);var e,n,i=(e=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,i,o,a=r(e);return o=n?Reflect.construct(a,arguments,r(this).constructor):a.apply(this,arguments),t=this,(i=o)&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)});function s(t){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,s),i.call(this,{req:t,logPrefix:"[deep-research]",url:"https://search.weixin.qq.com/cgi-bin/searchllm/llmdeepresearch",searchId:"",eventToRes:function(t){if(!!t.data)return o.Zr.safeJsonParse(t.data)},canRetry:!1})}return s}(i.G)},347307:function(t,e,n){n.d(e,{b:function(){return f}});var i=n(383467);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){var e;return!!(null===(e=t.style)||void 0===e?void 0:e.some(function(t){return["html-ul","html-ol","html-table"].includes(t)}))}function c(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("tag"===t.type){;if(null===(e=t.attribs)||void 0===e?void 0:e.class)return null===(n=t.attribs)||void 0===n?void 0:n.class.split(" ").filter(Boolean).concat(i)}return i}function l(t){return t.filter(function(t){return"text"!==t.type||"\n"!==t.data})}function u(t){if("text"===t.type)return{text:t.data};if("tag"===t.type){if("br"===t.name)return{style:c(t,["html-br"]),text:"\n"};var e,n,i,o,r=(o=t.children.map(u).filter(Boolean)).length<=1?null===(i=o[0])||void 0===i?void 0:i.text:o,a={style:c(t,["html-".concat(t.name)]),text:r};return("a"===t.name&&(a.link=null===(e=t.attribs)||void 0===e?void 0:e.href),"img"===t.name)?{style:a.style,image:null===(n=t.attribs)||void 0===n?void 0:n.src}:a}}function d(t){var e,n;return n=(e=t.children.map(u).filter(Boolean)).filter(Boolean),e.length<=1?n[0]:n}function h(t){if("tag"===t.type){var e,n,o,r,f,p,m,v,y,g,b,_,S,I,w,x,T;if("p"===t.name){;return{style:c(e=t,["html-p"]),text:d(e)}}if("h1"===t.name||"h2"===t.name||"h3"===t.name||"h4"===t.name||"h5"===t.name||"h6"===t.name){;return{style:c(n=t,["html-heading","html-".concat(n.name)]),text:d(n)}}if("ul"===t.name){;return{style:c(o=t,["html-ul"]),ul:l(o.children).map(h).filter(Boolean)}}if("ol"===t.name){;return{style:c(r=t,["html-ol"]),ol:l(r.children).map(h).filter(Boolean)}}if("table"===t.name){;return v=(f=t).children.find(function(t){return"tag"===t.type&&"thead"===t.name}),y=f.children.find(function(t){return"tag"===t.type&&"tbody"===t.name}),g=l(null!==(p=null==v?void 0:v.children)&&void 0!==p?p:[]),b=l(null!==(m=null==y?void 0:y.children)&&void 0!==m?m:[]),_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.map(function(t,i){return"tag"===t.type?l(t.children).map(u).filter(Boolean).map(function(t){var o,r,s;return r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},t),s=(s={style:a(null!==(o=t.style)&&void 0!==o?o:[]).concat(a(e),["html-cell-".concat((n+i)%2==0?"even":"odd")])},s),Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(s)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(s,t))}),r}):[]})},{style:c(f,["html-table"]),table:{body:_(g,["html-thead"]).concat(_(b,["html-tbody"],g.length)).filter(Boolean),dontBreakRows:!0,headerRows:1}}}if("li"===t.name){;return I=l((S=t).children),{style:c(S,["html-li"]),stack:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.some(s)&&!n)return t;var i=[];return t.forEach(function(t){s(t)?(e=void 0,i.push(t)):(!e&&(e={style:["html-p"],text:[]},i.push(e)),e.text.push(t))}),i}(I.map(h).filter(Boolean),!0)}}if("svg"===t.name){;return{style:c(w=t,["html-svg"]),svg:(0,i.fl)(w)}}if("img"===t.name){;return{style:c(x=t,["html-img"]),image:null===(T=x.attribs)||void 0===T?void 0:T.src}}if("pre"===t.name)return function(t){var e=t.children.find(function(t){return"tag"===t.type&&"code"===t.name});if(e)return{style:c(e,["html-code"]),text:d(e)}}(t);if(["strong","b","i","em","a","br"].includes(t.name))return u(t)}else if("text"===t.type)return u(t)}function f(t){return p.apply(this,arguments)}function p(){var t;return t=function(t){var e,n,o,r,a,s,c,u,d,f,p,m,v,y;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(g){switch(g.label){case 0:e=l((0,i.Qc)(t).children).map(function(t){var e=h(t);return e&&(e.style=e.style||[],e.style.push("html-new-line")),e}).filter(Boolean),n=!0,o=!1,r=void 0,g.label=1;case 1:g.trys.push([1,8,9,10]),a=e[Symbol.iterator](),g.label=2;case 2:if(n=(s=a.next()).done)return[3,7];if(c=s.value,f=window.mermaid,!((null==c?void 0:null===(u=c.style)||void 0===u?void 0:u.includes("html-code"))&&(null==c?void 0:null===(d=c.style)||void 0===d?void 0:d.includes("language-mermaid"))&&f)||!(m=null===(p=c.text)||void 0===p?void 0:p.text))return[3,6];g.label=3;case 3:return g.trys.push([3,5,,6]),[4,f.render("mermaid-mermaid",m.replace(/&lt;/g,"<").replace(/&gt;/g,">"))];case 4:return v=g.sent(),c.svg=v.svg,c.width=500,c.height=500,delete c.text,[3,6];case 5:return console.error(g.sent()),[3,6];case 6:return n=!0,[3,2];case 7:return[3,10];case 8:return y=g.sent(),o=!0,r=y,[3,10];case 9:try{!n&&null!=a.return&&a.return()}finally{if(o)throw r}return[7];case 10:return[2,e]}})},(p=function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)})}).apply(this,arguments)}},528430:function(t,e,n){n.d(e,{$:function(){return p}});var i=n(226729),o=n.n(i),r=n(770719);function a(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var f=[{data:{jobState:1,researchPlan:{content:"用户需求：了解办理房产证过程中涉及的税费种类及标准  \n研究目标：明确中国房产证办理环节的主要税种、征收标准、计算方式及政策依据  \n分析方向：  \n1. **契税**：税率范围、计算基数（成交价/评估价）、首套房与多套房的差异  \n2. **印花税**：征收对象（买卖双方）、税率标准  \n3. **个人所得税**：征收条件（如非满五唯一）、税率及减免政策  \n4. **增值税及附加**：普通住宅与非普通住宅的差异、免征条件  \n5. **地方性税费**：如维修基金、登记费等区域性费用  \n6. **政策依据**：最新税收法规（2025年现行政策）  \n\n用户需求：了解办理房产证过程中涉及的税费种类及标准  \n研究目标：明确中国房产证办理环节的主要税种、征收标准、计算方式及政策依据  \n分析方向：  \n1. **契税**：税率范围、计算基数（成交价/评估价）、首套房与多套房的差异  \n2. **印花税**：征收对象（买卖双方）、税率标准  \n3. **个人所得税**：征收条件（如非满五唯一）、税率及减免政策  \n4. **增值税及附加**：普通住宅与非普通住宅的差异、免征条件  \n5. **地方性税费**：如维修基金、登记费等区域性费用  \n6. **政策依据**：最新税收法规（2025年现行政策）  \n\n",id:"00936e429a424272acd97df3bd1b80ab",status:1}}},{data:{researchStep:{status:1,taskCnt:0,taskInfos:[{id:"3194632151_837933700912477640",searcherInfo:{queryInfo:[{query:"房产证地方附加费常见项目",searchSid:"6481810061275569916",urls:[{docId:"SOGOU_WEB_SEARCH_301131724773718984",iconUrl:"",nickName:"",sourceType:7,title:"地方教育附加收费公示",type:1,url:"http://gaobeidian.gov.cn/viewFile.do?type=2&filename=2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx&file=1%2F202303%2F230310091121137_326_2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx"}]},{query:"房产证办理费用构成2025",searchSid:"16264098878700151588",urls:[{docId:"SOGOU_WEB_SEARCH_12362977810616759213",iconUrl:"",nickName:"华律说法",sourceType:7,title:"办理房产证需要的费用-华律•优质问答",type:1,url:"https://v.66law.cn/wenda/4389152.aspx"}]},{query:"房产交易地方附加费政策2025",searchSid:"8973912694857901395"}]},status:1,taskDesc:"地方性附加费用调研",taskSummary:'\n### 思考：\n第三次搜索明确了"房产证地方附加费"的核心构成：\n1. **附加费本质**：是增值税的附加税费（非独立税种），仅在房产交易产生增值税时征收\n2. **三大组成部分**：\n   - 城市维护建设税（增值税的7%/5%/1%）\n   - 教育费附加（增值税的3%）\n   - 地方教育附加（增值税的2%）\n3. **征收条件**：仅当交易需缴纳增值税时（如不满两年的非普通住房）\n4. **2025年政策**：延续财税〔2022〕4号公告，小规模纳税人可享50%减征\n\n当前信息已完整：\n- 明确了费用性质（增值税附加）\n- 确认了具体项目及计算方式\n- 覆盖了2025年政策时效性\n- 解释了地域差异原因（城建税税率分档）\n\n最终答案：\n房产证办理中的"地方附加费"特指房产交易环节增值税的附加税费，包含三项：\n1. **城市维护建设税**：按增值税额征收（市区7%，县镇5%，其他地区1%）\n2. **教育费附加**：按增值税额的3%征收\n3. **地方教育附加**：按增值税额的2%征收\n\n**征收条件**：\n- 仅当房产交易需缴纳增值税时产生（如不满两年的非普通住房交易）\n- 若交易免征增值税（如满两年唯一住房），则不产生附加费\n\n**2025年政策**：\n- 小规模纳税人可享50%减征（财政部公告2022年第10号延续）\n- 个人交易房产按法定税率征收\n\n**注意事项**：\n1. 地方差异主要体现在城建税税率（各省划分区域等级不同）\n2. 附加费由税务机关在增值税申报时一并征收\n3. 登记环节（80元登记费）不包含附加费\n\n'}]}},delay:5e3},{data:{researchReport:{content:"\n# 房产证办理税费全景分析房产证办理税费全景分析房产证办理税费全景分析房产证办理税费全景分析  \n---\n\n### 摘要  \n本研究系统梳理2025年中国房产证办理环节的税费体系，基于《契税法》《印花税法》等最新政策文件，通过交叉验证财政部、税务总局及地方政府公开数据，明确契税、印花税、个人所得税、增值税及地方附加费的征收标准与适用条件。分析显示：首套房契税率为1%-1.5%（以140㎡为界），二套房达2%；印花税按产权转移书据0.5‰征收；个人所得税执行“满五唯一”免征规则，否则按差额20%或全额1%计税；增值税对持有不足2年的住房按5%全额征收；地方附加费以增值税为基数，综合税率最高达12%（含城建税、教育附加等）。结论指出，税费成本约占房产总价3%-8%，区域政策差异集中于北上广深，建议购房者优先利用免税政策并提前核查地方细则以优化成本。  \n\n---\n\n### 房产证税费政策背景与现状  \n房产证办理税费涉及多税种复合征收，2025年政策以“降成本、促流通”为导向，但执行中存在地域差异。核心争议聚焦三点：一是“满五唯一”个税免征认定标准（是否包含继承房产），二是小规模纳税人附加费减半政策的地方落实差异，三是北上广深增值税免征是否覆盖非普通住房。利益相关方包括购房者（税负敏感）、开发商（资金周转需求）及地方政府（财政平衡），分歧源于税收政策统一性与地方财政自主权的矛盾。  \n\n现行政策依据包括《契税法》（2021年施行）、财税〔2025〕10号（增值税免征）及财政部公告2022年第10号（附加费减免）。主流研究观点认为：契税阶梯税率设计体现“房住不炒”导向[6]，增值税“2年分界”降低二手房交易成本[12]，但个税免征条件被指门槛过高（需同时满足5年持有和唯一住房）[2][11]。数据来源覆盖中央法规（中国政府网）、地方细则（如上海市政府文件）及专业税务平台（律图网），确保信息时效性与权威性。  \n\n---\n\n### 房产证办理核心税费分析维度  \n\n#### 契税征收规则  \n契税为房产证办理的核心税种，税率按购房套数、面积分级征收。2025年标准为：首套房面积≤140㎡按总价1%，＞140㎡按1.5%；二套房面积≤140㎡按1%，＞140㎡按2%；三套及以上统一按3%[6]。需注意，税率适用以家庭为单位，需提供户口本及住房查询证明。例如总价300万元的首套150㎡住房，契税为4.5万元（300万\xd71.5%）。政策依据为《契税法》第三条，但地方政府可微调征收流程，如部分城市允许分期缴纳。  \n\n#### 印花税适用场景  \n印花税针对产权转移书据和资金账簿征收，税率为0.5‰[5][7]。具体场景包括：签订购房合同时按合同金额计税，办理房产证时按产权登记金额计税。例如500万元房产的印花税为2500元（500万\xd70.5‰）。2025年新政取消每件5元权证贴花，改为统一税率[5]，并明确增值税不计入计税依据。免税情形仅限法定项目（如政府捐赠房产），小规模纳税人可享减半征收[8]。  \n\n#### 个人所得税计算逻辑  \n个人所得税按“满五唯一”原则免征，否则分两种方式：能提供原值凭证的按差额20%，无法提供的按全额1%[2][11]。“满五唯一”指持有超5年且为家庭唯一住房，需提交住房查询结果。例如原值200万元、现售300万元的房产，若不满五年需纳税20万元（（300万-200万）\xd720%）。非居民个人仅就境内所得纳税，居民个人需申报全球资产[10][13]。  \n\n#### 增值税征收标准  \n增值税以持有年限为分界：持有满2年免征，不足2年按销售全额5%征收[12][14]。北上广深取消普通/非普通住房区分，统一执行该政策。例如持有1年的400万元房产，增值税为20万元（400万\xd75%）。计税依据不含增值税本身，但需叠加地方附加费。新政同步下调土地增值税预征率0.5个百分点，减轻开发商资金压力[12]。  \n\n#### 地方附加费构成  \n地方附加费包括三项：城市维护建设税（增值税的7%/5%/1%，按行政区划分级）、教育费附加（3%）、地方教育附加（2%）[9]。仅当交易产生增值税时征收，综合税率最高达增值税额的12%（如市区7%+3%+2%）。例如20万元增值税在市区需附加2.4万元（20万\xd712%）。2025年延续小规模纳税人减半政策，但个人交易不享受减免。  \n\n#### 其他关联费用  \n- **登记费**：住宅类统一80元/套，非住宅类550元/套[4]；  \n- **维修基金**：地方标准差异大，如上海多层住宅65元/㎡、高层100元/㎡；  \n- **测绘费**：住宅1.36元/㎡，非住宅2.04元/㎡，由测绘部门收取[4]。  \n\n| 费用类型       | 征收标准                              | 征收条件                  | 案例（300万元住宅） |  \n|----------------|---------------------------------------|---------------------------|---------------------|  \n| **契税**       | 首套≤140㎡:1%；＞140㎡:1.5%          | 办理产权转移时缴纳        | 150㎡：4.5万元      |  \n| **增值税**     | 持有＜2年：5%全额                     | 二手房交易                | 持有1年：15万元     |  \n| **地方附加费** | 城建税+教育附加=增值税\xd7（7%-12%）     | 需缴纳增值税时触发        | 市区附加：1.8万元   |  \n| **印花税**     | 产权转移书据0.5‰                      | 签订合同及办证时          | 1500元              |  \n\n> 表注：案例假设首套150㎡新房总价300万元，持有1年后交易。附加费按市区最高12%计算（城建7%+教育3%+地方教育2%）。  \n\n上表显示，税费成本集中于契税、增值税及附加费，三者占比超90%。新政下增值税免征范围扩大，但契税仍为最大支出项。区域差异主要体现为维修基金标准和城建税税率（县镇5%、乡村1%），购房者需优先确认地方细则。  \n\n---\n\n### 房产证税费优化策略建议  \n\n**策略一：利用免税政策降低契税成本**  \n购房者应优先选择首套房资格（需无房证明），并将面积控制在140㎡以内，例如购买139㎡住房可享受1%税率而非1.5%，300万元房产节省1.5万元；若计划改善住房，建议“卖一买一”确保唯一住房身份，避免二套房2%的高税率，同时预留60个工作日办理周期以符合“满五唯一”个税免征条件[6][11]。  \n\n**策略二：持有年限管理规避增值税**  \n投资者需将持有期延长至2年以上，例如购入期房时计算交付日期，确保从签约至交易超24个月；紧急出售时可通过“带抵押过户”新政延后产权转移时间。若持有不足2年，优先选择北上广深交易（无住房类型限制），其他地区需确认是否被认定为非普通住房[12][14]。  \n\n**策略三：附加费减免资格主动申报**  \n企业购房或开发商需申请小规模纳税人身份，例如注册资本500万元以下企业可享附加费减半（财政部公告2022年第10号），但需提前备案；个人交易虽无减免，但可要求卖方提供原始购房发票，通过差额计税降低增值税基数，间接减少附加费[9][12]。  \n\n---\n\n### 结论  \n本研究确认2025年房产证办理涉及5类税费，核心结论为契税阶梯税率、增值税“2年分界”及个税“满五唯一”规则构成主要成本，其中创新点在于量化附加费综合税率（最高12%）和跨税种联动影响（如增值税触发附加费）。局限性在于地方维修基金等非税费用未全覆盖，且政策时效性受后续调整约束。建议购房者组合使用免税政策，重点关注持有年限与面积控制，同时警惕区域执行差异，必要时咨询属地税务机关以获取实时细则。  \n\n---\n\n### 参考来源  \n[1] 2025房屋契税最新收费标准是多少-楼盘网: https://www.loupan.com/bk/173138.html  \n[2] 个人所得税缴纳范围有哪些?-法律知识|律图: https://www.64365.com/zs/1412636.aspx  \n[3] 填报个税专项附加扣除,这些规定需关注_政策解读_中国政府网: https://www.gov.cn/zhengce/202412/content_6995215.htm  \n[4] 办理房产证需要的费用-华律•优质问答: https://v.66law.cn/wenda/4389152.aspx  \n[5] 2025年印花税规定是什么?-法律知识大全|律图: https://m.64365.com/zs/gongjian/1055155.aspx  \n[6] 2025年印花税征收范围是怎样的-法律知识|律图: http://www.64365.com/zs/1281318.aspx  \n[7] 关于继续实施离岸贸易印花税优惠政策的通知_国务院部门文件_中国政府网: https://www.gov.cn/zhengce/zhengceku/202503/content_7016072.htm  \n[8] 什么是居民个人和非居民个人?非居民个人需要进行综合所得年度汇算吗?: https://shenzhen.chinatax.gov.cn/sztax/zcwj/rdwd/202504/27abbff7050d4cf3be0bf587bb67940d.shtml  \n[9] 地方教育附加收费公示: http://gaobeidian.gov.cn/viewFile.do?type=2&filename=2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx&file=1%2F202303%2F230310091121137_326_2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx  \n[10] 哪些个人所得应当缴纳个人所得税?: http://shanxi.chinatax.gov.cn/son/detail/xz-11422-548-1734535  \n[11] 个人所得税计费方式是怎样的-法律知识|律图: https://www.64365.com/zs/3397479.aspx  \n[12] 房地产市场税收新政!一图看(含权威问答)_政策解读_中国政府网: https://www.gov.cn/zhengce/202411/content_6986969.htm  \n[13] 财政部 税务总局关于非居民个人和无住所居民个人有关个人所得税政策的公告: https://hainan.chinatax.gov.cn/sxpd_2_4/20112025.html  \n[14] 二手房增值税新政策2025是怎样的?-法律知识大全|律图: https://m.64365.com/zs/gongjian/1356169.aspx",id:"3194632151_1894218043707926169",status:0}},delay:5e3},{data:{researchReport:{content:"\n# 房产证办理税费全景分析房产证办理税费全景分析房产证办理税费全景分析房产证办理税费全景分析  \n---\n\n### 摘要  \n本研究系统梳理2025年中国房产证办理环节的税费体系，基于《契税法》《印花税法》等最新政策文件，通过交叉验证财政部、税务总局及地方政府公开数据，明确契税、印花税、个人所得税、增值税及地方附加费的征收标准与适用条件。分析显示：首套房契税率为1%-1.5%（以140㎡为界），二套房达2%；印花税按产权转移书据0.5‰征收；个人所得税执行“满五唯一”免征规则，否则按差额20%或全额1%计税；增值税对持有不足2年的住房按5%全额征收；地方附加费以增值税为基数，综合税率最高达12%（含城建税、教育附加等）。结论指出，税费成本约占房产总价3%-8%，区域政策差异集中于北上广深，建议购房者优先利用免税政策并提前核查地方细则以优化成本。  \n\n---\n\n### 房产证税费政策背景与现状  \n房产证办理税费涉及多税种复合征收，2025年政策以“降成本、促流通”为导向，但执行中存在地域差异。核心争议聚焦三点：一是“满五唯一”个税免征认定标准（是否包含继承房产），二是小规模纳税人附加费减半政策的地方落实差异，三是北上广深增值税免征是否覆盖非普通住房。利益相关方包括购房者（税负敏感）、开发商（资金周转需求）及地方政府（财政平衡），分歧源于税收政策统一性与地方财政自主权的矛盾。  \n\n现行政策依据包括《契税法》（2021年施行）、财税〔2025〕10号（增值税免征）及财政部公告2022年第10号（附加费减免）。主流研究观点认为：契税阶梯税率设计体现“房住不炒”导向[6]，增值税“2年分界”降低二手房交易成本[12]，但个税免征条件被指门槛过高（需同时满足5年持有和唯一住房）[2][11]。数据来源覆盖中央法规（中国政府网）、地方细则（如上海市政府文件）及专业税务平台（律图网），确保信息时效性与权威性。  \n\n---\n\n### 房产证办理核心税费分析维度  \n\n#### 契税征收规则  \n契税为房产证办理的核心税种，税率按购房套数、面积分级征收。2025年标准为：首套房面积≤140㎡按总价1%，＞140㎡按1.5%；二套房面积≤140㎡按1%，＞140㎡按2%；三套及以上统一按3%[6]。需注意，税率适用以家庭为单位，需提供户口本及住房查询证明。例如总价300万元的首套150㎡住房，契税为4.5万元（300万\xd71.5%）。政策依据为《契税法》第三条，但地方政府可微调征收流程，如部分城市允许分期缴纳。  \n\n#### 印花税适用场景  \n印花税针对产权转移书据和资金账簿征收，税率为0.5‰[5][7]。具体场景包括：签订购房合同时按合同金额计税，办理房产证时按产权登记金额计税。例如500万元房产的印花税为2500元（500万\xd70.5‰）。2025年新政取消每件5元权证贴花，改为统一税率[5]，并明确增值税不计入计税依据。免税情形仅限法定项目（如政府捐赠房产），小规模纳税人可享减半征收[8]。  \n\n#### 个人所得税计算逻辑  \n个人所得税按“满五唯一”原则免征，否则分两种方式：能提供原值凭证的按差额20%，无法提供的按全额1%[2][11]。“满五唯一”指持有超5年且为家庭唯一住房，需提交住房查询结果。例如原值200万元、现售300万元的房产，若不满五年需纳税20万元（（300万-200万）\xd720%）。非居民个人仅就境内所得纳税，居民个人需申报全球资产[10][13]。  \n\n#### 增值税征收标准  \n增值税以持有年限为分界：持有满2年免征，不足2年按销售全额5%征收[12][14]。北上广深取消普通/非普通住房区分，统一执行该政策。例如持有1年的400万元房产，增值税为20万元（400万\xd75%）。计税依据不含增值税本身，但需叠加地方附加费。新政同步下调土地增值税预征率0.5个百分点，减轻开发商资金压力[12]。  \n\n#### 地方附加费构成  \n地方附加费包括三项：城市维护建设税（增值税的7%/5%/1%，按行政区划分级）、教育费附加（3%）、地方教育附加（2%）[9]。仅当交易产生增值税时征收，综合税率最高达增值税额的12%（如市区7%+3%+2%）。例如20万元增值税在市区需附加2.4万元（20万\xd712%）。2025年延续小规模纳税人减半政策，但个人交易不享受减免。  \n\n#### 其他关联费用  \n- **登记费**：住宅类统一80元/套，非住宅类550元/套[4]；  \n- **维修基金**：地方标准差异大，如上海多层住宅65元/㎡、高层100元/㎡；  \n- **测绘费**：住宅1.36元/㎡，非住宅2.04元/㎡，由测绘部门收取[4]。  \n\n| 费用类型       | 征收标准                              | 征收条件                  | 案例（300万元住宅） |  \n|----------------|---------------------------------------|---------------------------|---------------------|  \n| **契税**       | 首套≤140㎡:1%；＞140㎡:1.5%          | 办理产权转移时缴纳        | 150㎡：4.5万元      |  \n| **增值税**     | 持有＜2年：5%全额                     | 二手房交易                | 持有1年：15万元     |  \n| **地方附加费** | 城建税+教育附加=增值税\xd7（7%-12%）     | 需缴纳增值税时触发        | 市区附加：1.8万元   |  \n| **印花税**     | 产权转移书据0.5‰                      | 签订合同及办证时          | 1500元              |  \n\n> 表注：案例假设首套150㎡新房总价300万元，持有1年后交易。附加费按市区最高12%计算（城建7%+教育3%+地方教育2%）。  \n\n上表显示，税费成本集中于契税、增值税及附加费，三者占比超90%。新政下增值税免征范围扩大，但契税仍为最大支出项。区域差异主要体现为维修基金标准和城建税税率（县镇5%、乡村1%），购房者需优先确认地方细则。  \n\n---\n\n### 房产证税费优化策略建议  \n\n**策略一：利用免税政策降低契税成本**  \n购房者应优先选择首套房资格（需无房证明），并将面积控制在140㎡以内，例如购买139㎡住房可享受1%税率而非1.5%，300万元房产节省1.5万元；若计划改善住房，建议“卖一买一”确保唯一住房身份，避免二套房2%的高税率，同时预留60个工作日办理周期以符合“满五唯一”个税免征条件[6][11]。  \n\n**策略二：持有年限管理规避增值税**  \n投资者需将持有期延长至2年以上，例如购入期房时计算交付日期，确保从签约至交易超24个月；紧急出售时可通过“带抵押过户”新政延后产权转移时间。若持有不足2年，优先选择北上广深交易（无住房类型限制），其他地区需确认是否被认定为非普通住房[12][14]。  \n\n**策略三：附加费减免资格主动申报**  \n企业购房或开发商需申请小规模纳税人身份，例如注册资本500万元以下企业可享附加费减半（财政部公告2022年第10号），但需提前备案；个人交易虽无减免，但可要求卖方提供原始购房发票，通过差额计税降低增值税基数，间接减少附加费[9][12]。  \n\n---\n\n### 结论  \n本研究确认2025年房产证办理涉及5类税费，核心结论为契税阶梯税率、增值税“2年分界”及个税“满五唯一”规则构成主要成本，其中创新点在于量化附加费综合税率（最高12%）和跨税种联动影响（如增值税触发附加费）。局限性在于地方维修基金等非税费用未全覆盖，且政策时效性受后续调整约束。建议购房者组合使用免税政策，重点关注持有年限与面积控制，同时警惕区域执行差异，必要时咨询属地税务机关以获取实时细则。  \n\n---\n\n### 参考来源  \n[1] 2025房屋契税最新收费标准是多少-楼盘网: https://www.loupan.com/bk/173138.html  \n[2] 个人所得税缴纳范围有哪些?-法律知识|律图: https://www.64365.com/zs/1412636.aspx  \n[3] 填报个税专项附加扣除,这些规定需关注_政策解读_中国政府网: https://www.gov.cn/zhengce/202412/content_6995215.htm  \n[4] 办理房产证需要的费用-华律•优质问答: https://v.66law.cn/wenda/4389152.aspx  \n[5] 2025年印花税规定是什么?-法律知识大全|律图: https://m.64365.com/zs/gongjian/1055155.aspx  \n[6] 2025年印花税征收范围是怎样的-法律知识|律图: http://www.64365.com/zs/1281318.aspx  \n[7] 关于继续实施离岸贸易印花税优惠政策的通知_国务院部门文件_中国政府网: https://www.gov.cn/zhengce/zhengceku/202503/content_7016072.htm  \n[8] 什么是居民个人和非居民个人?非居民个人需要进行综合所得年度汇算吗?: https://shenzhen.chinatax.gov.cn/sztax/zcwj/rdwd/202504/27abbff7050d4cf3be0bf587bb67940d.shtml  \n[9] 地方教育附加收费公示: http://gaobeidian.gov.cn/viewFile.do?type=2&filename=2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx&file=1%2F202303%2F230310091121137_326_2%E5%9C%B0%E6%96%B9%E6%95%99%E8%82%B2%E9%99%84%E5%8A%A0%E5%85%AC%E7%A4%BA.docx  \n[10] 哪些个人所得应当缴纳个人所得税?: http://shanxi.chinatax.gov.cn/son/detail/xz-11422-548-1734535  \n[11] 个人所得税计费方式是怎样的-法律知识|律图: https://www.64365.com/zs/3397479.aspx  \n[12] 房地产市场税收新政!一图看(含权威问答)_政策解读_中国政府网: https://www.gov.cn/zhengce/202411/content_6986969.htm  \n[13] 财政部 税务总局关于非居民个人和无住所居民个人有关个人所得税政策的公告: https://hainan.chinatax.gov.cn/sxpd_2_4/20112025.html  \n[14] 二手房增值税新政策2025是怎样的?-法律知识大全|律图: https://m.64365.com/zs/gongjian/1356169.aspx 5",id:"3194632151_1894218043707926169",status:1},jobState:r.Zy.Ok},delay:5e3}],p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(m,t);var e,n,i,o,r,p=(e=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,i,o,r=u(e);return o=n?Reflect.construct(r,arguments,u(this).constructor):r.apply(this,arguments),t=this,(i=o)&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(i)||"function"==typeof i)?i:a(t)});function m(){var t;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,m),t=p.apply(this,arguments),l(a(t),"latestData",void 0),t}return i=m,o=[{key:"start",value:function(){var t,e=this;return(t=function(){var t,n,i,o,r,a,s;return h(this,function(c){switch(c.label){case 0:t=!0,n=!1,i=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),o=function(){var t,n;return h(this,function(i){switch(i.label){case 0:if(!(n=(t=a.value).delay))return[3,2];return[4,new Promise(function(t){return setTimeout(t,n)})];case 1:i.sent(),i.label=2;case 2:return e.handleResponse(t.data,t.isCache),[2]}})},r=f[Symbol.iterator](),c.label=2;case 2:if(t=(a=r.next()).done)return[3,5];return[5,function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(o())];case 3:c.sent(),c.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return s=c.sent(),n=!0,i=s,[3,8];case 7:try{!t&&null!=r.return&&r.return()}finally{if(n)throw i}return[7];case 8:return[2]}})},function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){s(r,i,o,a,c,"next",t)}function c(t){s(r,i,o,a,c,"throw",t)}a(void 0)})})()}},{key:"handleResponse",value:function(t,e){this.latestData=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){l(t,e,n[e])})}return t}({},this.latestData,t),this.emit("onData",this.latestData,e)}},{key:"finish",value:function(){}}],c(i.prototype,o),m}(o())},790497:function(t,e,n){n.d(e,{l:function(){return a}});var i=n(702521),o=n(391706);function r(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function a(t){return s.apply(this,arguments)}function s(){var t;return t=function(t){var e,n,r,a,s,c,l,u,d,h=arguments;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(f){switch(f.label){case 0:n=(e=h.length>1&&void 0!==h[1]?h[1]:{}).aigc,r=e.urlRefs,f.label=1;case 1:return f.trys.push([1,9,,10]),[4,Promise.all([(0,o.LV)(),(0,o.jq)()])];case 2:return f.sent(),s={SourceHanSansSC:{normal:"https://search.wxqcloud.qq.com/t/searchweb/cdn_libs/res/font-family/SourceHanSansSC-Regular.ttf",bold:"https://search.wxqcloud.qq.com/t/searchweb/cdn_libs/res/font-family/SourceHanSansSC-Medium.ttf",italics:"https://search.wxqcloud.qq.com/t/searchweb/cdn_libs/res/font-family/SourceHanSansSC-Regular.ttf",bolditalics:"https://search.wxqcloud.qq.com/t/searchweb/cdn_libs/res/font-family/SourceHanSansSC-Medium.ttf"}},window.pdfMake&&(window.pdfMake.fonts=s),[4,(0,i.j)(t,r)];case 3:var p,m;c=f.sent(),l=(null===(a=window.pdfMake)||void 0===a?void 0:a.createPdf)||window.createPdf,u="",p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({},c),m=(m={info:{AIGC:n}},m),Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(m)).forEach(function(t){Object.defineProperty(p,t,Object.getOwnPropertyDescriptor(m,t))}),d=p,f.label=4;case 4:return f.trys.push([4,6,,8]),[4,l(d).getBase64()];case 5:case 7:return u=f.sent(),[3,8];case 6:return console.warn("markdownToPdfBase64 promise error",f.sent()),[4,new Promise(function(t,e){try{l(d).getBase64(function(e){return t(e)})}catch(t){e(t)}})];case 8:return[2,u];case 9:return console.error("markdownToPdfBase64 error",f.sent()),[2,void 0];case 10:return[2]}})},(s=function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)})}).apply(this,arguments)}},702521:function(t,e,n){n.d(e,{j:function(){return g}});var i=n(938090),o=n(236842),r=n(587641),a=n(439508),s=n(207417),c=n(347307),l=n(635696);function u(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function d(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i,o,r=h(t);return o=e?Reflect.construct(r,arguments,h(this).constructor):r.apply(this,arguments),n=this,(i=o)&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(i)||"function"==typeof i)?i:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)}}var v=function(t){f(n,t);var e=m(n);function n(t){var i;return d(this,n),i=e.call(this,t),a.kD.forEach(function(t){i[t]=function(){}}),i}return n}(i.d2),y=function(t){f(n,t);var e=m(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(i.Th);function g(t,e){return b.apply(this,arguments)}function b(){var t;return t=function(t,e){var n;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(a){switch(a.label){case 0:var u,d,h,f,p;return n=(u=t,(d=new i.M2).use((0,o.vv)()),d.use((0,r.Z)()),d.use((0,l.Z)()),d.use((0,s.iE)()),h=(u||"").replace(/<!--(?:-?>|[\s\S]*?(?:-->|$))/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;"),d.parse(h,{breaks:!0,tokenizer:new v({breaks:!0}),renderer:new y({breaks:!0})})).replace(/&lt;br&gt;/g,"<br>"),[4,(0,c.b)(n+(p='<p class="pdf-footer">由搜一搜AI搜索深度研究生成</p>',(null==(f=e)?void 0:f.length)?'<p class="url-reference-list-title">参考来源</p>\n'.concat(f.map(function(t){var e="".concat(t.number||""," ").concat(t.nickName||"",": ").concat(t.title||"").replace(/</g,"&lt;").replace(/>/g,"&gt;");return'<p><a href="'.concat(t.url,'">').concat(e,"</a></p>")}).join("\n"),"\n").concat(p,"\n"):p))];case 1:return[2,{content:a.sent(),defaultStyle:{font:"SourceHanSansSC",fontSize:15,lineHeight:1.6},styles:{"html-new-line":{marginTop:12},"html-heading":{bold:!0},"html-h1":{fontSize:22},"html-h2":{fontSize:20},"html-h3":{fontSize:18},"html-h4":{fontSize:16},"html-strong":{bold:!0},"html-b":{bold:!0},"html-a":{color:"#576b95"},"with-spaces":{preserveLeadingSpaces:!0},"pdf-footer":{marginTop:24,fontSize:14,color:"#4D4D4D",alignment:"center"},"html-inline-reference":{fontSize:10,sup:!0}}}]}})},(b=function(){var e=this,n=arguments;return new Promise(function(i,o){var r=t.apply(e,n);function a(t){u(r,i,o,a,s,"next",t)}function s(t){u(r,i,o,a,s,"throw",t)}a(void 0)})}).apply(this,arguments)}},369794:function(t,e,n){function i(t,e){var n=(t||"untitled").replace(/[<>:"/\\|?*\x00-\x1f]/g,"_").replace(/\.\./g,"_").replace(/^[._]+/,"").replace(/[._]+$/,"").trim(),i=n.length>100?n.substring(0,100):n;return"".concat(i||"untitled",".").concat(e)}n.d(e,{A:function(){return i}}),n(391706),n(798509)},770719:function(t,e,n){var i,o,r,a,s,c,l,u,d,h;n.d(e,{CF:function(){return o},Zy:function(){return r},qb:function(){return a},tw:function(){return i}}),(c=i||(i={}))[c.Total=0]="Total",c[c.Incremental=1]="Incremental",c[c.Heartbeat=2]="Heartbeat",(l=o||(o={}))[l.Begin=0]="Begin",l[l.Finish=1]="Finish",l[l.PartFinish=2]="PartFinish",(u=r||(r={}))[u.Unknown=0]="Unknown",u[u.Running=1]="Running",u[u.Ok=2]="Ok",u[u.Failed=3]="Failed",u[u.Blocked=4]="Blocked",u[u.Timeout=5]="Timeout",u[u.UserCanceled=6]="UserCanceled",u[u.Intervention=7]="Intervention",(d=a||(a={}))[d.Running=0]="Running",d[d.Finish=1]="Finish",d[d.Terminate=2]="Terminate",(h=s||(s={}))[h.Normal=0]="Normal",h[h.Searcher=1]="Searcher"},569125:function(t,e,n){n.d(e,{e:function(){return c}});var i=n(770719);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}var c=function(){var t,e,n;function c(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),a(this,"latestResponse",void 0)}return t=c,e=[{key:"merge",value:function(t,e){if(e===i.tw.Total)this.latestResponse=s({},this.latestResponse,t);else if(e===i.tw.Incremental){var n=null===(c=this.latestResponse)||void 0===c?void 0:null===(a=c.researchStep)||void 0===a?void 0:a.taskInfos;if(this.latestResponse=s({},this.latestResponse,t),(null==n?void 0:n.length)&&this.latestResponse.researchStep){var r,a,c,l,u,d=function(t){if(Array.isArray(t))return o(t)}(r=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();null===(u=t.researchStep)||void 0===u||null===(l=u.taskInfos)||void 0===l||l.forEach(function(t){var e=d.findIndex(function(e){return e.id===t.id});-1!==e?d[e]=t:d.push(t)}),this.latestResponse.researchStep.taskInfos=d}}else this.latestResponse=s({},this.latestResponse,t)}},{key:"getLatestResponse",value:function(){return this.latestResponse}}],r(t.prototype,e),c}()},699691:function(t,e,n){n.d(e,{M:function(){return o},o:function(){return r}});var i=n(770719);function o(t){return null!=t&&[i.qb.Finish,i.qb.Terminate].includes(t)}function r(t){return null!=t&&t>=i.Zy.Failed}},48807:function(t,e,n){function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,{X$:function(){return c},aJ:function(){return s},eS:function(){return l}});function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return Array.from(t)}function a(t,e,n){var i=r(t),o=void 0!==n?n:i.length;return i.slice(e,o).join("")}function s(t,e,n){if(!t||!e)return t;var i=function(t,e){if(!e)return[];var n=r(e).length;return t.filter(function(t){if(/^https?:\/\/(?:[\w-]+\.)+[\w-]+(?:\/[\w@:%_+.~#?&//=]*)?$/.test(t.query||""))return!1;var e=t.beginIdx,i=t.endIdx;return e>=0&&i<=n})}(function(t){if(t.length<=1)return t;for(var e=o(t).sort(function(t,e){return t.beginIdx-e.beginIdx}),n=[],i=e[0],r=1;r<e.length;r++){var s=e[r];if(i.endIdx>=s.beginIdx){var c=Math.min(i.beginIdx,s.beginIdx),l=Math.max(i.endIdx,s.endIdx),u="";if(i.beginIdx<=s.beginIdx&&i.endIdx>=s.endIdx)u=i.query;else if(s.beginIdx<=i.beginIdx&&s.endIdx>=i.endIdx)u=s.query;else if(i.beginIdx<=s.beginIdx){var d=i.endIdx-s.beginIdx+1;u=a(i.query,0,i.query.length-d)+s.query}else{var h=s.endIdx-i.beginIdx+1;u=a(s.query,0,s.query.length-h)+i.query}i={beginIdx:c,endIdx:l,query:u}}else n.push(i),i=s}return n.push(i),n}(e.filter(function(e){return e.beginIdx>=0&&e.endIdx<=r(t).length-1})),t),s=o(i).sort(function(t,e){return e.beginIdx-t.beginIdx}),c=t;return s.forEach(function(t){var e,i,o=t.beginIdx,r=t.endIdx+1,s=a(c,o,r);if(e=s,i=t,!e.includes("\n")&&e===i.query)c="".concat(a(c,0,o),'<searchLink searchQuery="').concat(encodeURIComponent(t.query||""),'" jumpInfo="').concat(encodeURIComponent(JSON.stringify(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,o,r;i=t,o=e,r=n[e],o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r})}return t}({isHalfPage:!0},n))),'">').concat(s,"</searchLink>").concat(a(c,r))}),c}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!(null==e?void 0:e.length))return e||[];var n=function(t){for(var e,n=/\[[\d,]+\]\(@ref\)/g,i=[];null!==(e=n.exec(t));){var o=r(t.slice(0,e.index)).length,a=r(e[0]).length;i.push({start:o,end:o+a-1,length:a})}return i}(t),i=function(t){var e=0,i=!0,o=!1,r=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var c=a.value;c.end<t&&(e+=c.length)}}catch(t){o=!0,r=t}finally{try{!i&&null!=s.return&&s.return()}finally{if(o)throw r}}return e},o=[],a=!0,s=!1,c=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value,h=d.beginIdx,f=d.endIdx;if(!(h<0)&&!(f<h)){var p=i(h),m=i(f+1),v=Math.max(0,h-p),y=Math.max(v,f-m);o.push({beginIdx:v,endIdx:y,query:d.query})}}}catch(t){s=!0,c=t}finally{try{!a&&null!=u.return&&u.return()}finally{if(s)throw c}}return o}function l(t,e,n){if(!t||!e)return t;var i=t,r=o(e.filter(Boolean)).sort(function(t,e){return e.length-t.length}),a=!0,s=!1,c=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var d=l.value;if(!!d&&""!==d.trim()){var h=RegExp(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(d),"gi");i=i.replace(h,function(t){return'<highlight disable="'.concat(n?1:0,'">').concat(t,"</highlight>")})}}}catch(t){s=!0,c=t}finally{try{!a&&null!=u.return&&u.return()}finally{if(s)throw c}}return i}},214351:function(t,e,n){n.d(e,{P:function(){return r}});var i=n(391706);function o(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function r(){return a.apply(this,arguments)}function a(){var t;return t=function(){return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(t){return[2,(0,i.X5)()]})},(a=function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){o(a,i,r,s,c,"next",t)}function c(t){o(a,i,r,s,c,"throw",t)}s(void 0)})}).apply(this,arguments)}},760934:function(t,e,n){n.d(e,{P:function(){return s}});var i=n(578248);function o(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(i,o)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){var t,e,n;function s(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,s),a(this,"hasStarted",!1),a(this,"latestRes",void 0),a(this,"pollingConfig",void 0),a(this,"isAnswerFinish",!1),a(this,"isFinish",!1),a(this,"callbackList",[]),a(this,"hasDestroyed",!1),a(this,"pollingTimerId",null)}return t=s,e=[{key:"start",value:function(t){this.hasStarted=!0,this.pollingConfig=t,this.startLongPolling()}},{key:"destroy",value:function(){this.pollingTimerId&&clearTimeout(this.pollingTimerId),this.hasDestroyed=!0,this.callbackList=[]}},{key:"addCallback",value:function(t){this.callbackList.push(t)}},{key:"removeCallback",value:function(t){this.callbackList=this.callbackList.filter(function(e){return e!==t})}},{key:"handleResponse",value:function(t){var e,n=this;if(!this.hasDestroyed)this.latestRes=t,this.isAnswerFinish=(null==t?void 0:null===(e=t.answer)||void 0===e?void 0:e.answerFinish)||this.isAnswerFinish,this.isFinish=this.isFinish||!(null==t?void 0:t.continueFlag),this.callbackList.forEach(function(e){return e(t)}),(null==t?void 0:t.continueFlag)&&(this.pollingTimerId=setTimeout(function(){n.pollingTimerId=null,n.startLongPolling(t)},t.interval||50))}},{key:"startLongPolling",value:function(t){var e,n=this;return(e=function(){var e,o,r,s,c,l,u,d,h;return function(t,e){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,function(f){switch(f.label){case 0:var p,m;return[4,i.ZP.getCommonCgiData({cgiName:null===(e=n.pollingConfig)||void 0===e?void 0:e.cgiName,data:(p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}({},null===(o=n.pollingConfig)||void 0===o?void 0:o.params),m=null!=(m={cookies:null!==(u=null==t?void 0:t.cookies)&&void 0!==u?u:null===(s=n.pollingConfig)||void 0===s?void 0:null===(r=s.params)||void 0===r?void 0:r.cookies,resultKey:null!==(d=null==t?void 0:t.resultKey)&&void 0!==d?d:null===(l=n.pollingConfig)||void 0===l?void 0:null===(c=l.params)||void 0===c?void 0:c.resultKey,h5Version:80213349})?m:{},Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(m)).forEach(function(t){Object.defineProperty(p,t,Object.getOwnPropertyDescriptor(m,t))}),p)})];case 1:return h=f.sent(),n.handleResponse(h),[2]}})},function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function s(t){o(a,i,r,s,c,"next",t)}function c(t){o(a,i,r,s,c,"throw",t)}s(void 0)})})()}}],r(t.prototype,e),s}()},869309:function(t,e,n){n.d(e,{u:function(){return c}});var i=n(50008);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function s(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n.push.apply(n,i)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}var c=function(){var t,e,n;function c(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c)}return t=c,e=null,n=[{key:"safeStringify",value:function(t){try{return JSON.stringify(t)}catch(e){return console.warn("JSON.stringify 失败，已退化为 String(value)：",e),String(t)}}},{key:"safeParse",value:function(t){try{return JSON.parse(t)}catch(e){return console.warn("JSON.parse 失败，已退化为原始字符串：",e),t}}},{key:"arrayBufferToBase64",value:function(t){if("undefined"!=typeof window&&window.btoa){for(var e="",n=new Uint8Array(t),i=n.byteLength,o=0;o<i;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}if("undefined"!=typeof Buffer)return Buffer.from(t).toString("base64");throw Error("No base64 encoder available")}},{key:"base64ToArrayBuffer",value:function(t){if("undefined"!=typeof window&&window.atob)e=window.atob(t);else if("undefined"!=typeof Buffer)e=Buffer.from(t,"base64").toString("binary");else throw Error("No base64 decoder available");for(var e,n=e.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=e.charCodeAt(o);return i.buffer}},{key:"addCustomExifToJpeg",value:function(t,e,n){var o,c,l,u,d,h=i.load("data:image/jpeg;base64,".concat(t)),f=s(a({},h),{"0th":null!==(o=h["0th"])&&void 0!==o?o:{},Exif:null!==(c=h.Exif)&&void 0!==c?c:{},GPS:null!==(l=h.GPS)&&void 0!==l?l:{},"1st":null!==(u=h["1st"])&&void 0!==u?u:{},thumbnail:null!==(d=h.thumbnail)&&void 0!==d?d:null}),p=i.ExifIFD.UserComment,m=r({},e,"string"==typeof n?this.safeParse(n):n),v=this.safeStringify(m);f.Exif[p]=v;var y=s(a({},f),{thumbnail:null===f.thumbnail?void 0:f.thumbnail}),g=i.dump(y);return i.insert(g,"data:image/jpeg;base64,".concat(t)).split(",")[1]}},{key:"addITXtChunkToPng",value:function(t,e,n){var i=new Uint8Array(this.base64ToArrayBuffer(t)),o=16+(i[8]<<24|i[9]<<16|i[10]<<8|i[11]),r=i.slice(0,o+4),a=i.slice(o+4),s="string"==typeof n?n:this.safeStringify(n),c=this.stringToUint8(e),l=new Uint8Array(c.length+5+s.length),u=0;l.set(c,u),u+=c.length,l.set([0],u),u+=1,l.set([0],u),u+=1,l.set([0],u),u+=1,l.set([0],u),u+=1,l.set([0],u),u+=1,l.set(this.stringToUint8(s),u);var d=new Uint8Array(8+l.length+4);d.set(this.uint32ToBytes(l.length),0),d.set([105,84,88,116],4),d.set(l,8);var h=this.crc32(d.slice(4,8+l.length));d.set(this.uint32ToBytes(h),8+l.length);var f=new Uint8Array(r.length+d.length+a.length);return f.set(r,0),f.set(d,r.length),f.set(a,r.length+d.length),this.arrayBufferToBase64(f.buffer)}},{key:"addTextChunkToPng",value:function(t,e,n){var i=new Uint8Array(this.base64ToArrayBuffer(t)),o=16+(i[8]<<24|i[9]<<16|i[10]<<8|i[11]),r=i.slice(0,o+4),a=i.slice(o+4),s="string"==typeof n?n:this.safeStringify(n),c="".concat(e,"\0").concat(s),l=this.stringToUint8(c),u=new Uint8Array(8+l.length+4);u.set(this.uint32ToBytes(l.length),0),u.set([116,69,88,116],4),u.set(l,8);var d=this.crc32(u.slice(4,8+l.length));u.set(this.uint32ToBytes(d),8+l.length);var h=new Uint8Array(r.length+u.length+a.length);return h.set(r,0),h.set(u,r.length),h.set(a,r.length+u.length),this.arrayBufferToBase64(h.buffer)}},{key:"stringToUint8",value:function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}},{key:"uint32ToBytes",value:function(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t]}},{key:"crc32",value:function(t){if(!this._crcTable){this._crcTable=[];for(var e=0;e<256;e++){for(var n=e,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;this._crcTable[e]=n}}for(var o=-1,r=0;r<t.length;r++)o=o>>>8^this._crcTable[(o^t[r])&255];return(-1^o)>>>0}}],n&&o(t,n),c}();r(c,"_crcTable",null)},34446:function(t,e,n){n.d(e,{Z:function(){return l}});var i=n(448188),o=n(798509),r=n(254629),a=n(984928);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function c(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){var e=t.extReqParams,n=new r.$;(0,i.gb)(t.requestId,function(t){n.done(t)});var s=t.parentSearchID||o.xB.parentSearchID,l=1;o.xB.firstSearchSession!==o.xB.sessionId&&o.xB.scene!==a.RL.Global?(l=1,o.xB.setValue({firstSearchSession:o.xB.sessionId})):l=0;var u=[{key:"currentPage",uintValue:1},{key:"requestId",textValue:t.requestId},{key:"windowWidth",uintValue:(0,window.innerWidth)},{key:"fontRatio",uintValue:100*+o.xB.fontRatio},{key:"TemplateNightModeType",uintValue:o.Zr.isDarkMode()?1:0},{key:"realH5Version",uintValue:80213349},{key:"parentSearchID",textValue:s},{key:"firstSearchRequest",uintValue:l}].concat(c(o.xB.sessionExtReqParams));window.patchH5Version&&u.push({key:"patchH5Version",uintValue:Number(window.patchH5Version)});var d=o.xB.thirdExtParam||{},h=d.aiH5Link,f=d.aiH5Title;(o.xB.isAiSummary||o.xB.scene===a.RL.MP_TOP_RIGHT_SEARCH_ENTER)&&h&&u.push({key:"aiSearchUploadInfo",textValue:JSON.stringify({uploadFiles:[{fileType:4,title:f,fileContentDetail:{mpContentDetail:{title:f}},url:String(h)}],contentType:4,allowedContentType:4})});var p=o.xB.additionalExtReqParams||[];return(null==t?void 0:t.isFromSwitchModel)&&(p=p.filter(function(t){return!["globalSearchDeepThink"].includes(t.key)})),u.push.apply(u,c(p)),o.hi.getResult({sessionId:o.xB.sessionId,subSessionId:o.xB.subSessionId,parentSearchID:s,parentType:t.parentType||o.xB.parentType,offset:0,type:t.type,subType:0,isHomePage:1,sceneActionType:1,extReqParams:c(u).concat(c(e||[])),requestId:t.requestId,extClientParams:o.xB.queryString.extClientParams,searchId:"",query:t.query,scene:t.scene||o.xB.scene,action:1,page:t.page,isBackButtonClick:!0}),n.promise.then(function(t){return t})}},587330:function(t,e,n){n.d(e,{$T:function(){return a},ig:function(){return c},kD:function(){return s}});var i,o,r,a,s,c,l=n(231097),u=n(439433);(i=a||(a={})).SearchStartToFirstPlanToken="研究开始到规划任务首token曝光",i.SearchStartToFirstStepToken="研究开始到研究任务首token曝光",i.SearchStartToFirstReportToken="研究开始到报告token曝光",i.SearchStartToFinish="研究开始到报告完成",(o=s||(s={}))[o.DeepResearch=1]="DeepResearch",(r=c||(c={}))[r.Start=0]="Start",r[r.End=1]="End",e.ZP=(0,u.ZP)({logId:36191,transferFn:function(t){var e,n;return["",t.searchId||"",t.stepName||"",t.actionTimestampMs||Date.now(),0,t.scene||l.Z.scene,"",null!==(e=t.stepType)&&void 0!==e?e:0,null!==(n=t.agentBusinessId)&&void 0!==n?n:0,("object"==typeof t.expand?encodeURIComponent(JSON.stringify(t.expand)):t.expand)||"",t.requestId||""].join(",")}})},120124:function(t,e,n){n.d(e,{G:function(){return a}});var i=n(798509),o=n(984928),r=n(735055);function a(t){var e;i.hi.openLiteApp({appId:o.tv.OUT_LINK,page:"pages/auto-jumping/auto-jumping",isTransparent:!0,checkUpdate:!1,minVersion:"0.2.1",query:{title:t.title.slice(0,100),desc:t.desc.slice(0,200),type:"showShareSheet",thumbUrl:t.thumbUrl||"https://search.wxqcloud.qq.com/t/fed_upload/5e444d4588aaa32d6a993061ca21a764/s1s_white_logo.png",minVersion:"0.1.0",versionCtrl:t.versionCtrl,isTransparent:!0,srcId:null!==(e=t.srcId)&&void 0!==e?e:"wxf6e012cbbca759dc",postConversationsShareReqParams:t.postConversationsShareReqParams&&"object"==typeof t.postConversationsShareReqParams?(0,r.eG)(t.postConversationsShareReqParams):t.postConversationsShareReqParams,bypassReportParams:t.bypassReportParams,disableShareToast:t.disableShareToast,enableItemList:t.enableItemList,extraItemList:t.extraItemList,startWebSearchParams:t.startWebSearchParams,disableSaveImage:t.disableSaveImage}})}},407778:function(t,e,n){function i(t,e){return t<<e|t>>>32-e}function o(t,e){var n=1073741824&t,i=1073741824&e,o=2147483648&t,r=2147483648&e,a=(1073741823&t)+(1073741823&e);if(n&i)return 2147483648^a^o^r;if(n|i)return 1073741824&a?3221225472^a^o^r:1073741824^a^o^r;return a^o^r}n.d(e,{F:function(){return u}});function r(t,e,n,r,a,s,c){var l;return o(i(o(o(t,(l=e)&n|~l&r),o(a,c)),s),e)}function a(t,e,n,r,a,s,c){var l,u,d;return o(i(o(o(t,(l=e,u=n,l&(d=r)|u&~d)),o(a,c)),s),e)}function s(t,e,n,r,a,s,c){return o(i(o(o(t,e^n^r),o(a,c)),s),e)}function c(t,e,n,r,a,s,c){return o(i(o(o(t,n^(e|~r)),o(a,c)),s),e)}function l(t){for(var e="",n=0;n<=3;n++){var i=t>>>8*n&255;e+="0".concat(i.toString(16)).slice(-2)}return e}function u(t){var e=[],n=1732584193,i=4023233417,u=2562383102,d=271733878;e=function(t){for(var e=t.length,n=e+8,i=((n-n%64)/64+1)*16,o=Array(i-1),r=0,a=0;a<e;a++){var s=(a-a%4)/4;r=a%4*8,o[s]=(o[s]|t.charCodeAt(a)<<r)>>>0}var c=(e-e%4)/4;return r=e%4*8,o[c]=(o[c]|128<<r)>>>0,o[i-2]=e<<3>>>0,o[i-1]=e>>>29>>>0,o}(unescape(encodeURIComponent(t)));for(var h=0;h<e.length;h+=16){var f=n,p=i,m=u,v=d;n=r(n,i,u,d,e[h+0],7,3614090360),d=r(d,n,i,u,e[h+1],12,3905402710),u=r(u,d,n,i,e[h+2],17,606105819),i=r(i,u,d,n,e[h+3],22,3250441966),n=r(n,i,u,d,e[h+4],7,4118548399),d=r(d,n,i,u,e[h+5],12,1200080426),u=r(u,d,n,i,e[h+6],17,2821735955),i=r(i,u,d,n,e[h+7],22,4249261313),n=r(n,i,u,d,e[h+8],7,1770035416),d=r(d,n,i,u,e[h+9],12,2336552879),u=r(u,d,n,i,e[h+10],17,4294925233),i=r(i,u,d,n,e[h+11],22,2304563134),n=r(n,i,u,d,e[h+12],7,1804603682),d=r(d,n,i,u,e[h+13],12,4254626195),u=r(u,d,n,i,e[h+14],17,2792965006),i=r(i,u,d,n,e[h+15],22,1236535329),n=a(n,i,u,d,e[h+1],5,4129170786),d=a(d,n,i,u,e[h+6],9,3225465664),u=a(u,d,n,i,e[h+11],14,643717713),i=a(i,u,d,n,e[h+0],20,3921069994),n=a(n,i,u,d,e[h+5],5,3593408605),d=a(d,n,i,u,e[h+10],9,38016083),u=a(u,d,n,i,e[h+15],14,3634488961),i=a(i,u,d,n,e[h+4],20,3889429448),n=a(n,i,u,d,e[h+9],5,568446438),d=a(d,n,i,u,e[h+14],9,3275163606),u=a(u,d,n,i,e[h+3],14,4107603335),i=a(i,u,d,n,e[h+8],20,1163531501),n=a(n,i,u,d,e[h+13],5,2850285829),d=a(d,n,i,u,e[h+2],9,4243563512),u=a(u,d,n,i,e[h+7],14,1735328473),i=a(i,u,d,n,e[h+12],20,2368359562),n=s(n,i,u,d,e[h+5],4,4294588738),d=s(d,n,i,u,e[h+8],11,2272392833),u=s(u,d,n,i,e[h+11],16,1839030562),i=s(i,u,d,n,e[h+14],23,4259657740),n=s(n,i,u,d,e[h+1],4,2763975236),d=s(d,n,i,u,e[h+4],11,1272893353),u=s(u,d,n,i,e[h+7],16,4139469664),i=s(i,u,d,n,e[h+10],23,3200236656),n=s(n,i,u,d,e[h+13],4,681279174),d=s(d,n,i,u,e[h+0],11,3936430074),u=s(u,d,n,i,e[h+3],16,3572445317),i=s(i,u,d,n,e[h+6],23,76029189),n=s(n,i,u,d,e[h+9],4,3654602809),d=s(d,n,i,u,e[h+12],11,3873151461),u=s(u,d,n,i,e[h+15],16,530742520),i=s(i,u,d,n,e[h+2],23,3299628645),n=c(n,i,u,d,e[h+0],6,4096336452),d=c(d,n,i,u,e[h+7],10,1126891415),u=c(u,d,n,i,e[h+14],15,2878612391),i=c(i,u,d,n,e[h+5],21,4237533241),n=c(n,i,u,d,e[h+12],6,1700485571),d=c(d,n,i,u,e[h+3],10,2399980690),u=c(u,d,n,i,e[h+10],15,4293915773),i=c(i,u,d,n,e[h+1],21,2240044497),n=c(n,i,u,d,e[h+8],6,1873313359),d=c(d,n,i,u,e[h+15],10,4264355552),u=c(u,d,n,i,e[h+6],15,2734768916),i=c(i,u,d,n,e[h+13],21,1309151649),n=c(n,i,u,d,e[h+4],6,4149444226),d=c(d,n,i,u,e[h+11],10,3174756917),u=c(u,d,n,i,e[h+2],15,718787259),i=c(i,u,d,n,e[h+9],21,3951481745),n=o(n,f),i=o(i,p),u=o(u,m),d=o(d,v)}return(l(n)+l(i)+l(u)+l(d)).toLowerCase()}},365551:function(t,e,n){n.d(e,{l:function(){return r}});function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function(){var t,e,n;function r(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),o(this,"config",void 0),o(this,"checkTimer",void 0),this.config=t,this.checkTimer=null}return t=r,e=[{key:"start",value:function(){var t=this;if(!this.checkTimer){var e=Date.now(),n=this.config.checkInterval||3e3,i=this.config.gap||3e3;this.checkTimer=setInterval(function(){var o=Date.now();o-e>n+i&&t.config.onStuck(o-e-n),e=o},n)}}},{key:"stop",value:function(){this.checkTimer&&(clearInterval(this.checkTimer),this.checkTimer=null)}}],i(t.prototype,e),r}()}}]);