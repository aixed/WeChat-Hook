"use strict";(self.webpackChunkweixin_search=self.webpackChunkweixin_search||[]).push([["src_views_chat-bot_components_DeepResearchExposeBlock_vue-src_views_chat-bot_components_teach-26214a"],{633537:function(t,e,n){var o=n(418207),r=n(99554),i=n(551900),s=n(671124),a=(0,i.Z)(r.Z,o.s,o.x,!1,null,null,null);"function"==typeof s.Z&&(0,s.Z)(a),e.Z=a.exports},920519:function(t,e,n){n.d(e,{Z:function(){return o}});function o(t){t.options.__wxs_id="fdaacd74"}},747947:function(t,e,n){var o=n(204647),r=n(607027),i=n(551900),s=n(952894),a=(0,i.Z)(r.Z,o.s,o.x,!1,null,"cf1c049c",null);"function"==typeof s.Z&&(0,s.Z)(a),e.Z=a.exports},788877:function(t,e,n){n.d(e,{Z:function(){return o}});function o(t){t.options.__wxs_id="91617817"}},671124:function(t,e,n){var o=n(920519);e.Z=o.Z},952894:function(t,e,n){var o=n(788877);e.Z=o.Z},99554:function(t,e,n){var o=n(448008);e.Z=o.Z},607027:function(t,e,n){var o=n(532349);e.Z=o.Z},418207:function(t,e,n){n.d(e,{s:function(){return o},x:function(){return r}});var o=function(){var t=this.$createElement;return(this._self._c||t)("exposure-block",{ref:"exposureBlockRef",attrs:{"expose-option":this.genExposeOption(),"data-fc-1332880e4":"","data-fcn-DeepResearchExposeBlock":"","data-fr-1543b1ced":""}},[this._t("default")],2)},r=[]},204647:function(t,e,n){n.d(e,{s:function(){return o},x:function(){return r}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"conversation-history",class:"conversation-history--style-"+t.styleType,attrs:{"data-fcn-ConversationHistory":"","data-fr-10bb259a2":""}},t._l(t.listToShow,function(e,o){return n("div",{directives:[{name:"active",rawName:"v-active.instant",modifiers:{instant:!0}}],key:e.searchId,staticClass:"conversation-history__item active__mask",class:{"edit-mask":t.isEdit},attrs:{"data-new-teach-report-id":""+t.getItemReportId(e),"data-cli":""},on:{click:function(n){return t.onClickItem(e,o)}}},[n("div",{staticClass:"conversation-history-line"},[n("div",{staticClass:"conversation-history__title"},[n("span",{staticClass:"conversation-history__title-text"},[t._v(t._s(e.query))]),e.contentType&&t.getContentTypeIcon(e.contentType)?n("ui-image",{staticClass:"conversation-history__title-icon",attrs:{width:16,height:16,url:t.getContentTypeIcon(e.contentType),"data-fc-16a98dacf":""}}):t._e(),t.getTags(e)?n("ui-tags",{attrs:{tags:t.getTags(e),flex:"",gap:"","data-fc-16a98dad0":""}}):t._e()],1),t.isEdit?n("div",{staticClass:"conversation-history__delete",attrs:{"aria-hidden":"true"},on:{click:function(n){return n.stopPropagation(),t.onDeleteItem(e,o)}}},[n("i",{staticClass:"weui-icon-close-thin conversation-history__delete-icon"})]):t._e()]),n("div",{staticClass:"conversation-history__dot",class:{"conversation-history__dot--hollow":o>0}}),o>0?n("div",{staticClass:"conversation-history__line",style:t.lineStyle}):t._e(),n("div")])}),0)},r=[]},448008:function(t,e,n){var o=n(883031),r=n(349854),i=n(462474),s=n(984928);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}e.Z={components:{ExposureBlock:r.Z},created:function(){i.Z.$on(i.U.drExposeAnalysis,this.onDrExposeAnalysis)},destroyed:function(){i.Z.$off(i.U.drExposeAnalysis,this.onDrExposeAnalysis)},methods:{onDrExposeAnalysis:function(){this.$refs.exposureBlockRef.analysisExpose()},genExposeOption:function(){var t=this;return{attrList:["dr-doc-report-id"].map(function(e){return{exposeId:e,validateStayTime:function(t){return!0},handler:{onSimpleExpose:t.onSimpleExpose,onStayTimeExpose:t.onStayTimeExpose}}}),resetExposeEvent:i.U.afterClearResult,pageType:this.$route.name,needIdToElementMap:!0}},onSimpleExpose:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.idToElementMap,i=void 0===r?{}:r,a=t.map(function(t){var e=i[t];return n.getReportItem(t,e,s.At.EXPOSE_DOC)}).filter(Boolean);this.mergeReportData(a)},onStayTimeExpose:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.idToElementMap,i=void 0===r?{}:r,a=t.map(function(t){var e=i[t];return n.getReportItem(t,e,s.At.EFFECTIVE_EXPOSE_50Precent_DOC)}).filter(Boolean);this.mergeReportData(a)},mergeReportData:function(t){(0,o.Z)(t)},getReportItem:function(t,e,n){var o,r,i,s,c,l=(i=t.split("$"),s=5,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{!s&&null!=r.return&&r.return()}finally{if(a)throw o}}return i}}(i,5)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}}(i,s)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=(l[0],l[1]),f=l[2],p=l[3],d=l[4],y=null===(c=this.getReportVmDataByEl(e,"DRR_getCommonReportData"))||void 0===c?void 0:c({actionType:n});if(!y){console.error("dr getReportItem fail",t,e,n);return}return o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){var o,r,i;o=t,r=e,i=n[e],r in o?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i})}return t}({},y),r=(r={stepInfo:u,taskInfo:p,agentInfo:f,docInfo:d},r),Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n.push.apply(n,o)}return n})(Object(r)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))}),o},getReportVmDataByEl:function(t,e){for(var n=t.__vue__,o=t;!n&&o;){;n=(o=o.parentElement).__vue__}for(;n;){if(n[e])return n[e];n=n.$parent}}}}},532349:function(t,e,n){var o=n(798509),r=n(372973),i=n(619269),s=n(84762);function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){var o,r,i;o=t,r=e,i=n[e],r in o?Object.defineProperty(o,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[r]=i})}return t}e.Z={mixins:[i.Z],props:{isEdit:{type:Boolean,default:!1},conversation:{type:Object,default:function(){return{}}},styleType:{type:Number,default:0},limit:{type:Number,default:0}},computed:{listToShow:function(){if(this.limit){var t;return(null===(t=this.conversation.historyList)||void 0===t?void 0:t.slice(0,this.limit))||[]}return this.conversation.historyList||[]},lineStyle:function(){var t=(2===this.styleType?20:12)*1.5,e=(0,r.I)().getTextHeight({text:"测试",fontSize:"var(--FONT-M)"})-6+t-4;return{display:this.isEdit?"none":"block",height:"".concat(e,"px"),bottom:"calc(50% + ".concat(5,"px)")}},reportExtInfo:function(){return{isCache:this.$store.state.chatbot.historyExtInfo.isCache,requestId:this.$store.state.chatbot.historyExtInfo.requestId}}},methods:{getTags:function(t){if(1!==t.feature)return;var e={0:"研究报告",1:"回答中",2:"有新报告",3:"研究报告"}[t.state];if(!!e)return[{title:e,type:2===t.state?1:3,noBg:!0}]},getContentTypeIcon:function(t){return s.j4[t]},onClickItem:function(t,e){if(this.isEdit){this.onDeleteItem(t,e);return}this.M_clickReportFor26897({itemReportId:this.getItemReportId(t)},t.index,a({actionId:o.At.AI_SEARCH},this.reportExtInfo));var n={conversationId:this.conversation.conversationId,item:t,index:e};setTimeout(function(){o.Gc.$emit(o.U3.CHAT_GET_HISTORY_REPLAY,n)},2==this.styleType?200:0),this.$emit("tap-item",n)},onDeleteItem:function(t,e){this.$emit("tap-delete-item",{conversationId:this.conversation.conversationId,item:t}),this.M_clickReportFor26897({itemReportId:this.getItemReportId(t)},t.index,a({actionId:o.At.CLICK_DELETE},this.reportExtInfo)),this.$store.dispatch("chatbot/deleteHistory",{conversationId:this.conversation.conversationId,item:t,index:e})},getItemReportId:function(t){var e=1!==t.feature?"":t.state;return["1|1001|".concat(encodeURIComponent("最近在问")),"".concat(t.index,"|").concat(t.index,"|").concat(encodeURIComponent(t.query),"||1|").concat(t.searchId,"|").concat(e,"||title|"),JSON.stringify(this.reportExtInfo)].join("$$")}}}}}]);