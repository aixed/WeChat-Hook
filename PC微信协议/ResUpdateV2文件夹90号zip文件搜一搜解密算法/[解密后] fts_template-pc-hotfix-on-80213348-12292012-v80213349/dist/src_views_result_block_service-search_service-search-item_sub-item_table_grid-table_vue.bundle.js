"use strict";(self.webpackChunkweixin_search=self.webpackChunkweixin_search||[]).push([["src_views_result_block_service-search_service-search-item_sub-item_table_grid-table_vue"],{30335:function(t,e,i){var n=i(376608),a=i(124156),l=i(551900),o=i(156010),r=(0,l.Z)(a.Z,n.s,n.x,!1,null,"38f7ba27",null);"function"==typeof o.Z&&(0,o.Z)(r),e.Z=r.exports},126161:function(t,e,i){i.d(e,{Z:function(){return n}});function n(t){t.options.__wxs_id="616ab74f"}},740115:function(t,e,i){i.r(e);var n=i(879662),a=i(557434),l=i(551900),o=i(67162),r=i(605920),s=(0,l.Z)(a.Z,n.s,n.x,!1,null,"1ee8884b",null);"function"==typeof o.Z&&(0,o.Z)(s),"function"==typeof r.Z&&(0,r.Z)(s),e.default=s.exports},978007:function(t,e,i){i.d(e,{Z:function(){return n}});function n(t){t.options.__ruleConfig={version:3,componentPath:"1d8aa5bd8",componentType:1,rules:[{isInformal:!0,model:"cnProps.table.action.jumpInfo",path:'[data-vr-id="J9AlSIYdF"]',isReportIdFromJson:!0,event:0,type:2},{isInformal:!0,model:"cnProps.jumpInfo",path:'[data-vr-id="QNVrr_ldm"]',isReportIdFromJson:!0,event:3,type:2,aliasValue:"表单"},{model:"",path:".fold-wrap",isReportIdFromJson:!1,aliasValue:"折叠展开",isInformal:!0,event:3,type:2}]}}},771306:function(t,e,i){i.d(e,{Z:function(){return n}});function n(t){t.options.__wxs_id="5f547cae"}},156010:function(t,e,i){var n=i(126161);e.Z=n.Z},67162:function(t,e,i){var n=i(978007);e.Z=n.Z},605920:function(t,e,i){var n=i(771306);e.Z=n.Z},124156:function(t,e,i){var n=i(975426);e.Z=n.Z},557434:function(t,e,i){var n=i(371854);e.Z=n.Z},376608:function(t,e,i){i.d(e,{s:function(){return n},x:function(){return a}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fold-wrap-wrapper",attrs:{"data-fcn-fold":"","data-fr-156f5ac04":""}},[t.isShowFold?i("div",{directives:[{name:"active",rawName:"v-active.stop",value:!t.noActive,expression:"!noActive",modifiers:{stop:!0}}],staticClass:"fold-wrap active__item",class:{"fold-wrap-mid":t.middle},attrs:{"data-report-id":t.M_itemReportId(t.actionReportId),"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onTapFold()}}},[i("span",{staticClass:"fold-wrap-content"},[t._v(t._s(t.foldTitle))]),i("ui-image",{staticClass:"ui-button-icon",class:{unFold:!t.isFold},attrs:{url:"https://res.wx.qq.com/t/components/icons/base/arrow_down_regular.svg",size:20,mode:"plain","data-fc-1f08056a6":""}})],1):t._e()])},a=[]},879662:function(t,e,i){i.d(e,{s:function(){return n},x:function(){return a}});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{"data-fcn-grid-table":"","data-fr-1d8aa5bd8":""}},[i("ol",{directives:[{name:"resize",rawName:"v-resize.width",value:t.tableWidth,expression:"tableWidth",modifiers:{width:!0}},{name:"active",rawName:"v-active.stop",value:!!t.source.jumpInfo,expression:"!!source.jumpInfo",modifiers:{stop:!0}}],staticClass:"grid-table active__mask",class:["table-"+t.preset.className],style:t.wrapperStyle,attrs:{"data-report-id":t.M_itemReportId(t.source),"data-vr-id":"QNVrr_ldm","data-cli":""},on:{click:t.onTapTable}},[t.table.header?i("li",{staticClass:"grid-table-header",class:["col-"+t.columns,"header-"+t.preset.className,""+t.preset.className].concat(t.getIsXClass(t.table.header)),style:t.gridLineStyle(),attrs:{"aria-hidden":"true"}},[t.table.header.text&&t.table.header.text.length?t._l(t.table.header.text,function(e,n){return i("div",{key:e+" "+n,staticClass:"header-cell",class:["column-"+n,"header-cell-"+t.preset.className,"cell-"+t.preset.className,t.table.header.fontAeq?"cell-font-Aeq":""],domProps:{innerHTML:t._s(t.xss(e))}})}):t._e(),t.table.header.richText&&t.table.header.richText.length?t._l(t.table.header.richText,function(e,n){return i("div",{key:e.title+" "+n,staticClass:"header-cell",class:["column-"+n,"header-cell-"+t.preset.className,"cell-"+t.preset.className,t.table.header.fontAeq?"cell-font-Aeq":""]},[e.filterPop&&e.filterPop.length?i("pop-over",{ref:"headerPopOver"+n,refInFor:!0,staticClass:"header-cell-popover",attrs:{"class-name":"grid-table-header-pop-over","data-fc-13ca11ec6":""},on:{hide:function(i){return t.onHideHeaderPopover(e)}},nativeOn:{click:function(i){return i.stopPropagation(),t.onClickHeaderPopover(e)},touchstart:function(t){t.stopPropagation()},touchmove:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"trigger",fn:function(){return[i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"header-cell-trigger active__item",attrs:{"data-report-id":t.M_itemReportId(e),"data-cli":""}},[i("span",[t._v(t._s(t.getHeaderDisplayText(e,n)))]),i("ui-arrow",{attrs:{gap:1,size:16,align:"flex",direction:"down","data-fc-13ca11ec4":""}})],1)]},proxy:!0},{key:"content",fn:function(){return[i("ul",{staticClass:"header-filter-list"},t._l(e.filterPop,function(e,a){return i("li",{directives:[{name:"active",rawName:"v-active"}],key:e.key,staticClass:"header-filter-list__item active__item",attrs:{"data-report-id":t.M_itemReportId(e.reportId),"data-cli":""},on:{click:function(i){return t.onClickHeaderFilter(e,n,a)}}},[t._v(t._s(e.title))])}),0)]},proxy:!0}],null,!0)}):i("span",{domProps:{innerHTML:t._s(t.xss(e.title))}})],1)}):t._e()],2):t._e(),t._l(t.getActuralContent(t.maxLine),function(e,n){return i("li",{directives:[{name:"active",rawName:"v-active.stop",value:!!e.jumpInfo,expression:"!!line.jumpInfo",modifiers:{stop:!0}}],key:n,ref:"gridTableLine",refInFor:!0,staticClass:"grid-table-line active__mask",class:["line-"+t.preset.className,""+t.preset.className,t.needFixedFont(),t.noFirstText(e),t.isBold(e),t.getFoldClass(n,t.maxLine),t.getSplitLine(e),"col-"+t.columns].concat(t.getIsXClass(e)),style:t.gridLineStyle(),attrs:{role:t.isObjectCanJump(e)?"button":t.canReadAsLine(e)?"option":"undefined","data-report-id":t.M_itemReportId(e,n+1),"data-cli":""},on:{click:function(i){return t.onTapLine(e,n,i)}}},[e.text?t._l(e.text,function(a,l){return i("div",{key:a+" "+l+" "+n,staticClass:"line-cell",class:["column-"+l,"line-cell-"+t.preset.className,"cell-"+t.preset.className,e.fontAeq?"cell-font-Aeq":"",t.isWrappCell(l)?"column-cell":""],attrs:{role:"option"}},[t.table.header&&t.table.header.text?i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(t.table.header.text[l]+","))]):t.table.header&&t.table.header.richText?i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(t.table.header.richText[l].title+","))]):t._e(),i("span",{ref:"gridTableLineText",refInFor:!0,class:{"wrap-cell":t.isWrappCell(l)},domProps:{innerHTML:t._s(t.xss(t.isWrappCell(l)?t.getGroup(a):a))}}),t.isWrappCell(l)?i("span",{domProps:{innerHTML:t._s(t.xss(t.isWrappCell(l)?t.getSubject(a):a))}}):t._e(),i("span",{staticClass:"ui-aria-hidden"},[t._v(".")])])}):e.richText?t._l(e.richText,function(a,l){return i("div",{key:a.title+" "+l+" "+n,staticClass:"line-cell",class:["column-"+l,"line-cell-"+t.preset.className,"cell-"+t.preset.className,a.gray?"cell-gray":"",a.bold?"cell-bold":"",(e.fontAeq,a.connect?"cell-connect cell-connect-"+n:"")],style:t.cellCustomStyle(a),attrs:{role:t.isObjectCanJump(a)?"button":"option","aria-disabled":a.disabled?"true":"false","data-report-id":t.M_itemReportId(a,n+1+":list|"+(l+1)+":"+t.M_getItemType(a.reportId))},on:{click:function(e){return t.onTapRichText(a,n,l)}}},[a.members&&a.members.length?i("div",{staticClass:"line-cell-members"},t._l(a.members,function(e,a){return i("div",{key:e.title+" "+a+" "+l+" "+n,staticClass:"line-cell-members-item",attrs:{role:"option"}},[e.iconUrl?i("ui-image",{staticClass:"line-cell-member-icon",attrs:{url:e.iconUrl,type:"img",size:24,"data-fc-13ca11ec2":""}}):t._e(),i("span",{staticClass:"line-cell-member-text"},[t._v("\n                  "+t._s(e.title)+"\n                ")])],1)}),0):t._e(),a.minRank?i("span",{staticClass:"line-cell-min-rank"},[t._v(t._s(a.minRank))]):t._e(),a.rank?i("span",{staticClass:"line-cell-rank"},[t._v(t._s(a.rank))]):t._e(),a.iconUrl?i("ui-image",{staticClass:"line-cell-icon",attrs:{url:a.iconUrl,type:"img",size:24,"data-fc-13ca11ec0":""}}):t._e(),t.table.header&&t.table.header.text?i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(t.table.header.text[l]+","))]):t.table.header&&t.table.header.richText?i("span",{staticClass:"ui-aria-hidden"},[t._v(t._s(t.table.header.richText[l].title+","))]):t._e(),a.connect&&0!==n?i("div",{staticClass:"cell-connect-pass"}):t._e(),i("span",{directives:[{name:"active",rawName:"v-active"}],staticClass:"line-cell-text",class:["line-cell-text-"+t.preset.className,"cell-text-"+t.preset.className,a.jumpInfo?"cell-text-can-jump active__link":"",a.disabled?"cell-text-disabled":""],attrs:{"data-cli":""}},[i("span",{staticClass:"line-cell-title",domProps:{innerHTML:t._s(t.xss(t.handleCellTitle(a.title,n)))}}),a.subTitle?i("span",{staticClass:"line-cell-sub-title"},[t._v("\n                "+t._s(a.subTitle)+"\n              ")]):t._e(),a.sup?i("sup",{staticClass:"line-cell-sup"},[t._v(t._s(a.sup))]):t._e(),a.showArrow?i("ui-arrow",{staticClass:"text-jump-arrow",attrs:{size:"small",gap:"",align:"flex","data-fc-13ca11ebe":""}}):t._e()],1),a.desc?i("span",{staticClass:"ui-aria-hidden"},[t._v(",")]):t._e(),t.handleCellDesc(a.desc,n)?i("span",{staticClass:"line-cell-desc",class:["line-cell-desc-"+t.preset.className],domProps:{innerHTML:t._s(t.xss(a.desc))}}):t._e(),i("span",{staticClass:"ui-aria-hidden"},[t._v(".")])],1)}):t._e()],2)}),t.isEmpty?i("li",{staticClass:"grid-table-empty"},[t._v("\n        暂无相关结果\n      ")]):t._e(),i("fold",{attrs:{"cn-props":t.table&&t.table.foldAction,list:t.content,"data-fc-13ca11ebc":""},on:{"fold:status":t.onFoldStatusChange,"isShowFold:change":t.onFoldValueChange,"maxLine:change":t.onMaxLineChange}}),t.table.link&&Object.keys(t.table.link).length&&t.showLink?i("div",{staticClass:"link-line",class:[{"link-line--negetive-bottom":t.isLastDocInGeneralBox},"link-line-"+t.preset.className]},[i("span",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"active__mask",attrs:{"data-report-id":t.M_itemReportId(t.table.link),"data-cli":""},domProps:{innerHTML:t._s(t.xss(t.table.link.title))},on:{click:function(e){return e.stopPropagation(),t.onTapLink(t.table.link)}}})]):t.table.action?i("div",{directives:[{name:"active",rawName:"v-active.stop",modifiers:{stop:!0}}],staticClass:"link-line link-action active__item",class:t.linkActionClass,attrs:{"data-cli":""},on:{click:function(e){return e.stopPropagation(),t.onTapLink(t.table.action)}}},[i("span",{attrs:{"data-report-id":t.M_itemReportId(t.table.action),"data-vr-id":"J9AlSIYdF","data-cli":""},domProps:{innerHTML:t._s(t.xss(t.table.action.title))}})]):t._e()],2)])},a=[]},975426:function(t,e,i){var n=i(798509),a=i(984928);e.Z={name:"Fold",mixins:[n.jB,n.uW],props:{defaultMaxLine:{type:Number,default:4},list:{type:Array,default:function(){return[]}},middle:{type:Boolean,default:!1},noActive:{type:Boolean,default:!1}},data:function(){return{isFold:!!this.cnProps,randomId:n.Zr.getRandom(6)}},computed:{foldIcon:function(){return this.isFold,"https://res.wx.qq.com/t/components/icons/base/arrow_down_regular.svg"},maxLine:function(){var t,e,i,n=(null===(t=this.cnProps)||void 0===t?void 0:t.maxLine)||this.defaultMaxLine;return this.isShowFold?this.isFold?n:null===(i=this.list)||void 0===i?void 0:i.length:null===(e=this.list)||void 0===e?void 0:e.length},isShowFold:function(){if(!this.cnProps)return!1;var t,e,i=(null===(t=this.cnProps)||void 0===t?void 0:t.maxLine)||this.defaultMaxLine;return!((null===(e=this.list)||void 0===e?void 0:e.length)<=i)&&!0},actionReportId:function(){var t=this.isFold?"unfold":"fold";return"".concat(encodeURIComponent(this.foldTitle),":").concat(t,":").concat(this.randomId)},foldTitle:function(){var t,e;return this.isFold?(null===(e=this.cnProps)||void 0===e?void 0:e.foldTitle)||"展开全部":(null===(t=this.cnProps)||void 0===t?void 0:t.unfoldTitle)||"收起"}},watch:{isShowFold:{handler:function(t){this.$emit("isShowFold:change",t)},immediate:!0},maxLine:{handler:function(t){this.$emit("maxLine:change",t)},immediate:!0}},mounted:function(){this.randomId=n.Zr.getRandom(6)},methods:{onTapFold:function(){this.M_clickReport({clickContent:this.foldTitle,reportId:this.actionReportId,actionType:this.isFold?a.At.CLICK_UNFOLD:a.At.CLICK_FOLD}),this.isFold=!this.isFold,this.$emit("fold:status",this.isFold)}}}},371854:function(t,e,i){var n=i(798509),a=i(984928),l=i(521190),o=i(30335),r=i(372973),s=i(703790);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=Array(e);i<e;i++)n[i]=t[i];return n}function u(t,e,i,n,a,l,o){try{var r=t[l](o),s=r.value}catch(t){i(t);return}r.done?e(s):Promise.resolve(s).then(n,a)}function d(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var l=t.apply(e,i);function o(t){u(l,n,a,o,r,"next",t)}function r(t){u(l,n,a,o,r,"throw",t)}o(void 0)})}}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){h(t,e,i[e])})}return t}function f(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i.push.apply(i,n)}return i})(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}),t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i,n,a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var l=[],o=!0,r=!1;try{for(a=a.call(t);!(o=(i=a.next()).done)&&(l.push(i.value),!e||l.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{!o&&null!=a.return&&a.return()}finally{if(r)throw n}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){var i,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(i)throw TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=e.call(t,o)}catch(t){l=[6,t],n=0}finally{i=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}}e.Z={name:"GridTable",components:{Fold:o.Z,PopOver:s.Z},mixins:[n.jB,n.uW],props:{source:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}},cnProps:{type:Object,default:function(){return{}}},pos:{type:Number,default:0},typePos:{type:Number,default:0},isPop:{type:Boolean,default:!1}},data:function(){return{showLink:!0,showCount:0,tableWidth:0,maxTextWidth:0,isHeaderwrap:!1,scaleFactor:1,needWrapColumn:!1,isShowFold:!1,maxLine:void 0,selectedHeaderFilters:{},filteredTable:null,prefetchedActionData:null,isPrefetching:!1}},computed:{table:function(){return this.filteredTable||this.source.table},preset:function(){var t="preset-".concat(this.table.type);return[2,1].includes(this.table.type)&&this.maxTextWidth>=this.tableWidth/2&&(t="preset-".concat(this.table.type,"-overhalf")),{className:t}},content:function(){return this.table.content&&this.table.content.slice(0,this.showCount)},columns:function(){var t,e,i,n,a,l,o,r,s,c,u,d,h,p;return(null===(i=this.table)||void 0===i?void 0:null===(e=i.header)||void 0===e?void 0:null===(t=e.text)||void 0===t?void 0:t.length)||(null===(l=this.table)||void 0===l?void 0:null===(a=l.header)||void 0===a?void 0:null===(n=a.richText)||void 0===n?void 0:n.length)||(null===(c=this.table)||void 0===c?void 0:null===(s=c.content)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:null===(o=r.text)||void 0===o?void 0:o.length)||(null===(p=this.table)||void 0===p?void 0:null===(h=p.content)||void 0===h?void 0:null===(d=h[0])||void 0===d?void 0:null===(u=d.richText)||void 0===u?void 0:u.length)||0},isLastDocInGeneralBox:function(){return 52===this.data.type&&this.pos===this.data.items.length},isEmpty:function(){var t;return!(null===(t=this.getActuralContent(this.maxLine))||void 0===t?void 0:t.length)},wrapperStyle:function(){return(console.error("wrapperStyle",this.table.type),[25,29,30,31].includes(this.table.type))?(console.error("进来咯"),p({},n.Zr.getResetFontSizeStyle(),this.data.vueBackCardStyle&&{marginBottom:0})):{}},linkActionClass:function(){var t,e;return h(e={},"link-line-".concat(this.preset.className),!0),h(e,"link-action--without-line",null===(t=this.table.action)||void 0===t?void 0:t.noTopLine),e}},watch:{source:{handler:function(){this.filteredTable=null,this.selectedHeaderFilters={},this.prefetchedActionData=null,this.prefetchActionData()}},table:{handler:function(t){var e=this,i=t&&t.link||{showCount:0};i.showCount?this.showCount=i.showCount:this.showCount=this.table.content?this.table.content.length:0,this.showLink=!0,this.$nextTick(function(){e.adjustColumnWidth(),e.adjustFirColumnWidth(),[11].includes(e.table.type)&&(e.refWidth2=e.adjustOneColumnWidth(2),e.refWidth1=e.adjustOneColumnWidth(1))})},immediate:!0},showCount:{handler:function(t,e){var i=this;[2,1].includes(this.table.type)&&this.$nextTick(function(){for(var t=0,n=i.$el.querySelectorAll(".column-0"),a=0;a<=i.showCount;a++){var l=n[a].innerText;t=Math.max(t,(0,r.I)().getTextWidth({text:l,fontSize:"".concat(17*i.scaleFactor,"px")}))}if(i.maxTextWidth=t,e&&(1===i.table.type&&2*i.maxTextWidth>i.tableWidth?(i.needWrapColumn=i.tableWidth<=i.maxTextWidth2+i.maxTextWidth+20,i.needWrapColumn?(i.adjustOneColumnWidth(1),i.adjustOneColumnWidthByRect(0)):(i.adjustOneColumnWidth(0),i.adjustOneColumnWidth(1))):1===i.table.type&&i.adjustOneColumnWidth(1),2===i.table.type&&(2*i.maxTextWidth>i.tableWidth?(i.recoverOneColumnWidth(1),i.recoverOneColumnWidth(2)):(i.adjustOneColumnWidth(1),i.adjustOneColumnWidth(2)))),2===i.table.type){var o=i.$el.querySelectorAll(".header-cell")&&i.$el.querySelectorAll(".header-cell")[1],s=o.innerText,c=o.clientWidth,u=(0,r.I)().getTextWidth({text:s,fontSize:"".concat(17*i.scaleFactor,"px")});i.isHeaderwrap=u>c}})},immediate:!0},tableWidth:{handler:function(t){var e=this;[2,1].includes(this.table.type)&&(this.maxTextWidth<this.tableWidth/2?2===this.table.type?(this.adjustOneColumnWidth(1),this.adjustOneColumnWidth(2)):1===this.table.type&&this.adjustOneColumnWidth(1):2===this.table.type?(this.recoverOneColumnWidth(1),this.recoverOneColumnWidth(2)):1===this.table.type&&(this.needWrapColumn?(this.adjustOneColumnWidth(1),this.adjustOneColumnWidthByRect(0)):(this.adjustOneColumnWidth(0),this.adjustOneColumnWidth(1)))),1===this.table.type&&this.$nextTick(function(){for(var t=0,i=e.$el.querySelectorAll(".column-1"),n=0;n<e.showCount;n++){var a=i[n].innerText;t=Math.max(t,(0,r.I)().getTextWidth({text:a,fontSize:"".concat(17*e.scaleFactor,"px")})),e.maxTextWidth2=t}e.needWrapColumn=e.tableWidth<=t+e.maxTextWidth+20}),11===this.table.type&&this.$nextTick(function(){var t,i=e.$el&&e.$el.querySelectorAll(".".concat("column-0")),n=0;(null==i?void 0:i.length)&&i.forEach(function(i){var a=(i.childNodes[1]||i).innerText;(t=(0,r.I)().getTextWidth({text:a,fontSize:"".concat(17*e.scaleFactor,"px")}))>=n&&(n=t)});var a=n,l=e.refWidth1,o=e.refWidth2,s=e.$el.querySelectorAll(".cell-preset-11:last-child");e.tableWidth&&a+l+o+16+48>e.tableWidth?(e.needShortenMargin=!0,s.forEach(function(t){t.style.marginLeft=0})):(e.needShortenMargin=!1,s.forEach(function(t){t.style.marginLeft=32}))}),[15,18].includes(this.table.type)&&this.$nextTick(function(){e.adjustColumnWidth()})},immediate:!0}},mounted:function(){var t=this;this.resetFontSize(),this.isPop&&setTimeout(function(){t.anchorLineAction()},0),this.prefetchActionData()},methods:{onClickHeaderPopover:function(t){this.M_clickReport({actionType:a.At.CLICK_SHOW_DIALOG},t)},onHideHeaderPopover:function(t){this.M_clickReport({actionType:a.At.CLICK_CLOSE_DIALOG},t)},onClickHeaderFilter:function(t,e,i){this.$set(this.selectedHeaderFilters,e,t);var n=this.$refs["headerPopOver".concat(e)];n&&n[0]&&n[0].hide(),this.M_clickReport({actionType:a.At.CONFIRM_CHANGE_CODE},t);var l=this.getFinalCgiParams(null==t?void 0:t.cgi);this.handleActionCgi({data:l})},getHeaderDisplayText:function(t,e){var i=this.selectedHeaderFilters[e];return i?i.title:t.title},anchorLineAction:function(){var t=this,e=this.getActuralContent(this.maxLine),i=this,n=!1;e.forEach(function(e,a){if(e.anchor&&!n){n=!0;var l=i.$refs.gridTableLine[a];if(l.firstChild){var o=document.querySelector(".ui-content-wrapper-scroll");t.forceShowAnchor(o,l.firstChild)}}})},forceShowAnchor:function(t,e){e&&t&&(t.scrollTop=e.offsetTop)},getActuralContent:function(t){var e;return(null===(e=this.content)||void 0===e?void 0:e.length)?this.content.slice(0,t):[]},onFoldValueChange:function(t){this.isShowFold=t},onMaxLineChange:function(t){this.maxLine=t},onFoldStatusChange:function(t){var e=this;!t&&this.$nextTick(function(){e.adjustColumnWidth(),e.adjustFirColumnWidth()})},cellCustomStyle:function(t){var e={};return t.color&&(e=f(p({},e),{color:t.color})),t.bold&&(e=f(p({},e),{"font-weight":"bold"})),e},adjustColumnWidth:function(){var t;if([15,18,25].includes(this.table.type)){for(var e={},i=0;i<this.columns;i++)t=this,function(i){if(null===(n=e[t.table.type])||void 0===n?void 0:n.includes(i))return;var n,a=t.$el.querySelectorAll(".column-".concat(i)),l=0;if(25===t.table.type&&0===i)return;a.forEach(function(t){t.style.width="auto";var e=Math.ceil(t.getBoundingClientRect().width);e>l&&(l=e)}),a.forEach(function(t){t.style.width="".concat(l+1,"px")})}(i)}},adjustFirColumnWidth:function(){var t=this;[22,23,1,15,18].includes(this.table.type)&&["column-0"].forEach(function(e){var i=t.$el&&t.$el.querySelectorAll(".".concat(e));if(null==i?void 0:i.length){i.forEach(function(t){t.style.width="auto"});var n=0;i.forEach(function(t){var e=Math.ceil(t.getBoundingClientRect().width);e>=n&&(n=e)}),i.forEach(function(t){t.style.width="".concat(n+1,"px")})}})},adjustOneColumnWidth:function(t){var e=this;if([11,2,1].includes(this.table.type)){var i=this.$el&&this.$el.querySelectorAll(".".concat("column-".concat(t)));if(null==i?void 0:i.length){i.forEach(function(t){t.style.width="auto"});var n,a=0;return i.forEach(function(t){if([2,1].includes(e.table.type)){var i=(t.childNodes[1]||t).innerText;n=(0,r.I)().getTextWidth({text:i,fontSize:"".concat(17*e.scaleFactor,"px")})}else n=Math.ceil(t.getBoundingClientRect().width);n>=a&&(a=n)}),i.forEach(function(t){t.style.width="".concat(a+1,"px")}),a}}},adjustOneColumnWidthByRect:function(t){var e=this;[11,2,1].includes(this.table.type)&&["column-".concat(t)].forEach(function(t){var i=e.$el&&e.$el.querySelectorAll(".".concat(t));if(null==i?void 0:i.length){i.forEach(function(t){t.style.width="auto"});var n,a=0;return i.forEach(function(t){(n=Math.ceil(t.getBoundingClientRect().width))>=a&&(a=n)}),i.forEach(function(t){t.style.width="".concat(a-2,"px")}),a}})},recoverOneColumnWidth:function(t){var e=this;if([2,1].includes(this.table.type)){var i=(0,r.I)().getTextWidth({text:"首选",fontSize:"".concat(15*this.scaleFactor,"px")});["column-".concat(t)].forEach(function(t){var n=e.$el&&e.$el.querySelectorAll(".".concat(t));(null==n?void 0:n.length)&&n.forEach(function(t){t.style.width=2===e.table.type&&e.isHeaderwrap?"".concat(i-2,"px"):""})})}},resetFontSize:function(){var t=document.createElement("div");t.style="font-size:10px;",document.body.appendChild(t);var e=parseInt(window.getComputedStyle(t,null).getPropertyValue("font-size"));document.body.removeChild(t),this.scaleFactor=e/10},getSubject:function(t){var e=m(t.split("/"),2),i=e[0],n=e[1];return i&&n?n:""},getGroup:function(t){var e=m(t.split("/"),2),i=e[0],n=e[1];return i&&n?"".concat(i,"/"):t},isWrappCell:function(t){return 12==this.table.type&&1==t},isObjectCanJump:l.Z,isBold:function(t){if(t.bold)return"bold"},getSplitLine:function(t){if(t.split)return"split"},getFoldClass:function(t,e){return t===e-1&&this.isShowFold?"table-has-fold":""},getIsXClass:function(t){var e=this;return Object.keys(t).filter(function(e){return/^is[A-Z]/.test(e)&&!!t[e]}).map(function(t){return t.replace(/[A-Z]/g,function(t){return"-".concat(t.toLowerCase())}).split("-").slice(1).join("-")}).map(function(i){var n="".concat(e.preset.className,"-").concat(i);return[11].includes(e.table.type)&&t.isCurrent&&(n+="-gaokao-score"),n})},canReadAsLine:function(t){return!t.richText||0===t.richText.filter(function(t){return t.jumpInfo}).length},onTapRichText:function(t,e,i){if(t.jumpInfo||t.jumpInfos||t.pop||t.phoneNumbers){var n="".concat(this.M_getClickZonePath(),".content[").concat(e,"].richText[").concat(i,"]");this.M_serviceSearchGo(t,n),this.M_storeClickInfo(),this.M_clickReport({clickZone:n,clickContent:t.title||"",expand:this.M_getJumpSubScene(t)},t)}},onTapLine:function(t,e,i){if((0,l.Z)(t)){i.stopPropagation();var n="".concat(this.M_getClickZonePath(),".content[").concat(e,"]");this.M_serviceSearchGo(t,n),this.M_storeClickInfo(),this.M_clickReport({clickZone:n,clickContent:t.richText&&t.richText.map(function(t){return t.title}).join("_").replace(",","")||"",expand:this.M_getJumpSubScene(t)},t)}},needFixedFont:function(){return""},gridLineStyle:function(){if([15,18].includes(this.table.type))return{"grid-template-columns":"minmax(0,auto) repeat(".concat(this.columns-1,", 1fr)")};if(22===this.table.type||23===this.table.type)return{"grid-template-columns":"fit-content(150px) repeat(".concat(this.columns-1,", 1fr)")};if(25===this.table.type){var t={"grid-template-columns":"auto repeat(".concat(this.columns-1,", fit-content(150px))")};return this.table.isPingpong?f(p({},t),{"grid-column-gap":"12px"}):t}if([2,1,11].includes(this.table.type)){var e={"margin-top":"".concat(12,"px")};return[1].includes(this.table.type)&&this.needWrapColumn&&(e=f(p({},e),{"grid-template-columns":"auto auto"})),e}},noFirstText:function(t){var e=m(t.text||[],1)[0];return e&&e.trim()?"":"no-first-text"},handleActionCgi:function(t){var e=t.data,i=t.type;return d(function(){var t,l,o,r,s,c,u;return v(this,function(d){switch(d.label){case 0:return[4,n.hi.getCommonCgiData({cgiName:e.name,data:p({cgiName:e.cgi},e.params)})];case 1:return(null==(t=d.sent())?void 0:t.data)&&(u=null!==(c=null==t?void 0:null===(s=t.data)||void 0===s?void 0:null===(r=s.items)||void 0===r?void 0:null===(o=r[0])||void 0===o?void 0:null===(l=o.itemInfo)||void 0===l?void 0:l.table)&&void 0!==c?c:{},"dialog"===i?(this.M_clickReport({clickContent:(null==u?void 0:u.action.title)||"",actionType:a.At.CLICK_SHOW_DIALOG},null==u?void 0:u.action),this.M_serviceSearchGo(null==u?void 0:u.action)):this.filteredTable=u),[2]}})}).apply(this)},getFinalCgiParams:function(){var t,e,i,n,a,l,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(null!==(a=this.baseCtx)&&void 0!==a?a:{}).item,s=null!==(l=null==r?void 0:r.itemInfo)&&void 0!==l?l:null==r?void 0:null===(t=r.subItems)||void 0===t?void 0:t[0],c=null==s?void 0:s.cgiDefault,u=this.source.table.cgi,d={name:null==c?void 0:c.name,params:f(p({},null==c?void 0:c.params,null==u?void 0:u.params,null==o?void 0:o.params),{data:p({},null==u?void 0:null===(e=u.params)||void 0===e?void 0:e.data,null==o?void 0:null===(i=o.params)||void 0===i?void 0:i.data)})};return(null===(n=d.params)||void 0===n?void 0:n.data)&&(d.params.data=JSON.stringify(d.params.data)),d},prefetchActionData:function(){return d(function(){var t,e,i,a,l,o,r,s,c,u,d,h;return v(this,function(h){switch(h.label){case 0:if(!(null==(i=null===(t=this.source.table)||void 0===t?void 0:t.action)?void 0:i.cgi)&&!(null===(e=this.source.table)||void 0===e?void 0:e.cgi)||this.isPrefetching)return[2];this.isPrefetching=!0,h.label=1;case 1:return h.trys.push([1,3,4,5]),a=this.getFinalCgiParams(null==i?void 0:i.cgi),[4,n.hi.getCommonCgiData({cgiName:a.name,data:p({cgiName:a.cgi},a.params)})];case 2:return(null==(l=h.sent())?void 0:l.data)&&(d=null!==(u=null==l?void 0:null===(c=l.data)||void 0===c?void 0:null===(s=c.items)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:null===(o=r.itemInfo)||void 0===o?void 0:o.table)&&void 0!==u?u:{},this.prefetchedActionData=null==d?void 0:d.action),[3,5];case 3:return h.sent(),[3,5];case 4:return this.isPrefetching=!1,[7];case 5:return[2]}})}).apply(this)},onTapLink:function(t){if(t.cgi||this.table.cgi){if(this.prefetchedActionData){this.M_clickReport({clickContent:this.prefetchedActionData.title||"",actionType:a.At.CLICK_SHOW_DIALOG},this.prefetchedActionData),this.M_serviceSearchGo(this.prefetchedActionData);return}var e=this.getFinalCgiParams(null==t?void 0:t.cgi);this.handleActionCgi({data:e,type:"dialog"});return}this.M_clickReport({clickContent:t.title||""},t),t.showCount?(this.showCount=this.table.content.length,this.showLink=!1,t.actionType=a.At.CLICK_UNFOLD,n.Gc.$emit(n.U3.resultExposeAnalysis)):this.M_serviceSearchGo(t)},handleCellDesc:function(t,e){var i=this;return t&&this.$nextTick(function(){i.$refs.gridTableLine[e]&&i.$refs.gridTableLine[e+1]&&(i.$refs.gridTableLine[e].style.marginBottom="12px",i.$refs.gridTableLine[e+1].style.marginTop="12px")}),t},handleCellTitle:function(t,e,i){var n=this;return[14].includes(this.table.type)&&!t.trim()&&this.$nextTick(function(){n.$refs.gridTableLine[e]&&(n.$refs.gridTableLine[e].style.marginTop="12px")}),t},onTapTable:function(t){this.source.jumpInfo&&(t.stopPropagation(),this.M_serviceSearchGo(this.source),this.M_clickReport({clickContent:"panel"},this.source))}}}}}]);